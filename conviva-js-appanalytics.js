/*!
 * Browser tracker for Snowplow v0.3.25 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(z,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(z="undefined"!==typeof globalThis?globalThis:z||self,X(z.snowplowBrowserTracking={}))})(this,function(z){function X(a,b,d){if(d||2===arguments.length)for(var e=0,h=b.length,g;e<h;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return a.concat(g||Array.prototype.slice.call(b))}function Zc(a){var b=0,d=0;var e="";var h=[];if(!a)return a;
a+="";do{var g=ma.indexOf(a.charAt(b++));var k=ma.indexOf(a.charAt(b++));e=ma.indexOf(a.charAt(b++));var p=ma.indexOf(a.charAt(b++));var u=g<<18|k<<12|e<<6|p;g=u>>16&255;k=u>>8&255;u&=255;64===e?h[d++]=String.fromCharCode(g):64===p?h[d++]=String.fromCharCode(g,k):h[d++]=String.fromCharCode(g,k,u)}while(b<a.length);e=h.join("");return function(q){return decodeURIComponent(q.split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Xa(){var a=
{},b=[],d=[],e=[],h,g=function(k,p){null!=p&&""!==p&&(a[k]=p)};return{add:g,addDict:function(k){for(var p in k)Object.prototype.hasOwnProperty.call(k,p)&&g(p,k[p])},addJson:function(k,p,u){u&&oc(u)&&(k={keyIfEncoded:k,keyIfNotEncoded:p,json:u},d.push(k),b.push(k))},addContextEntity:function(k){e.push(k)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(k){h=k},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function $c(a){return function(b,
d,e){for(var h=function(q,t,y){q=JSON.stringify(q);if(a){y=b.add;if(q){var x=0,l=0,n=[];if(q){q=unescape(encodeURIComponent(q));do{var F=q.charCodeAt(x++);var T=q.charCodeAt(x++);var O=q.charCodeAt(x++);var E=F<<16|T<<8|O;F=E>>18&63;T=E>>12&63;O=E>>6&63;E&=63;n[l++]=ma.charAt(F)+ma.charAt(T)+ma.charAt(O)+ma.charAt(E)}while(x<q.length);x=n.join("");q=q.length%3;q=(q?x.slice(0,q-3):x)+"===".slice(q||3)}q=q.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}y.call(b,t,q)}else b.add(y,q)},g=function(q,
t){if(!q){var y=b.getPayload();if(a?y.cx:y.co){q=JSON;var x=q.parse;if(a){if(y=y.cx){switch(4-y.length%4){case 2:y+="==";break;case 3:y+="="}y=y.replace(/-/g,"+").replace(/_/g,"/");y=Zc(y)}}else y=y.co;q=x.call(q,y)}else q=void 0}q?q.data=q.data.concat(t.data):q=t;return q},k=void 0,p=0;p<d.length;p++){var u=d[p];"cx"===u.keyIfEncoded?k=g(k,u.json):h(u.json,u.keyIfEncoded,u.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},k=g(k,d),e.length=0);k&&h(k,"cx","co")}}function oc(a){if(!pc(a))return!1;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function pc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function ad(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var k=d[g];qc(k)?e.push(k):Ba(k)&&h.push(k)}a=
a.concat(h);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){qc(g)?b=b.filter(function(k){return JSON.stringify(k)!==JSON.stringify(g)}):Ba(g)&&(a=a.filter(function(k){return JSON.stringify(k)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==typeof g)){e=
g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var k=ob(a,d,g,e);h.push.apply(h,k);d=bd(b,d,g,e);h.push.apply(h,d);return h}}}function cd(a){return{addPluginContexts:function(b){var d=b?X([],b,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){Z.error("Error adding plugin contexts",h)}});return d}}}function dd(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])b=!0;else if(b)return!1;
return!0}return 2==a.length?!0:!1}function rc(a){return(a=a.split("."))&&1<a.length?dd(a):!1}function sc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&rc(a[1]))return a.slice(1,6)}function pb(a){if(a=sc(a)){var b=a[0];return 5===a.length&&rc(b)}return!1}function ed(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function tc(a){return ed(a)?a.every(function(b){return pb(b)}):
"string"===typeof a?pb(a):!1}function Ka(a){return oc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function fd(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(tc(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(tc(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Ya(a){return"function"===typeof a&&1>=a.length}function Ba(a){return Ya(a)||Ka(a)}
function uc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Ya(a[0])&&a[1].every(Ba):Ya(a[0])&&Ba(a[1]):!1}function vc(a){return Array.isArray(a)&&2===a.length?fd(a[0])?Array.isArray(a[1])?a[1].every(Ba):Ba(a[1]):!1:!1}function qc(a){return uc(a)||vc(a)}function gd(a,b){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return Za(g,b)})&&e++:"string"===typeof h&&Za(h,b)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return Za(g,b)})&&d++:"string"===typeof h&&
Za(h,b)&&d++;return 0<e&&0===d?!0:!1}function Za(a,b){if(!pb(a))return!1;a=sc(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!hd(a[0],b[0]))return!1;for(var d=1;5>d;d++)if(!wc(a[d],b[d]))return!1;return!0}return!1}function hd(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!wc(b[d],a[d]))return!1;return!0}return!1}function wc(a,
b){return a&&b&&"*"===a||a===b}function xc(a){return Array.isArray(a)?a:[a]}function ob(a,b,d,e){var h;a=xc(a).map(function(g){a:if(Ka(g))g=[g];else{if(Ya(g)){b:{var k=void 0;try{var p={event:b.getPayload(),eventType:d,eventSchema:e};k=g(p);if(Array.isArray(k)&&k.every(Ka)||Ka(k)){var u=k;break b}u=void 0;break b}catch(q){}u=void 0}if(Ka(u)){g=[u];break a}else if(Array.isArray(u)){g=u;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&
g.filter(Boolean)}))}function bd(a,b,d,e){var h;a=xc(a).map(function(g){a:{if(uc(g)){var k=g[0],p=!1;try{var u={event:b.getPayload(),eventType:d,eventSchema:e};p=k(u)}catch(q){p=!1}if(!0===p){g=ob(g[1],b,d,e);break a}}else if(vc(g)&&gd(g[0],e)){g=ob(g[1],b,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function id(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function jd(a){void 0===a&&(a={});var b=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];b=function(g,k,p){function u(l,n){l=t.getApplicableContexts(l);var F=[];n&&n.length&&F.push.apply(F,n);l&&l.length&&F.push.apply(F,l);return F}var q=cd(k),t=ad(),y=g,x={};return{track:function(l,n,F){l.withJsonProcessor($c(y));l.add("eid",na.v4());l.addDict(x);F=id(F);l.add(F.type,F.value.toString());n=u(l,q.addPluginContexts(n));
n=n&&n.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:n}:void 0;void 0!==n&&l.addJson("cx","co",n);k.forEach(function(O){try{O.beforeTrack&&O.beforeTrack(l)}catch(E){Z.error("Plugin beforeTrack",E)}});"function"===typeof p&&p(l);var T=l.build();k.forEach(function(O){try{O.afterTrack&&O.afterTrack(T)}catch(E){Z.error("Plugin afterTrack",E)}});return T},addPayloadPair:function(l,n){x[l]=n},configuration:a,getConfig:function(){return a},setConfig:function(l){l&&("undefined"!==
typeof l.base64&&(y=a.base64=l.base64),"undefined"!==typeof l.linkClickTracking&&(a.linkClickTracking=l.linkClickTracking),"undefined"!==typeof l.cacheRefreshInterval&&(a.cacheRefreshInterval=l.cacheRefreshInterval),"undefined"!==typeof l.buttonClickTracking&&(a.buttonClickTracking=l.buttonClickTracking),"undefined"!==typeof l.customEvent&&(a.customEvent=l.customEvent),"undefined"!==typeof l.exceptionAutotracking&&(a.exceptionAutotracking=l.exceptionAutotracking),"undefined"!==typeof l.enablePeriodicHeartbeat&&
(a.enablePeriodicHeartbeat=l.enablePeriodicHeartbeat),"undefined"!==typeof l.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=l.periodicHeartbeatInterval),"undefined"!==typeof l.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=l.customEventTrackingConfiguration),"undefined"!==typeof l.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=l.convivaVideoEventTrackingConfiguration),"undefined"!==typeof l.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=
l.ajaxTrackingConfiguration))},getBase64Encoding:function(){return y},setBase64Encoding:function(l){y=l},addPayloadDict:function(l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(x[n]=l[n])},resetPayloadPairs:function(l){x=pc(l)?l:{}},setTrackerVersion:function(l){x.tv=l},setTrackerNamespace:function(l){x.tna=l},setAppId:function(l){x.aid=l},setPlatform:function(l){x.p=l},setUserId:function(l){x.uid=l},setScreenResolution:function(l,n){x.res=l+"x"+n},setViewport:function(l,n){x.vp=l+"x"+
n},setColorDepth:function(l){x.cd=l},setTimezone:function(l){x.tz=l},setLang:function(l){x.lang=l},setIpAddress:function(l){x.ip=l},setUseragent:function(l){x.ua=l},addGlobalContexts:function(l){t.addGlobalContexts(l)},clearGlobalContexts:function(){t.clearGlobalContexts()},removeGlobalContexts:function(l){t.removeGlobalContexts(l)}}}(null!==b&&void 0!==b?b:!0,e,a.callback);var h=ba(ba({},b),{addPlugin:function(g){var k,p;g=g.plugin;e.push(g);null===(k=g.logger)||void 0===k?void 0:k.call(g,Z);null===
(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)}});null===e||void 0===e?void 0:e.forEach(function(g){var k,p;null===(k=g.logger)||void 0===k?void 0:k.call(g,Z);null===(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)});return h}function $a(a){var b=a.event;a=b.schema;var d=b.data;b=Xa();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:d}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function kd(a){var b=a.pageUrl,d=a.pageTitle;
a=a.referrer;var e=Xa();e.add("e","pv");e.add("url",b);e.add("page",d);e.add("refr",a);return e}function qb(a){return $a({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:rb({name:a.name,data:a.data})}})}function sb(a){return $a({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:rb({name:a.name,sid:a.sid,iid:a.iid,clid:a.clid,st:a.st,cen:a.cen,ced:a.ced})}})}function rb(a,b){void 0===b&&(b={});var d={},e;for(e in a)if(b[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=
a[e];return d}function yc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function zc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function tb(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function Ac(a){var b=a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function ub(a){var b=
window,d=La("referrer",b.location.href)||La("referer",b.location.href);if(d)return d;if(a)return a;try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function oa(a,b,d,e){if(a.addEventListener)return a.addEventListener(b,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,d);a["on"+b]=d}function La(a,b){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function ab(a,
b,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,b);return!0}catch(g){return!1}}function Bc(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(d){return!1}}function ld(a,b){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),h="_test_value_"+(new Date).getTime(),g=d.split("."),k=g.length-1;0<=k;){var p=g.slice(k,g.length).join(".");ca(e,h,0,
"/",p,a,b);if(ca(e)===h){ca(e,"",-1,"/",p,a,b);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)ca(d[e],"",-1,"/",p,a,b);return p}--k}return d}function ca(a,b,d,e,h,g,k){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(d?"; Expires="+(new Date(+new Date+1E3*d)).toUTCString():"")+(e?"; Path="+e:"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(k?"; Secure":""):
decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function md(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr","modernizr");b.removeItem("modernizr");return!0}catch(d){return!1}}function nd(a,b,d,e,h,g,k,p,u,q,t,y,x,l,n,F){function T(r){var B=Object.keys(r).map(function(A){return[A,r[A]]}).reduce(function(A,w){A[w[0]]=w[1].toString();return A},{});return{evt:B,bytes:O(JSON.stringify(B))}}function O(r){for(var B=
0,A=0;A<r.length;A++){var w=r.charCodeAt(A);127>=w?B+=1:2047>=w?B+=2:55296<=w&&57343>=w?(B+=4,A++):B=65535>w?B+3:B+4}return B}function E(r){for(void 0===r&&(r=!1);D.length&&"string"!==typeof D[0]&&"object"!==typeof D[0];)D.shift();if(1>D.length)U=!1;else{if(!aa||"string"!==typeof aa.valueOf())throw"No collector configured";U=!0;if(ua){var B=function(P){for(var da=0,Ma=0;da<P.length&&!(Ma+=P[da].bytes,Ma>=k);)da+=1;return da},A=void 0;if(Ca(D)){A=aa;var w=J(A,!0,r);var K=B(D)}else A=ia(D[0]),w=J(A,
!1,r),K=1;var S=setTimeout(function(){w.abort();U=!1},t),fa=function(P){for(var da=0;da<P;da++)D.shift();d&&ab(ea,JSON.stringify(D.slice(0,q)))};w.onreadystatechange=function(){if(4===w.readyState&&200<=w.status)if(clearTimeout(S),300>w.status)fa(K),E();else{var P=w.status;P=200<=P&&300>P?!1:n.includes(P)?!0:!F.includes(P);P||(Z.error("Status ".concat(w.status,", will not retry.")),fa(K));U=!1}};if(Ca(D)){if(B=D.slice(0,K),0<B.length){r=!1;B=B.map(function(P){return P.evt});if(bb){var vb=new Blob([V(va(B))],
{type:"application/json"});try{r=navigator.sendBeacon(A,vb)}catch(P){r=!1}}!0===r?(fa(K),E()):w.send(V(va(B)))}}else w.send()}else if(y||Ca(D))U=!1;else{A=new Image(1,1);var pa=!0;A.onload=function(){pa&&(pa=!1,D.shift(),d&&ab(ea,JSON.stringify(D.slice(0,q))),E())};A.onerror=function(){pa&&(U=pa=!1)};A.src=ia(D[0]);setTimeout(function(){pa&&U&&(pa=!1,E())},t)}}}function J(r,B,A){var w=new XMLHttpRequest;B?(w.open("POST",r,!A),w.setRequestHeader("Content-Type","application/json; charset=UTF-8")):w.open("GET",
r,!A);w.withCredentials=l;y&&w.setRequestHeader("SP-Anonymous","*");for(var K in x)Object.prototype.hasOwnProperty.call(x,K)&&w.setRequestHeader(K,x[K]);return w}function V(r){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:r})}function va(r){for(var B=(new Date).getTime().toString(),A=0;A<r.length;A++)r[A].stm=B;return r}function ia(r){return u?aa+r.replace("?","?stm="+(new Date).getTime()+"&"):aa+r}function wb(r){function B(w,K,S){return(S=
S.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&S.length?parseInt(S[0])<=w||parseInt(S[0])===w&&parseInt(S[1])<=K:!1}function A(w){return w.match("Version/.* Safari/")&&!w.match("Chrom(e|ium)")}return function(w,K){return(K=K.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&K.length?parseInt(K[0])<=w:!1}(13,r)||B(10,15,r)&&A(r)}var U=!1,aa,D=[];e="string"===typeof e?e.toLowerCase():e;var qa=!0===e||"beacon"===e||"true"===e,bb=!(!(qa&&window.navigator&&window.navigator.sendBeacon)||
wb(window.navigator.userAgent))&&qa,ua=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),wa="get"!==e&&ua&&("post"===e||qa),Na=wa?h:"/i",ea="snowplowOutQueue_".concat(a,"_").concat(wa?"post2":"get");qa&&(x={});g=d&&md()&&wa&&g||1;if(d)try{var Oa=window.localStorage.getItem(ea);D=Oa?JSON.parse(Oa):[]}catch(r){}Array.isArray(D)||(D=[]);b.outQueues.push(D);ua&&1<g&&b.bufferFlushers.push(function(r){U||E(r)});var Ca=function(r){return"object"===typeof r[0]};return{enqueueRequest:function(r,
B){aa=B+Na;if(wa){r=T(r);if(r.bytes>=k){Z.warn("Event ("+r.bytes+"B) too big, max is "+k);B=r;J(aa,!0,!1).send(V(va([B.evt])));return}D.push(r)}else{var A="?";var w={co:!0,cx:!0},K=!0,S;for(S in r)r.hasOwnProperty(S)&&!w.hasOwnProperty(S)&&(K?K=!1:A+="&",A+=encodeURIComponent(S)+"="+encodeURIComponent(r[S]));for(var fa in w)r.hasOwnProperty(fa)&&w.hasOwnProperty(fa)&&(A+="&"+fa+"="+encodeURIComponent(r[fa]));if(0<p&&(w=ia(A),w=O(w),w>=p)){Z.warn("Event ("+w+"B) too big, max is "+p);ua&&(r=T(r),J(B+
h,!0,!1).send(V(va([r.evt]))));return}D.push(A)}B=!1;d&&(B=ab(ea,JSON.stringify(D.slice(0,q))));U||B&&!(D.length>=g)||E()},executeQueue:function(){U||E()},setUseLocalStorage:function(r){d=r},setAnonymousTracking:function(r){y=r},setCollectorUrl:function(r){aa=r+Na},setBufferSize:function(r){g=r},setCustomHeaders:function(r){x=r}}}function Cc(a,b,d){if("translate.googleusercontent.com"===a)""===d&&(d=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?
La("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=tb(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=tb(b);return[a,b,d]}function od(a,b,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=na.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(k,p){k=parseInt(k);
return isNaN(k)?p:k};b=function(k){return k?g(k,void 0):void 0};return[a[0],a[1],g(a[2],h),g(a[3],e),g(a[4],h),b(a[5]),a[6],a[7],a[8],b(a[9]),g(a[10],-1)]}function Pa(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=b;b=na.v4();a[6]=b;a[10]=-1;a[8]="";a[9]=void 0;return b}function xb(a){a[4]=Math.round((new Date).getTime()/1E3)}function pd(a,b,d,e,h,g){function k(q){var t={cacheRefreshInterval:60,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,
enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{}};t.cacheRefreshInterval=q.cacheRefreshInterval;t.base64=q.configurationBundle[0].trackerConfiguration.base64Encoding;t.linkClickTracking=q.configurationBundle[0].trackerConfiguration.linkClickTracking;t.buttonClickTracking=q.configurationBundle[0].trackerConfiguration.buttonClickTracking;t.customEvent=q.configurationBundle[0].trackerConfiguration.customEvent;
t.exceptionAutotracking=q.configurationBundle[0].trackerConfiguration.exceptionAutotracking;t.enablePeriodicHeartbeat=q.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;t.periodicHeartbeatInterval=q.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;t.customEventTrackingConfiguration=q.configurationBundle[0].customEventTrackingConfiguration;t.convivaVideoEventTrackingConfiguration=q.configurationBundle[0].convivaVideoEventTrackingConfiguration;t.ajaxTrackingConfiguration=
q.configurationBundle[0].ajaxTrackingConfiguration;t.ajaxTrackingConfiguration&&(t.ajaxTrackingConfiguration.blocklist.push(q.configurationBundle[0].networkConfiguration.endpoint),t.ajaxTrackingConfiguration.blocklist.push("wsg"),t.ajaxTrackingConfiguration.blocklist.push("remote_config"));u.setCollectorUrl(q.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",
JSON.stringify(t)),localStorage.setItem("ConvivaEndpoint",q.configurationBundle[0].networkConfiguration.endpoint));u.core.setConfig(t)}void 0===g&&(g={});var p=[];a=function(q,t,y,x,l,n){function F(){xa=Cc(window.location.hostname,window.location.href,ub());xa[1]!==ra&&(Qa=ub(ra));Dc=Ac(xa[0]);ra=xa[1]}function T(c){var f=(new Date).getTime();c=c.currentTarget;if(null===c||void 0===c?0:c.href){f="_sp="+(cb+"."+f);var m=c.href.split("#"),v=m[0].split("?"),G=v.shift();if(v=v.join("?")){for(var I=!0,
L=v.split("&"),Q=0;Q<L.length;Q++)if("_sp="===L[Q].substr(0,4)){I=!1;L[Q]=f;v=L.join("&");break}I&&(v=f+"&"+v)}else v=f;m[0]=G+"?"+v;f=m.join("#");c.href=f}}function O(c){for(var f=0;f<document.links.length;f++){var m=document.links[f];!m.spDecorationEnabled&&c(m)&&(oa(m,"click",T,!0),oa(m,"mousedown",T,!0),m.spDecorationEnabled=!0)}}function E(c){if(Ec){var f=/#.*/;c=c.replace(f,"")}Fc&&(f=/[{}]/g,c=c.replace(f,""));return c}function J(c){return(c=/^([a-z]+):/.exec(c))?c[1]:null}function V(c){c=
Da+c+"."+ya;if("localStorage"==N){try{var f=window.localStorage,m=f.getItem(c+".expires");if(null===m||+m>Date.now())var v=f.getItem(c);else f.removeItem(c),f.removeItem(c+".expires"),v=void 0}catch(G){v=void 0}return v}if("cookie"==N||"cookieAndLocalStorage"==N)return ca(c)}function va(){F();ya=qd((Ra||Dc)+(yb||"/")).slice(0,4)}function ia(){zb=(new Date).getTime()}function wb(){var c=U(),f=c[0];f<db?db=f:f>eb&&(eb=f);c=c[1];c<fb?fb=c:c>gb&&(gb=c);ia()}function U(){var c=document.documentElement;
return c?[c.scrollLeft||window.pageXOffset,c.scrollTop||window.pageYOffset]:[0,0]}function aa(){var c=U(),f=c[0];eb=db=f;gb=fb=c=c[1]}function D(){bb(Da+"ses."+ya,"*",Gc)}function qa(c){var f=Da+"id."+ya;c.shift();c=c.join(".");bb(f,c,Hc)}function bb(c,f,m){if(!Ea||Sa)"localStorage"==N?ab(c,f,m):("cookie"==N||"cookieAndLocalStorage"==N)&&ca(c,f,m,yb,Ra,hb,ib)}function ua(c){var f=Da+"id."+ya,m=Da+"ses."+ya;Bc(f);Bc(m);ca(f,"",-1,"/",Ra,hb,ib);ca(m,"",-1,"/",Ra,hb,ib);null!==c&&void 0!==c&&c.preserveSession||
(za=na.v4(),ha=1);null!==c&&void 0!==c&&c.preserveUser||(cb=na.v4(),Aa=null)}function wa(c){c&&c.stateStorageStrategy&&(n.stateStorageStrategy=c.stateStorageStrategy,N=Ic(n));Ea=!!n.anonymousTracking;Sa=Jc(n);Ab=Kc(n);ja.setUseLocalStorage("localStorage"==N||"cookieAndLocalStorage"==N);ja.setAnonymousTracking(Ab)}function Na(){try{var c=window.localStorage.getItem(Bb+"."+Cb),f=JSON.parse(c||"{}");"{}"===f||"undefined"===typeof f?(Ta=w(),jb=K(),sa=-1):(Ta=f.clId||w(),sa=f[Ua]&&2147483648>f[Ua]?f[Ua]:
-1,jb=K());A()}catch(v){console.warn(v)}if(!Ea||Sa){c="none"!=N&&!!V("ses");f=ea();if(f[1])var m=f[1];else m=Ea?"":na.v4(),f[1]=m;cb=m;za=c?f[6]:Pa(f);ha=f[3];"none"!=N&&(D(),xb(f),qa(f))}}function ea(){if("none"==N)return["1","",0,0,0,void 0,"","","",void 0,0];var c=V("id")||void 0;return od(c,cb,za,ha)}function Oa(c){return 0===c.indexOf("http")?c:("https:"===document.location.protocol?"https":"http")+"://"+c}function Ca(){Lc&&null!=l.pageViewId||(l.pageViewId=na.v4())}function r(){null==l.pageViewId&&
(l.pageViewId=na.v4());return l.pageViewId}function B(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:r()}}]}}}function A(){try{var c=window.localStorage,f={clId:Ta,iid:jb,eventIndex:sa},m=null;try{m=JSON.stringify(f)}catch(v){return}return c.setItem(Bb+"."+Cb,m)}catch(v){}}function w(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+
"."+Math.floor(2147483647*Math.random()).toString()}catch(c){console.warn(c)}}function K(){try{return Math.floor(2147483647*Math.random())}catch(c){return console.warn(c),-1}}function S(c){try{var f=Object.keys(c);rd(JSON.stringify(c))?f.forEach(function(m){""!==m&&Object.defineProperty(Db,m,{value:""+c[m],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(m){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",
m)}}function fa(c){try{c.forEach(function(f){delete Db[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function vb(c){var f=c.title,m=c.context,v=c.timestamp;c=c.contextCallback;F();Mc&&Ca();Mc=!0;Fa=document.title;Va=f;f=zc(Va||Fa);Ga.track(kd({pageUrl:E(Ha||ra),pageTitle:f,referrer:E(kb||Qa)}),(m||[]).concat(c?c():[]),v);v=new Date;f=!1;if(Y.enabled&&!Y.installed){f=Y.installed=!0;var G={update:function(){if("undefined"!==typeof window&&
"function"===typeof window.addEventListener){var L=!1,Q=Object.defineProperty({},"passive",{get:function(){L=!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",W,Q);window.removeEventListener("testPassiveEventSupport",W,Q);G.hasSupport=L}}};G.update();var I="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(G,"hasSupport")?oa(document,I,ia,{passive:!0}):oa(document,
I,ia);aa();I=function(L,Q){void 0===Q&&(Q=ia);return function(W){return oa(document,W,Q)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(I(document));["resize","focus","blur"].forEach(I(window));I(window,wb)("scroll")}if(Y.enabled&&(sd||f))for(v in zb=v.getTime(),v=void 0,Y.configurations)if(f=Y.configurations[v])window.clearInterval(f.activityInterval),pa(f,m,c)}function pa(c,f,m){var v=function(L,Q){F();var W=u.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&
(W=1E3*W.periodicHeartbeatInterval,W!=c.configHeartBeatTimer&&(window.clearInterval(c.activityInterval),c.activityInterval=window.setInterval(I,W))):window.clearInterval(c.activityInterval);L({context:Q,pageViewId:r(),minXOffset:db,minYOffset:fb,maxXOffset:eb,maxYOffset:gb});aa()},G=new Date;window.setTimeout(function(){v(c.callback,(f||[]).concat(m?m():[]))},2E3);var I=function(){var L=new Date;if(G.getTime()+c.configHeartBeatTimer>L.getTime()||zb+c.configHeartBeatTimer>L.getTime())G=L,v(c.callback,
(f||[]).concat(m?m():[]))};c.activityInterval=window.setInterval(I,c.configHeartBeatTimer)}function P(c){var f=c.minimumVisitLength,m=c.heartbeatDelay;c=c.callback;if(yc(f)&&yc(m))return{configMinimumVisitLength:1E3*f,configHeartBeatTimer:1E3*m,callback:c};Z.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function da(c){var f=c.context,m=c.minXOffset,v=c.minYOffset,G=c.maxXOffset,I=c.maxYOffset;c=document.title;c!==Fa&&(Fa=c,Va=void 0);c=Ga;var L=c.track,Q=E(Ha||ra),
W=zc(Va||Fa),td=E(kb||Qa);m=Math.round(m);G=Math.round(G);v=Math.round(v);I=Math.round(I);var ka=Xa();ka.add("e","pp");ka.add("url",Q);ka.add("page",W);ka.add("refr",td);m&&!isNaN(Number(m))&&ka.add("pp_mix",m.toString());G&&!isNaN(Number(G))&&ka.add("pp_max",G.toString());v&&!isNaN(Number(v))&&ka.add("pp_miy",v.toString());I&&!isNaN(Number(I))&&ka.add("pp_may",I.toString());L.call(c,ka,f)}function Ma(c){if(n.trackerConfigUrl)lb(n.trackerConfigUrl),Ia=window.setInterval(lb,6E4*c,n.trackerConfigUrl);
else{var f="https://drt1fhpy4haqm.cloudfront.net/js/"+n.convivaCustomerKey+"/"+y+"/remote_config.json";lb(f);Ia=window.setInterval(lb,6E4*c,f)}}var Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc,ud={},vd={},wd={blocklist:["*"]},H={},Ia=null;if(window.localStorage){var Nc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(H);var ec=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else ec=
"https://appgw.conviva.com",Nc=JSON.stringify(H);x=n.gatewayUrl?n.gatewayUrl:ec?ec:"https://appgw.conviva.com";t||(t="CAT");var M=JSON.parse(Nc);H.base64="undefined"!=typeof M.base64?M.base64:!0;H.cacheRefreshInterval="undefined"!=typeof M.cacheRefreshInterval?M.cacheRefreshInterval:60;H.linkClickTracking="undefined"!=typeof M.linkClickTracking?M.linkClickTracking:!0;H.buttonClickTracking="undefined"!=typeof M.buttonClickTracking?M.buttonClickTracking:!0;H.exceptionAutotracking="undefined"!=typeof M.exceptionAutotracking?
M.exceptionAutotracking:!0;H.enablePeriodicHeartbeat="undefined"!=typeof M.enablePeriodicHeartbeat?M.enablePeriodicHeartbeat:!0;H.periodicHeartbeatInterval="undefined"!=typeof M.periodicHeartbeatInterval?M.periodicHeartbeatInterval:40;H.customEventTrackingConfiguration="undefined"!=typeof M.customEventTrackingConfiguration?M.customEventTrackingConfiguration:ud;H.convivaVideoEventTrackingConfiguration="undefined"!=typeof M.convivaVideoEventTrackingConfiguration?M.convivaVideoEventTrackingConfiguration:
vd;H.ajaxTrackingConfiguration="undefined"!=typeof M.ajaxTrackingConfiguration?M.ajaxTrackingConfiguration:wd;var xd=n.convivaCustomerKey;if(window.XMLHttpRequest){var Ja=new XMLHttpRequest;Ja.onreadystatechange=function(){if(4==Ja.readyState)if(200==Ja.status){var c=JSON.parse(Ja.response);c.cacheRefreshInterval||(c.cacheRefreshInterval=60);H.cacheRefreshInterval!=c.cacheRefreshInterval&&(H.cacheRefreshInterval=c.cacheRefreshInterval,"number"===typeof Ia&&window.clearInterval(Ia),Ma(c.cacheRefreshInterval));
k(c)}else try{var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){var m=JSON.parse(f.response);k(m)}else try{var v=new XMLHttpRequest;v.onreadystatechange=function(){if(4==v.readyState&&200==v.status){var G=JSON.parse(v.response);k(G)}};v.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0);v.send()}catch(G){}};f.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+xd+"/remote_config.json",!0);f.send()}catch(m){}};var lb=function(c){try{Ja.open("GET",
c,!0),Ja.send()}catch(f){}};"number"===typeof Ia&&window.clearInterval(Ia);Ma(H.cacheRefreshInterval)}n.eventMethod=null!==(Eb=n.eventMethod)&&void 0!==Eb?Eb:"post";var Ic=function(c){var f;return null!==(f=c.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},Jc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==m?m:!1},Kc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?
!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withServerAnonymisation))&&void 0!==m?m:!1};p.push(function(){return{beforeTrack:function(c){var f=V("ses"),m=ea();fc=gc?!!ca(gc):!1;Oc||fc?ua():("0"===m[0]?(za=f||"none"==N?m[6]:Pa(m),ha=m[3]):(new Date).getTime()-hc>1E3*Gc&&(ha++,za=Pa(m,ha)),xb(m),-1===m[10]&&(f=c.build(),m[8]=f.eid,f=f.dtm||f.ttm,m[9]=f?parseInt(f):void 0),m[10]+=1,c.add("uid",Ea?null:Aa),F(),c.add("refr",E(kb||Qa)),document&&c.add("page",document.title),c.add("url",
E(Ha||ra)),!yd||Sa||Ea||(f=m[9],f={userId:m[1],sessionId:m[6],eventIndex:m[10],sessionIndex:m[3],previousSessionId:m[7]||null,storageMechanism:"localStorage"==N?"LOCAL_STORAGE":"COOKIE_1",firstEventId:m[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():null},c.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:f})),"none"!=N&&(qa(m),D()),hc=(new Date).getTime())}}}());(null!==(Gb=null===(Fb=null===n||void 0===n?void 0:n.contexts)||void 0===
Fb?void 0:Fb.webPage)&&void 0!==Gb?Gb:1)&&p.push(B());p.push(function(){return{contexts:function(){var c=Ta,f=jb.toString(),m=zd;try{var v=window.localStorage.getItem(Bb+"."+Cb),G=JSON.parse(v||"{}");"{}"!==G&&"undefined"!==typeof G&&"undefined"!==typeof G[Ua]&&(sa=G[Ua]);2147483647<=sa?sa=0:sa++;A();var I=sa}catch(L){console.warn(L),I=void 0}c={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-2",data:{clid:c,iid:f,ck:m,eventIndex:I}};f={eventIndex:Ad++};null!=ic&&(f.previousEventTimestamp=ic);
ic=(new Date).toISOString();return[c,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());p.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:Db}}]}}}());p.push.apply(p,null!==(Hb=n.plugins)&&void 0!==Hb?Hb:[]);var Ga=jd({base64:H.base64,corePlugins:p,callback:function(c){Oc||fc||ja.enqueueRequest(c.build(),jc)},linkClickTracking:H.linkClickTracking,buttonClickTracking:H.buttonClickTracking,customEvent:!0,exceptionAutotracking:H.exceptionAutotracking,
enablePeriodicHeartbeat:H.enablePeriodicHeartbeat,periodicHeartbeatInterval:H.periodicHeartbeatInterval,customEventTrackingConfiguration:H.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:H.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:H.ajaxTrackingConfiguration}),xa=Cc(window.location.hostname,window.location.href,ub()),Dc=Ac(xa[0]),ra=xa[1],Qa=xa[2],kb,Bd=null!==(Ib=n.platform)&&void 0!==Ib?Ib:"web",jc=Oa(x),Cd=null!==(Jb=n.postPath)&&void 0!==Jb?Jb:"/"+
n.convivaCustomerKey+"/ctp",Dd=null!==(Kb=n.appId)&&void 0!==Kb?Kb:"",zd=null!==(Lb=n.convivaCustomerKey)&&void 0!==Lb?Lb:"",Ha,Db={},Fa=document.title,Va,sd=null!==(Mb=n.resetActivityTrackingOnPageView)&&void 0!==Mb?Mb:!0,Ec,Fc,Da=null!==(Nb=n.cookieName)&&void 0!==Nb?Nb:"_sp_",Ra=null!==(Ob=n.cookieDomain)&&void 0!==Ob?Ob:void 0,yb="/",hb=null!==(Pb=n.cookieSameSite)&&void 0!==Pb?Pb:"None",ib=null!==(Qb=n.cookieSecure)&&void 0!==Qb?Qb:!0,Pc=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,
Oc="undefined"!==typeof n.respectDoNotTrack?n.respectDoNotTrack&&("yes"===Pc||"1"===Pc):!1,gc,Hc=null!==(Rb=n.cookieLifetime)&&void 0!==Rb?Rb:63072E3,Gc=null!==(Sb=n.sessionCookieTimeout)&&void 0!==Sb?Sb:1800,Sa=Jc(n),Ab=Kc(n),Ea=!!n.anonymousTracking,N=Ic(n),Bb="Conviva",Cb="sdkConfig",Ua="eventIndex",Ta,jb,sa=-1,Ad=0,zb,hc=(new Date).getTime(),db,eb,fb,gb,ya,cb,za,ha=1,Aa,ja=nd(q,l,"localStorage"==N||"cookieAndLocalStorage"==N,n.eventMethod,Cd,null!==(Tb=n.bufferSize)&&void 0!==Tb?Tb:1,null!==(Ub=
n.maxPostBytes)&&void 0!==Ub?Ub:4E4,null!==(Vb=n.maxGetBytes)&&void 0!==Vb?Vb:0,null!==(Wb=n.useStm)&&void 0!==Wb?Wb:!0,null!==(Xb=n.maxLocalStorageQueueSize)&&void 0!==Xb?Xb:1E3,null!==(Yb=n.connectionTimeout)&&void 0!==Yb?Yb:5E3,Ab,null!==(Zb=n.customHeaders)&&void 0!==Zb?Zb:{},null!==($b=n.withCredentials)&&void 0!==$b?$b:!0,null!==(ac=n.retryStatusCodes)&&void 0!==ac?ac:[],(null!==(bc=n.dontRetryStatusCodes)&&void 0!==bc?bc:[]).concat([400,401,403,410,422])),Lc=!1,ic,Mc=!1,Y={enabled:!0,installed:!1,
configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:da}}},yd=null!==(dc=null===(cc=n.contexts)||void 0===cc?void 0:cc.session)&&void 0!==dc?dc:!1,fc;n.hasOwnProperty("discoverRootDomain")&&n.discoverRootDomain&&(Ra=ld(hb,ib));Ga.setTrackerVersion(y);Ga.setAppId(Dd);Ga.setPlatform(Bd);va();Na();ja.setCustomHeaders({"x-client-id":""+Ta});n.crossDomainLinker&&O(n.crossDomainLinker);var rd=function(c){try{return"object"===typeof JSON.parse(c)}catch(f){return!1}};return ba(ba({},
{getDomainSessionIndex:function(){return ha},getPageViewId:function(){return r()},newSession:function(){var c=ea();"0"===c[0]?(za="none"!=N?Pa(c):c[6],ha=c[3],D()):(ha++,za=Pa(c,ha));xb(c);"none"!=N&&(qa(c),D());hc=(new Date).getTime()},getCookieName:function(c){return Da+c+"."+ya},getUserId:function(){return Aa},getDomainUserId:function(){return ea()[1]},getDomainUserInfo:function(){return ea()},setReferrerUrl:function(c){kb=c},setCustomUrl:function(c){F();var f=ra,m;J(c)?Ha=c:"/"===c.slice(0,1)?
Ha=J(f)+"://"+tb(f)+c:(f=E(f),0<=(m=f.indexOf("?"))&&(f=f.slice(0,m)),(m=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,m+1)),Ha=f+c)},setDocumentTitle:function(c){Fa=document.title;Va=c},discardHashTag:function(c){Ec=c},discardBrace:function(c){Fc=c},setCookiePath:function(c){yb=c;va()},setVisitorCookieTimeout:function(c){Hc=c},crossDomainLinker:function(c){O(c)},enableActivityTracking:function(c){Y.configurations.pagePing||(Y.enabled=!0,Y.configurations.pagePing=P(ba(ba({},c),{callback:da})))},
enableActivityTrackingCallback:function(c){Y.configurations.callback||(Y.enabled=!0,Y.configurations.callback=P(c))},updatePageActivity:function(){ia()},setOptOutCookie:function(c){gc=c},setUserId:function(c){Aa=c},setUserIdFromLocation:function(c){F();Aa=La(c,ra)},setUserIdFromReferrer:function(c){F();Aa=La(c,Qa)},setUserIdFromCookie:function(c){Aa=ca(c)},setCollectorUrl:function(c){jc=Oa(c);ja.setCollectorUrl(jc)},setBufferSize:function(c){ja.setBufferSize(c)},flushBuffer:function(c){void 0===c&&
(c={});ja.executeQueue();c.newBufferSize&&ja.setBufferSize(c.newBufferSize)},trackPageView:function(c){void 0===c&&(c={});vb(c)},trackVideoEvent:function(c){void 0===c&&(c={});try{var f=this.core.getConfig();""!=c.name&&void 0!=c.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var m=
f.convivaVideoEventTrackingConfiguration.blocklist;-1==m.indexOf("*")&&-1==m.indexOf(""+c.name)&&this.core.track(sb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}else this.core.track(sb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,
fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp);else this.core.track(sb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}catch(v){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",
v)}},trackAjaxEvent:function(c){void 0===c&&(c={});try{if("xmlhttprequest"===c.initiatorType){var f=this.core.getConfig();if(""==c.name||void 0==c.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(void 0!=f.ajaxTrackingConfiguration&&void 0!=f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var m=f.ajaxTrackingConfiguration.blocklist;if(-1==m.indexOf("*")){f=!1;for(var v=0;v<m.length;v++)""!==m[v]&&
-1!==c.name.indexOf(m[v])&&(f=!0);if(!f){var G=this.core,I=G.track;var L=$a({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:rb({targetUrl:c.name,webResourceTiming:c,duration:c.duration})}});I.call(G,L,c.context,c.timestamp)}}}}}catch(Q){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",Q)}},setCustomTags:function(c){void 0===c&&(c={});S(c)},unsetCustomTags:function(c){void 0===c&&(c={});fa(c)},preservePageViewId:function(){Lc=!0},
disableAnonymousTracking:function(c){n.anonymousTracking=!1;wa(c);Na();ja.executeQueue()},enableAnonymousTracking:function(c){var f;n.anonymousTracking=null!==(f=c&&(null===c||void 0===c?void 0:c.options))&&void 0!==f?f:!0;wa(c);Sa||Ca()},clearUserData:ua}),{id:q,namespace:t,core:Ga,sharedState:l})}(a,b,d,e,h,g);var u=ba(ba({},a),{addPlugin:function(q){var t,y;u.core.addPlugin(q);null===(y=(t=q.plugin).activateBrowserPlugin)||void 0===y?void 0:y.call(t,u)}});p.forEach(function(q){var t;null===(t=
q.activateBrowserPlugin)||void 0===t?void 0:t.call(q,u)});return u}function C(a,b){try{var d=null!==a&&void 0!==a?a:Object.keys(Wa);a=Wa;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):Z.warn(g+" not configured")}e.forEach(b)}catch(k){Z.error("Function failed",k)}}function Qc(a,b,d,e,h,g){return Wa.hasOwnProperty(a)?null:(Wa[a]=pd(a,b,d,e,h,g),Wa[a])}function Ed(){function a(){"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(k){k(!1)})}function b(){var k;
if(!e.hasLoaded)for(e.hasLoaded=!0,k=0;k<e.registeredOnLoadHandlers.length;k++)e.registeredOnLoadHandlers[k]();return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function p(){h.removeEventListener("DOMContentLoaded",p,!1);b()}):h.attachEvent&&h.attachEvent("onreadystatechange",function u(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",u),b())});oa(g,"load",b,!1)}var e=new Fd,h=document,g=window;h.visibilityState&&oa(h,"visibilitychange",a,!1);oa(g,"beforeunload",
function(){e.bufferFlushers.forEach(function(k){k(!1)})},!1);"loading"===document.readyState?d():b();return e}var ba=function(){ba=Object.assign||function(a){for(var b,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h])}return a};return ba.apply(this,arguments)},ta={},Rc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&
msCrypto.getRandomValues.bind(msCrypto);if(Rc){var Sc=new Uint8Array(16);ta=function(){Rc(Sc);return Sc}}else{var Tc=Array(16);ta=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Tc[a]=b>>>((a&3)<<3)&255;return Tc}}for(var R=[],mb=0;256>mb;++mb)R[mb]=(mb+256).toString(16).substr(1);var Uc=function(a,b){b=b||0;return[R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],
R[a[b++]]].join("")},Gd=ta,Vc,kc,lc=0,mc=0,Hd=ta;ta=function(a,b,d){d=b&&d||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Hd)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[d+e]=a[e];return b||Uc(a)};ta.v1=function(a,b,d){d=b&&d||0;var e=b||[];a=a||{};var h=a.node||Vc,g=void 0!==a.clockseq?a.clockseq:kc;if(null==h||null==g){var k=Gd();null==h&&(h=Vc=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]);null==g&&(g=kc=(k[6]<<8|k[7])&16383)}k=void 0!==a.msecs?
a.msecs:(new Date).getTime();var p=void 0!==a.nsecs?a.nsecs:mc+1,u=k-lc+(p-mc)/1E4;0>u&&void 0===a.clockseq&&(g=g+1&16383);(0>u||k>lc)&&void 0===a.nsecs&&(p=0);if(1E4<=p)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");lc=k;mc=p;kc=g;k+=122192928E5;a=(1E4*(k&268435455)+p)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=k/4294967296*1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>
g;++g)e[d+g]=h[g];return b?b:Uc(e)};var na=ta.v4=ta,ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",la;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(la||(la={}));var Z=function(a){void 0===a&&(a=la.warn);return{setLogLevel:function(b){a=la[b]?b:la.warn},warn:function(b,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=la.warn&&"undefined"!==typeof console&&(h="Snowplow: "+b,d?console.warn.apply(console,
X([h+"\n",d],e,!1)):console.warn.apply(console,X([h],e,!1)))},error:function(b,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=la.error&&"undefined"!==typeof console&&(h="Snowplow: "+b+"\n",d?console.error.apply(console,X([h+"\n",d],e,!1)):console.error.apply(console,X([h],e,!1)))},debug:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=la.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+b],d,!1))},info:function(b){for(var d=
[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=la.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+b],d,!1))}}}(),Wc={},Xc={};(function(){var a={rotl:function(b,d){return b<<d|b>>>32-d},rotr:function(b,d){return b<<32-d|b>>>d},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var d=0;d<b.length;d++)b[d]=a.endian(b[d]);return b},randomBytes:function(b){for(var d=[];0<b;b--)d.push(Math.floor(256*Math.random()));return d},
bytesToWords:function(b){for(var d=[],e=0,h=0;e<b.length;e++,h+=8)d[h>>>5]|=b[e]<<24-h%32;return d},wordsToBytes:function(b){for(var d=[],e=0;e<32*b.length;e+=8)d.push(b[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(b){for(var d=[],e=0;e<b.length;e++)d.push((b[e]>>>4).toString(16)),d.push((b[e]&15).toString(16));return d.join("")},hexToBytes:function(b){for(var d=[],e=0;e<b.length;e+=2)d.push(parseInt(b.substr(e,2),16));return d},bytesToBase64:function(b){for(var d=[],e=0;e<b.length;e+=3)for(var h=
b[e]<<16|b[e+1]<<8|b[e+2],g=0;4>g;g++)8*e+6*g<=8*b.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,h=0;e<b.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>
6-2*h);return d}};Xc=a})();var nc={utf8:{stringToBytes:function(a){return nc.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(nc.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d)&255);return b},bytesToString:function(a){for(var b=[],d=0;d<a.length;d++)b.push(String.fromCharCode(a[d]));return b.join("")}}},Yc=nc;(function(){var a=Xc,b=Yc.utf8,d=Yc.bin,e=function(h,g){var k=a.wordsToBytes,
p=h;p.constructor==String?p=b.stringToBytes(p):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(p)?p=Array.prototype.slice.call(p,0):Array.isArray(p)||(p=p.toString());h=a.bytesToWords(p);var u=8*p.length;p=[];var q=1732584193,t=-271733879,y=-1732584194,x=271733878,l=-1009589776;h[u>>5]|=128<<24-u%32;h[(u+64>>>9<<4)+15]=u;for(u=0;u<h.length;u+=16){for(var n=q,F=t,T=y,O=x,E=l,J=0;80>J;J++){if(16>J)p[J]=h[u+J];else{var V=p[J-3]^p[J-8]^p[J-14]^p[J-16];p[J]=V<<1|V>>>31}V=
(q<<5|q>>>27)+l+(p[J]>>>0)+(20>J?(t&y|~t&x)+1518500249:40>J?(t^y^x)+1859775393:60>J?(t&y|t&x|y&x)-1894007588:(t^y^x)-899497514);l=x;x=y;y=t<<30|t>>>2;t=q;q=V}q+=n;t+=F;y+=T;x+=O;l+=E}k=k.call(a,[q,t,y,x,l]);return g&&g.asBytes?k:g&&g.asString?d.bytesToString(k):a.bytesToHex(k)};e._blocksize=16;e._digestsize=20;Wc=e})();var qd=Wc,Wa={},Fd=function(){return function(){this.outQueues=[];this.bufferFlushers=[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),nb="undefined"!==typeof window?Ed():
void 0;z.addGlobalContexts=function(a,b){C(b,function(d){d.core.addGlobalContexts(a)})};z.addPlugin=function(a,b){C(b,function(d){d.addPlugin(a)})};z.clearGlobalContexts=function(a){C(a,function(b){b.core.clearGlobalContexts()})};z.clearUserData=function(a,b){C(b,function(d){d.clearUserData(a)})};z.convivaAppTracker=function(a){void 0===a&&(a={});if(nb){var b=Qc("CAT","CAT","js-".concat("0.3.25"),"",nb,a);document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&
b&&b.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){b&&b.trackAjaxEvent(e)})})).observe({type:"resource",buffered:!0});return b}};z.crossDomainLinker=function(a,b){C(b,function(d){d.crossDomainLinker(a)})};z.disableAnonymousTracking=function(a,b){C(b,function(d){d.disableAnonymousTracking(a)})};z.discardBrace=function(a,b){C(b,function(d){d.discardBrace(a)})};z.discardHashTag=function(a,b){C(b,function(d){d.discardHashTag(a)})};z.enableActivityTracking=
function(a,b){C(b,function(d){d.enableActivityTracking(a)})};z.enableActivityTrackingCallback=function(a,b){C(b,function(d){d.enableActivityTrackingCallback(a)})};z.enableAnonymousTracking=function(a,b){C(b,function(d){d.enableAnonymousTracking(a)})};z.flushBuffer=function(a,b){C(b,function(d){d.flushBuffer(a)})};z.newSession=function(a){C(a,function(b){b.newSession()})};z.newTracker=function(a,b,d){void 0===d&&(d={});if(nb)return Qc(a,a,"js-".concat("0.3.25"),b,nb,d)};z.preservePageViewId=function(a){C(a,
function(b){b.preservePageViewId()})};z.removeGlobalContexts=function(a,b){C(b,function(d){d.core.removeGlobalContexts(a)})};z.setBufferSize=function(a,b){C(b,function(d){d.setBufferSize(a)})};z.setCollectorUrl=function(a,b){C(b,function(d){d.setCollectorUrl(a)})};z.setCookiePath=function(a,b){C(b,function(d){d.setCookiePath(a)})};z.setCustomTags=function(a,b){C(b,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};z.setCustomUrl=function(a,
b){C(b,function(d){d.setCustomUrl(a)})};z.setDocumentTitle=function(a,b){C(b,function(d){d.setDocumentTitle(a)})};z.setOptOutCookie=function(a,b){C(b,function(d){d.setOptOutCookie(a)})};z.setReferrerUrl=function(a,b){C(b,function(d){d.setReferrerUrl(a)})};z.setUserId=function(a,b){C(b,function(d){d.setUserId(a)})};z.setUserIdFromCookie=function(a,b){C(b,function(d){d.setUserIdFromCookie(a)})};z.setUserIdFromLocation=function(a,b){C(b,function(d){d.setUserIdFromLocation(a)})};z.setUserIdFromReferrer=
function(a,b){C(b,function(d){d.setUserIdFromReferrer(a)})};z.setVisitorCookieTimeout=function(a,b){C(b,function(d){d.setVisitorCookieTimeout(a)})};z.trackCustomEvent=function(a,b){C(b,function(d){var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(h){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=
e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&d.core.track(qb({name:a.name,data:a.data}),a.context,a.timestamp)):d.core.track(qb({name:a.name,data:a.data}),a.context,a.timestamp):d.core.track(qb({name:a.name,data:a.data}),a.context,a.timestamp)})};z.trackPageView=function(a,b){C(b,function(d){d.trackPageView(a)})};
z.trackSelfDescribingEvent=function(a,b){C(b,function(d){d.core.track($a({event:a.event}),a.context,a.timestamp)})};z.trackStructEvent=function(a,b){C(b,function(d){d=d.core;var e=d.track,h=a.category,g=a.action,k=a.label,p=a.property,u=a.value,q=Xa();q.add("e","se");q.add("se_ca",h);q.add("se_ac",g);q.add("se_la",k);q.add("se_pr",p);q.add("se_va",null==u?void 0:u.toString());e.call(d,q,a.context,a.timestamp)})};z.unsetCustomTags=function(a,b){C(b,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
z.updatePageActivity=function(a){C(a,function(b){b.updatePageActivity()})};z.version="0.3.25";Object.defineProperty(z,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
