/*!
 * Browser tracker for Snowplow v0.3.17 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(z,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(z="undefined"!==typeof globalThis?globalThis:z||self,X(z.snowplowBrowserTracking={}))})(this,function(z){function X(a,b,d){if(d||2===arguments.length)for(var e=0,h=b.length,g;e<h;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return a.concat(g||Array.prototype.slice.call(b))}function Xc(a){var b=0,d=0;var e="";var h=[];if(!a)return a;
a+="";do{var g=oa.indexOf(a.charAt(b++));var k=oa.indexOf(a.charAt(b++));e=oa.indexOf(a.charAt(b++));var p=oa.indexOf(a.charAt(b++));var v=g<<18|k<<12|e<<6|p;g=v>>16&255;k=v>>8&255;v&=255;64===e?h[d++]=String.fromCharCode(g):64===p?h[d++]=String.fromCharCode(g,k):h[d++]=String.fromCharCode(g,k,v)}while(b<a.length);e=h.join("");return function(q){return decodeURIComponent(q.split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Ua(){var a=
{},b=[],d=[],e=[],h,g=function(k,p){null!=p&&""!==p&&(a[k]=p)};return{add:g,addDict:function(k){for(var p in k)Object.prototype.hasOwnProperty.call(k,p)&&g(p,k[p])},addJson:function(k,p,v){v&&jc(v)&&(k={keyIfEncoded:k,keyIfNotEncoded:p,json:v},d.push(k),b.push(k))},addContextEntity:function(k){e.push(k)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(k){h=k},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function Yc(a){return function(b,
d,e){for(var h=function(q,t,x){q=JSON.stringify(q);if(a){x=b.add;if(q){var y=0,l=0,n=[];if(q){q=unescape(encodeURIComponent(q));do{var G=q.charCodeAt(y++);var T=q.charCodeAt(y++);var O=q.charCodeAt(y++);var F=G<<16|T<<8|O;G=F>>18&63;T=F>>12&63;O=F>>6&63;F&=63;n[l++]=oa.charAt(G)+oa.charAt(T)+oa.charAt(O)+oa.charAt(F)}while(y<q.length);y=n.join("");q=q.length%3;q=(q?y.slice(0,q-3):y)+"===".slice(q||3)}q=q.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}x.call(b,t,q)}else b.add(x,q)},g=function(q,
t){if(!q){var x=b.getPayload();if(a?x.cx:x.co){q=JSON;var y=q.parse;if(a){if(x=x.cx){switch(4-x.length%4){case 2:x+="==";break;case 3:x+="="}x=x.replace(/-/g,"+").replace(/_/g,"/");x=Xc(x)}}else x=x.co;q=y.call(q,x)}else q=void 0}q?q.data=q.data.concat(t.data):q=t;return q},k=void 0,p=0;p<d.length;p++){var v=d[p];"cx"===v.keyIfEncoded?k=g(k,v.json):h(v.json,v.keyIfEncoded,v.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},k=g(k,d),e.length=0);k&&h(k,"cx","co")}}function jc(a){if(!kc(a))return!1;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function kc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function Zc(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var k=d[g];lc(k)?e.push(k):Ea(k)&&h.push(k)}a=
a.concat(h);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){lc(g)?b=b.filter(function(k){return JSON.stringify(k)!==JSON.stringify(g)}):Ea(g)&&(a=a.filter(function(k){return JSON.stringify(k)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==typeof g)){e=
g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var k=mb(a,d,g,e);h.push.apply(h,k);d=$c(b,d,g,e);h.push.apply(h,d);return h}}}function ad(a){return{addPluginContexts:function(b){var d=b?X([],b,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){ba.error("Error adding plugin contexts",h)}});return d}}}function bd(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])b=!0;else if(b)return!1;
return!0}return 2==a.length?!0:!1}function mc(a){return(a=a.split("."))&&1<a.length?bd(a):!1}function nc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&mc(a[1]))return a.slice(1,6)}function nb(a){if(a=nc(a)){var b=a[0];return 5===a.length&&mc(b)}return!1}function cd(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function oc(a){return cd(a)?a.every(function(b){return nb(b)}):
"string"===typeof a?nb(a):!1}function La(a){return jc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function dd(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(oc(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(oc(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Va(a){return"function"===typeof a&&1>=a.length}function Ea(a){return Va(a)||La(a)}
function pc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Va(a[0])&&a[1].every(Ea):Va(a[0])&&Ea(a[1]):!1}function qc(a){return Array.isArray(a)&&2===a.length?dd(a[0])?Array.isArray(a[1])?a[1].every(Ea):Ea(a[1]):!1:!1}function lc(a){return pc(a)||qc(a)}function ed(a,b){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return Wa(g,b)})&&e++:"string"===typeof h&&Wa(h,b)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return Wa(g,b)})&&d++:"string"===typeof h&&
Wa(h,b)&&d++;return 0<e&&0===d?!0:!1}function Wa(a,b){if(!nb(a))return!1;a=nc(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!fd(a[0],b[0]))return!1;for(var d=1;5>d;d++)if(!rc(a[d],b[d]))return!1;return!0}return!1}function fd(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!rc(b[d],a[d]))return!1;return!0}return!1}function rc(a,
b){return a&&b&&"*"===a||a===b}function sc(a){return Array.isArray(a)?a:[a]}function mb(a,b,d,e){var h;a=sc(a).map(function(g){a:if(La(g))g=[g];else{if(Va(g)){b:{var k=void 0;try{var p={event:b.getPayload(),eventType:d,eventSchema:e};k=g(p);if(Array.isArray(k)&&k.every(La)||La(k)){var v=k;break b}v=void 0;break b}catch(q){}v=void 0}if(La(v)){g=[v];break a}else if(Array.isArray(v)){g=v;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&
g.filter(Boolean)}))}function $c(a,b,d,e){var h;a=sc(a).map(function(g){a:{if(pc(g)){var k=g[0],p=!1;try{var v={event:b.getPayload(),eventType:d,eventSchema:e};p=k(v)}catch(q){p=!1}if(!0===p){g=mb(g[1],b,d,e);break a}}else if(qc(g)&&ed(g[0],e)){g=mb(g[1],b,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function gd(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function hd(a){void 0===a&&(a={});var b=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];b=function(g,k,p){function v(l,n){l=t.getApplicableContexts(l);var G=[];n&&n.length&&G.push.apply(G,n);l&&l.length&&G.push.apply(G,l);return G}var q=ad(k),t=Zc(),x=g,y={};return{track:function(l,n,G){l.withJsonProcessor(Yc(x));l.add("eid",pa.v4());l.addDict(y);G=gd(G);l.add(G.type,G.value.toString());n=v(l,q.addPluginContexts(n));
n=n&&n.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:n}:void 0;void 0!==n&&l.addJson("cx","co",n);k.forEach(function(O){try{O.beforeTrack&&O.beforeTrack(l)}catch(F){ba.error("Plugin beforeTrack",F)}});"function"===typeof p&&p(l);var T=l.build();k.forEach(function(O){try{O.afterTrack&&O.afterTrack(T)}catch(F){ba.error("Plugin afterTrack",F)}});return T},addPayloadPair:function(l,n){y[l]=n},configuration:a,getConfig:function(){return a},setConfig:function(l){l&&
("undefined"!==typeof l.base64&&(x=a.base64=l.base64),"undefined"!==typeof l.linkClickTracking&&(a.linkClickTracking=l.linkClickTracking),"undefined"!==typeof l.cacheRefreshInterval&&(a.cacheRefreshInterval=l.cacheRefreshInterval),"undefined"!==typeof l.buttonClickTracking&&(a.buttonClickTracking=l.buttonClickTracking),"undefined"!==typeof l.customEvent&&(a.customEvent=l.customEvent),"undefined"!==typeof l.exceptionAutotracking&&(a.exceptionAutotracking=l.exceptionAutotracking),"undefined"!==typeof l.enablePeriodicHeartbeat&&
(a.enablePeriodicHeartbeat=l.enablePeriodicHeartbeat),"undefined"!==typeof l.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=l.periodicHeartbeatInterval),"undefined"!==typeof l.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=l.customEventTrackingConfiguration),"undefined"!==typeof l.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=l.convivaVideoEventTrackingConfiguration),"undefined"!==typeof l.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=
l.ajaxTrackingConfiguration))},getBase64Encoding:function(){return x},setBase64Encoding:function(l){x=l},addPayloadDict:function(l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(y[n]=l[n])},resetPayloadPairs:function(l){y=kc(l)?l:{}},setTrackerVersion:function(l){y.tv=l},setTrackerNamespace:function(l){y.tna=l},setAppId:function(l){y.aid=l},setPlatform:function(l){y.p=l},setUserId:function(l){y.uid=l},setScreenResolution:function(l,n){y.res=l+"x"+n},setViewport:function(l,n){y.vp=l+"x"+
n},setColorDepth:function(l){y.cd=l},setTimezone:function(l){y.tz=l},setLang:function(l){y.lang=l},setIpAddress:function(l){y.ip=l},setUseragent:function(l){y.ua=l},addGlobalContexts:function(l){t.addGlobalContexts(l)},clearGlobalContexts:function(){t.clearGlobalContexts()},removeGlobalContexts:function(l){t.removeGlobalContexts(l)}}}(null!==b&&void 0!==b?b:!0,e,a.callback);var h=da(da({},b),{addPlugin:function(g){var k,p;g=g.plugin;e.push(g);null===(k=g.logger)||void 0===k?void 0:k.call(g,ba);null===
(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)}});null===e||void 0===e?void 0:e.forEach(function(g){var k,p;null===(k=g.logger)||void 0===k?void 0:k.call(g,ba);null===(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)});return h}function Xa(a){var b=a.event;a=b.schema;var d=b.data;b=Ua();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:d}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function id(a){var b=a.pageUrl,d=a.pageTitle;
a=a.referrer;var e=Ua();e.add("e","pv");e.add("url",b);e.add("page",d);e.add("refr",a);return e}function ob(a){return Xa({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:pb({name:a.name,data:a.data})}})}function qb(a){return Xa({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:pb(a)}})}function pb(a,b){void 0===b&&(b={});var d={},e;for(e in a)if(b[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=a[e];return d}function jd(){try{var a=!!window.localStorage}catch(d){a=
!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr","modernizr");b.removeItem("modernizr");return!0}catch(d){return!1}}function tc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function uc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function rb(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function vc(a){var b=
a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function sb(a){var b=window,d=Ma("referrer",b.location.href)||Ma("referer",b.location.href);if(d)return d;if(a)return a;try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function qa(a,b,d,e){if(a.addEventListener)return a.addEventListener(b,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,d);a["on"+b]=d}function Ma(a,b){return(a=
(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function Ya(a,b,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,b);return!0}catch(g){return!1}}function wc(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(d){return!1}}function kd(a,b){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),h="_test_value_"+
(new Date).getTime(),g=d.split("."),k=g.length-1;0<=k;){var p=g.slice(k,g.length).join(".");ea(e,h,0,"/",p,a,b);if(ea(e)===h){ea(e,"",-1,"/",p,a,b);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)ea(d[e],"",-1,"/",p,a,b);return p}--k}return d}function ea(a,b,d,e,h,g,k){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(d?"; Expires="+(new Date(+new Date+1E3*
d)).toUTCString():"")+(e?"; Path="+e:"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(k?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function ld(a,b,d,e,h,g,k,p,v,q,t,x,y,l,n,G){function T(r){var C=Object.keys(r).map(function(A){return[A,r[A]]}).reduce(function(A,w){A[w[0]]=w[1].toString();return A},{});return{evt:C,bytes:O(JSON.stringify(C))}}function O(r){for(var C=0,A=0;A<r.length;A++){var w=r.charCodeAt(A);127>=w?C+=1:2047>=w?C+=2:55296<=w&&
57343>=w?(C+=4,A++):C=65535>w?C+3:C+4}return C}function F(r){for(void 0===r&&(r=!1);E.length&&"string"!==typeof E[0]&&"object"!==typeof E[0];)E.shift();if(1>E.length)U=!1;else{if(!ca||"string"!==typeof ca.valueOf())throw"No collector configured";U=!0;if(wa){var C=function(P){for(var fa=0,Fa=0;fa<P.length&&!(Fa+=P[fa].bytes,Fa>=k);)fa+=1;return fa},A=void 0;if(Ga(E)){A=ca;var w=J(A,!0,r);var K=C(E)}else A=ja(E[0]),w=J(A,!1,r),K=1;var S=setTimeout(function(){w.abort();U=!1},t),ia=function(P){for(var fa=
0;fa<P;fa++)E.shift();d&&Ya(ha,JSON.stringify(E.slice(0,q)))};w.onreadystatechange=function(){if(4===w.readyState&&200<=w.status)if(clearTimeout(S),300>w.status)ia(K),F();else{var P=w.status;P=200<=P&&300>P?!1:n.includes(P)?!0:!G.includes(P);P||(ba.error("Status ".concat(w.status,", will not retry.")),ia(K));U=!1}};if(Ga(E)){if(C=E.slice(0,K),0<C.length){r=!1;C=C.map(function(P){return P.evt});if(Za){var tb=new Blob([V(xa(C))],{type:"application/json"});try{r=navigator.sendBeacon(A,tb)}catch(P){r=
!1}}!0===r?(ia(K),F()):w.send(V(xa(C)))}}else w.send()}else if(x||Ga(E))U=!1;else{A=new Image(1,1);var ra=!0;A.onload=function(){ra&&(ra=!1,E.shift(),d&&Ya(ha,JSON.stringify(E.slice(0,q))),F())};A.onerror=function(){ra&&(U=ra=!1)};A.src=ja(E[0]);setTimeout(function(){ra&&U&&(ra=!1,F())},t)}}}function J(r,C,A){var w=new XMLHttpRequest;C?(w.open("POST",r,!A),w.setRequestHeader("Content-Type","application/json; charset=UTF-8")):w.open("GET",r,!A);w.withCredentials=l;x&&w.setRequestHeader("SP-Anonymous",
"*");for(var K in y)Object.prototype.hasOwnProperty.call(y,K)&&w.setRequestHeader(K,y[K]);return w}function V(r){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:r})}function xa(r){for(var C=(new Date).getTime().toString(),A=0;A<r.length;A++)r[A].stm=C;return r}function ja(r){return v?ca+r.replace("?","?stm="+(new Date).getTime()+"&"):ca+r}function ub(r){function C(w,K,S){return(S=S.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&
S.length?parseInt(S[0])<=w||parseInt(S[0])===w&&parseInt(S[1])<=K:!1}function A(w){return w.match("Version/.* Safari/")&&!w.match("Chrom(e|ium)")}return function(w,K){return(K=K.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&K.length?parseInt(K[0])<=w:!1}(13,r)||C(10,15,r)&&A(r)}var U=!1,ca,E=[];e="string"===typeof e?e.toLowerCase():e;var sa=!0===e||"beacon"===e||"true"===e,Za=!(!(sa&&window.navigator&&window.navigator.sendBeacon)||ub(window.navigator.userAgent))&&sa,wa=!!(window.XMLHttpRequest&&
"withCredentials"in new XMLHttpRequest),ya="get"!==e&&wa&&("post"===e||sa),Na=ya?h:"/i",ha="snowplowOutQueue_".concat(a,"_").concat(ya?"post2":"get");sa&&(y={});g=d&&jd()&&ya&&g||1;if(d)try{var Oa=window.localStorage.getItem(ha);E=Oa?JSON.parse(Oa):[]}catch(r){}Array.isArray(E)||(E=[]);b.outQueues.push(E);wa&&1<g&&b.bufferFlushers.push(function(r){U||F(r)});var Ga=function(r){return"object"===typeof r[0]};return{enqueueRequest:function(r,C){ca=C+Na;if(ya){r=T(r);if(r.bytes>=k){ba.warn("Event ("+r.bytes+
"B) too big, max is "+k);C=r;J(ca,!0,!1).send(V(xa([C.evt])));return}E.push(r)}else{var A="?";var w={co:!0,cx:!0},K=!0,S;for(S in r)r.hasOwnProperty(S)&&!w.hasOwnProperty(S)&&(K?K=!1:A+="&",A+=encodeURIComponent(S)+"="+encodeURIComponent(r[S]));for(var ia in w)r.hasOwnProperty(ia)&&w.hasOwnProperty(ia)&&(A+="&"+ia+"="+encodeURIComponent(r[ia]));if(0<p&&(w=ja(A),w=O(w),w>=p)){ba.warn("Event ("+w+"B) too big, max is "+p);wa&&(r=T(r),J(C+h,!0,!1).send(V(xa([r.evt]))));return}E.push(A)}C=!1;d&&(C=Ya(ha,
JSON.stringify(E.slice(0,q))));U||C&&!(E.length>=g)||F()},executeQueue:function(){U||F()},setUseLocalStorage:function(r){d=r},setAnonymousTracking:function(r){x=r},setCollectorUrl:function(r){ca=r+Na},setBufferSize:function(r){g=r},setCustomHeaders:function(r){y=r}}}function xc(a,b,d){if("translate.googleusercontent.com"===a)""===d&&(d=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?Ma("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=rb(b);else if("cc.bingj.com"===
a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=rb(b);return[a,b,d]}function md(a,b,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=pa.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(k,p){k=parseInt(k);return isNaN(k)?p:k};b=function(k){return k?g(k,void 0):void 0};return[a[0],
a[1],g(a[2],h),g(a[3],e),g(a[4],h),b(a[5]),a[6],a[7],a[8],b(a[9]),g(a[10],-1)]}function Pa(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=b;b=pa.v4();a[6]=b;a[10]=-1;a[8]="";a[9]=void 0;return b}function vb(a){a[4]=Math.round((new Date).getTime()/1E3)}function nd(a,b,d,e,h,g){function k(q){var t={cacheRefreshInterval:60,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},
convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{}};t.cacheRefreshInterval=q.cacheRefreshInterval;t.base64=q.configurationBundle[0].trackerConfiguration.base64Encoding;t.linkClickTracking=q.configurationBundle[0].trackerConfiguration.linkClickTracking;t.buttonClickTracking=q.configurationBundle[0].trackerConfiguration.buttonClickTracking;t.customEvent=q.configurationBundle[0].trackerConfiguration.customEvent;t.exceptionAutotracking=q.configurationBundle[0].trackerConfiguration.exceptionAutotracking;
t.enablePeriodicHeartbeat=q.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;t.periodicHeartbeatInterval=q.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;t.customEventTrackingConfiguration=q.configurationBundle[0].customEventTrackingConfiguration;t.convivaVideoEventTrackingConfiguration=q.configurationBundle[0].convivaVideoEventTrackingConfiguration;t.ajaxTrackingConfiguration=q.configurationBundle[0].ajaxTrackingConfiguration;t.ajaxTrackingConfiguration&&
(t.ajaxTrackingConfiguration.blocklist.push(q.configurationBundle[0].networkConfiguration.endpoint),t.ajaxTrackingConfiguration.blocklist.push("wsg"),t.ajaxTrackingConfiguration.blocklist.push("remote_config"));v.setCollectorUrl(q.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(t)),localStorage.setItem("ConvivaEndpoint",q.configurationBundle[0].networkConfiguration.endpoint));
v.core.setConfig(t)}void 0===g&&(g={});var p=[];a=function(q,t,x,y,l,n){function G(){za=xc(window.location.hostname,window.location.href,sb());za[1]!==ta&&(Qa=sb(ta));yc=vc(za[0]);ta=za[1]}function T(c){var f=(new Date).getTime();c=c.currentTarget;if(null===c||void 0===c?0:c.href){f="_sp="+($a+"."+f);var m=c.href.split("#"),u=m[0].split("?"),B=u.shift();if(u=u.join("?")){for(var H=!0,N=u.split("&"),Q=0;Q<N.length;Q++)if("_sp="===N[Q].substr(0,4)){H=!1;N[Q]=f;u=N.join("&");break}H&&(u=f+"&"+u)}else u=
f;m[0]=B+"?"+u;f=m.join("#");c.href=f}}function O(c){for(var f=0;f<document.links.length;f++){var m=document.links[f];!m.spDecorationEnabled&&c(m)&&(qa(m,"click",T,!0),qa(m,"mousedown",T,!0),m.spDecorationEnabled=!0)}}function F(c){if(zc){var f=/#.*/;c=c.replace(f,"")}Ac&&(f=/[{}]/g,c=c.replace(f,""));return c}function J(c){return(c=/^([a-z]+):/.exec(c))?c[1]:null}function V(c){c=Ha+c+"."+Aa;if("localStorage"==M){try{var f=window.localStorage,m=f.getItem(c+".expires");if(null===m||+m>Date.now())var u=
f.getItem(c);else f.removeItem(c),f.removeItem(c+".expires"),u=void 0}catch(B){u=void 0}return u}if("cookie"==M||"cookieAndLocalStorage"==M)return ea(c)}function xa(){G();Aa=od((Ra||yc)+(wb||"/")).slice(0,4)}function ja(){xb=(new Date).getTime()}function ub(){var c=U(),f=c[0];f<ab?ab=f:f>bb&&(bb=f);c=c[1];c<cb?cb=c:c>db&&(db=c);ja()}function U(){var c=document.documentElement;return c?[c.scrollLeft||window.pageXOffset,c.scrollTop||window.pageYOffset]:[0,0]}function ca(){var c=U(),f=c[0];bb=ab=f;db=
cb=c=c[1]}function E(){Za(Ha+"ses."+Aa,"*",Bc)}function sa(c){var f=Ha+"id."+Aa;c.shift();c=c.join(".");Za(f,c,Cc)}function Za(c,f,m){if(!ka||Ba)"localStorage"==M?Ya(c,f,m):("cookie"==M||"cookieAndLocalStorage"==M)&&ea(c,f,m,wb,Ra,eb,fb)}function wa(c){var f=Ha+"id."+Aa,m=Ha+"ses."+Aa;wc(f);wc(m);ea(f,"",-1,"/",Ra,eb,fb);ea(m,"",-1,"/",Ra,eb,fb);null!==c&&void 0!==c&&c.preserveSession||(la=pa.v4(),Y=1);null!==c&&void 0!==c&&c.preserveUser||($a=pa.v4(),Ca=null)}function ya(c){c&&c.stateStorageStrategy&&
(n.stateStorageStrategy=c.stateStorageStrategy,M=Dc(n));ka=!!n.anonymousTracking;Ba=Ec(n);yb=Fc(n);ua.setUseLocalStorage("localStorage"==M||"cookieAndLocalStorage"==M);ua.setAnonymousTracking(yb)}function Na(){try{var c=window.localStorage.getItem(Gc+"."+Hc),f=JSON.parse(c||"{}");"{}"===f||"undefined"===typeof f?(gb=w(),hb=K(),Da=-1):(gb=f.clId||w(),Da=f.eventIndex&&2147483648>f.eventIndex?f.eventIndex:-1,hb=K());A()}catch(u){console.warn(u)}if(!ka||Ba){c="none"!=M&&!!V("ses");f=ha();if(f[1])var m=
f[1];else m=ka?"":pa.v4(),f[1]=m;$a=m;la=c?f[6]:Pa(f);Y=f[3];"none"!=M&&(E(),vb(f),sa(f))}}function ha(){if("none"==M)return["1","",0,0,0,void 0,"","","",void 0,0];var c=V("id")||void 0;return md(c,$a,la,Y)}function Oa(c){return 0===c.indexOf("http")?c:("https:"===document.location.protocol?"https":"http")+"://"+c}function Ga(){Ic&&null!=l.pageViewId||(l.pageViewId=pa.v4())}function r(){null==l.pageViewId&&(l.pageViewId=pa.v4());return l.pageViewId}function C(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",
data:{id:r()}}]}}}function A(){try{var c=window.localStorage,f={clId:gb,iid:hb,eventIndex:Da},m=null;try{m=JSON.stringify(f)}catch(u){return}return c.setItem(Gc+"."+Hc,m)}catch(u){}}function w(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(c){console.warn(c)}}function K(){try{return Math.floor(2147483647*Math.random())}catch(c){return console.warn(c),
-1}}function S(c){try{var f=Object.keys(c);pd(JSON.stringify(c))?f.forEach(function(m){""!==m&&Object.defineProperty(zb,m,{value:""+c[m],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(m){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",m)}}function ia(c){try{c.forEach(function(f){delete zb[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}
function tb(c){var f=c.title,m=c.context,u=c.timestamp;c=c.contextCallback;G();Jc&&Ga();Jc=!0;Ia=document.title;Sa=f;f=uc(Sa||Ia);Z.track(id({pageUrl:F(Ja||ta),pageTitle:f,referrer:F(ib||Qa)}),(m||[]).concat(c?c():[]),u);u=new Date;f=!1;if(aa.enabled&&!aa.installed){f=aa.installed=!0;var B={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var N=!1,Q=Object.defineProperty({},"passive",{get:function(){N=!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",
W,Q);window.removeEventListener("testPassiveEventSupport",W,Q);B.hasSupport=N}}};B.update();var H="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(B,"hasSupport")?qa(document,H,ja,{passive:!0}):qa(document,H,ja);ca();H=function(N,Q){void 0===Q&&(Q=ja);return function(W){return qa(document,W,Q)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(H(document));["resize","focus",
"blur"].forEach(H(window));H(window,ub)("scroll")}if(aa.enabled&&(qd||f))for(u in xb=u.getTime(),u=void 0,aa.configurations)if(f=aa.configurations[u])window.clearInterval(f.activityInterval),ra(f,m,c)}function ra(c,f,m){var u=function(N,Q){G();var W=v.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&(W=1E3*W.periodicHeartbeatInterval,W!=c.configHeartBeatTimer&&(window.clearInterval(c.activityInterval),c.activityInterval=window.setInterval(H,W))):window.clearInterval(c.activityInterval);
N({context:Q,pageViewId:r(),minXOffset:ab,minYOffset:cb,maxXOffset:bb,maxYOffset:db});ca()},B=new Date;window.setTimeout(function(){u(c.callback,(f||[]).concat(m?m():[]))},2E3);var H=function(){var N=new Date;if(B.getTime()+c.configHeartBeatTimer>N.getTime()||xb+c.configHeartBeatTimer>N.getTime())B=N,u(c.callback,(f||[]).concat(m?m():[]))};c.activityInterval=window.setInterval(H,c.configHeartBeatTimer)}function P(c){var f=c.minimumVisitLength,m=c.heartbeatDelay;c=c.callback;if(tc(f)&&tc(m))return{configMinimumVisitLength:1E3*
f,configHeartBeatTimer:1E3*m,callback:c};ba.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function fa(c){var f=c.context,m=c.minXOffset,u=c.minYOffset,B=c.maxXOffset,H=c.maxYOffset;c=document.title;c!==Ia&&(Ia=c,Sa=void 0);c=Z;var N=c.track,Q=F(Ja||ta),W=uc(Sa||Ia),rd=F(ib||Qa);m=Math.round(m);B=Math.round(B);u=Math.round(u);H=Math.round(H);var ma=Ua();ma.add("e","pp");ma.add("url",Q);ma.add("page",W);ma.add("refr",rd);m&&!isNaN(Number(m))&&ma.add("pp_mix",m.toString());
B&&!isNaN(Number(B))&&ma.add("pp_max",B.toString());u&&!isNaN(Number(u))&&ma.add("pp_miy",u.toString());H&&!isNaN(Number(H))&&ma.add("pp_may",H.toString());N.call(c,ma,f)}var Fa,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,I={cacheRefreshInterval:60,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},
ajaxTrackingConfiguration:{blocklist:["*"]}};if(window.localStorage){var Kc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(I);var $b=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else $b="https://appgw.conviva.com",Kc=JSON.stringify(I);y=n.gatewayUrl?n.gatewayUrl:$b?$b:"https://appgw.conviva.com";t||(t="CAT");var L=JSON.parse(Kc);"undefined"!=typeof L.base64&&(I.base64=L.base64);"undefined"!=
typeof L.cacheRefreshInterval&&(I.cacheRefreshInterval=L.cacheRefreshInterval);"undefined"!=typeof L.linkClickTracking&&(I.linkClickTracking=L.linkClickTracking);"undefined"!=typeof L.buttonClickTracking&&(I.buttonClickTracking=L.buttonClickTracking);"undefined"!=typeof L.exceptionAutotracking&&(I.exceptionAutotracking=L.exceptionAutotracking);"undefined"!=typeof L.enablePeriodicHeartbeat&&(I.enablePeriodicHeartbeat=L.enablePeriodicHeartbeat);"undefined"!=typeof L.periodicHeartbeatInterval&&(I.periodicHeartbeatInterval=
L.periodicHeartbeatInterval);"undefined"!=typeof L.customEventTrackingConfiguration&&(I.customEventTrackingConfiguration=L.customEventTrackingConfiguration);"undefined"!=typeof L.convivaVideoEventTrackingConfiguration&&(I.convivaVideoEventTrackingConfiguration=L.convivaVideoEventTrackingConfiguration);"undefined"!=typeof L.ajaxTrackingConfiguration&&(I.ajaxTrackingConfiguration=L.ajaxTrackingConfiguration);if(window.XMLHttpRequest){var Ka=new XMLHttpRequest;Ka.onreadystatechange=function(){if(4==
Ka.readyState)if(200==Ka.status){var c=JSON.parse(Ka.response);k(c)}else try{var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){var m=JSON.parse(f.response);k(m)}else try{var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){var B=JSON.parse(u.response);k(B)}};u.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0);u.send()}catch(B){}};f.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+sd._convivaCustomerKey+
"/remote_config.json",!0);f.send()}catch(m){}};var jb=function(c){try{Ka.open("GET",c,!0),Ka.send()}catch(f){}};if(n.trackerConfigUrl)jb(n.trackerConfigUrl),window.setInterval(jb,6E4*I.cacheRefreshInterval,n.trackerConfigUrl);else{var sd={_platform:"js",_convivaVersion:x,_convivaCustomerKey:n.convivaCustomerKey},Lc="https://drt1fhpy4haqm.cloudfront.net/js/"+n.convivaCustomerKey+"/"+x+"/remote_config.json";jb(Lc);window.setInterval(jb,6E4*I.cacheRefreshInterval,Lc)}}n.eventMethod=null!==(Fa=n.eventMethod)&&
void 0!==Fa?Fa:"post";var Dc=function(c){var f;return null!==(f=c.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},Ec=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==m?m:!1},Fc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withServerAnonymisation))&&void 0!==m?m:!1};p.push(function(){return{beforeTrack:function(c){var f=
V("ses"),m=ha();ac=bc?!!ea(bc):!1;if(Mc||ac)wa();else{"0"===m[0]?(la=f||"none"==M?m[6]:Pa(m),Y=m[3]):(new Date).getTime()-cc>1E3*Bc&&(Y++,la=Pa(m,Y));vb(m);-1===m[10]&&(f=c.build(),m[8]=f.eid,f=f.dtm||f.ttm,m[9]=f?parseInt(f):void 0);m[10]+=1;f=c.add;if("innerWidth"in window){var u=window.innerWidth;var B=window.innerHeight}else B=document.documentElement||document.body,u=B.clientWidth,B=B.clientHeight;f.call(c,"vp",0<=u&&0<=B?u+"x"+B:null);f=c.add;B=document.documentElement;var H=document.body;u=
Math.max(B.clientWidth,B.offsetWidth,B.scrollWidth);B=Math.max(B.clientHeight,B.offsetHeight,B.scrollHeight,H?Math.max(H.offsetHeight,H.scrollHeight):0);u=isNaN(u)||isNaN(B)?"":u+"x"+B;f.call(c,"ds",u);c.add("vid",Ba?Y:ka?null:Y);c.add("sid",Ba?la:ka?null:la);c.add("duid",ka?null:m[1]);c.add("uid",ka?null:Ca);G();c.add("refr",F(ib||Qa));document&&c.add("page",document.title);c.add("url",F(Ja||ta));!td||Ba||ka||(f=m[9],f={userId:m[1],sessionId:m[6],eventIndex:m[10],sessionIndex:m[3],previousSessionId:m[7]||
null,storageMechanism:"localStorage"==M?"LOCAL_STORAGE":"COOKIE_1",firstEventId:m[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():null},c.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:f}));"none"!=M&&(sa(m),E());cc=(new Date).getTime()}}}}());(null!==(Bb=null===(Ab=null===n||void 0===n?void 0:n.contexts)||void 0===Ab?void 0:Ab.webPage)&&void 0!==Bb?Bb:1)&&p.push(C());p.push(function(){return{contexts:function(){var c=gb,f=hb.toString(),
m=ud;2147483647<=Da?Da=0:Da++;A();c={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-2",data:{clid:c,iid:f,ck:m,eventIndex:Da}};f={eventIndex:vd++};null!=dc&&(f.previousEventTimestamp=dc);dc=(new Date).toISOString();return[c,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());p.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:zb}}]}}}());p.push.apply(p,null!==(Cb=n.plugins)&&void 0!==Cb?Cb:[]);var Z=hd({base64:I.base64,
corePlugins:p,callback:function(c){Mc||ac||ua.enqueueRequest(c.build(),ec)},linkClickTracking:I.linkClickTracking,buttonClickTracking:I.buttonClickTracking,customEvent:!0,exceptionAutotracking:I.exceptionAutotracking,enablePeriodicHeartbeat:I.enablePeriodicHeartbeat,periodicHeartbeatInterval:I.periodicHeartbeatInterval,customEventTrackingConfiguration:I.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:I.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:I.ajaxTrackingConfiguration}),
wd=navigator.userLanguage||navigator.language,xd=document.characterSet||document.charset,za=xc(window.location.hostname,window.location.href,sb()),yc=vc(za[0]),ta=za[1],Qa=za[2],ib,yd=null!==(Db=n.platform)&&void 0!==Db?Db:"web",ec=Oa(y),zd=null!==(Eb=n.postPath)&&void 0!==Eb?Eb:"/"+n.convivaCustomerKey+"/ctp",Ad=null!==(Fb=n.appId)&&void 0!==Fb?Fb:"",ud=null!==(Gb=n.convivaCustomerKey)&&void 0!==Gb?Gb:"",Ja,zb={},Ia=document.title,Sa,qd=null!==(Hb=n.resetActivityTrackingOnPageView)&&void 0!==Hb?
Hb:!0,zc,Ac,Ha=null!==(Ib=n.cookieName)&&void 0!==Ib?Ib:"_sp_",Ra=null!==(Jb=n.cookieDomain)&&void 0!==Jb?Jb:void 0,wb="/",eb=null!==(Kb=n.cookieSameSite)&&void 0!==Kb?Kb:"None",fb=null!==(Lb=n.cookieSecure)&&void 0!==Lb?Lb:!0,Nc=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Mc="undefined"!==typeof n.respectDoNotTrack?n.respectDoNotTrack&&("yes"===Nc||"1"===Nc):!1,bc,Cc=null!==(Mb=n.cookieLifetime)&&void 0!==Mb?Mb:63072E3,Bc=null!==(Nb=n.sessionCookieTimeout)&&void 0!==Nb?Nb:1800,
Ba=Ec(n),yb=Fc(n),ka=!!n.anonymousTracking,M=Dc(n),Gc="Conviva",Hc="sdkConfig",gb,hb,Da=-1,vd=0,xb,cc=(new Date).getTime(),ab,bb,cb,db,Aa,$a,la,Y=1,Ca,ua=ld(q,l,"localStorage"==M||"cookieAndLocalStorage"==M,n.eventMethod,zd,null!==(Ob=n.bufferSize)&&void 0!==Ob?Ob:1,null!==(Pb=n.maxPostBytes)&&void 0!==Pb?Pb:4E4,null!==(Qb=n.maxGetBytes)&&void 0!==Qb?Qb:0,null!==(Rb=n.useStm)&&void 0!==Rb?Rb:!0,null!==(Sb=n.maxLocalStorageQueueSize)&&void 0!==Sb?Sb:1E3,null!==(Tb=n.connectionTimeout)&&void 0!==Tb?
Tb:5E3,yb,null!==(Ub=n.customHeaders)&&void 0!==Ub?Ub:{},null!==(Vb=n.withCredentials)&&void 0!==Vb?Vb:!0,null!==(Wb=n.retryStatusCodes)&&void 0!==Wb?Wb:[],(null!==(Xb=n.dontRetryStatusCodes)&&void 0!==Xb?Xb:[]).concat([400,401,403,410,422])),Ic=!1,dc,Jc=!1,aa={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:fa}}},td=null!==(Zb=null===(Yb=n.contexts)||void 0===Yb?void 0:Yb.session)&&void 0!==Zb?Zb:!1,ac;n.hasOwnProperty("discoverRootDomain")&&
n.discoverRootDomain&&(Ra=kd(eb,fb));Z.setTrackerVersion(x);Z.setTrackerNamespace(t);Z.setAppId(Ad);Z.setPlatform(yd);Z.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0");Z.addPayloadPair("cs",xd);Z.addPayloadPair("lang",wd);Z.addPayloadPair("res",screen.width+"x"+screen.height);Z.addPayloadPair("cd",screen.colorDepth);xa();Na();n.crossDomainLinker&&O(n.crossDomainLinker);var pd=function(c){try{return"object"===typeof JSON.parse(c)}catch(f){return!1}};return da(da({},{getDomainSessionIndex:function(){return Y},
getPageViewId:function(){return r()},newSession:function(){var c=ha();"0"===c[0]?(la="none"!=M?Pa(c):c[6],Y=c[3],E()):(Y++,la=Pa(c,Y));vb(c);"none"!=M&&(sa(c),E());cc=(new Date).getTime()},getCookieName:function(c){return Ha+c+"."+Aa},getUserId:function(){return Ca},getDomainUserId:function(){return ha()[1]},getDomainUserInfo:function(){return ha()},setReferrerUrl:function(c){ib=c},setCustomUrl:function(c){G();var f=ta,m;J(c)?Ja=c:"/"===c.slice(0,1)?Ja=J(f)+"://"+rb(f)+c:(f=F(f),0<=(m=f.indexOf("?"))&&
(f=f.slice(0,m)),(m=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,m+1)),Ja=f+c)},setDocumentTitle:function(c){Ia=document.title;Sa=c},discardHashTag:function(c){zc=c},discardBrace:function(c){Ac=c},setCookiePath:function(c){wb=c;xa()},setVisitorCookieTimeout:function(c){Cc=c},crossDomainLinker:function(c){O(c)},enableActivityTracking:function(c){aa.configurations.pagePing||(aa.enabled=!0,aa.configurations.pagePing=P(da(da({},c),{callback:fa})))},enableActivityTrackingCallback:function(c){aa.configurations.callback||
(aa.enabled=!0,aa.configurations.callback=P(c))},updatePageActivity:function(){ja()},setOptOutCookie:function(c){bc=c},setUserId:function(c){Ca=c},setUserIdFromLocation:function(c){G();Ca=Ma(c,ta)},setUserIdFromReferrer:function(c){G();Ca=Ma(c,Qa)},setUserIdFromCookie:function(c){Ca=ea(c)},setCollectorUrl:function(c){ec=Oa(c);ua.setCollectorUrl(ec)},setBufferSize:function(c){ua.setBufferSize(c)},flushBuffer:function(c){void 0===c&&(c={});ua.executeQueue();c.newBufferSize&&ua.setBufferSize(c.newBufferSize)},
trackPageView:function(c){void 0===c&&(c={});tb(c)},trackVideoEvent:function(c){void 0===c&&(c={});try{var f=this.core.getConfig();""!=c.name&&void 0!=c.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var m=f.convivaVideoEventTrackingConfiguration.blocklist;-1==m.indexOf("*")&&
-1==m.indexOf(""+c.name)&&this.core.track(qb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}else this.core.track(qb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,
oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp);else this.core.track(qb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}catch(u){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",u)}},trackAjaxEvent:function(c){void 0===
c&&(c={});try{if("xmlhttprequest"===c.initiatorType){var f=this.core.getConfig();if(""==c.name||void 0==c.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(void 0!=f.ajaxTrackingConfiguration&&void 0!=f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var m=f.ajaxTrackingConfiguration.blocklist;if(-1==m.indexOf("*")){f=!1;for(var u=0;u<m.length;u++)""!==m[u]&&-1!==c.name.indexOf(m[u])&&(f=!0);if(!f){var B=
this.core,H=B.track;var N=Xa({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:pb({targetUrl:c.name,webResourceTiming:c,duration:c.duration})}});H.call(B,N,c.context,c.timestamp)}}}}}catch(Q){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",Q)}},setCustomTags:function(c){void 0===c&&(c={});S(c)},unsetCustomTags:function(c){void 0===c&&(c={});ia(c)},preservePageViewId:function(){Ic=!0},disableAnonymousTracking:function(c){n.anonymousTracking=
!1;ya(c);Na();ua.executeQueue()},enableAnonymousTracking:function(c){var f;n.anonymousTracking=null!==(f=c&&(null===c||void 0===c?void 0:c.options))&&void 0!==f?f:!0;ya(c);Ba||Ga()},clearUserData:wa}),{id:q,namespace:t,core:Z,sharedState:l})}(a,b,d,e,h,g);var v=da(da({},a),{addPlugin:function(q){var t,x;v.core.addPlugin(q);null===(x=(t=q.plugin).activateBrowserPlugin)||void 0===x?void 0:x.call(t,v)}});p.forEach(function(q){var t;null===(t=q.activateBrowserPlugin)||void 0===t?void 0:t.call(q,v)});
return v}function D(a,b){try{var d=null!==a&&void 0!==a?a:Object.keys(Ta);a=Ta;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):ba.warn(g+" not configured")}e.forEach(b)}catch(k){ba.error("Function failed",k)}}function Oc(a,b,d,e,h,g){return Ta.hasOwnProperty(a)?null:(Ta[a]=nd(a,b,d,e,h,g),Ta[a])}function Bd(){function a(){"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(k){k(!1)})}function b(){var k;if(!e.hasLoaded)for(e.hasLoaded=!0,k=0;k<e.registeredOnLoadHandlers.length;k++)e.registeredOnLoadHandlers[k]();
return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function p(){h.removeEventListener("DOMContentLoaded",p,!1);b()}):h.attachEvent&&h.attachEvent("onreadystatechange",function v(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",v),b())});qa(g,"load",b,!1)}var e=new Cd,h=document,g=window;h.visibilityState&&qa(h,"visibilitychange",a,!1);qa(g,"beforeunload",function(){e.bufferFlushers.forEach(function(k){k(!1)})},!1);"loading"===document.readyState?d():b();
return e}var da=function(){da=Object.assign||function(a){for(var b,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h])}return a};return da.apply(this,arguments)},va={},Pc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Pc){var Qc=new Uint8Array(16);va=function(){Pc(Qc);
return Qc}}else{var Rc=Array(16);va=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Rc[a]=b>>>((a&3)<<3)&255;return Rc}}for(var R=[],kb=0;256>kb;++kb)R[kb]=(kb+256).toString(16).substr(1);var Sc=function(a,b){b=b||0;return[R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]]].join("")},Dd=va,Tc,fc,gc=0,hc=0,Ed=va;va=function(a,b,d){d=b&&d||0;"string"==
typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Ed)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[d+e]=a[e];return b||Sc(a)};va.v1=function(a,b,d){d=b&&d||0;var e=b||[];a=a||{};var h=a.node||Tc,g=void 0!==a.clockseq?a.clockseq:fc;if(null==h||null==g){var k=Dd();null==h&&(h=Tc=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]);null==g&&(g=fc=(k[6]<<8|k[7])&16383)}k=void 0!==a.msecs?a.msecs:(new Date).getTime();var p=void 0!==a.nsecs?a.nsecs:hc+1,v=k-gc+(p-hc)/1E4;0>v&&
void 0===a.clockseq&&(g=g+1&16383);(0>v||k>gc)&&void 0===a.nsecs&&(p=0);if(1E4<=p)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");gc=k;hc=p;fc=g;k+=122192928E5;a=(1E4*(k&268435455)+p)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=k/4294967296*1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>g;++g)e[d+g]=h[g];return b?b:Sc(e)};var pa=va.v4=va,oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
na;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(na||(na={}));var ba=function(a){void 0===a&&(a=na.warn);return{setLogLevel:function(b){a=na[b]?b:na.warn},warn:function(b,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=na.warn&&"undefined"!==typeof console&&(h="Snowplow: "+b,d?console.warn.apply(console,X([h+"\n",d],e,!1)):console.warn.apply(console,X([h],e,!1)))},error:function(b,d){for(var e=[],h=2;h<arguments.length;h++)e[h-
2]=arguments[h];a>=na.error&&"undefined"!==typeof console&&(h="Snowplow: "+b+"\n",d?console.error.apply(console,X([h+"\n",d],e,!1)):console.error.apply(console,X([h],e,!1)))},debug:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=na.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+b],d,!1))},info:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=na.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+
b],d,!1))}}}(),Uc={},Vc={};(function(){var a={rotl:function(b,d){return b<<d|b>>>32-d},rotr:function(b,d){return b<<32-d|b>>>d},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var d=0;d<b.length;d++)b[d]=a.endian(b[d]);return b},randomBytes:function(b){for(var d=[];0<b;b--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(b){for(var d=[],e=0,h=0;e<b.length;e++,h+=8)d[h>>>5]|=b[e]<<24-h%32;return d},wordsToBytes:function(b){for(var d=
[],e=0;e<32*b.length;e+=8)d.push(b[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(b){for(var d=[],e=0;e<b.length;e++)d.push((b[e]>>>4).toString(16)),d.push((b[e]&15).toString(16));return d.join("")},hexToBytes:function(b){for(var d=[],e=0;e<b.length;e+=2)d.push(parseInt(b.substr(e,2),16));return d},bytesToBase64:function(b){for(var d=[],e=0;e<b.length;e+=3)for(var h=b[e]<<16|b[e+1]<<8|b[e+2],g=0;4>g;g++)8*e+6*g<=8*b.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>
6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,h=0;e<b.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>6-2*h);return d}};Vc=a})();var ic={utf8:{stringToBytes:function(a){return ic.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(ic.bin.bytesToString(a)))}},
bin:{stringToBytes:function(a){for(var b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d)&255);return b},bytesToString:function(a){for(var b=[],d=0;d<a.length;d++)b.push(String.fromCharCode(a[d]));return b.join("")}}},Wc=ic;(function(){var a=Vc,b=Wc.utf8,d=Wc.bin,e=function(h,g){var k=a.wordsToBytes,p=h;p.constructor==String?p=b.stringToBytes(p):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(p)?p=Array.prototype.slice.call(p,0):Array.isArray(p)||(p=p.toString());h=a.bytesToWords(p);
var v=8*p.length;p=[];var q=1732584193,t=-271733879,x=-1732584194,y=271733878,l=-1009589776;h[v>>5]|=128<<24-v%32;h[(v+64>>>9<<4)+15]=v;for(v=0;v<h.length;v+=16){for(var n=q,G=t,T=x,O=y,F=l,J=0;80>J;J++){if(16>J)p[J]=h[v+J];else{var V=p[J-3]^p[J-8]^p[J-14]^p[J-16];p[J]=V<<1|V>>>31}V=(q<<5|q>>>27)+l+(p[J]>>>0)+(20>J?(t&x|~t&y)+1518500249:40>J?(t^x^y)+1859775393:60>J?(t&x|t&y|x&y)-1894007588:(t^x^y)-899497514);l=y;y=x;x=t<<30|t>>>2;t=q;q=V}q+=n;t+=G;x+=T;y+=O;l+=F}k=k.call(a,[q,t,x,y,l]);return g&&
g.asBytes?k:g&&g.asString?d.bytesToString(k):a.bytesToHex(k)};e._blocksize=16;e._digestsize=20;Uc=e})();var od=Uc,Ta={},Cd=function(){return function(){this.outQueues=[];this.bufferFlushers=[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),lb="undefined"!==typeof window?Bd():void 0;z.addGlobalContexts=function(a,b){D(b,function(d){d.core.addGlobalContexts(a)})};z.addPlugin=function(a,b){D(b,function(d){d.addPlugin(a)})};z.clearGlobalContexts=function(a){D(a,function(b){b.core.clearGlobalContexts()})};
z.clearUserData=function(a,b){D(b,function(d){d.clearUserData(a)})};z.convivaAppTracker=function(a){void 0===a&&(a={});if(lb){var b=Oc("CAT","CAT","js-".concat("0.3.17"),"",lb,a);document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&b&&b.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){b&&b.trackAjaxEvent(e)})})).observe({type:"resource",buffered:!0});return b}};z.crossDomainLinker=function(a,
b){D(b,function(d){d.crossDomainLinker(a)})};z.disableAnonymousTracking=function(a,b){D(b,function(d){d.disableAnonymousTracking(a)})};z.discardBrace=function(a,b){D(b,function(d){d.discardBrace(a)})};z.discardHashTag=function(a,b){D(b,function(d){d.discardHashTag(a)})};z.enableActivityTracking=function(a,b){D(b,function(d){d.enableActivityTracking(a)})};z.enableActivityTrackingCallback=function(a,b){D(b,function(d){d.enableActivityTrackingCallback(a)})};z.enableAnonymousTracking=function(a,b){D(b,
function(d){d.enableAnonymousTracking(a)})};z.flushBuffer=function(a,b){D(b,function(d){d.flushBuffer(a)})};z.newSession=function(a){D(a,function(b){b.newSession()})};z.newTracker=function(a,b,d){void 0===d&&(d={});if(lb)return Oc(a,a,"js-".concat("0.3.17"),b,lb,d)};z.preservePageViewId=function(a){D(a,function(b){b.preservePageViewId()})};z.removeGlobalContexts=function(a,b){D(b,function(d){d.core.removeGlobalContexts(a)})};z.setBufferSize=function(a,b){D(b,function(d){d.setBufferSize(a)})};z.setCollectorUrl=
function(a,b){D(b,function(d){d.setCollectorUrl(a)})};z.setCookiePath=function(a,b){D(b,function(d){d.setCookiePath(a)})};z.setCustomTags=function(a,b){D(b,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};z.setCustomUrl=function(a,b){D(b,function(d){d.setCustomUrl(a)})};z.setDocumentTitle=function(a,b){D(b,function(d){d.setDocumentTitle(a)})};z.setOptOutCookie=function(a,b){D(b,function(d){d.setOptOutCookie(a)})};z.setReferrerUrl=
function(a,b){D(b,function(d){d.setReferrerUrl(a)})};z.setUserId=function(a,b){D(b,function(d){d.setUserId(a)})};z.setUserIdFromCookie=function(a,b){D(b,function(d){d.setUserIdFromCookie(a)})};z.setUserIdFromLocation=function(a,b){D(b,function(d){d.setUserIdFromLocation(a)})};z.setUserIdFromReferrer=function(a,b){D(b,function(d){d.setUserIdFromReferrer(a)})};z.setVisitorCookieTimeout=function(a,b){D(b,function(d){d.setVisitorCookieTimeout(a)})};z.trackCustomEvent=function(a,b){D(b,function(d){var e=
d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(h){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,
-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&d.core.track(ob({name:a.name,data:a.data}),a.context,a.timestamp)):d.core.track(ob({name:a.name,data:a.data}),a.context,a.timestamp):d.core.track(ob({name:a.name,data:a.data}),a.context,a.timestamp)})};z.trackPageView=function(a,b){D(b,function(d){d.trackPageView(a)})};z.trackSelfDescribingEvent=function(a,b){D(b,function(d){d.core.track(Xa({event:a.event}),a.context,a.timestamp)})};z.trackStructEvent=function(a,b){D(b,function(d){d=d.core;var e=d.track,
h=a.category,g=a.action,k=a.label,p=a.property,v=a.value,q=Ua();q.add("e","se");q.add("se_ca",h);q.add("se_ac",g);q.add("se_la",k);q.add("se_pr",p);q.add("se_va",null==v?void 0:v.toString());e.call(d,q,a.context,a.timestamp)})};z.unsetCustomTags=function(a,b){D(b,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};z.updatePageActivity=function(a){D(a,function(b){b.updatePageActivity()})};z.version="0.3.17";Object.defineProperty(z,
"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
