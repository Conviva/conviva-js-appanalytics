/*!
 * Browser tracker for Snowplow v0.3.14 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(w,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(w="undefined"!==typeof globalThis?globalThis:w||self,X(w.snowplowBrowserTracking={}))})(this,function(w){function X(a,b,d){if(d||2===arguments.length)for(var e=0,h=b.length,g;e<h;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return a.concat(g||Array.prototype.slice.call(b))}function Sc(a){var b=0,d=0;var e="";var h=[];if(!a)return a;
a+="";do{var g=oa.indexOf(a.charAt(b++));var l=oa.indexOf(a.charAt(b++));e=oa.indexOf(a.charAt(b++));var n=oa.indexOf(a.charAt(b++));var r=g<<18|l<<12|e<<6|n;g=r>>16&255;l=r>>8&255;r&=255;64===e?h[d++]=String.fromCharCode(g):64===n?h[d++]=String.fromCharCode(g,l):h[d++]=String.fromCharCode(g,l,r)}while(b<a.length);e=h.join("");return function(p){return decodeURIComponent(p.split("").map(function(A){return"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Ua(){var a=
{},b=[],d=[],e=[],h,g=function(l,n){null!=n&&""!==n&&(a[l]=n)};return{add:g,addDict:function(l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&g(n,l[n])},addJson:function(l,n,r){r&&gc(r)&&(l={keyIfEncoded:l,keyIfNotEncoded:n,json:r},d.push(l),b.push(l))},addContextEntity:function(l){e.push(l)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(l){h=l},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function Tc(a){return function(b,
d,e){for(var h=function(p,A,x){p=JSON.stringify(p);if(a){x=b.add;if(p){var u=0,k=0,y=[];if(p){p=unescape(encodeURIComponent(p));do{var J=p.charCodeAt(u++);var T=p.charCodeAt(u++);var H=p.charCodeAt(u++);var I=J<<16|T<<8|H;J=I>>18&63;T=I>>12&63;H=I>>6&63;I&=63;y[k++]=oa.charAt(J)+oa.charAt(T)+oa.charAt(H)+oa.charAt(I)}while(u<p.length);u=y.join("");p=p.length%3;p=(p?u.slice(0,p-3):u)+"===".slice(p||3)}p=p.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}x.call(b,A,p)}else b.add(x,p)},g=function(p,
A){if(!p){var x=b.getPayload();if(a?x.cx:x.co){p=JSON;var u=p.parse;if(a){if(x=x.cx){switch(4-x.length%4){case 2:x+="==";break;case 3:x+="="}x=x.replace(/-/g,"+").replace(/_/g,"/");x=Sc(x)}}else x=x.co;p=u.call(p,x)}else p=void 0}p?p.data=p.data.concat(A.data):p=A;return p},l=void 0,n=0;n<d.length;n++){var r=d[n];"cx"===r.keyIfEncoded?l=g(l,r.json):h(r.json,r.keyIfEncoded,r.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},l=g(l,d),e.length=0);l&&h(l,"cx","co")}}function gc(a){if(!hc(a))return!1;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function hc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function Uc(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var l=d[g];ic(l)?e.push(l):Ga(l)&&h.push(l)}a=
a.concat(h);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){ic(g)?b=b.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}):Ga(g)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==typeof g)){e=
g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var l=nb(a,d,g,e);h.push.apply(h,l);d=Vc(b,d,g,e);h.push.apply(h,d);return h}}}function Wc(a){return{addPluginContexts:function(b){var d=b?X([],b,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){ca.error("Error adding plugin contexts",h)}});return d}}}function Xc(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])b=!0;else if(b)return!1;
return!0}return 2==a.length?!0:!1}function jc(a){return(a=a.split("."))&&1<a.length?Xc(a):!1}function kc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&jc(a[1]))return a.slice(1,6)}function ob(a){if(a=kc(a)){var b=a[0];return 5===a.length&&jc(b)}return!1}function Yc(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function lc(a){return Yc(a)?a.every(function(b){return ob(b)}):
"string"===typeof a?ob(a):!1}function La(a){return gc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function Zc(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(lc(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(lc(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Va(a){return"function"===typeof a&&1>=a.length}function Ga(a){return Va(a)||La(a)}
function mc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Va(a[0])&&a[1].every(Ga):Va(a[0])&&Ga(a[1]):!1}function nc(a){return Array.isArray(a)&&2===a.length?Zc(a[0])?Array.isArray(a[1])?a[1].every(Ga):Ga(a[1]):!1:!1}function ic(a){return mc(a)||nc(a)}function $c(a,b){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return Wa(g,b)})&&e++:"string"===typeof h&&Wa(h,b)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return Wa(g,b)})&&d++:"string"===typeof h&&
Wa(h,b)&&d++;return 0<e&&0===d?!0:!1}function Wa(a,b){if(!ob(a))return!1;a=kc(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!ad(a[0],b[0]))return!1;for(var d=1;5>d;d++)if(!oc(a[d],b[d]))return!1;return!0}return!1}function ad(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!oc(b[d],a[d]))return!1;return!0}return!1}function oc(a,
b){return a&&b&&"*"===a||a===b}function pc(a){return Array.isArray(a)?a:[a]}function nb(a,b,d,e){var h;a=pc(a).map(function(g){a:if(La(g))g=[g];else{if(Va(g)){b:{var l=void 0;try{var n={event:b.getPayload(),eventType:d,eventSchema:e};l=g(n);if(Array.isArray(l)&&l.every(La)||La(l)){var r=l;break b}r=void 0;break b}catch(p){}r=void 0}if(La(r)){g=[r];break a}else if(Array.isArray(r)){g=r;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&
g.filter(Boolean)}))}function Vc(a,b,d,e){var h;a=pc(a).map(function(g){a:{if(mc(g)){var l=g[0],n=!1;try{var r={event:b.getPayload(),eventType:d,eventSchema:e};n=l(r)}catch(p){n=!1}if(!0===n){g=nb(g[1],b,d,e);break a}}else if(nc(g)&&$c(g[0],e)){g=nb(g[1],b,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function bd(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function cd(a){void 0===a&&(a={});var b=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];b=function(g,l,n){function r(k,y){k=A.getApplicableContexts(k);var J=[];y&&y.length&&J.push.apply(J,y);k&&k.length&&J.push.apply(J,k);return J}var p=Wc(l),A=Uc(),x=g,u={};return{track:function(k,y,J){k.withJsonProcessor(Tc(x));k.add("eid",pa.v4());k.addDict(u);J=bd(J);k.add(J.type,J.value.toString());y=r(k,p.addPluginContexts(y));
y=y&&y.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:y}:void 0;void 0!==y&&k.addJson("cx","co",y);l.forEach(function(H){try{H.beforeTrack&&H.beforeTrack(k)}catch(I){ca.error("Plugin beforeTrack",I)}});"function"===typeof n&&n(k);var T=k.build();l.forEach(function(H){try{H.afterTrack&&H.afterTrack(T)}catch(I){ca.error("Plugin afterTrack",I)}});return T},addPayloadPair:function(k,y){u[k]=y},configuration:a,getConfig:function(){return a},setConfig:function(k){k&&
("undefined"!==typeof k.base64&&(x=a.base64=k.base64),"undefined"!==typeof k.linkClickTracking&&(a.linkClickTracking=k.linkClickTracking),"undefined"!==typeof k.buttonClickTracking&&(a.buttonClickTracking=k.buttonClickTracking),"undefined"!==typeof k.customEvent&&(a.customEvent=k.customEvent),"undefined"!==typeof k.exceptionAutotracking&&(a.exceptionAutotracking=k.exceptionAutotracking),"undefined"!==typeof k.enablePeriodicHeartbeat&&(a.enablePeriodicHeartbeat=k.enablePeriodicHeartbeat),"undefined"!==
typeof k.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=k.periodicHeartbeatInterval),"undefined"!==typeof k.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=k.customEventTrackingConfiguration),"undefined"!==typeof k.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=k.convivaVideoEventTrackingConfiguration),"undefined"!==typeof k.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=k.ajaxTrackingConfiguration))},getBase64Encoding:function(){return x},
setBase64Encoding:function(k){x=k},addPayloadDict:function(k){for(var y in k)Object.prototype.hasOwnProperty.call(k,y)&&(u[y]=k[y])},resetPayloadPairs:function(k){u=hc(k)?k:{}},setTrackerVersion:function(k){u.tv=k},setTrackerNamespace:function(k){u.tna=k},setAppId:function(k){u.aid=k},setPlatform:function(k){u.p=k},setUserId:function(k){u.uid=k},setScreenResolution:function(k,y){u.res=k+"x"+y},setViewport:function(k,y){u.vp=k+"x"+y},setColorDepth:function(k){u.cd=k},setTimezone:function(k){u.tz=k},
setLang:function(k){u.lang=k},setIpAddress:function(k){u.ip=k},setUseragent:function(k){u.ua=k},addGlobalContexts:function(k){A.addGlobalContexts(k)},clearGlobalContexts:function(){A.clearGlobalContexts()},removeGlobalContexts:function(k){A.removeGlobalContexts(k)}}}(null!==b&&void 0!==b?b:!0,e,a.callback);var h=fa(fa({},b),{addPlugin:function(g){var l,n;g=g.plugin;e.push(g);null===(l=g.logger)||void 0===l?void 0:l.call(g,ca);null===(n=g.activateCorePlugin)||void 0===n?void 0:n.call(g,h)}});null===
e||void 0===e?void 0:e.forEach(function(g){var l,n;null===(l=g.logger)||void 0===l?void 0:l.call(g,ca);null===(n=g.activateCorePlugin)||void 0===n?void 0:n.call(g,h)});return h}function Xa(a){var b=a.event;a=b.schema;var d=b.data;b=Ua();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:d}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function dd(a){var b=a.pageUrl,d=a.pageTitle;a=a.referrer;var e=Ua();e.add("e","pv");e.add("url",b);e.add("page",
d);e.add("refr",a);return e}function pb(a){return Xa({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:qb({name:a.name,data:a.data})}})}function rb(a){return Xa({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:qb(a)}})}function qb(a,b){void 0===b&&(b={});var d={},e;for(e in a)if(b[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=a[e];return d}function ed(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr",
"modernizr");b.removeItem("modernizr");return!0}catch(d){return!1}}function qc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function rc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function sb(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function sc(a){var b=a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,
2)&&(a=a.slice(1));return a}function tb(a){var b=window,d=Ma("referrer",b.location.href)||Ma("referer",b.location.href);if(d)return d;if(a)return a;try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function qa(a,b,d,e){if(a.addEventListener)return a.addEventListener(b,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,d);a["on"+b]=d}function Ma(a,b){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g,
" ")):null}function Ya(a,b,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,b);return!0}catch(g){return!1}}function tc(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(d){return!1}}function fd(a,b){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),h="_test_value_"+(new Date).getTime(),g=d.split("."),l=g.length-1;0<=l;){var n=g.slice(l,g.length).join(".");
ha(e,h,0,"/",n,a,b);if(ha(e)===h){ha(e,"",-1,"/",n,a,b);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)ha(d[e],"",-1,"/",n,a,b);return n}--l}return d}function ha(a,b,d,e,h,g,l){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(d?"; Expires="+(new Date(+new Date+1E3*d)).toUTCString():"")+(e?"; Path="+e:"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(l?"; Secure":
""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function gd(a,b,d,e,h,g,l,n,r,p,A,x,u,k,y,J){function T(q){var B=Object.keys(q).map(function(z){return[z,q[z]]}).reduce(function(z,v){z[v[0]]=v[1].toString();return z},{});return{evt:B,bytes:H(JSON.stringify(B))}}function H(q){for(var B=0,z=0;z<q.length;z++){var v=q.charCodeAt(z);127>=v?B+=1:2047>=v?B+=2:55296<=v&&57343>=v?(B+=4,z++):B=65535>v?B+3:B+4}return B}function I(q){for(void 0===q&&(q=!1);E.length&&"string"!==
typeof E[0]&&"object"!==typeof E[0];)E.shift();if(1>E.length)U=!1;else{if(!V||"string"!==typeof V.valueOf())throw"No collector configured";U=!0;if(xa){var B=function(N){for(var da=0,Ha=0;da<N.length&&!(Ha+=N[da].bytes,Ha>=l);)da+=1;return da},z=void 0;if(ya(E)){z=V;var v=G(z,!0,q);var K=B(E)}else z=Na(E[0]),v=G(z,!1,q),K=1;var S=setTimeout(function(){v.abort();U=!1},A),ea=function(N){for(var da=0;da<N;da++)E.shift();d&&Ya(za,JSON.stringify(E.slice(0,p)))};v.onreadystatechange=function(){if(4===v.readyState&&
200<=v.status)if(clearTimeout(S),300>v.status)ea(K),I();else{var N=v.status;N=200<=N&&300>N?!1:y.includes(N)?!0:!J.includes(N);N||(ca.error("Status ".concat(v.status,", will not retry.")),ea(K));U=!1}};if(ya(E)){if(B=E.slice(0,K),0<B.length){q=!1;B=B.map(function(N){return N.evt});if(Za){var $a=new Blob([Y(ia(B))],{type:"application/json"});try{q=navigator.sendBeacon(z,$a)}catch(N){q=!1}}!0===q?(ea(K),I()):v.send(Y(ia(B)))}}else v.send()}else if(x||ya(E))U=!1;else{z=new Image(1,1);var ja=!0;z.onload=
function(){ja&&(ja=!1,E.shift(),d&&Ya(za,JSON.stringify(E.slice(0,p))),I())};z.onerror=function(){ja&&(U=ja=!1)};z.src=Na(E[0]);setTimeout(function(){ja&&U&&(ja=!1,I())},A)}}}function G(q,B,z){var v=new XMLHttpRequest;B?(v.open("POST",q,!z),v.setRequestHeader("Content-Type","application/json; charset=UTF-8")):v.open("GET",q,!z);v.withCredentials=k;x&&v.setRequestHeader("SP-Anonymous","*");for(var K in u)Object.prototype.hasOwnProperty.call(u,K)&&v.setRequestHeader(K,u[K]);return v}function Y(q){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",
data:q})}function ia(q){for(var B=(new Date).getTime().toString(),z=0;z<q.length;z++)q[z].stm=B;return q}function Na(q){return r?V+q.replace("?","?stm="+(new Date).getTime()+"&"):V+q}function ab(q){function B(v,K,S){return(S=S.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&S.length?parseInt(S[0])<=v||parseInt(S[0])===v&&parseInt(S[1])<=K:!1}function z(v){return v.match("Version/.* Safari/")&&!v.match("Chrom(e|ium)")}return function(v,K){return(K=K.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&
K.length?parseInt(K[0])<=v:!1}(13,q)||B(10,15,q)&&z(q)}var U=!1,V,E=[];e="string"===typeof e?e.toLowerCase():e;var Aa=!0===e||"beacon"===e||"true"===e,Za=!(!(Aa&&window.navigator&&window.navigator.sendBeacon)||ab(window.navigator.userAgent))&&Aa,xa=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),Ba="get"!==e&&xa&&("post"===e||Aa),ra=Ba?h:"/i",za="snowplowOutQueue_".concat(a,"_").concat(Ba?"post2":"get");Aa&&(u={});g=d&&ed()&&Ba&&g||1;if(d)try{var Oa=window.localStorage.getItem(za);
E=Oa?JSON.parse(Oa):[]}catch(q){}Array.isArray(E)||(E=[]);b.outQueues.push(E);xa&&1<g&&b.bufferFlushers.push(function(q){U||I(q)});var ya=function(q){return"object"===typeof q[0]};return{enqueueRequest:function(q,B){V=B+ra;if(Ba){q=T(q);if(q.bytes>=l){ca.warn("Event ("+q.bytes+"B) too big, max is "+l);B=q;G(V,!0,!1).send(Y(ia([B.evt])));return}E.push(q)}else{var z="?";var v={co:!0,cx:!0},K=!0,S;for(S in q)q.hasOwnProperty(S)&&!v.hasOwnProperty(S)&&(K?K=!1:z+="&",z+=encodeURIComponent(S)+"="+encodeURIComponent(q[S]));
for(var ea in v)q.hasOwnProperty(ea)&&v.hasOwnProperty(ea)&&(z+="&"+ea+"="+encodeURIComponent(q[ea]));if(0<n&&(v=Na(z),v=H(v),v>=n)){ca.warn("Event ("+v+"B) too big, max is "+n);xa&&(q=T(q),G(B+h,!0,!1).send(Y(ia([q.evt]))));return}E.push(z)}B=!1;d&&(B=Ya(za,JSON.stringify(E.slice(0,p))));U||B&&!(E.length>=g)||I()},executeQueue:function(){U||I()},setUseLocalStorage:function(q){d=q},setAnonymousTracking:function(q){x=q},setCollectorUrl:function(q){V=q+ra},setBufferSize:function(q){g=q}}}function uc(a,
b,d){if("translate.googleusercontent.com"===a)""===d&&(d=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?Ma("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=sb(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=sb(b);return[a,b,d]}function hd(a,b,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=pa.v4());a[7]&&"undefined"!==
a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(l,n){l=parseInt(l);return isNaN(l)?n:l};b=function(l){return l?g(l,void 0):void 0};return[a[0],a[1],g(a[2],h),g(a[3],e),g(a[4],h),b(a[5]),a[6],a[7],a[8],b(a[9]),g(a[10],-1)]}function Pa(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=b;b=pa.v4();a[6]=b;a[10]=-1;a[8]="";a[9]=void 0;return b}function ub(a){a[4]=Math.round((new Date).getTime()/
1E3)}function id(a,b,d,e,h,g){void 0===g&&(g={});var l=[];a=function(r,p,A,x,u,k){function y(){Ca=uc(window.location.hostname,window.location.href,tb());Ca[1]!==sa&&(Qa=tb(sa));vc=sc(Ca[0]);sa=Ca[1]}function J(c){var f=(new Date).getTime();c=c.currentTarget;if(null===c||void 0===c?0:c.href){f="_sp="+(bb+"."+f);var m=c.href.split("#"),t=m[0].split("?"),C=t.shift();if(t=t.join("?")){for(var F=!0,O=t.split("&"),Q=0;Q<O.length;Q++)if("_sp="===O[Q].substr(0,4)){F=!1;O[Q]=f;t=O.join("&");break}F&&(t=f+
"&"+t)}else t=f;m[0]=C+"?"+t;f=m.join("#");c.href=f}}function T(c){for(var f=0;f<document.links.length;f++){var m=document.links[f];!m.spDecorationEnabled&&c(m)&&(qa(m,"click",J,!0),qa(m,"mousedown",J,!0),m.spDecorationEnabled=!0)}}function H(c){if(wc){var f=/#.*/;c=c.replace(f,"")}xc&&(f=/[{}]/g,c=c.replace(f,""));return c}function I(c){return(c=/^([a-z]+):/.exec(c))?c[1]:null}function G(c){c=Ia+c+"."+Da;if("localStorage"==M){try{var f=window.localStorage,m=f.getItem(c+".expires");if(null===m||+m>
Date.now())var t=f.getItem(c);else f.removeItem(c),f.removeItem(c+".expires"),t=void 0}catch(C){t=void 0}return t}if("cookie"==M||"cookieAndLocalStorage"==M)return ha(c)}function Y(){y();Da=jd((Ra||vc)+(vb||"/")).slice(0,4)}function ia(){wb=(new Date).getTime()}function Na(){var c=ab(),f=c[0];f<cb?cb=f:f>db&&(db=f);c=c[1];c<eb?eb=c:c>fb&&(fb=c);ia()}function ab(){var c=document.documentElement;return c?[c.scrollLeft||window.pageXOffset,c.scrollTop||window.pageYOffset]:[0,0]}function U(){var c=ab(),
f=c[0];db=cb=f;fb=eb=c=c[1]}function V(){Aa(Ia+"ses."+Da,"*",yc)}function E(c){var f=Ia+"id."+Da;c.shift();c=c.join(".");Aa(f,c,zc)}function Aa(c,f,m){if(!ka||Ea)"localStorage"==M?Ya(c,f,m):("cookie"==M||"cookieAndLocalStorage"==M)&&ha(c,f,m,vb,Ra,gb,hb)}function Za(c){var f=Ia+"id."+Da,m=Ia+"ses."+Da;tc(f);tc(m);ha(f,"",-1,"/",Ra,gb,hb);ha(m,"",-1,"/",Ra,gb,hb);null!==c&&void 0!==c&&c.preserveSession||(la=pa.v4(),Z=1);null!==c&&void 0!==c&&c.preserveUser||(bb=pa.v4(),Fa=null)}function xa(c){c&&c.stateStorageStrategy&&
(k.stateStorageStrategy=c.stateStorageStrategy,M=Ac(k));ka=!!k.anonymousTracking;Ea=Bc(k);xb=Cc(k);ta.setUseLocalStorage("localStorage"==M||"cookieAndLocalStorage"==M);ta.setAnonymousTracking(xb)}function Ba(){try{var c=window.localStorage.getItem("Conviva.sdkConfig"),f=JSON.parse(c||"{}");yb="{}"===f||"undefined"===typeof f?B():f.clId||B();try{ib=Math.floor(2147483647*Math.random())}catch(t){console.warn(t),ib=-1}b:try{var m=window.localStorage;c={clId:yb,iid:ib};f=null;try{f=JSON.stringify(c)}catch(t){break b}m.setItem("Conviva.sdkConfig",
f)}catch(t){}}catch(t){console.warn(t)}if(!ka||Ea)m="none"!=M&&!!G("ses"),c=ra(),c[1]?f=c[1]:(f=ka?"":pa.v4(),c[1]=f),bb=f,la=m?c[6]:Pa(c),Z=c[3],"none"!=M&&(V(),ub(c),E(c))}function ra(){if("none"==M)return["1","",0,0,0,void 0,"","","",void 0,0];var c=G("id")||void 0;return hd(c,bb,la,Z)}function za(c){return 0===c.indexOf("http")?c:("https:"===document.location.protocol?"https":"http")+"://"+c}function Oa(){Dc&&null!=u.pageViewId||(u.pageViewId=pa.v4())}function ya(){null==u.pageViewId&&(u.pageViewId=
pa.v4());return u.pageViewId}function q(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:ya()}}]}}}function B(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(c){console.warn(c)}}function z(c){try{var f=Object.keys(c);kd(JSON.stringify(c))?f.forEach(function(m){""!==
m&&Object.defineProperty(zb,m,{value:""+c[m],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(m){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",m)}}function v(c){try{c.forEach(function(f){delete zb[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function K(c){var f=c.title,m=c.context,t=c.timestamp;c=c.contextCallback;y();Ec&&Oa();Ec=!0;
Ja=document.title;Sa=f;f=rc(Sa||Ja);aa.track(dd({pageUrl:H(Ka||sa),pageTitle:f,referrer:H(jb||Qa)}),(m||[]).concat(c?c():[]),t);t=new Date;f=!1;if(ba.enabled&&!ba.installed){f=ba.installed=!0;var C={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var O=!1,Q=Object.defineProperty({},"passive",{get:function(){O=!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",W,Q);window.removeEventListener("testPassiveEventSupport",
W,Q);C.hasSupport=O}}};C.update();var F="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(C,"hasSupport")?qa(document,F,ia,{passive:!0}):qa(document,F,ia);U();F=function(O,Q){void 0===Q&&(Q=ia);return function(W){return qa(document,W,Q)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(F(document));["resize","focus","blur"].forEach(F(window));F(window,Na)("scroll")}if(ba.enabled&&
(ld||f))for(t in wb=t.getTime(),t=void 0,ba.configurations)if(f=ba.configurations[t])window.clearInterval(f.activityInterval),S(f,m,c)}function S(c,f,m){var t=function(O,Q){y();var W=n.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&(W=1E3*W.periodicHeartbeatInterval,W!=c.configHeartBeatTimer&&(window.clearInterval(c.activityInterval),c.activityInterval=window.setInterval(F,W))):window.clearInterval(c.activityInterval);O({context:Q,pageViewId:ya(),minXOffset:cb,minYOffset:eb,
maxXOffset:db,maxYOffset:fb});U()},C=new Date;window.setTimeout(function(){t(c.callback,(f||[]).concat(m?m():[]))},2E3);var F=function(){var O=new Date;if(C.getTime()+c.configHeartBeatTimer>O.getTime()||wb+c.configHeartBeatTimer>O.getTime())C=O,t(c.callback,(f||[]).concat(m?m():[]))};c.activityInterval=window.setInterval(F,c.configHeartBeatTimer)}function ea(c){var f=c.minimumVisitLength,m=c.heartbeatDelay;c=c.callback;if(qc(f)&&qc(m))return{configMinimumVisitLength:1E3*f,configHeartBeatTimer:1E3*
m,callback:c};ca.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function $a(c){var f=c.context,m=c.minXOffset,t=c.minYOffset,C=c.maxXOffset,F=c.maxYOffset;c=document.title;c!==Ja&&(Ja=c,Sa=void 0);c=aa;var O=c.track,Q=H(Ka||sa),W=rc(Sa||Ja),md=H(jb||Qa);m=Math.round(m);C=Math.round(C);t=Math.round(t);F=Math.round(F);var ma=Ua();ma.add("e","pp");ma.add("url",Q);ma.add("page",W);ma.add("refr",md);m&&!isNaN(Number(m))&&ma.add("pp_mix",m.toString());C&&!isNaN(Number(C))&&
ma.add("pp_max",C.toString());t&&!isNaN(Number(t))&&ma.add("pp_miy",t.toString());F&&!isNaN(Number(F))&&ma.add("pp_may",F.toString());O.call(c,ma,f)}var ja,N,da,Ha,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,L={base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{blocklist:["*"]}};
if(window.localStorage){var Fc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(L);var Xb=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else Xb="https://appgw.conviva.com",Fc=JSON.stringify(L);x=k.gatewayUrl?k.gatewayUrl:Xb?Xb:"https://appgw.conviva.com";p||(p="CAT");var P=JSON.parse(Fc);"undefined"!=typeof P.base64&&(L.base64=P.base64);"undefined"!=typeof P.linkClickTracking&&(L.linkClickTracking=
P.linkClickTracking);"undefined"!=typeof P.buttonClickTracking&&(L.buttonClickTracking=P.buttonClickTracking);"undefined"!=typeof P.exceptionAutotracking&&(L.exceptionAutotracking=P.exceptionAutotracking);"undefined"!=typeof P.enablePeriodicHeartbeat&&(L.enablePeriodicHeartbeat=P.enablePeriodicHeartbeat);"undefined"!=typeof P.periodicHeartbeatInterval&&(L.periodicHeartbeatInterval=P.periodicHeartbeatInterval);"undefined"!=typeof P.customEventTrackingConfiguration&&(L.customEventTrackingConfiguration=
P.customEventTrackingConfiguration);"undefined"!=typeof P.convivaVideoEventTrackingConfiguration&&(L.convivaVideoEventTrackingConfiguration=P.convivaVideoEventTrackingConfiguration);"undefined"!=typeof P.ajaxTrackingConfiguration&&(L.ajaxTrackingConfiguration=P.ajaxTrackingConfiguration);if(window.XMLHttpRequest){var ua=new XMLHttpRequest;ua.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var c=JSON.parse(ua.response),f={base64:!0,linkClickTracking:!0,buttonClickTracking:!0,
customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{}};f.base64=c.configurationBundle[0].trackerConfiguration.base64Encoding;f.linkClickTracking=c.configurationBundle[0].trackerConfiguration.linkClickTracking;f.buttonClickTracking=c.configurationBundle[0].trackerConfiguration.buttonClickTracking;f.customEvent=c.configurationBundle[0].trackerConfiguration.customEvent;
f.exceptionAutotracking=c.configurationBundle[0].trackerConfiguration.exceptionAutotracking;f.enablePeriodicHeartbeat=c.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;f.periodicHeartbeatInterval=c.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;f.customEventTrackingConfiguration=c.configurationBundle[0].customEventTrackingConfiguration;f.convivaVideoEventTrackingConfiguration=c.configurationBundle[0].convivaVideoEventTrackingConfiguration;f.ajaxTrackingConfiguration=
c.configurationBundle[0].ajaxTrackingConfiguration;f.ajaxTrackingConfiguration&&(f.ajaxTrackingConfiguration.blocklist.push(c.configurationBundle[0].networkConfiguration.endpoint),f.ajaxTrackingConfiguration.blocklist.push("wsg"),f.ajaxTrackingConfiguration.blocklist.push("remote_config"));n.setCollectorUrl(c.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",
JSON.stringify(f)),localStorage.setItem("ConvivaEndpoint",c.configurationBundle[0].networkConfiguration.endpoint));n.core.setConfig(f)}else if(va._convivaVersion&&va._convivaCustomerKey)try{delete va._convivaVersion,ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+va._convivaCustomerKey+"/remote_config.json",!0),ua.send()}catch(m){delete va._convivaVersion}else if(va._convivaCustomerKey)try{delete va._convivaCustomerKey,ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",
!0),ua.send()}catch(m){delete va._convivaCustomerKey}};var kb=function(c){try{ua.open("GET",c,!0),ua.send()}catch(f){}};if(k.trackerConfigUrl)kb(k.trackerConfigUrl),window.setInterval(kb,36E5,k.trackerConfigUrl);else{var va={_platform:"js",_convivaVersion:A,_convivaCustomerKey:k.convivaCustomerKey},Gc="https://drt1fhpy4haqm.cloudfront.net/js/"+k.convivaCustomerKey+"/"+A+"/remote_config.json";kb(Gc);window.setInterval(kb,36E5,Gc)}}k.eventMethod=null!==(ja=k.eventMethod)&&void 0!==ja?ja:"post";var Ac=
function(c){var f;return null!==(f=c.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},Bc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==m?m:!1},Cc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withServerAnonymisation))&&void 0!==m?m:!1};l.push(function(){return{beforeTrack:function(c){var f=
G("ses"),m=ra();Yb=Zb?!!ha(Zb):!1;if(Hc||Yb)Za();else{"0"===m[0]?(la=f||"none"==M?m[6]:Pa(m),Z=m[3]):(new Date).getTime()-$b>1E3*yc&&(Z++,la=Pa(m,Z));ub(m);-1===m[10]&&(f=c.build(),m[8]=f.eid,f=f.dtm||f.ttm,m[9]=f?parseInt(f):void 0);m[10]+=1;f=c.add;if("innerWidth"in window){var t=window.innerWidth;var C=window.innerHeight}else C=document.documentElement||document.body,t=C.clientWidth,C=C.clientHeight;f.call(c,"vp",0<=t&&0<=C?t+"x"+C:null);f=c.add;C=document.documentElement;var F=document.body;t=
Math.max(C.clientWidth,C.offsetWidth,C.scrollWidth);C=Math.max(C.clientHeight,C.offsetHeight,C.scrollHeight,F?Math.max(F.offsetHeight,F.scrollHeight):0);t=isNaN(t)||isNaN(C)?"":t+"x"+C;f.call(c,"ds",t);c.add("vid",Ea?Z:ka?null:Z);c.add("sid",Ea?la:ka?null:la);c.add("duid",ka?null:m[1]);c.add("uid",ka?null:Fa);y();c.add("refr",H(jb||Qa));document&&c.add("page",document.title);c.add("url",H(Ka||sa));!nd||Ea||ka||(f=m[9],f={userId:m[1],sessionId:m[6],eventIndex:m[10],sessionIndex:m[3],previousSessionId:m[7]||
null,storageMechanism:"localStorage"==M?"LOCAL_STORAGE":"COOKIE_1",firstEventId:m[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():null},c.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:f}));"none"!=M&&(E(m),V());$b=(new Date).getTime()}}}}());(null!==(da=null===(N=null===k||void 0===k?void 0:k.contexts)||void 0===N?void 0:N.webPage)&&void 0!==da?da:1)&&l.push(q());l.push(function(){return{contexts:function(){var c={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-1",
data:{clid:yb,iid:ib.toString(),ck:od}},f={eventIndex:pd++};null!=ac&&(f.previousEventTimestamp=ac);ac=(new Date).toISOString();return[c,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());l.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:zb}}]}}}());l.push.apply(l,null!==(Ha=k.plugins)&&void 0!==Ha?Ha:[]);var aa=cd({base64:L.base64,corePlugins:l,callback:function(c){Hc||Yb||ta.enqueueRequest(c.build(),bc)},linkClickTracking:L.linkClickTracking,
buttonClickTracking:L.buttonClickTracking,customEvent:!0,exceptionAutotracking:L.exceptionAutotracking,enablePeriodicHeartbeat:L.enablePeriodicHeartbeat,periodicHeartbeatInterval:L.periodicHeartbeatInterval,customEventTrackingConfiguration:L.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:L.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:L.ajaxTrackingConfiguration}),qd=navigator.userLanguage||navigator.language,rd=document.characterSet||document.charset,Ca=
uc(window.location.hostname,window.location.href,tb()),vc=sc(Ca[0]),sa=Ca[1],Qa=Ca[2],jb,sd=null!==(Ab=k.platform)&&void 0!==Ab?Ab:"web",bc=za(x),td=null!==(Bb=k.postPath)&&void 0!==Bb?Bb:"/"+k.convivaCustomerKey+"/ctp",ud=null!==(Cb=k.appId)&&void 0!==Cb?Cb:"",od=null!==(Db=k.convivaCustomerKey)&&void 0!==Db?Db:"",Ka,zb={},Ja=document.title,Sa,ld=null!==(Eb=k.resetActivityTrackingOnPageView)&&void 0!==Eb?Eb:!0,wc,xc,Ia=null!==(Fb=k.cookieName)&&void 0!==Fb?Fb:"_sp_",Ra=null!==(Gb=k.cookieDomain)&&
void 0!==Gb?Gb:void 0,vb="/",gb=null!==(Hb=k.cookieSameSite)&&void 0!==Hb?Hb:"None",hb=null!==(Ib=k.cookieSecure)&&void 0!==Ib?Ib:!0,Ic=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Hc="undefined"!==typeof k.respectDoNotTrack?k.respectDoNotTrack&&("yes"===Ic||"1"===Ic):!1,Zb,zc=null!==(Jb=k.cookieLifetime)&&void 0!==Jb?Jb:63072E3,yc=null!==(Kb=k.sessionCookieTimeout)&&void 0!==Kb?Kb:1800,Ea=Bc(k),xb=Cc(k),ka=!!k.anonymousTracking,M=Ac(k),yb,ib,pd=0,wb,$b=(new Date).getTime(),cb,
db,eb,fb,Da,bb,la,Z=1,Fa,ta=gd(r,u,"localStorage"==M||"cookieAndLocalStorage"==M,k.eventMethod,td,null!==(Lb=k.bufferSize)&&void 0!==Lb?Lb:1,null!==(Mb=k.maxPostBytes)&&void 0!==Mb?Mb:4E4,null!==(Nb=k.maxGetBytes)&&void 0!==Nb?Nb:0,null!==(Ob=k.useStm)&&void 0!==Ob?Ob:!0,null!==(Pb=k.maxLocalStorageQueueSize)&&void 0!==Pb?Pb:1E3,null!==(Qb=k.connectionTimeout)&&void 0!==Qb?Qb:5E3,xb,null!==(Rb=k.customHeaders)&&void 0!==Rb?Rb:{},null!==(Sb=k.withCredentials)&&void 0!==Sb?Sb:!0,null!==(Tb=k.retryStatusCodes)&&
void 0!==Tb?Tb:[],(null!==(Ub=k.dontRetryStatusCodes)&&void 0!==Ub?Ub:[]).concat([400,401,403,410,422])),Dc=!1,ac,Ec=!1,ba={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:$a}}},nd=null!==(Wb=null===(Vb=k.contexts)||void 0===Vb?void 0:Vb.session)&&void 0!==Wb?Wb:!1,Yb;k.hasOwnProperty("discoverRootDomain")&&k.discoverRootDomain&&(Ra=fd(gb,hb));aa.setTrackerVersion(A);aa.setTrackerNamespace(p);aa.setAppId(ud);aa.setPlatform(sd);aa.addPayloadPair("cookie",
navigator.cookieEnabled?"1":"0");aa.addPayloadPair("cs",rd);aa.addPayloadPair("lang",qd);aa.addPayloadPair("res",screen.width+"x"+screen.height);aa.addPayloadPair("cd",screen.colorDepth);Y();Ba();k.crossDomainLinker&&T(k.crossDomainLinker);var kd=function(c){try{return"object"===typeof JSON.parse(c)}catch(f){return!1}};return fa(fa({},{getDomainSessionIndex:function(){return Z},getPageViewId:function(){return ya()},newSession:function(){var c=ra();"0"===c[0]?(la="none"!=M?Pa(c):c[6],Z=c[3],V()):(Z++,
la=Pa(c,Z));ub(c);"none"!=M&&(E(c),V());$b=(new Date).getTime()},getCookieName:function(c){return Ia+c+"."+Da},getUserId:function(){return Fa},getDomainUserId:function(){return ra()[1]},getDomainUserInfo:function(){return ra()},setReferrerUrl:function(c){jb=c},setCustomUrl:function(c){y();var f=sa,m;I(c)?Ka=c:"/"===c.slice(0,1)?Ka=I(f)+"://"+sb(f)+c:(f=H(f),0<=(m=f.indexOf("?"))&&(f=f.slice(0,m)),(m=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,m+1)),Ka=f+c)},setDocumentTitle:function(c){Ja=document.title;
Sa=c},discardHashTag:function(c){wc=c},discardBrace:function(c){xc=c},setCookiePath:function(c){vb=c;Y()},setVisitorCookieTimeout:function(c){zc=c},crossDomainLinker:function(c){T(c)},enableActivityTracking:function(c){ba.configurations.pagePing||(ba.enabled=!0,ba.configurations.pagePing=ea(fa(fa({},c),{callback:$a})))},enableActivityTrackingCallback:function(c){ba.configurations.callback||(ba.enabled=!0,ba.configurations.callback=ea(c))},updatePageActivity:function(){ia()},setOptOutCookie:function(c){Zb=
c},setUserId:function(c){Fa=c},setUserIdFromLocation:function(c){y();Fa=Ma(c,sa)},setUserIdFromReferrer:function(c){y();Fa=Ma(c,Qa)},setUserIdFromCookie:function(c){Fa=ha(c)},setCollectorUrl:function(c){bc=za(c);ta.setCollectorUrl(bc)},setBufferSize:function(c){ta.setBufferSize(c)},flushBuffer:function(c){void 0===c&&(c={});ta.executeQueue();c.newBufferSize&&ta.setBufferSize(c.newBufferSize)},trackPageView:function(c){void 0===c&&(c={});K(c)},trackVideoEvent:function(c){void 0===c&&(c={});try{var f=
this.core.getConfig();""!=c.name&&void 0!=c.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var m=f.convivaVideoEventTrackingConfiguration.blocklist;-1==m.indexOf("*")&&-1==m.indexOf(""+c.name)&&this.core.track(rb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,
sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}else this.core.track(rb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp);else this.core.track(rb({name:c.name,
sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}catch(t){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",t)}},trackAjaxEvent:function(c){void 0===c&&(c={});try{if("xmlhttprequest"===c.initiatorType){var f=this.core.getConfig();if(""==c.name||void 0==c.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");
else if(void 0!=f.ajaxTrackingConfiguration&&void 0!=f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var m=f.ajaxTrackingConfiguration.blocklist;if(-1==m.indexOf("*")){f=!1;for(var t=0;t<m.length;t++)""!==m[t]&&-1!==c.name.indexOf(m[t])&&(f=!0);if(!f){var C=this.core,F=C.track;var O=Xa({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:qb({targetUrl:c.name,webResourceTiming:c,duration:c.duration})}});F.call(C,O,c.context,c.timestamp)}}}}}catch(Q){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",
Q)}},setCustomTags:function(c){void 0===c&&(c={});z(c)},unsetCustomTags:function(c){void 0===c&&(c={});v(c)},preservePageViewId:function(){Dc=!0},disableAnonymousTracking:function(c){k.anonymousTracking=!1;xa(c);Ba();ta.executeQueue()},enableAnonymousTracking:function(c){var f;k.anonymousTracking=null!==(f=c&&(null===c||void 0===c?void 0:c.options))&&void 0!==f?f:!0;xa(c);Ea||Oa()},clearUserData:Za}),{id:r,namespace:p,core:aa,sharedState:u})}(a,b,d,e,h,g);var n=fa(fa({},a),{addPlugin:function(r){var p,
A;n.core.addPlugin(r);null===(A=(p=r.plugin).activateBrowserPlugin)||void 0===A?void 0:A.call(p,n)}});l.forEach(function(r){var p;null===(p=r.activateBrowserPlugin)||void 0===p?void 0:p.call(r,n)});return n}function D(a,b){try{var d=null!==a&&void 0!==a?a:Object.keys(Ta);a=Ta;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):ca.warn(g+" not configured")}e.forEach(b)}catch(l){ca.error("Function failed",l)}}function Jc(a,b,d,e,h,g){return Ta.hasOwnProperty(a)?null:(Ta[a]=
id(a,b,d,e,h,g),Ta[a])}function vd(){function a(){"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}function b(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function n(){h.removeEventListener("DOMContentLoaded",n,!1);b()}):h.attachEvent&&h.attachEvent("onreadystatechange",function r(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",
r),b())});qa(g,"load",b,!1)}var e=new wd,h=document,g=window;h.visibilityState&&qa(h,"visibilitychange",a,!1);qa(g,"beforeunload",function(){e.bufferFlushers.forEach(function(l){l(!1)})},!1);"loading"===document.readyState?d():b();return e}var fa=function(){fa=Object.assign||function(a){for(var b,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h])}return a};return fa.apply(this,arguments)},wa={},Kc="undefined"!=typeof crypto&&crypto.getRandomValues&&
crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Kc){var Lc=new Uint8Array(16);wa=function(){Kc(Lc);return Lc}}else{var Mc=Array(16);wa=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Mc[a]=b>>>((a&3)<<3)&255;return Mc}}for(var R=[],lb=0;256>lb;++lb)R[lb]=(lb+256).toString(16).substr(1);var Nc=function(a,b){b=b||0;return[R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],
"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]]].join("")},xd=wa,Oc,cc,dc=0,ec=0,yd=wa;wa=function(a,b,d){d=b&&d||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||yd)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[d+e]=a[e];return b||Nc(a)};wa.v1=function(a,b,d){d=b&&d||0;var e=b||[];a=a||{};var h=a.node||Oc,g=void 0!==a.clockseq?a.clockseq:cc;if(null==h||
null==g){var l=xd();null==h&&(h=Oc=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]);null==g&&(g=cc=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var n=void 0!==a.nsecs?a.nsecs:ec+1,r=l-dc+(n-ec)/1E4;0>r&&void 0===a.clockseq&&(g=g+1&16383);(0>r||l>dc)&&void 0===a.nsecs&&(n=0);if(1E4<=n)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");dc=l;ec=n;cc=g;l+=122192928E5;a=(1E4*(l&268435455)+n)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=l/4294967296*
1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>g;++g)e[d+g]=h[g];return b?b:Nc(e)};var pa=wa.v4=wa,oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",na;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(na||(na={}));var ca=function(a){void 0===a&&(a=na.warn);return{setLogLevel:function(b){a=na[b]?b:na.warn},warn:function(b,d){for(var e=[],h=
2;h<arguments.length;h++)e[h-2]=arguments[h];a>=na.warn&&"undefined"!==typeof console&&(h="Snowplow: "+b,d?console.warn.apply(console,X([h+"\n",d],e,!1)):console.warn.apply(console,X([h],e,!1)))},error:function(b,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=na.error&&"undefined"!==typeof console&&(h="Snowplow: "+b+"\n",d?console.error.apply(console,X([h+"\n",d],e,!1)):console.error.apply(console,X([h],e,!1)))},debug:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];
a>=na.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+b],d,!1))},info:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=na.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+b],d,!1))}}}(),Pc={},Qc={};(function(){var a={rotl:function(b,d){return b<<d|b>>>32-d},rotr:function(b,d){return b<<32-d|b>>>d},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var d=0;d<b.length;d++)b[d]=
a.endian(b[d]);return b},randomBytes:function(b){for(var d=[];0<b;b--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(b){for(var d=[],e=0,h=0;e<b.length;e++,h+=8)d[h>>>5]|=b[e]<<24-h%32;return d},wordsToBytes:function(b){for(var d=[],e=0;e<32*b.length;e+=8)d.push(b[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(b){for(var d=[],e=0;e<b.length;e++)d.push((b[e]>>>4).toString(16)),d.push((b[e]&15).toString(16));return d.join("")},hexToBytes:function(b){for(var d=[],e=0;e<b.length;e+=
2)d.push(parseInt(b.substr(e,2),16));return d},bytesToBase64:function(b){for(var d=[],e=0;e<b.length;e+=3)for(var h=b[e]<<16|b[e+1]<<8|b[e+2],g=0;4>g;g++)8*e+6*g<=8*b.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,h=0;e<b.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-
1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>6-2*h);return d}};Qc=a})();var fc={utf8:{stringToBytes:function(a){return fc.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(fc.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d)&255);return b},bytesToString:function(a){for(var b=[],d=0;d<a.length;d++)b.push(String.fromCharCode(a[d]));
return b.join("")}}},Rc=fc;(function(){var a=Qc,b=Rc.utf8,d=Rc.bin,e=function(h,g){var l=a.wordsToBytes,n=h;n.constructor==String?n=b.stringToBytes(n):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||(n=n.toString());h=a.bytesToWords(n);var r=8*n.length;n=[];var p=1732584193,A=-271733879,x=-1732584194,u=271733878,k=-1009589776;h[r>>5]|=128<<24-r%32;h[(r+64>>>9<<4)+15]=r;for(r=0;r<h.length;r+=16){for(var y=p,J=A,
T=x,H=u,I=k,G=0;80>G;G++){if(16>G)n[G]=h[r+G];else{var Y=n[G-3]^n[G-8]^n[G-14]^n[G-16];n[G]=Y<<1|Y>>>31}Y=(p<<5|p>>>27)+k+(n[G]>>>0)+(20>G?(A&x|~A&u)+1518500249:40>G?(A^x^u)+1859775393:60>G?(A&x|A&u|x&u)-1894007588:(A^x^u)-899497514);k=u;u=x;x=A<<30|A>>>2;A=p;p=Y}p+=y;A+=J;x+=T;u+=H;k+=I}l=l.call(a,[p,A,x,u,k]);return g&&g.asBytes?l:g&&g.asString?d.bytesToString(l):a.bytesToHex(l)};e._blocksize=16;e._digestsize=20;Pc=e})();var jd=Pc,Ta={},wd=function(){return function(){this.outQueues=[];this.bufferFlushers=
[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),mb="undefined"!==typeof window?vd():void 0;w.addGlobalContexts=function(a,b){D(b,function(d){d.core.addGlobalContexts(a)})};w.addPlugin=function(a,b){D(b,function(d){d.addPlugin(a)})};w.clearGlobalContexts=function(a){D(a,function(b){b.core.clearGlobalContexts()})};w.clearUserData=function(a,b){D(b,function(d){d.clearUserData(a)})};w.convivaAppTracker=function(a){void 0===a&&(a={});if(mb){var b=Jc("CAT","CAT","js-".concat("0.3.14"),"",mb,a);
document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&b&&b.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){b&&b.trackAjaxEvent(e)})})).observe({type:"resource",buffered:!0});return b}};w.crossDomainLinker=function(a,b){D(b,function(d){d.crossDomainLinker(a)})};w.disableAnonymousTracking=function(a,b){D(b,function(d){d.disableAnonymousTracking(a)})};w.discardBrace=function(a,b){D(b,function(d){d.discardBrace(a)})};
w.discardHashTag=function(a,b){D(b,function(d){d.discardHashTag(a)})};w.enableActivityTracking=function(a,b){D(b,function(d){d.enableActivityTracking(a)})};w.enableActivityTrackingCallback=function(a,b){D(b,function(d){d.enableActivityTrackingCallback(a)})};w.enableAnonymousTracking=function(a,b){D(b,function(d){d.enableAnonymousTracking(a)})};w.flushBuffer=function(a,b){D(b,function(d){d.flushBuffer(a)})};w.newSession=function(a){D(a,function(b){b.newSession()})};w.newTracker=function(a,b,d){void 0===
d&&(d={});if(mb)return Jc(a,a,"js-".concat("0.3.14"),b,mb,d)};w.preservePageViewId=function(a){D(a,function(b){b.preservePageViewId()})};w.removeGlobalContexts=function(a,b){D(b,function(d){d.core.removeGlobalContexts(a)})};w.setBufferSize=function(a,b){D(b,function(d){d.setBufferSize(a)})};w.setCollectorUrl=function(a,b){D(b,function(d){d.setCollectorUrl(a)})};w.setCookiePath=function(a,b){D(b,function(d){d.setCookiePath(a)})};w.setCustomTags=function(a,b){D(b,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
w.setCustomUrl=function(a,b){D(b,function(d){d.setCustomUrl(a)})};w.setDocumentTitle=function(a,b){D(b,function(d){d.setDocumentTitle(a)})};w.setOptOutCookie=function(a,b){D(b,function(d){d.setOptOutCookie(a)})};w.setReferrerUrl=function(a,b){D(b,function(d){d.setReferrerUrl(a)})};w.setUserId=function(a,b){D(b,function(d){d.setUserId(a)})};w.setUserIdFromCookie=function(a,b){D(b,function(d){d.setUserIdFromCookie(a)})};w.setUserIdFromLocation=function(a,b){D(b,function(d){d.setUserIdFromLocation(a)})};
w.setUserIdFromReferrer=function(a,b){D(b,function(d){d.setUserIdFromReferrer(a)})};w.setVisitorCookieTimeout=function(a,b){D(b,function(d){d.setVisitorCookieTimeout(a)})};w.trackCustomEvent=function(a,b){D(b,function(d){var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(h){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=
e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)})};w.trackPageView=function(a,b){D(b,function(d){d.trackPageView(a)})};
w.trackSelfDescribingEvent=function(a,b){D(b,function(d){d.core.track(Xa({event:a.event}),a.context,a.timestamp)})};w.trackStructEvent=function(a,b){D(b,function(d){d=d.core;var e=d.track,h=a.category,g=a.action,l=a.label,n=a.property,r=a.value,p=Ua();p.add("e","se");p.add("se_ca",h);p.add("se_ac",g);p.add("se_la",l);p.add("se_pr",n);p.add("se_va",null==r?void 0:r.toString());e.call(d,p,a.context,a.timestamp)})};w.unsetCustomTags=function(a,b){D(b,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
w.updatePageActivity=function(a){D(a,function(b){b.updatePageActivity()})};w.version="0.3.14";Object.defineProperty(w,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
