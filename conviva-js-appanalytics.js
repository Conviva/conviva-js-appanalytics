/*!
 * Browser tracker for Snowplow v0.3.27 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(A,ba){"object"===typeof exports&&"undefined"!==typeof module?ba(exports):"function"===typeof define&&define.amd?define(["exports"],ba):(A="undefined"!==typeof globalThis?globalThis:A||self,ba(A.snowplowBrowserTracking={}))})(this,function(A){function ba(a,c,d){if(d||2===arguments.length)for(var e=0,h=c.length,g;e<h;e++)!g&&e in c||(g||(g=Array.prototype.slice.call(c,0,e)),g[e]=c[e]);return a.concat(g||Array.prototype.slice.call(c))}function md(a){var c=0,d=0;var e="";var h=
[];if(!a)return a;a+="";do{var g=pa.indexOf(a.charAt(c++));var l=pa.indexOf(a.charAt(c++));e=pa.indexOf(a.charAt(c++));var q=pa.indexOf(a.charAt(c++));var v=g<<18|l<<12|e<<6|q;g=v>>16&255;l=v>>8&255;v&=255;64===e?h[d++]=String.fromCharCode(g):64===q?h[d++]=String.fromCharCode(g,l):h[d++]=String.fromCharCode(g,l,v)}while(c<a.length);e=h.join("");return function(n){return decodeURIComponent(n.split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,
""))}function bb(){var a={},c=[],d=[],e=[],h,g=function(l,q){null!=q&&""!==q&&(a[l]=q)};return{add:g,addDict:function(l){for(var q in l)Object.prototype.hasOwnProperty.call(l,q)&&g(q,l[q])},addJson:function(l,q,v){v&&yc(v)&&(l={keyIfEncoded:l,keyIfNotEncoded:q,json:v},d.push(l),c.push(l))},addContextEntity:function(l){e.push(l)},getPayload:function(){return a},getJson:function(){return c},withJsonProcessor:function(l){h=l},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function nd(a){return function(c,
d,e){for(var h=function(n,r,z){n=JSON.stringify(n);if(a){z=c.add;if(n){var y=0,m=0,p=[];if(n){n=unescape(encodeURIComponent(n));do{var J=n.charCodeAt(y++);var W=n.charCodeAt(y++);var Q=n.charCodeAt(y++);var I=J<<16|W<<8|Q;J=I>>18&63;W=I>>12&63;Q=I>>6&63;I&=63;p[m++]=pa.charAt(J)+pa.charAt(W)+pa.charAt(Q)+pa.charAt(I)}while(y<n.length);y=p.join("");n=n.length%3;n=(n?y.slice(0,n-3):y)+"===".slice(n||3)}n=n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}z.call(c,r,n)}else c.add(z,n)},g=function(n,
r){if(!n){var z=c.getPayload();if(a?z.cx:z.co){n=JSON;var y=n.parse;if(a){if(z=z.cx){switch(4-z.length%4){case 2:z+="==";break;case 3:z+="="}z=z.replace(/-/g,"+").replace(/_/g,"/");z=md(z)}}else z=z.co;n=y.call(n,z)}else n=void 0}n?n.data=n.data.concat(r.data):n=r;return n},l=void 0,q=0;q<d.length;q++){var v=d[q];"cx"===v.keyIfEncoded?l=g(l,v.json):h(v.json,v.keyIfEncoded,v.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:ba([],
e,!0)},l=g(l,d),e.length=0);l&&h(l,"cx","co")}}function yc(a){if(!zc(a))return!1;for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))return!0;return!1}function zc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function od(){var a=[],c=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return c},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var l=d[g];Ac(l)?e.push(l):Fa(l)&&
h.push(l)}a=a.concat(h);c=c.concat(e)},clearGlobalContexts:function(){c=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){Ac(g)?c=c.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}):Fa(g)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==
typeof g)){e=g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var l=wb(a,d,g,e);h.push.apply(h,l);d=pd(c,d,g,e);h.push.apply(h,d);return h}}}function qd(a){return{addPluginContexts:function(c){var d=c?ba([],c,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){ea.error("Error adding plugin contexts",h)}});return d}}}function rd(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var c=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])c=
!0;else if(c)return!1;return!0}return 2==a.length?!0:!1}function Bc(a){return(a=a.split("."))&&1<a.length?rd(a):!1}function Cc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&Bc(a[1]))return a.slice(1,6)}function xb(a){if(a=Cc(a)){var c=a[0];return 5===a.length&&Bc(c)}return!1}function sd(a){return Array.isArray(a)&&a.every(function(c){return"string"===typeof c})}function Dc(a){return sd(a)?
a.every(function(c){return xb(c)}):"string"===typeof a?xb(a):!1}function Oa(a){return yc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function td(a){var c=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(Dc(a.accept))c+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(Dc(a.reject))c+=1;else return!1;return 0<c&&2>=c}return!1}function cb(a){return"function"===typeof a&&1>=a.length}
function Fa(a){return cb(a)||Oa(a)}function Ec(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?cb(a[0])&&a[1].every(Fa):cb(a[0])&&Fa(a[1]):!1}function Fc(a){return Array.isArray(a)&&2===a.length?td(a[0])?Array.isArray(a[1])?a[1].every(Fa):Fa(a[1]):!1:!1}function Ac(a){return Ec(a)||Fc(a)}function ud(a,c){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return db(g,c)})&&e++:"string"===typeof h&&db(h,c)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return db(g,
c)})&&d++:"string"===typeof h&&db(h,c)&&d++;return 0<e&&0===d?!0:!1}function db(a,c){if(!xb(a))return!1;a=Cc(a);c=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(c);c=null!==c?c.slice(1,6):void 0;if(a&&c){if(!vd(a[0],c[0]))return!1;for(var d=1;5>d;d++)if(!Gc(a[d],c[d]))return!1;return!0}return!1}function vd(a,c){c=c.split(".");a=a.split(".");if(c&&a){if(c.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!Gc(c[d],a[d]))return!1;return!0}return!1}
function Gc(a,c){return a&&c&&"*"===a||a===c}function Hc(a){return Array.isArray(a)?a:[a]}function wb(a,c,d,e){var h;a=Hc(a).map(function(g){a:if(Oa(g))g=[g];else{if(cb(g)){b:{var l=void 0;try{var q={event:c.getPayload(),eventType:d,eventSchema:e};l=g(q);if(Array.isArray(l)&&l.every(Oa)||Oa(l)){var v=l;break b}v=void 0;break b}catch(n){}v=void 0}if(Oa(v)){g=[v];break a}else if(Array.isArray(v)){g=v;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=
g&&g.filter(Boolean)}))}function pd(a,c,d,e){var h;a=Hc(a).map(function(g){a:{if(Ec(g)){var l=g[0],q=!1;try{var v={event:c.getPayload(),eventType:d,eventSchema:e};q=l(v)}catch(n){q=!1}if(!0===q){g=wb(g[1],c,d,e);break a}}else if(Fc(g)&&ud(g[0],e)){g=wb(g[1],c,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function wd(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function xd(a){void 0===a&&(a={});var c=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];c=function(g,l,q){function v(m,p){m=r.getApplicableContexts(m);var J=[];p&&p.length&&J.push.apply(J,p);m&&m.length&&J.push.apply(J,m);return J}var n=qd(l),r=od(),z=g,y={};return{track:function(m,p,J){m.withJsonProcessor(nd(z));m.add("eid",qa.v4());m.addDict(y);J=wd(J);m.add(J.type,J.value.toString());p=v(m,n.addPluginContexts(p));
p=p&&p.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:p}:void 0;void 0!==p&&m.addJson("cx","co",p);l.forEach(function(Q){try{Q.beforeTrack&&Q.beforeTrack(m)}catch(I){ea.error("Plugin beforeTrack",I)}});"function"===typeof q&&q(m);var W=m.build();l.forEach(function(Q){try{Q.afterTrack&&Q.afterTrack(W)}catch(I){ea.error("Plugin afterTrack",I)}});return W},addPayloadPair:function(m,p){y[m]=p},configuration:a,getConfig:function(){return a},setConfig:function(m){m&&
("undefined"!==typeof m.base64&&(z=a.base64=m.base64),"undefined"!==typeof m.linkClickTracking&&(a.linkClickTracking=m.linkClickTracking),"undefined"!==typeof m.cacheRefreshInterval&&(a.cacheRefreshInterval=m.cacheRefreshInterval),"undefined"!==typeof m.buttonClickTracking&&(a.buttonClickTracking=m.buttonClickTracking),"undefined"!==typeof m.customEvent&&(a.customEvent=m.customEvent),"undefined"!==typeof m.exceptionAutotracking&&(a.exceptionAutotracking=m.exceptionAutotracking),"undefined"!==typeof m.enablePeriodicHeartbeat&&
(a.enablePeriodicHeartbeat=m.enablePeriodicHeartbeat),"undefined"!==typeof m.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=m.periodicHeartbeatInterval),"undefined"!==typeof m.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=m.customEventTrackingConfiguration),"undefined"!==typeof m.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=m.convivaVideoEventTrackingConfiguration),"undefined"!==typeof m.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=
m.ajaxTrackingConfiguration),"undefined"!==typeof m.networkRequestTrackingConfiguration&&(a.networkRequestTrackingConfiguration=m.networkRequestTrackingConfiguration))},getBase64Encoding:function(){return z},setBase64Encoding:function(m){z=m},addPayloadDict:function(m){for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(y[p]=m[p])},resetPayloadPairs:function(m){y=zc(m)?m:{}},setTrackerVersion:function(m){y.tv=m},setTrackerNamespace:function(m){y.tna=m},setAppId:function(m){y.aid=m},setPlatform:function(m){y.p=
m},setUserId:function(m){y.uid=m},setScreenResolution:function(m,p){y.res=m+"x"+p},setViewport:function(m,p){y.vp=m+"x"+p},setColorDepth:function(m){y.cd=m},setTimezone:function(m){y.tz=m},setLang:function(m){y.lang=m},setIpAddress:function(m){y.ip=m},setUseragent:function(m){y.ua=m},addGlobalContexts:function(m){r.addGlobalContexts(m)},clearGlobalContexts:function(){r.clearGlobalContexts()},removeGlobalContexts:function(m){r.removeGlobalContexts(m)}}}(null!==c&&void 0!==c?c:!0,e,a.callback);var h=
X(X({},c),{addPlugin:function(g){var l,q;g=g.plugin;e.push(g);null===(l=g.logger)||void 0===l?void 0:l.call(g,ea);null===(q=g.activateCorePlugin)||void 0===q?void 0:q.call(g,h)}});null===e||void 0===e?void 0:e.forEach(function(g){var l,q;null===(l=g.logger)||void 0===l?void 0:l.call(g,ea);null===(q=g.activateCorePlugin)||void 0===q?void 0:q.call(g,h)});return h}function Pa(a){var c=a.event;a=c.schema;var d=c.data;c=bb();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",
data:{schema:a,data:d}};c.add("e","ue");c.addJson("ue_px","ue_pr",a);return c}function yd(a){var c=a.pageUrl,d=a.pageTitle;a=a.referrer;var e=bb();e.add("e","pv");e.add("url",c);e.add("page",d);e.add("refr",a);return e}function yb(a){return Pa({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:eb({name:a.name,data:a.data})}})}function zb(a){return Pa({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:eb({name:a.name,sid:a.sid,iid:a.iid,clid:a.clid,st:a.st,
cen:a.cen,ced:a.ced})}})}function eb(a,c){void 0===c&&(c={});var d={},e;for(e in a)if(c[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=a[e];return d}function Ic(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function Jc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var c=document.getElementsByTagName("title");c&&null!=c[0]&&(a=c[0].text)}return a}function Ab(a){var c=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return c?c[1]:
a}function Kc(a){var c=a.length;"."===a.charAt(--c)&&(a=a.slice(0,c));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function Bb(a){var c=window,d=Qa("referrer",c.location.href)||Qa("referer",c.location.href);if(d)return d;if(a)return a;try{if(c.top)return c.top.document.referrer;if(c.parent)return c.parent.document.referrer}catch(e){}return document.referrer}function ra(a,c,d,e){if(a.addEventListener)return a.addEventListener(c,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+c,d);a["on"+c]=d}function Qa(a,
c){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(c))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function fb(a,c,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,c);return!0}catch(g){return!1}}function Lc(a){try{var c=window.localStorage;c.removeItem(a);c.removeItem(a+".expires");return!0}catch(d){return!1}}function zd(a,c){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),
h="_test_value_"+(new Date).getTime(),g=d.split("."),l=g.length-1;0<=l;){var q=g.slice(l,g.length).join(".");ha(e,h,0,"/",q,a,c);if(ha(e)===h){ha(e,"",-1,"/",q,a,c);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)ha(d[e],"",-1,"/",q,a,c);return q}--l}return d}function ha(a,c,d,e,h,g,l){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==c&&void 0!==c?c:"")+(d?"; Expires="+(new Date(+new Date+
1E3*d)).toUTCString():"")+(e?"; Path="+e:"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(l?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function Ad(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var c=window.localStorage;c.setItem("modernizr","modernizr");c.removeItem("modernizr");return!0}catch(d){return!1}}function Bd(a,c,d,e,h,g,l,q,v,n,r,z,y,m,p,J){function W(u){var D=Object.keys(u).map(function(B){return[B,u[B]]}).reduce(function(B,
x){B[x[0]]=x[1].toString();return B},{});return{evt:D,bytes:Q(JSON.stringify(D))}}function Q(u){for(var D=0,B=0;B<u.length;B++){var x=u.charCodeAt(B);127>=x?D+=1:2047>=x?D+=2:55296<=x&&57343>=x?(D+=4,B++):D=65535>x?D+3:D+4}return D}function I(u){for(void 0===u&&(u=!1);G.length&&"string"!==typeof G[0]&&"object"!==typeof G[0];)G.shift();if(1>G.length)Y=!1;else{if(!fa||"string"!==typeof fa.valueOf())throw"No collector configured";Y=!0;if(xa){var D=function(R){for(var ia=0,Ra=0;ia<R.length&&!(Ra+=R[ia].bytes,
Ra>=l);)ia+=1;return ia},B=void 0;if(Ga(G)){B=fa;var x=M(B,!0,u);var N=D(G)}else B=ma(G[0]),x=M(B,!1,u),N=1;var T=setTimeout(function(){x.abort();Y=!1},r),ka=function(R){for(var ia=0;ia<R;ia++)G.shift();d&&fb(ja,JSON.stringify(G.slice(0,n)))};x.onreadystatechange=function(){if(4===x.readyState&&200<=x.status)if(clearTimeout(T),300>x.status)ka(N),I();else{var R=x.status;R=200<=R&&300>R?!1:p.includes(R)?!0:!J.includes(R);R||(ea.error("Status ".concat(x.status,", will not retry.")),ka(N));Y=!1}};if(Ga(G)){if(D=
G.slice(0,N),0<D.length){u=!1;D=D.map(function(R){return R.evt});if(gb){var Cb=new Blob([Z(ya(D))],{type:"application/json"});try{u=navigator.sendBeacon(B,Cb)}catch(R){u=!1}}!0===u?(ka(N),I()):x.send(Z(ya(D)))}}else x.send()}else if(z||Ga(G))Y=!1;else{B=new Image(1,1);var sa=!0;B.onload=function(){sa&&(sa=!1,G.shift(),d&&fb(ja,JSON.stringify(G.slice(0,n))),I())};B.onerror=function(){sa&&(Y=sa=!1)};B.src=ma(G[0]);setTimeout(function(){sa&&Y&&(sa=!1,I())},r)}}}function M(u,D,B){var x=new XMLHttpRequest;
D?(x.open("POST",u,!B),x.setRequestHeader("Content-Type","application/json; charset=UTF-8")):x.open("GET",u,!B);x.withCredentials=m;z&&x.setRequestHeader("SP-Anonymous","*");for(var N in y)Object.prototype.hasOwnProperty.call(y,N)&&x.setRequestHeader(N,y[N]);return x}function Z(u){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:u})}function ya(u){for(var D=(new Date).getTime().toString(),B=0;B<u.length;B++)u[B].stm=D;return u}function ma(u){return v?
fa+u.replace("?","?stm="+(new Date).getTime()+"&"):fa+u}function Db(u){function D(x,N,T){return(T=T.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&T.length?parseInt(T[0])<=x||parseInt(T[0])===x&&parseInt(T[1])<=N:!1}function B(x){return x.match("Version/.* Safari/")&&!x.match("Chrom(e|ium)")}return function(x,N){return(N=N.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&N.length?parseInt(N[0])<=x:!1}(13,u)||D(10,15,u)&&B(u)}var Y=!1,fa,G=[];e="string"===typeof e?e.toLowerCase():
e;var ta=!0===e||"beacon"===e||"true"===e,gb=!(!(ta&&window.navigator&&window.navigator.sendBeacon)||Db(window.navigator.userAgent))&&ta,xa=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),za="get"!==e&&xa&&("post"===e||ta),Sa=za?h:"/i",ja="snowplowOutQueue_".concat(a,"_").concat(za?"post2":"get");ta&&(y={});g=d&&Ad()&&za&&g||1;if(d)try{var Ta=window.localStorage.getItem(ja);G=Ta?JSON.parse(Ta):[]}catch(u){}Array.isArray(G)||(G=[]);c.outQueues.push(G);xa&&1<g&&c.bufferFlushers.push(function(u){Y||
I(u)});var Ga=function(u){return"object"===typeof u[0]};return{enqueueRequest:function(u,D){fa=D+Sa;if(za){u=W(u);if(u.bytes>=l){ea.warn("Event ("+u.bytes+"B) too big, max is "+l);D=u;M(fa,!0,!1).send(Z(ya([D.evt])));return}G.push(u)}else{var B="?";var x={co:!0,cx:!0},N=!0,T;for(T in u)u.hasOwnProperty(T)&&!x.hasOwnProperty(T)&&(N?N=!1:B+="&",B+=encodeURIComponent(T)+"="+encodeURIComponent(u[T]));for(var ka in x)u.hasOwnProperty(ka)&&x.hasOwnProperty(ka)&&(B+="&"+ka+"="+encodeURIComponent(u[ka]));
if(0<q&&(x=ma(B),x=Q(x),x>=q)){ea.warn("Event ("+x+"B) too big, max is "+q);xa&&(u=W(u),M(D+h,!0,!1).send(Z(ya([u.evt]))));return}G.push(B)}D=!1;d&&(D=fb(ja,JSON.stringify(G.slice(0,n))));Y||D&&!(G.length>=g)||I()},executeQueue:function(){Y||I()},setUseLocalStorage:function(u){d=u},setAnonymousTracking:function(u){z=u},setCollectorUrl:function(u){fa=u+Sa},setBufferSize:function(u){g=u},setCustomHeaders:function(u){y=u}}}function Mc(a,c,d){if("translate.googleusercontent.com"===a)""===d&&(d=c),a=(a=
/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(c))&&1<(null===a||void 0===a?void 0:a.length)?Qa("u",a[1]):null,c=null!==a&&void 0!==a?a:"",a=Ab(c);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)c=document.links[0].href,a=Ab(c);return[a,c,d]}function Cd(a,c,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",c,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=qa.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==
a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(l,q){l=parseInt(l);return isNaN(l)?q:l};c=function(l){return l?g(l,void 0):void 0};return[a[0],a[1],g(a[2],h),g(a[3],e),g(a[4],h),c(a[5]),a[6],a[7],a[8],c(a[9]),g(a[10],-1)]}function Ua(a,c){void 0===c&&(c=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=c;c=qa.v4();a[6]=c;a[10]=-1;a[8]="";a[9]=void 0;return c}function Eb(a){a[4]=Math.round((new Date).getTime()/1E3)}function Dd(a,c,d,e,h,g){function l(n,r){r=JSON.parse(JSON.stringify(r));
"undefined"!=typeof n.cacheRefreshInterval&&(r.cacheRefreshInterval=n.cacheRefreshInterval);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.base64Encoding&&(r.base64=n.configurationBundle[0].trackerConfiguration.base64Encoding);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.linkClickTracking&&(r.linkClickTracking=n.configurationBundle[0].trackerConfiguration.linkClickTracking);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.buttonClickTracking&&
(r.buttonClickTracking=n.configurationBundle[0].trackerConfiguration.buttonClickTracking);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.customEvent&&(r.customEvent=n.configurationBundle[0].trackerConfiguration.customEvent);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.exceptionAutotracking&&(r.exceptionAutotracking=n.configurationBundle[0].trackerConfiguration.exceptionAutotracking);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat&&
(r.enablePeriodicHeartbeat=n.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat);"undefined"!=typeof n.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval&&(r.periodicHeartbeatInterval=n.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval);"undefined"!=typeof n.configurationBundle[0].customEventTrackingConfiguration&&(r.customEventTrackingConfiguration=n.configurationBundle[0].customEventTrackingConfiguration);"undefined"!=typeof n.configurationBundle[0].convivaVideoEventTrackingConfiguration&&
(r.convivaVideoEventTrackingConfiguration=n.configurationBundle[0].convivaVideoEventTrackingConfiguration);"undefined"!=typeof n.configurationBundle[0].ajaxTrackingConfiguration&&(r.ajaxTrackingConfiguration=n.configurationBundle[0].ajaxTrackingConfiguration);"undefined"!=typeof n.configurationBundle[0].networkRequestTrackingConfiguration&&(r.networkRequestTrackingConfiguration=n.configurationBundle[0].networkRequestTrackingConfiguration);r.ajaxTrackingConfiguration&&(r.ajaxTrackingConfiguration.blocklist||
(r.ajaxTrackingConfiguration.blocklist=[]),r.ajaxTrackingConfiguration.blocklist.push(n.configurationBundle[0].networkConfiguration.endpoint),r.ajaxTrackingConfiguration.blocklist.push("wsg"),r.ajaxTrackingConfiguration.blocklist.push("remote_config"),r.ajaxTrackingConfiguration.blocklist.push("firebase"),r.ajaxTrackingConfiguration.blocklist.push("nr-data.net"),r.ajaxTrackingConfiguration.blocklist.push(".ts"),r.ajaxTrackingConfiguration.blocklist.push(".m4"));r.networkRequestTrackingConfiguration&&
(r.networkRequestTrackingConfiguration.blocklist||(r.networkRequestTrackingConfiguration.blocklist=[]),r.networkRequestTrackingConfiguration.blocklist.push(n.configurationBundle[0].networkConfiguration.endpoint),r.networkRequestTrackingConfiguration.blocklist.push("wsg"),r.networkRequestTrackingConfiguration.blocklist.push("remote_config"),r.networkRequestTrackingConfiguration.blocklist.push("firebase"),r.networkRequestTrackingConfiguration.blocklist.push("nr-data.net"),r.networkRequestTrackingConfiguration.blocklist.push(".ts"),
r.networkRequestTrackingConfiguration.blocklist.push(".m4"));v.setCollectorUrl(n.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(r)),localStorage.setItem("ConvivaEndpoint",n.configurationBundle[0].networkConfiguration.endpoint));v.core.setConfig(r)}void 0===g&&(g={});var q=[];a=function(n,r,z,y,m,p){function J(){Aa=Mc(window.location.hostname,
window.location.href,Bb());Aa[1]!==ua&&(Va=Bb(ua));Nc=Kc(Aa[0]);ua=Aa[1]}function W(b){var f=(new Date).getTime();b=b.currentTarget;if(null===b||void 0===b?0:b.href){f="_sp="+(hb+"."+f);var k=b.href.split("#"),t=k[0].split("?"),w=t.shift();if(t=t.join("?")){for(var C=!0,H=t.split("&"),L=0;L<H.length;L++)if("_sp="===H[L].substr(0,4)){C=!1;H[L]=f;t=H.join("&");break}C&&(t=f+"&"+t)}else t=f;k[0]=w+"?"+t;f=k.join("#");b.href=f}}function Q(b){for(var f=0;f<document.links.length;f++){var k=document.links[f];
!k.spDecorationEnabled&&b(k)&&(ra(k,"click",W,!0),ra(k,"mousedown",W,!0),k.spDecorationEnabled=!0)}}function I(b){if(Oc){var f=/#.*/;b=b.replace(f,"")}Pc&&(f=/[{}]/g,b=b.replace(f,""));return b}function M(b){return(b=/^([a-z]+):/.exec(b))?b[1]:null}function Z(b){b=Ha+b+"."+Ba;if("localStorage"==P){try{var f=window.localStorage,k=f.getItem(b+".expires");if(null===k||+k>Date.now())var t=f.getItem(b);else f.removeItem(b),f.removeItem(b+".expires"),t=void 0}catch(w){t=void 0}return t}if("cookie"==P||
"cookieAndLocalStorage"==P)return ha(b)}function ya(){J();Ba=Ed((Wa||Nc)+(Fb||"/")).slice(0,4)}function ma(){Gb=(new Date).getTime()}function Db(){var b=Y(),f=b[0];f<ib?ib=f:f>jb&&(jb=f);b=b[1];b<kb?kb=b:b>lb&&(lb=b);ma()}function Y(){var b=document.documentElement;return b?[b.scrollLeft||window.pageXOffset,b.scrollTop||window.pageYOffset]:[0,0]}function fa(){var b=Y(),f=b[0];jb=ib=f;lb=kb=b=b[1]}function G(){gb(Ha+"ses."+Ba,"*",Qc)}function ta(b){var f=Ha+"id."+Ba;b.shift();b=b.join(".");gb(f,b,
Rc)}function gb(b,f,k){if(!Ia||Xa)"localStorage"==P?fb(b,f,k):("cookie"==P||"cookieAndLocalStorage"==P)&&ha(b,f,k,Fb,Wa,mb,nb)}function xa(b){var f=Ha+"id."+Ba,k=Ha+"ses."+Ba;Lc(f);Lc(k);ha(f,"",-1,"/",Wa,mb,nb);ha(k,"",-1,"/",Wa,mb,nb);null!==b&&void 0!==b&&b.preserveSession||(Ca=qa.v4(),la=1);null!==b&&void 0!==b&&b.preserveUser||(hb=qa.v4(),Da=null)}function za(b){b&&b.stateStorageStrategy&&(p.stateStorageStrategy=b.stateStorageStrategy,P=Sc(p));Ia=!!p.anonymousTracking;Xa=Tc(p);Hb=Uc(p);na.setUseLocalStorage("localStorage"==
P||"cookieAndLocalStorage"==P);na.setAnonymousTracking(Hb)}function Sa(){try{var b=window.localStorage.getItem(Ib+"."+Jb),f=JSON.parse(b||"{}");"{}"===f||"undefined"===typeof f?(Ya=x(),ob=N(),va=-1):(Ya=f.clId||x(),va=f[Za]&&2147483648>f[Za]?f[Za]:-1,ob=N());B()}catch(t){console.warn(t)}if(!Ia||Xa){b="none"!=P&&!!Z("ses");f=ja();if(f[1])var k=f[1];else k=Ia?"":qa.v4(),f[1]=k;hb=k;Ca=b?f[6]:Ua(f);la=f[3];"none"!=P&&(G(),Eb(f),ta(f))}}function ja(){if("none"==P)return["1","",0,0,0,void 0,"","","",void 0,
0];var b=Z("id")||void 0;return Cd(b,hb,Ca,la)}function Ta(b){return 0===b.indexOf("http")?b:("https:"===document.location.protocol?"https":"http")+"://"+b}function Ga(){Vc&&null!=m.pageViewId||(m.pageViewId=qa.v4())}function u(){null==m.pageViewId&&(m.pageViewId=qa.v4());return m.pageViewId}function D(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:u()}}]}}}function B(){try{var b=window.localStorage,f={clId:Ya,iid:ob,eventIndex:va},
k=null;try{k=JSON.stringify(f)}catch(t){return}return b.setItem(Ib+"."+Jb,k)}catch(t){}}function x(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(b){console.warn(b)}}function N(){try{return Math.floor(2147483647*Math.random())}catch(b){return console.warn(b),-1}}function T(b){try{var f=Object.keys(b);Fd(JSON.stringify(b))?f.forEach(function(k){""!==
k&&Object.defineProperty(Kb,k,{value:""+b[k],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(k){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",k)}}function ka(b){try{b.forEach(function(f){delete Kb[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function Cb(b){var f=b.title,k=b.context,t=b.timestamp;b=b.contextCallback;J();Wc&&Ga();Wc=!0;
Ja=document.title;$a=f;f=Jc($a||Ja);Ka.track(yd({pageUrl:I(La||ua),pageTitle:f,referrer:I(pb||Va)}),(k||[]).concat(b?b():[]),t);t=new Date;f=!1;if(ca.enabled&&!ca.installed){f=ca.installed=!0;var w={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var H=!1,L=Object.defineProperty({},"passive",{get:function(){H=!0},set:function(){}}),F=function(){};window.addEventListener("testPassiveEventSupport",F,L);window.removeEventListener("testPassiveEventSupport",
F,L);w.hasSupport=H}}};w.update();var C="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(w,"hasSupport")?ra(document,C,ma,{passive:!0}):ra(document,C,ma);fa();C=function(H,L){void 0===L&&(L=ma);return function(F){return ra(document,F,L)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(C(document));["resize","focus","blur"].forEach(C(window));C(window,Db)("scroll")}if(ca.enabled&&
(Gd||f))for(t in Gb=t.getTime(),t=void 0,ca.configurations)if(f=ca.configurations[t])window.clearInterval(f.activityInterval),sa(f,k,b)}function sa(b,f,k){var t=function(H,L){J();var F=v.core.getConfig();F.enablePeriodicHeartbeat?void 0!=F.periodicHeartbeatInterval&&(F=1E3*F.periodicHeartbeatInterval,F!=b.configHeartBeatTimer&&(window.clearInterval(b.activityInterval),b.activityInterval=window.setInterval(C,F))):window.clearInterval(b.activityInterval);H({context:L,pageViewId:u(),minXOffset:ib,minYOffset:kb,
maxXOffset:jb,maxYOffset:lb});fa()},w=new Date;window.setTimeout(function(){t(b.callback,(f||[]).concat(k?k():[]))},2E3);var C=function(){var H=new Date;if(w.getTime()+b.configHeartBeatTimer>H.getTime()||Gb+b.configHeartBeatTimer>H.getTime())w=H,t(b.callback,(f||[]).concat(k?k():[]))};b.activityInterval=window.setInterval(C,b.configHeartBeatTimer)}function R(b){var f=b.minimumVisitLength,k=b.heartbeatDelay;b=b.callback;if(Ic(f)&&Ic(k))return{configMinimumVisitLength:1E3*f,configHeartBeatTimer:1E3*
k,callback:b};ea.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function ia(b){var f=b.context,k=b.minXOffset,t=b.minYOffset,w=b.maxXOffset,C=b.maxYOffset;b=document.title;b!==Ja&&(Ja=b,$a=void 0);b=Ka;var H=b.track,L=I(La||ua),F=Jc($a||Ja),U=I(pb||Va);k=Math.round(k);w=Math.round(w);t=Math.round(t);C=Math.round(C);var aa=bb();aa.add("e","pp");aa.add("url",L);aa.add("page",F);aa.add("refr",U);k&&!isNaN(Number(k))&&aa.add("pp_mix",k.toString());w&&!isNaN(Number(w))&&
aa.add("pp_max",w.toString());t&&!isNaN(Number(t))&&aa.add("pp_miy",t.toString());C&&!isNaN(Number(C))&&aa.add("pp_may",C.toString());H.call(b,aa,f)}function Ra(b){if(p.trackerConfigUrl)qb(p.trackerConfigUrl),Ma=window.setInterval(qb,6E4*b,p.trackerConfigUrl);else{var f=z.split("js-")[1];f="https://drt1fhpy4haqm.cloudfront.net/js/"+p.convivaCustomerKey+"/"+f+"/remote_config.json";qb(f);Ma=window.setInterval(qb,6E4*b,f)}}var Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc,ec,fc,gc,hc,ic,
jc,kc,V={cacheRefreshInterval:60,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{blocklist:["*"]},networkRequestTrackingConfiguration:{blocklist:["*"]}},K={},Ma=null;if(window.localStorage){var Xc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(K);
var lc=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else lc="https://appgw.conviva.com",Xc=JSON.stringify(K);y=p.gatewayUrl?p.gatewayUrl:lc?lc:"https://appgw.conviva.com";r||(r="CAT");var O=JSON.parse(Xc);K.base64="undefined"!=typeof O.base64?O.base64:V.base64;K.cacheRefreshInterval="undefined"!=typeof O.cacheRefreshInterval?O.cacheRefreshInterval:V.cacheRefreshInterval;K.linkClickTracking="undefined"!=typeof O.linkClickTracking?O.linkClickTracking:
V.linkClickTracking;K.buttonClickTracking="undefined"!=typeof O.buttonClickTracking?O.buttonClickTracking:V.buttonClickTracking;K.exceptionAutotracking="undefined"!=typeof O.exceptionAutotracking?O.exceptionAutotracking:V.exceptionAutotracking;K.enablePeriodicHeartbeat="undefined"!=typeof O.enablePeriodicHeartbeat?O.enablePeriodicHeartbeat:V.enablePeriodicHeartbeat;K.periodicHeartbeatInterval="undefined"!=typeof O.periodicHeartbeatInterval?O.periodicHeartbeatInterval:V.periodicHeartbeatInterval;K.customEventTrackingConfiguration=
"undefined"!=typeof O.customEventTrackingConfiguration?O.customEventTrackingConfiguration:X({},V.customEventTrackingConfiguration);K.convivaVideoEventTrackingConfiguration="undefined"!=typeof O.convivaVideoEventTrackingConfiguration?O.convivaVideoEventTrackingConfiguration:X({},V.convivaVideoEventTrackingConfiguration);K.ajaxTrackingConfiguration="undefined"!=typeof O.ajaxTrackingConfiguration?O.ajaxTrackingConfiguration:X({},V.ajaxTrackingConfiguration);K.networkRequestTrackingConfiguration="undefined"!=
typeof O.networkRequestTrackingConfiguration?O.networkRequestTrackingConfiguration:X({},V.networkRequestTrackingConfiguration);try{var Yc=XMLHttpRequest,Zc=window.fetch.bind(window);if(Yc){var Hd=function(b){var f={};b.trim().split(/[\r\n]+/).forEach(function(k){k=k.split(":");var t=k[1];f[k[0].trim()]=null===t||void 0===t?void 0:t.trim()});return f},rb=function(b,f,k){try{var t=Hd(b.getAllResponseHeaders()),w={status:null===b||void 0===b?void 0:b.status,statusText:(""!==(null===b||void 0===b?void 0:
b.statusText)?null===b||void 0===b?void 0:b.statusText:void 0)||("load"!=k?k:void 0),headers:t,body:null===b||void 0===b?void 0:b.responseText,size:(new TextEncoder).encode(b.responseText).byteLength,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};v.trackNetworkRequest({requestDetails:f,responseDetails:w})}catch(C){console.warn("Conviva App Tracker:: Unable to track network request error while handleResponse ".concat(C))}};
window.XMLHttpRequest=function(){var b=new Yc;try{var f,k,t={},w,C=b.setRequestHeader;b.setRequestHeader=function(F,U){t[F]=U;C.call(this,F,U)};var H=b.open;b.open=function(){for(var F=[],U=0;U<arguments.length;U++)F[U]=arguments[U];f=F[0];k=F[1];H.call(b,f,k,!0)};var L=b.send;b.send=function(F){try{w={method:f,url:k,headers:t,body:F?F.toString():"",requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===
Date||void 0===Date?void 0:Date.now())},w.size=(new TextEncoder).encode(w.body).byteLength}catch(U){console.warn("Conviva App Tracker:: Unable to track network request while send ".concat(U))}L.call(b,F)};b.addEventListener("load",function(){return rb(b,w,"load")});b.addEventListener("error",function(){return rb(b,w,"error")});b.addEventListener("abort",function(){return rb(b,w,"abort")});b.addEventListener("timeout",function(){return rb(b,w,"timeout")})}catch(F){console.warn("Conviva App Tracker:: Unable to track network request while interceptRequest ".concat(F))}return b}}if(Zc){var $c=
function(b){var f={};b.forEach(function(k,t){f[t]=k});return f};window.fetch=function(b,f){b=new Request(b,f);var k=Zc(b);try{var t={method:b.method,url:b.url,headers:$c(b.headers),body:f&&f.body?f.body.toString():"",requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};t.size=(new TextEncoder).encode(t.body).byteLength;k.then(function(w){var C={status:w.status,
statusText:""!==(null===w||void 0===w?void 0:w.statusText)?null===w||void 0===w?void 0:w.statusText:void 0,headers:$c(w.headers),body:"",size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};w.clone().text().then(function(H){C.body=H;C.size=(new TextEncoder).encode(H).byteLength;v.trackNetworkRequest({requestDetails:t,responseDetails:C})})})}catch(w){console.warn("Conviva App Tracker:: Unable to track network request while fetch interceptRequest ".concat(w))}return k}}}catch(b){console.warn("Conviva App Tracker:: Unable to track network request ".concat(b))}var Id=
p.convivaCustomerKey;if(window.XMLHttpRequest){var Na=new XMLHttpRequest;Na.onreadystatechange=function(){if(4==Na.readyState)if(200==Na.status){var b=JSON.parse(Na.response);b.cacheRefreshInterval||(b.cacheRefreshInterval=V.cacheRefreshInterval);K.cacheRefreshInterval!=b.cacheRefreshInterval&&(K.cacheRefreshInterval=b.cacheRefreshInterval,"number"===typeof Ma&&window.clearInterval(Ma),Ra(b.cacheRefreshInterval));l(b,V)}else try{var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState)if(200==
f.status){var k=JSON.parse(f.response);l(k,V)}else try{var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var w=JSON.parse(t.response);l(w,V)}};t.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0);t.send()}catch(w){}};f.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+Id+"/remote_config.json",!0);f.send()}catch(k){}};var qb=function(b){try{Na.open("GET",b,!0),Na.send()}catch(f){}};"number"===typeof Ma&&window.clearInterval(Ma);
Ra(K.cacheRefreshInterval)}p.eventMethod=null!==(Lb=p.eventMethod)&&void 0!==Lb?Lb:"post";var Sc=function(b){var f;return null!==(f=b.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},Tc=function(b){var f,k;return"boolean"===typeof b.anonymousTracking?!1:null!==(k=!0===(null===(f=b.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==k?k:!1},Uc=function(b){var f,k;return"boolean"===typeof b.anonymousTracking?!1:null!==(k=!0===(null===(f=b.anonymousTracking)||void 0===
f?void 0:f.withServerAnonymisation))&&void 0!==k?k:!1};q.push(function(){return{beforeTrack:function(b){var f=Z("ses"),k=ja();mc=nc?!!ha(nc):!1;ad||mc?xa():("0"===k[0]?(Ca=f||"none"==P?k[6]:Ua(k),la=k[3]):(new Date).getTime()-oc>1E3*Qc&&(la++,Ca=Ua(k,la)),Eb(k),-1===k[10]&&(f=b.build(),k[8]=f.eid,f=f.dtm||f.ttm,k[9]=f?parseInt(f):void 0),k[10]+=1,b.add("uid",Ia?null:Da),J(),b.add("refr",I(pb||Va)),document&&b.add("page",document.title),b.add("url",I(La||ua)),!Jd||Xa||Ia||(f=k[9],f={userId:k[1],sessionId:k[6],
eventIndex:k[10],sessionIndex:k[3],previousSessionId:k[7]||null,storageMechanism:"localStorage"==P?"LOCAL_STORAGE":"COOKIE_1",firstEventId:k[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():null},b.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:f})),"none"!=P&&(ta(k),G()),oc=(new Date).getTime())}}}());(null!==(Nb=null===(Mb=null===p||void 0===p?void 0:p.contexts)||void 0===Mb?void 0:Mb.webPage)&&void 0!==Nb?Nb:1)&&q.push(D());q.push(function(){return{contexts:function(){var b=
Ya,f=ob.toString(),k=Kd;try{var t=window.localStorage.getItem(Ib+"."+Jb),w=JSON.parse(t||"{}");"{}"!==w&&"undefined"!==typeof w&&"undefined"!==typeof w[Za]&&(va=w[Za]);2147483647<=va?va=0:va++;B();var C=va}catch(H){console.warn(H),C=void 0}b={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-2",data:{clid:b,iid:f,ck:k,eventIndex:C}};f={eventIndex:Ld++};null!=pc&&(f.previousEventTimestamp=pc);pc=(new Date).toISOString();return[b,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());
q.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:Kb}}]}}}());q.push.apply(q,null!==(Ob=p.plugins)&&void 0!==Ob?Ob:[]);var Ka=xd({base64:K.base64,corePlugins:q,callback:function(b){ad||mc||na.enqueueRequest(b.build(),qc)},linkClickTracking:K.linkClickTracking,buttonClickTracking:K.buttonClickTracking,customEvent:!0,exceptionAutotracking:K.exceptionAutotracking,enablePeriodicHeartbeat:K.enablePeriodicHeartbeat,periodicHeartbeatInterval:K.periodicHeartbeatInterval,
customEventTrackingConfiguration:K.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:K.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:K.ajaxTrackingConfiguration,networkRequestTrackingConfiguration:K.networkRequestTrackingConfiguration}),Aa=Mc(window.location.hostname,window.location.href,Bb()),Nc=Kc(Aa[0]),ua=Aa[1],Va=Aa[2],pb,Md=null!==(Pb=p.platform)&&void 0!==Pb?Pb:"web",qc=Ta(y),Nd=null!==(Qb=p.postPath)&&void 0!==Qb?Qb:"/"+p.convivaCustomerKey+"/ctp",
Od=null!==(Rb=p.appId)&&void 0!==Rb?Rb:"",Kd=null!==(Sb=p.convivaCustomerKey)&&void 0!==Sb?Sb:"",La,Kb={},Ja=document.title,$a,Gd=null!==(Tb=p.resetActivityTrackingOnPageView)&&void 0!==Tb?Tb:!0,Oc,Pc,Ha=null!==(Ub=p.cookieName)&&void 0!==Ub?Ub:"_sp_",Wa=null!==(Vb=p.cookieDomain)&&void 0!==Vb?Vb:void 0,Fb="/",mb=null!==(Wb=p.cookieSameSite)&&void 0!==Wb?Wb:"None",nb=null!==(Xb=p.cookieSecure)&&void 0!==Xb?Xb:!0,bd=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,ad="undefined"!==typeof p.respectDoNotTrack?
p.respectDoNotTrack&&("yes"===bd||"1"===bd):!1,nc,Rc=null!==(Yb=p.cookieLifetime)&&void 0!==Yb?Yb:63072E3,Qc=null!==(Zb=p.sessionCookieTimeout)&&void 0!==Zb?Zb:1800,Xa=Tc(p),Hb=Uc(p),Ia=!!p.anonymousTracking,P=Sc(p),Ib="Conviva",Jb="sdkConfig",Za="eventIndex",Ya,ob,va=-1,Ld=0,Gb,oc=(new Date).getTime(),ib,jb,kb,lb,Ba,hb,Ca,la=1,Da,na=Bd(n,m,"localStorage"==P||"cookieAndLocalStorage"==P,p.eventMethod,Nd,null!==($b=p.bufferSize)&&void 0!==$b?$b:1,null!==(ac=p.maxPostBytes)&&void 0!==ac?ac:4E4,null!==
(bc=p.maxGetBytes)&&void 0!==bc?bc:0,null!==(cc=p.useStm)&&void 0!==cc?cc:!0,null!==(dc=p.maxLocalStorageQueueSize)&&void 0!==dc?dc:1E3,null!==(ec=p.connectionTimeout)&&void 0!==ec?ec:5E3,Hb,null!==(fc=p.customHeaders)&&void 0!==fc?fc:{},null!==(gc=p.withCredentials)&&void 0!==gc?gc:!0,null!==(hc=p.retryStatusCodes)&&void 0!==hc?hc:[],(null!==(ic=p.dontRetryStatusCodes)&&void 0!==ic?ic:[]).concat([400,401,403,410,422])),Vc=!1,pc,Wc=!1,ca={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,
configHeartBeatTimer:4E4,callback:ia}}},Jd=null!==(kc=null===(jc=p.contexts)||void 0===jc?void 0:jc.session)&&void 0!==kc?kc:!1,mc;p.hasOwnProperty("discoverRootDomain")&&p.discoverRootDomain&&(Wa=zd(mb,nb));Ka.setTrackerVersion(z);Ka.setAppId(Od);Ka.setPlatform(Md);ya();Sa();na.setCustomHeaders({"x-client-id":""+Ya});p.crossDomainLinker&&Q(p.crossDomainLinker);var Fd=function(b){try{return"object"===typeof JSON.parse(b)}catch(f){return!1}};return X(X({},{getDomainSessionIndex:function(){return la},
getPageViewId:function(){return u()},newSession:function(){var b=ja();"0"===b[0]?(Ca="none"!=P?Ua(b):b[6],la=b[3],G()):(la++,Ca=Ua(b,la));Eb(b);"none"!=P&&(ta(b),G());oc=(new Date).getTime()},getCookieName:function(b){return Ha+b+"."+Ba},getUserId:function(){return Da},getDomainUserId:function(){return ja()[1]},getDomainUserInfo:function(){return ja()},setReferrerUrl:function(b){pb=b},setCustomUrl:function(b){J();var f=ua,k;M(b)?La=b:"/"===b.slice(0,1)?La=M(f)+"://"+Ab(f)+b:(f=I(f),0<=(k=f.indexOf("?"))&&
(f=f.slice(0,k)),(k=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,k+1)),La=f+b)},setDocumentTitle:function(b){Ja=document.title;$a=b},discardHashTag:function(b){Oc=b},discardBrace:function(b){Pc=b},setCookiePath:function(b){Fb=b;ya()},setVisitorCookieTimeout:function(b){Rc=b},crossDomainLinker:function(b){Q(b)},enableActivityTracking:function(b){ca.configurations.pagePing||(ca.enabled=!0,ca.configurations.pagePing=R(X(X({},b),{callback:ia})))},enableActivityTrackingCallback:function(b){ca.configurations.callback||
(ca.enabled=!0,ca.configurations.callback=R(b))},updatePageActivity:function(){ma()},setOptOutCookie:function(b){nc=b},setUserId:function(b){Da=b},setUserIdFromLocation:function(b){J();Da=Qa(b,ua)},setUserIdFromReferrer:function(b){J();Da=Qa(b,Va)},setUserIdFromCookie:function(b){Da=ha(b)},setCollectorUrl:function(b){qc=Ta(b);na.setCollectorUrl(qc)},setBufferSize:function(b){na.setBufferSize(b)},flushBuffer:function(b){void 0===b&&(b={});na.executeQueue();b.newBufferSize&&na.setBufferSize(b.newBufferSize)},
trackPageView:function(b){void 0===b&&(b={});Cb(b)},trackVideoEvent:function(b){void 0===b&&(b={});try{var f=this.core.getConfig();""!=b.name&&void 0!=b.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var k=f.convivaVideoEventTrackingConfiguration.blocklist;-1==k.indexOf("*")&&
-1==k.indexOf(""+b.name)&&this.core.track(zb({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp)}else this.core.track(zb({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,
oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp);else this.core.track(zb({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp)}catch(t){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",t)}},trackAjaxEvent:function(b){void 0===
b&&(b={});try{if("xmlhttprequest"===b.initiatorType){var f=this.core.getConfig();if(""==b.name||void 0==b.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(void 0!=f.ajaxTrackingConfiguration&&void 0!=f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var k=f.ajaxTrackingConfiguration.blocklist;if(-1==k.indexOf("*")){f=!1;for(var t=0;t<k.length;t++)""!==k[t]&&-1!==b.name.indexOf(k[t])&&(f=!0);if(!f){var w=
this.core,C=w.track;var H=Pa({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:eb({targetUrl:b.name,responseStatusCode:b.responseStatus,duration:b.duration})}});C.call(w,H,b.context,b.timestamp)}}}}}catch(L){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",L)}},trackNetworkRequest:function(b){var f,k,t,w,C,H,L,F,U,aa,rc;void 0===b&&(b={});var sc=b.responseDetails.responseTime-b.requestDetails.requestTime;try{sc=parseFloat(sc.toFixed(3))}catch(tc){console.warn("Conviva App Tracker:: exception while converting duration to 3 decimal",
tc)}var Ea=this.core.getConfig();try{if(void 0!=Ea.networkRequestTrackingConfiguration&&void 0!=Ea.networkRequestTrackingConfiguration.blocklist&&0<Ea.networkRequestTrackingConfiguration.blocklist.length){var sb=Ea.networkRequestTrackingConfiguration.blocklist;if(-1==sb.indexOf("*")){Ea=!1;for(var tb=0;tb<sb.length;tb++)""!==sb[tb]&&-1!==b.requestDetails.url.indexOf(sb[tb])&&(Ea=!0);if(!Ea){var cd=this.core,Pd=cd.track,da={targetUrl:null===(f=null===b||void 0===b?void 0:b.requestDetails)||void 0===
f?void 0:f.url,method:null===(k=null===b||void 0===b?void 0:b.requestDetails)||void 0===k?void 0:k.method,responseStatusCode:null===(t=null===b||void 0===b?void 0:b.responseDetails)||void 0===t?void 0:t.status,responseStatusText:null===(w=null===b||void 0===b?void 0:b.responseDetails)||void 0===w?void 0:w.statusText,requestSize:null===(C=null===b||void 0===b?void 0:b.requestDetails)||void 0===C?void 0:C.size,responseSize:null===(H=null===b||void 0===b?void 0:b.responseDetails)||void 0===H?void 0:
H.size,duration:sc,requestTimestamp:null===(L=null===b||void 0===b?void 0:b.requestDetails)||void 0===L?void 0:L.requestTimestamp,responseTimestamp:null===(F=null===b||void 0===b?void 0:b.responseDetails)||void 0===F?void 0:F.responseTimestamp,contentType:(null===(U=null===b||void 0===b?void 0:b.requestDetails)||void 0===U?void 0:U.headers["Content-Type"])||(null===(aa=null===b||void 0===b?void 0:b.requestDetails)||void 0===aa?void 0:aa.headers["content-type"])||(null===(rc=null===b||void 0===b?void 0:
b.requestDetails)||void 0===rc?void 0:rc.headers["Content-type"])};var Qd=Pa({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-3",data:eb({targetUrl:da.targetUrl,method:da.method,queryParameters:da.queryParameters,responseStatusCode:da.responseStatusCode,responseStatusText:da.responseStatusText,headers:da.headers,requestSize:da.requestSize,responseSize:da.responseSize,duration:da.duration,contentType:da.contentType,requestTimestamp:da.requestTimestamp,responseTimestamp:da.responseTimestamp})}});
Pd.call(cd,Qd,b.context,b.timestamp)}}}}catch(tc){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",tc)}},setCustomTags:function(b){void 0===b&&(b={});T(b)},unsetCustomTags:function(b){void 0===b&&(b={});ka(b)},preservePageViewId:function(){Vc=!0},disableAnonymousTracking:function(b){p.anonymousTracking=!1;za(b);Sa();na.executeQueue()},enableAnonymousTracking:function(b){var f;p.anonymousTracking=null!==(f=b&&(null===b||void 0===b?void 0:b.options))&&void 0!==
f?f:!0;za(b);Xa||Ga()},clearUserData:xa}),{id:n,namespace:r,core:Ka,sharedState:m})}(a,c,d,e,h,g);var v=X(X({},a),{addPlugin:function(n){var r,z;v.core.addPlugin(n);null===(z=(r=n.plugin).activateBrowserPlugin)||void 0===z?void 0:z.call(r,v)}});q.forEach(function(n){var r;null===(r=n.activateBrowserPlugin)||void 0===r?void 0:r.call(n,v)});return v}function E(a,c){try{var d=null!==a&&void 0!==a?a:Object.keys(ab);a=ab;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):ea.warn(g+
" not configured")}e.forEach(c)}catch(l){ea.error("Function failed",l)}}function dd(a,c,d,e,h,g){return ab.hasOwnProperty(a)?null:(ab[a]=Dd(a,c,d,e,h,g),ab[a])}function Rd(){function a(){"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}function c(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function q(){h.removeEventListener("DOMContentLoaded",
q,!1);c()}):h.attachEvent&&h.attachEvent("onreadystatechange",function v(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",v),c())});ra(g,"load",c,!1)}var e=new Sd,h=document,g=window;h.visibilityState&&ra(h,"visibilitychange",a,!1);ra(g,"beforeunload",function(){e.bufferFlushers.forEach(function(l){l(!1)})},!1);"loading"===document.readyState?d():c();return e}var X=function(){X=Object.assign||function(a){for(var c,d=1,e=arguments.length;d<e;d++){c=arguments[d];for(var h in c)Object.prototype.hasOwnProperty.call(c,
h)&&(a[h]=c[h])}return a};return X.apply(this,arguments)},wa={},ed="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(ed){var fd=new Uint8Array(16);wa=function(){ed(fd);return fd}}else{var gd=Array(16);wa=function(){for(var a=0,c;16>a;a++)0===(a&3)&&(c=4294967296*Math.random()),gd[a]=c>>>((a&3)<<3)&255;return gd}}for(var S=[],ub=0;256>ub;++ub)S[ub]=
(ub+256).toString(16).substr(1);var hd=function(a,c){c=c||0;return[S[a[c++]],S[a[c++]],S[a[c++]],S[a[c++]],"-",S[a[c++]],S[a[c++]],"-",S[a[c++]],S[a[c++]],"-",S[a[c++]],S[a[c++]],"-",S[a[c++]],S[a[c++]],S[a[c++]],S[a[c++]],S[a[c++]],S[a[c++]]].join("")},Td=wa,id,uc,vc=0,wc=0,Ud=wa;wa=function(a,c,d){d=c&&d||0;"string"==typeof a&&(c="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Ud)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(c)for(var e=0;16>e;++e)c[d+e]=a[e];return c||hd(a)};wa.v1=function(a,
c,d){d=c&&d||0;var e=c||[];a=a||{};var h=a.node||id,g=void 0!==a.clockseq?a.clockseq:uc;if(null==h||null==g){var l=Td();null==h&&(h=id=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]);null==g&&(g=uc=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var q=void 0!==a.nsecs?a.nsecs:wc+1,v=l-vc+(q-wc)/1E4;0>v&&void 0===a.clockseq&&(g=g+1&16383);(0>v||l>vc)&&void 0===a.nsecs&&(q=0);if(1E4<=q)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");vc=l;wc=q;uc=g;l+=122192928E5;a=(1E4*(l&268435455)+
q)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=l/4294967296*1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>g;++g)e[d+g]=h[g];return c?c:hd(e)};var qa=wa.v4=wa,pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",oa;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(oa||(oa={}));var ea=function(a){void 0===a&&
(a=oa.warn);return{setLogLevel:function(c){a=oa[c]?c:oa.warn},warn:function(c,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=oa.warn&&"undefined"!==typeof console&&(h="Snowplow: "+c,d?console.warn.apply(console,ba([h+"\n",d],e,!1)):console.warn.apply(console,ba([h],e,!1)))},error:function(c,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=oa.error&&"undefined"!==typeof console&&(h="Snowplow: "+c+"\n",d?console.error.apply(console,ba([h+"\n",d],e,!1)):console.error.apply(console,
ba([h],e,!1)))},debug:function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=oa.debug&&"undefined"!==typeof console&&console.debug.apply(console,ba(["Snowplow: "+c],d,!1))},info:function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=oa.info&&"undefined"!==typeof console&&console.info.apply(console,ba(["Snowplow: "+c],d,!1))}}}(),jd={},kd={};(function(){var a={rotl:function(c,d){return c<<d|c>>>32-d},rotr:function(c,d){return c<<32-d|c>>>d},endian:function(c){if(c.constructor==
Number)return a.rotl(c,8)&16711935|a.rotl(c,24)&4278255360;for(var d=0;d<c.length;d++)c[d]=a.endian(c[d]);return c},randomBytes:function(c){for(var d=[];0<c;c--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(c){for(var d=[],e=0,h=0;e<c.length;e++,h+=8)d[h>>>5]|=c[e]<<24-h%32;return d},wordsToBytes:function(c){for(var d=[],e=0;e<32*c.length;e+=8)d.push(c[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(c){for(var d=[],e=0;e<c.length;e++)d.push((c[e]>>>4).toString(16)),d.push((c[e]&
15).toString(16));return d.join("")},hexToBytes:function(c){for(var d=[],e=0;e<c.length;e+=2)d.push(parseInt(c.substr(e,2),16));return d},bytesToBase64:function(c){for(var d=[],e=0;e<c.length;e+=3)for(var h=c[e]<<16|c[e+1]<<8|c[e+2],g=0;4>g;g++)8*e+6*g<=8*c.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(c){c=c.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,h=0;e<c.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(e-
1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(e))>>>6-2*h);return d}};kd=a})();var xc={utf8:{stringToBytes:function(a){return xc.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(xc.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var c=[],d=0;d<a.length;d++)c.push(a.charCodeAt(d)&255);return c},bytesToString:function(a){for(var c=[],d=0;d<a.length;d++)c.push(String.fromCharCode(a[d]));
return c.join("")}}},ld=xc;(function(){var a=kd,c=ld.utf8,d=ld.bin,e=function(h,g){var l=a.wordsToBytes,q=h;q.constructor==String?q=c.stringToBytes(q):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(q)?q=Array.prototype.slice.call(q,0):Array.isArray(q)||(q=q.toString());h=a.bytesToWords(q);var v=8*q.length;q=[];var n=1732584193,r=-271733879,z=-1732584194,y=271733878,m=-1009589776;h[v>>5]|=128<<24-v%32;h[(v+64>>>9<<4)+15]=v;for(v=0;v<h.length;v+=16){for(var p=n,J=r,
W=z,Q=y,I=m,M=0;80>M;M++){if(16>M)q[M]=h[v+M];else{var Z=q[M-3]^q[M-8]^q[M-14]^q[M-16];q[M]=Z<<1|Z>>>31}Z=(n<<5|n>>>27)+m+(q[M]>>>0)+(20>M?(r&z|~r&y)+1518500249:40>M?(r^z^y)+1859775393:60>M?(r&z|r&y|z&y)-1894007588:(r^z^y)-899497514);m=y;y=z;z=r<<30|r>>>2;r=n;n=Z}n+=p;r+=J;z+=W;y+=Q;m+=I}l=l.call(a,[n,r,z,y,m]);return g&&g.asBytes?l:g&&g.asString?d.bytesToString(l):a.bytesToHex(l)};e._blocksize=16;e._digestsize=20;jd=e})();var Ed=jd,ab={},Sd=function(){return function(){this.outQueues=[];this.bufferFlushers=
[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),vb="undefined"!==typeof window?Rd():void 0;A.addGlobalContexts=function(a,c){E(c,function(d){d.core.addGlobalContexts(a)})};A.addPlugin=function(a,c){E(c,function(d){d.addPlugin(a)})};A.clearGlobalContexts=function(a){E(a,function(c){c.core.clearGlobalContexts()})};A.clearUserData=function(a,c){E(c,function(d){d.clearUserData(a)})};A.convivaAppTracker=function(a){void 0===a&&(a={});try{if(vb){var c=dd("CAT","CAT","js-".concat("0.3.27"),"",
vb,a);document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&c&&c.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){c&&c.trackAjaxEvent(e)})})).observe({type:"resource",buffered:!0});return c}}catch(d){console.warn("Conviva App Tracker:: Initialisation failed! "+d)}};A.crossDomainLinker=function(a,c){E(c,function(d){d.crossDomainLinker(a)})};A.disableAnonymousTracking=function(a,c){E(c,function(d){d.disableAnonymousTracking(a)})};
A.discardBrace=function(a,c){E(c,function(d){d.discardBrace(a)})};A.discardHashTag=function(a,c){E(c,function(d){d.discardHashTag(a)})};A.enableActivityTracking=function(a,c){E(c,function(d){d.enableActivityTracking(a)})};A.enableActivityTrackingCallback=function(a,c){E(c,function(d){d.enableActivityTrackingCallback(a)})};A.enableAnonymousTracking=function(a,c){E(c,function(d){d.enableAnonymousTracking(a)})};A.flushBuffer=function(a,c){E(c,function(d){d.flushBuffer(a)})};A.newSession=function(a){E(a,
function(c){c.newSession()})};A.newTracker=function(a,c,d){void 0===d&&(d={});if(vb)return dd(a,a,"js-".concat("0.3.27"),c,vb,d)};A.preservePageViewId=function(a){E(a,function(c){c.preservePageViewId()})};A.removeGlobalContexts=function(a,c){E(c,function(d){d.core.removeGlobalContexts(a)})};A.setBufferSize=function(a,c){E(c,function(d){d.setBufferSize(a)})};A.setCollectorUrl=function(a,c){E(c,function(d){d.setCollectorUrl(a)})};A.setCookiePath=function(a,c){E(c,function(d){d.setCookiePath(a)})};A.setCustomTags=
function(a,c){E(c,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};A.setCustomUrl=function(a,c){E(c,function(d){d.setCustomUrl(a)})};A.setDocumentTitle=function(a,c){E(c,function(d){d.setDocumentTitle(a)})};A.setOptOutCookie=function(a,c){E(c,function(d){d.setOptOutCookie(a)})};A.setReferrerUrl=function(a,c){E(c,function(d){d.setReferrerUrl(a)})};A.setUserId=function(a,c){E(c,function(d){d.setUserId(a)})};A.setUserIdFromCookie=function(a,
c){E(c,function(d){d.setUserIdFromCookie(a)})};A.setUserIdFromLocation=function(a,c){E(c,function(d){d.setUserIdFromLocation(a)})};A.setUserIdFromReferrer=function(a,c){E(c,function(d){d.setUserIdFromReferrer(a)})};A.setVisitorCookieTimeout=function(a,c){E(c,function(d){d.setVisitorCookieTimeout(a)})};A.trackCustomEvent=function(a,c){E(c,function(d){try{var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");
if(void 0!=e.customEventTrackingConfiguration)if(void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length){var h=e.customEventTrackingConfiguration.blocklist;-1==h.indexOf("*")&&-1==h.indexOf(""+a.name)&&d.core.track(yb({name:a.name,data:a.data}),a.context,a.timestamp)}else d.core.track(yb({name:a.name,data:a.data}),a.context,a.timestamp);else d.core.track(yb({name:a.name,data:a.data}),a.context,a.timestamp)}catch(g){console.warn("Conviva App Tracker:: Unable to track custom event! "+
g)}})};A.trackPageView=function(a,c){E(c,function(d){d.trackPageView(a)})};A.trackSelfDescribingEvent=function(a,c){E(c,function(d){d.core.track(Pa({event:a.event}),a.context,a.timestamp)})};A.trackStructEvent=function(a,c){E(c,function(d){d=d.core;var e=d.track,h=a.category,g=a.action,l=a.label,q=a.property,v=a.value,n=bb();n.add("e","se");n.add("se_ca",h);n.add("se_ac",g);n.add("se_la",l);n.add("se_pr",q);n.add("se_va",null==v?void 0:v.toString());e.call(d,n,a.context,a.timestamp)})};A.unsetCustomTags=
function(a,c){E(c,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};A.updatePageActivity=function(a){E(a,function(c){c.updatePageActivity()})};A.version="0.3.27";Object.defineProperty(A,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
