/*!
 * Browser tracker for Snowplow v0.3.7 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(w,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(w="undefined"!==typeof globalThis?globalThis:w||self,X(w.snowplowBrowserTracking={}))})(this,function(w){function X(a,b,d){if(d||2===arguments.length)for(var e=0,g=b.length,f;e<g;e++)!f&&e in b||(f||(f=Array.prototype.slice.call(b,0,e)),f[e]=b[e]);return a.concat(f||Array.prototype.slice.call(b))}function Sc(a){var b=0,d=0;var e="";var g=[];if(!a)return a;
a+="";do{var f=oa.indexOf(a.charAt(b++));var l=oa.indexOf(a.charAt(b++));e=oa.indexOf(a.charAt(b++));var m=oa.indexOf(a.charAt(b++));var r=f<<18|l<<12|e<<6|m;f=r>>16&255;l=r>>8&255;r&=255;64===e?g[d++]=String.fromCharCode(f):64===m?g[d++]=String.fromCharCode(f,l):g[d++]=String.fromCharCode(f,l,r)}while(b<a.length);e=g.join("");return function(p){return decodeURIComponent(p.split("").map(function(A){return"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Ua(){var a=
{},b=[],d=[],e=[],g,f=function(l,m){null!=m&&""!==m&&(a[l]=m)};return{add:f,addDict:function(l){for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&f(m,l[m])},addJson:function(l,m,r){r&&fc(r)&&(l={keyIfEncoded:l,keyIfNotEncoded:m,json:r},d.push(l),b.push(l))},addContextEntity:function(l){e.push(l)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(l){g=l},build:function(){null===g||void 0===g?void 0:g(this,d,e);return a}}}function Tc(a){return function(b,
d,e){for(var g=function(p,A,x){p=JSON.stringify(p);if(a){x=b.add;if(p){var t=0,k=0,y=[];if(p){p=unescape(encodeURIComponent(p));do{var J=p.charCodeAt(t++);var T=p.charCodeAt(t++);var G=p.charCodeAt(t++);var H=J<<16|T<<8|G;J=H>>18&63;T=H>>12&63;G=H>>6&63;H&=63;y[k++]=oa.charAt(J)+oa.charAt(T)+oa.charAt(G)+oa.charAt(H)}while(t<p.length);t=y.join("");p=p.length%3;p=(p?t.slice(0,p-3):t)+"===".slice(p||3)}p=p.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}x.call(b,A,p)}else b.add(x,p)},f=function(p,
A){if(!p){var x=b.getPayload();if(a?x.cx:x.co){p=JSON;var t=p.parse;if(a){if(x=x.cx){switch(4-x.length%4){case 2:x+="==";break;case 3:x+="="}x=x.replace(/-/g,"+").replace(/_/g,"/");x=Sc(x)}}else x=x.co;p=t.call(p,x)}else p=void 0}p?p.data=p.data.concat(A.data):p=A;return p},l=void 0,m=0;m<d.length;m++){var r=d[m];"cx"===r.keyIfEncoded?l=f(l,r.json):g(r.json,r.keyIfEncoded,r.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},l=f(l,d),e.length=0);l&&g(l,"cx","co")}}function fc(a){if(!gc(a))return!1;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function gc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function Uc(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(d){for(var e=[],g=[],f=0;f<d.length;f++){var l=d[f];hc(l)?e.push(l):Ga(l)&&g.push(l)}a=
a.concat(g);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},removeGlobalContexts:function(d){for(var e=function(f){hc(f)?b=b.filter(function(l){return JSON.stringify(l)!==JSON.stringify(f)}):Ga(f)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(f)}))},g=0;g<d.length;g++)e(d[g])},getApplicableContexts:function(d){a:{var e=0;for(var g=d.getJson();e<g.length;e++){var f=g[e];if("ue_px"===f.keyIfEncoded&&"object"===typeof f.json.data&&(f=f.json.data.schema,"string"==typeof f)){e=
f;break a}}e=""}g=d.getPayload().e;f="string"===typeof g?g:"";g=[];var l=mb(a,d,f,e);g.push.apply(g,l);d=Vc(b,d,f,e);g.push.apply(g,d);return g}}}function Wc(a){return{addPluginContexts:function(b){var d=b?X([],b,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(g){ca.error("Error adding plugin contexts",g)}});return d}}}function Xc(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])b=!0;else if(b)return!1;
return!0}return 2==a.length?!0:!1}function ic(a){return(a=a.split("."))&&1<a.length?Xc(a):!1}function jc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&ic(a[1]))return a.slice(1,6)}function nb(a){if(a=jc(a)){var b=a[0];return 5===a.length&&ic(b)}return!1}function Yc(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function kc(a){return Yc(a)?a.every(function(b){return nb(b)}):
"string"===typeof a?nb(a):!1}function La(a){return fc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function Zc(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(kc(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(kc(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Va(a){return"function"===typeof a&&1>=a.length}function Ga(a){return Va(a)||La(a)}
function lc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Va(a[0])&&a[1].every(Ga):Va(a[0])&&Ga(a[1]):!1}function mc(a){return Array.isArray(a)&&2===a.length?Zc(a[0])?Array.isArray(a[1])?a[1].every(Ga):Ga(a[1]):!1:!1}function hc(a){return lc(a)||mc(a)}function $c(a,b){var d=0,e=0,g=a.accept;Array.isArray(g)?a.accept.some(function(f){return Wa(f,b)})&&e++:"string"===typeof g&&Wa(g,b)&&e++;g=a.reject;Array.isArray(g)?a.reject.some(function(f){return Wa(f,b)})&&d++:"string"===typeof g&&
Wa(g,b)&&d++;return 0<e&&0===d?!0:!1}function Wa(a,b){if(!nb(a))return!1;a=jc(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!ad(a[0],b[0]))return!1;for(var d=1;5>d;d++)if(!nc(a[d],b[d]))return!1;return!0}return!1}function ad(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!nc(b[d],a[d]))return!1;return!0}return!1}function nc(a,
b){return a&&b&&"*"===a||a===b}function oc(a){return Array.isArray(a)?a:[a]}function mb(a,b,d,e){var g;a=oc(a).map(function(f){a:if(La(f))f=[f];else{if(Va(f)){b:{var l=void 0;try{var m={event:b.getPayload(),eventType:d,eventSchema:e};l=f(m);if(Array.isArray(l)&&l.every(La)||La(l)){var r=l;break b}r=void 0;break b}catch(p){}r=void 0}if(La(r)){f=[r];break a}else if(Array.isArray(r)){f=r;break a}}f=void 0}if(f&&0!==f.length)return f});return(g=[]).concat.apply(g,a.filter(function(f){return null!=f&&
f.filter(Boolean)}))}function Vc(a,b,d,e){var g;a=oc(a).map(function(f){a:{if(lc(f)){var l=f[0],m=!1;try{var r={event:b.getPayload(),eventType:d,eventSchema:e};m=l(r)}catch(p){m=!1}if(!0===m){f=mb(f[1],b,d,e);break a}}else if(mc(f)&&$c(f[0],e)){f=mb(f[1],b,d,e);break a}f=[]}if(f&&0!==f.length)return f});return(g=[]).concat.apply(g,a.filter(function(f){return null!=f&&f.filter(Boolean)}))}function bd(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function cd(a){void 0===a&&(a={});var b=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];b=function(f,l,m){function r(k,y){k=A.getApplicableContexts(k);var J=[];y&&y.length&&J.push.apply(J,y);k&&k.length&&J.push.apply(J,k);return J}var p=Wc(l),A=Uc(),x=f,t={};return{track:function(k,y,J){k.withJsonProcessor(Tc(x));k.add("eid",pa.v4());k.addDict(t);J=bd(J);k.add(J.type,J.value.toString());y=r(k,p.addPluginContexts(y));
y=y&&y.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:y}:void 0;void 0!==y&&k.addJson("cx","co",y);l.forEach(function(G){try{G.beforeTrack&&G.beforeTrack(k)}catch(H){ca.error("Plugin beforeTrack",H)}});"function"===typeof m&&m(k);var T=k.build();l.forEach(function(G){try{G.afterTrack&&G.afterTrack(T)}catch(H){ca.error("Plugin afterTrack",H)}});return T},addPayloadPair:function(k,y){t[k]=y},configuration:a,getConfig:function(){return a},setConfig:function(k){k&&
("undefined"!==typeof k.base64&&(x=a.base64=k.base64),"undefined"!==typeof k.linkClickTracking&&(a.linkClickTracking=k.linkClickTracking),"undefined"!==typeof k.buttonClickTracking&&(a.buttonClickTracking=k.buttonClickTracking),"undefined"!==typeof k.customEvent&&(a.customEvent=k.customEvent),"undefined"!==typeof k.exceptionAutotracking&&(a.exceptionAutotracking=k.exceptionAutotracking),"undefined"!==typeof k.enablePeriodicHeartbeat&&(a.enablePeriodicHeartbeat=k.enablePeriodicHeartbeat),"undefined"!==
typeof k.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=k.periodicHeartbeatInterval),"undefined"!==typeof k.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=k.customEventTrackingConfiguration),"undefined"!==typeof k.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=k.convivaVideoEventTrackingConfiguration))},getBase64Encoding:function(){return x},setBase64Encoding:function(k){x=k},addPayloadDict:function(k){for(var y in k)Object.prototype.hasOwnProperty.call(k,
y)&&(t[y]=k[y])},resetPayloadPairs:function(k){t=gc(k)?k:{}},setTrackerVersion:function(k){t.tv=k},setTrackerNamespace:function(k){t.tna=k},setAppId:function(k){t.aid=k},setPlatform:function(k){t.p=k},setUserId:function(k){t.uid=k},setScreenResolution:function(k,y){t.res=k+"x"+y},setViewport:function(k,y){t.vp=k+"x"+y},setColorDepth:function(k){t.cd=k},setTimezone:function(k){t.tz=k},setLang:function(k){t.lang=k},setIpAddress:function(k){t.ip=k},setUseragent:function(k){t.ua=k},addGlobalContexts:function(k){A.addGlobalContexts(k)},
clearGlobalContexts:function(){A.clearGlobalContexts()},removeGlobalContexts:function(k){A.removeGlobalContexts(k)}}}(null!==b&&void 0!==b?b:!0,e,a.callback);var g=fa(fa({},b),{addPlugin:function(f){var l,m;f=f.plugin;e.push(f);null===(l=f.logger)||void 0===l?void 0:l.call(f,ca);null===(m=f.activateCorePlugin)||void 0===m?void 0:m.call(f,g)}});null===e||void 0===e?void 0:e.forEach(function(f){var l,m;null===(l=f.logger)||void 0===l?void 0:l.call(f,ca);null===(m=f.activateCorePlugin)||void 0===m?void 0:
m.call(f,g)});return g}function ob(a){var b=a.event;a=b.schema;var d=b.data;b=Ua();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:d}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function dd(a){var b=a.pageUrl,d=a.pageTitle;a=a.referrer;var e=Ua();e.add("e","pv");e.add("url",b);e.add("page",d);e.add("refr",a);return e}function pb(a){return ob({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:pc({name:a.name,data:a.data})}})}
function qb(a){return ob({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:pc(a)}})}function pc(a,b){void 0===b&&(b={});var d={},e;for(e in a)if(b[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=a[e];return d}function ed(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr","modernizr");b.removeItem("modernizr");return!0}catch(d){return!1}}function qc(a){return Number.isInteger&&Number.isInteger(a)||"number"===
typeof a&&isFinite(a)&&Math.floor(a)===a}function rc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function rb(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function sc(a){var b=a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function sb(a){var b=window,d=Ma("referrer",b.location.href)||Ma("referer",b.location.href);if(d)return d;if(a)return a;
try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function qa(a,b,d,e){if(a.addEventListener)return a.addEventListener(b,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,d);a["on"+b]=d}function Ma(a,b){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function Xa(a,b,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,g=Date.now()+1E3*d;e.setItem("".concat(a,
".expires"),g.toString());e.setItem(a,b);return!0}catch(f){return!1}}function tc(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(d){return!1}}function fd(a,b){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),g="_test_value_"+(new Date).getTime(),f=d.split("."),l=f.length-1;0<=l;){var m=f.slice(l,f.length).join(".");ha(e,g,0,"/",m,a,b);if(ha(e)===g){ha(e,"",-1,"/",m,a,b);d=document.cookie.split("; ");e=[];for(g=0;g<d.length;g++)"_sp_root_domain_test_"===
d[g].substring(0,21)&&e.push(d[g]);d=e;for(e=0;e<d.length;e++)ha(d[e],"",-1,"/",m,a,b);return m}--l}return d}function ha(a,b,d,e,g,f,l){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(d?"; Expires="+(new Date(+new Date+1E3*d)).toUTCString():"")+(e?"; Path="+e:"")+(g?"; Domain="+g:"")+(f?"; SameSite="+f:"")+(l?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function gd(a,b,d,e,g,f,l,m,r,p,A,x,t,k,y,J){function T(q){var B=
Object.keys(q).map(function(z){return[z,q[z]]}).reduce(function(z,u){z[u[0]]=u[1].toString();return z},{});return{evt:B,bytes:G(JSON.stringify(B))}}function G(q){for(var B=0,z=0;z<q.length;z++){var u=q.charCodeAt(z);127>=u?B+=1:2047>=u?B+=2:55296<=u&&57343>=u?(B+=4,z++):B=65535>u?B+3:B+4}return B}function H(q){for(void 0===q&&(q=!1);E.length&&"string"!==typeof E[0]&&"object"!==typeof E[0];)E.shift();if(1>E.length)U=!1;else{if(!V||"string"!==typeof V.valueOf())throw"No collector configured";U=!0;if(xa){var B=
function(M){for(var da=0,Ha=0;da<M.length&&!(Ha+=M[da].bytes,Ha>=l);)da+=1;return da},z=void 0;if(ya(E)){z=V;var u=F(z,!0,q);var K=B(E)}else z=Na(E[0]),u=F(z,!1,q),K=1;var P=setTimeout(function(){u.abort();U=!1},A),ea=function(M){for(var da=0;da<M;da++)E.shift();d&&Xa(za,JSON.stringify(E.slice(0,p)))};u.onreadystatechange=function(){if(4===u.readyState&&200<=u.status)if(clearTimeout(P),300>u.status)ea(K),H();else{var M=u.status;M=200<=M&&300>M?!1:y.includes(M)?!0:!J.includes(M);M||(ca.error("Status ".concat(u.status,
", will not retry.")),ea(K));U=!1}};if(ya(E)){if(B=E.slice(0,K),0<B.length){q=!1;B=B.map(function(M){return M.evt});if(Ya){var Za=new Blob([Y(ia(B))],{type:"application/json"});try{q=navigator.sendBeacon(z,Za)}catch(M){q=!1}}!0===q?(ea(K),H()):u.send(Y(ia(B)))}}else u.send()}else if(x||ya(E))U=!1;else{z=new Image(1,1);var ja=!0;z.onload=function(){ja&&(ja=!1,E.shift(),d&&Xa(za,JSON.stringify(E.slice(0,p))),H())};z.onerror=function(){ja&&(U=ja=!1)};z.src=Na(E[0]);setTimeout(function(){ja&&U&&(ja=!1,
H())},A)}}}function F(q,B,z){var u=new XMLHttpRequest;B?(u.open("POST",q,!z),u.setRequestHeader("Content-Type","application/json; charset=UTF-8")):u.open("GET",q,!z);u.withCredentials=k;x&&u.setRequestHeader("SP-Anonymous","*");for(var K in t)Object.prototype.hasOwnProperty.call(t,K)&&u.setRequestHeader(K,t[K]);return u}function Y(q){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:q})}function ia(q){for(var B=(new Date).getTime().toString(),z=
0;z<q.length;z++)q[z].stm=B;return q}function Na(q){return r?V+q.replace("?","?stm="+(new Date).getTime()+"&"):V+q}function $a(q){function B(u,K,P){return(P=P.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&P.length?parseInt(P[0])<=u||parseInt(P[0])===u&&parseInt(P[1])<=K:!1}function z(u){return u.match("Version/.* Safari/")&&!u.match("Chrom(e|ium)")}return function(u,K){return(K=K.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&K.length?parseInt(K[0])<=u:!1}(13,q)||B(10,15,q)&&
z(q)}var U=!1,V,E=[];e="string"===typeof e?e.toLowerCase():e;var Aa=!0===e||"beacon"===e||"true"===e,Ya=!(!(Aa&&window.navigator&&window.navigator.sendBeacon)||$a(window.navigator.userAgent))&&Aa,xa=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),Ba="get"!==e&&xa&&("post"===e||Aa),ra=Ba?g:"/i",za="snowplowOutQueue_".concat(a,"_").concat(Ba?"post2":"get");Aa&&(t={});f=d&&ed()&&Ba&&f||1;if(d)try{var Oa=window.localStorage.getItem(za);E=Oa?JSON.parse(Oa):[]}catch(q){}Array.isArray(E)||
(E=[]);b.outQueues.push(E);xa&&1<f&&b.bufferFlushers.push(function(q){U||H(q)});var ya=function(q){return"object"===typeof q[0]};return{enqueueRequest:function(q,B){V=B+ra;if(Ba){q=T(q);if(q.bytes>=l){ca.warn("Event ("+q.bytes+"B) too big, max is "+l);B=q;F(V,!0,!1).send(Y(ia([B.evt])));return}E.push(q)}else{var z="?";var u={co:!0,cx:!0},K=!0,P;for(P in q)q.hasOwnProperty(P)&&!u.hasOwnProperty(P)&&(K?K=!1:z+="&",z+=encodeURIComponent(P)+"="+encodeURIComponent(q[P]));for(var ea in u)q.hasOwnProperty(ea)&&
u.hasOwnProperty(ea)&&(z+="&"+ea+"="+encodeURIComponent(q[ea]));if(0<m&&(u=Na(z),u=G(u),u>=m)){ca.warn("Event ("+u+"B) too big, max is "+m);xa&&(q=T(q),F(B+g,!0,!1).send(Y(ia([q.evt]))));return}E.push(z)}B=!1;d&&(B=Xa(za,JSON.stringify(E.slice(0,p))));U||B&&!(E.length>=f)||H()},executeQueue:function(){U||H()},setUseLocalStorage:function(q){d=q},setAnonymousTracking:function(q){x=q},setCollectorUrl:function(q){V=q+ra},setBufferSize:function(q){f=q}}}function uc(a,b,d){if("translate.googleusercontent.com"===
a)""===d&&(d=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?Ma("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=rb(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=rb(b);return[a,b,d]}function hd(a,b,d,e){var g=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,g,e,g,"",d];a[6]&&"undefined"!==a[6]||(a[6]=pa.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||
(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var f=function(l,m){l=parseInt(l);return isNaN(l)?m:l};b=function(l){return l?f(l,void 0):void 0};return[a[0],a[1],f(a[2],g),f(a[3],e),f(a[4],g),b(a[5]),a[6],a[7],a[8],b(a[9]),f(a[10],-1)]}function Pa(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=b;b=pa.v4();a[6]=b;a[10]=-1;a[8]="";a[9]=void 0;return b}function tb(a){a[4]=Math.round((new Date).getTime()/1E3)}function id(a,b,d,e,g,f){void 0===
f&&(f={});var l=[];a=function(r,p,A,x,t,k){function y(){Ca=uc(window.location.hostname,window.location.href,sb());Ca[1]!==sa&&(Qa=sb(sa));vc=sc(Ca[0]);sa=Ca[1]}function J(c){var h=(new Date).getTime();c=c.currentTarget;if(null===c||void 0===c?0:c.href){h="_sp="+(ab+"."+h);var n=c.href.split("#"),v=n[0].split("?"),D=v.shift();if(v=v.join("?")){for(var I=!0,Q=v.split("&"),S=0;S<Q.length;S++)if("_sp="===Q[S].substr(0,4)){I=!1;Q[S]=h;v=Q.join("&");break}I&&(v=h+"&"+v)}else v=h;n[0]=D+"?"+v;h=n.join("#");
c.href=h}}function T(c){for(var h=0;h<document.links.length;h++){var n=document.links[h];!n.spDecorationEnabled&&c(n)&&(qa(n,"click",J,!0),qa(n,"mousedown",J,!0),n.spDecorationEnabled=!0)}}function G(c){if(wc){var h=/#.*/;c=c.replace(h,"")}xc&&(h=/[{}]/g,c=c.replace(h,""));return c}function H(c){return(c=/^([a-z]+):/.exec(c))?c[1]:null}function F(c){c=Ia+c+"."+Da;if("localStorage"==L){try{var h=window.localStorage,n=h.getItem(c+".expires");if(null===n||+n>Date.now())var v=h.getItem(c);else h.removeItem(c),
h.removeItem(c+".expires"),v=void 0}catch(D){v=void 0}return v}if("cookie"==L||"cookieAndLocalStorage"==L)return ha(c)}function Y(){y();Da=jd((Ra||vc)+(ub||"/")).slice(0,4)}function ia(){vb=(new Date).getTime()}function Na(){var c=$a(),h=c[0];h<bb?bb=h:h>cb&&(cb=h);c=c[1];c<db?db=c:c>eb&&(eb=c);ia()}function $a(){var c=document.documentElement;return c?[c.scrollLeft||window.pageXOffset,c.scrollTop||window.pageYOffset]:[0,0]}function U(){var c=$a(),h=c[0];cb=bb=h;eb=db=c=c[1]}function V(){Aa(Ia+"ses."+
Da,"*",yc)}function E(c){var h=Ia+"id."+Da;c.shift();c=c.join(".");Aa(h,c,zc)}function Aa(c,h,n){if(!ka||Ea)"localStorage"==L?Xa(c,h,n):("cookie"==L||"cookieAndLocalStorage"==L)&&ha(c,h,n,ub,Ra,fb,gb)}function Ya(c){var h=Ia+"id."+Da,n=Ia+"ses."+Da;tc(h);tc(n);ha(h,"",-1,"/",Ra,fb,gb);ha(n,"",-1,"/",Ra,fb,gb);null!==c&&void 0!==c&&c.preserveSession||(la=pa.v4(),Z=1);null!==c&&void 0!==c&&c.preserveUser||(ab=pa.v4(),Fa=null)}function xa(c){c&&c.stateStorageStrategy&&(k.stateStorageStrategy=c.stateStorageStrategy,
L=Ac(k));ka=!!k.anonymousTracking;Ea=Bc(k);wb=Cc(k);ta.setUseLocalStorage("localStorage"==L||"cookieAndLocalStorage"==L);ta.setAnonymousTracking(wb)}function Ba(){try{var c=window.localStorage.getItem("Conviva.sdkConfig"),h=JSON.parse(c||"{}");xb="{}"===h||"undefined"===typeof h?B():h.clId||B();try{hb=Math.floor(2147483647*Math.random())}catch(v){console.warn(v),hb=-1}b:try{var n=window.localStorage;c={clId:xb,iid:hb};h=null;try{h=JSON.stringify(c)}catch(v){break b}n.setItem("Conviva.sdkConfig",h)}catch(v){}}catch(v){console.warn(v)}if(!ka||
Ea)n="none"!=L&&!!F("ses"),c=ra(),c[1]?h=c[1]:(h=ka?"":pa.v4(),c[1]=h),ab=h,la=n?c[6]:Pa(c),Z=c[3],"none"!=L&&(V(),tb(c),E(c))}function ra(){if("none"==L)return["1","",0,0,0,void 0,"","","",void 0,0];var c=F("id")||void 0;return hd(c,ab,la,Z)}function za(c){return 0===c.indexOf("http")?c:("https:"===document.location.protocol?"https":"http")+"://"+c}function Oa(){Dc&&null!=t.pageViewId||(t.pageViewId=pa.v4())}function ya(){null==t.pageViewId&&(t.pageViewId=pa.v4());return t.pageViewId}function q(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",
data:{id:ya()}}]}}}function B(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(c){console.warn(c)}}function z(c){try{var h=Object.keys(c);kd(JSON.stringify(c))?h.forEach(function(n){""!==n&&Object.defineProperty(yb,n,{value:""+c[n],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid format used for setCustomTags API")}catch(n){console.warn("Conviva AppTracker:: Failed to set Custom tags. Check format of data set.")}}
function u(c){try{c.forEach(function(h){delete yb[h]})}catch(h){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function K(c){var h=c.title,n=c.context,v=c.timestamp;c=c.contextCallback;y();Ec&&Oa();Ec=!0;Ja=document.title;Sa=h;h=rc(Sa||Ja);aa.track(dd({pageUrl:G(Ka||sa),pageTitle:h,referrer:G(ib||Qa)}),(n||[]).concat(c?c():[]),v);v=new Date;h=!1;if(ba.enabled&&!ba.installed){h=ba.installed=!0;var D={update:function(){if("undefined"!==typeof window&&
"function"===typeof window.addEventListener){var Q=!1,S=Object.defineProperty({},"passive",{get:function(){Q=!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",W,S);window.removeEventListener("testPassiveEventSupport",W,S);D.hasSupport=Q}}};D.update();var I="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(D,"hasSupport")?qa(document,I,ia,{passive:!0}):qa(document,
I,ia);U();I=function(Q,S){void 0===S&&(S=ia);return function(W){return qa(document,W,S)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(I(document));["resize","focus","blur"].forEach(I(window));I(window,Na)("scroll")}if(ba.enabled&&(ld||h))for(v in vb=v.getTime(),v=void 0,ba.configurations)if(h=ba.configurations[v])window.clearInterval(h.activityInterval),P(h,n,c)}function P(c,h,n){var v=function(Q,S){y();var W=m.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&
(W=1E3*W.periodicHeartbeatInterval,W!=c.configHeartBeatTimer&&(window.clearInterval(c.activityInterval),c.activityInterval=window.setInterval(I,W))):window.clearInterval(c.activityInterval);Q({context:S,pageViewId:ya(),minXOffset:bb,minYOffset:db,maxXOffset:cb,maxYOffset:eb});U()},D=new Date;window.setTimeout(function(){v(c.callback,(h||[]).concat(n?n():[]))},2E3);var I=function(){var Q=new Date;if(D.getTime()+c.configHeartBeatTimer>Q.getTime()||vb+c.configHeartBeatTimer>Q.getTime())D=Q,v(c.callback,
(h||[]).concat(n?n():[]))};c.activityInterval=window.setInterval(I,c.configHeartBeatTimer)}function ea(c){var h=c.minimumVisitLength,n=c.heartbeatDelay;c=c.callback;if(qc(h)&&qc(n))return{configMinimumVisitLength:1E3*h,configHeartBeatTimer:1E3*n,callback:c};ca.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function Za(c){var h=c.context,n=c.minXOffset,v=c.minYOffset,D=c.maxXOffset,I=c.maxYOffset;c=document.title;c!==Ja&&(Ja=c,Sa=void 0);c=aa;var Q=c.track,S=G(Ka||
sa),W=rc(Sa||Ja),md=G(ib||Qa);n=Math.round(n);D=Math.round(D);v=Math.round(v);I=Math.round(I);var ma=Ua();ma.add("e","pp");ma.add("url",S);ma.add("page",W);ma.add("refr",md);n&&!isNaN(Number(n))&&ma.add("pp_mix",n.toString());D&&!isNaN(Number(D))&&ma.add("pp_max",D.toString());v&&!isNaN(Number(v))&&ma.add("pp_miy",v.toString());I&&!isNaN(Number(I))&&ma.add("pp_may",I.toString());Q.call(c,ma,h)}var ja,M,da,Ha,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,N={base64:!0,linkClickTracking:!0,
buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{}};if(window.localStorage){var Fc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(N);var Wb=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else Wb="https://appgw.conviva.com",Fc=JSON.stringify(N);
x=k.gatewayUrl?k.gatewayUrl:Wb?Wb:"https://appgw.conviva.com";p||(p="CAT");var R=JSON.parse(Fc);"undefined"!=typeof R.base64&&(N.base64=R.base64);"undefined"!=typeof R.linkClickTracking&&(N.linkClickTracking=R.linkClickTracking);"undefined"!=typeof R.buttonClickTracking&&(N.buttonClickTracking=R.buttonClickTracking);"undefined"!=typeof R.exceptionAutotracking&&(N.exceptionAutotracking=R.exceptionAutotracking);"undefined"!=typeof R.enablePeriodicHeartbeat&&(N.enablePeriodicHeartbeat=R.enablePeriodicHeartbeat);
"undefined"!=typeof R.periodicHeartbeatInterval&&(N.periodicHeartbeatInterval=R.periodicHeartbeatInterval);"undefined"!=typeof R.customEventTrackingConfiguration&&(N.customEventTrackingConfiguration=R.customEventTrackingConfiguration);"undefined"!=typeof R.convivaVideoEventTrackingConfiguration&&(N.convivaVideoEventTrackingConfiguration=R.convivaVideoEventTrackingConfiguration);if(window.XMLHttpRequest){var ua=new XMLHttpRequest;ua.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var c=
JSON.parse(ua.response),h={base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{}};h.base64=c.configurationBundle[0].trackerConfiguration.base64Encoding;h.linkClickTracking=c.configurationBundle[0].trackerConfiguration.linkClickTracking;h.buttonClickTracking=c.configurationBundle[0].trackerConfiguration.buttonClickTracking;h.customEvent=
c.configurationBundle[0].trackerConfiguration.customEvent;h.exceptionAutotracking=c.configurationBundle[0].trackerConfiguration.exceptionAutotracking;h.enablePeriodicHeartbeat=c.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;h.periodicHeartbeatInterval=c.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;h.customEventTrackingConfiguration=c.configurationBundle[0].customEventTrackingConfiguration;h.convivaVideoEventTrackingConfiguration=c.configurationBundle[0].convivaVideoEventTrackingConfiguration;
m.setCollectorUrl(c.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(h)),localStorage.setItem("ConvivaEndpoint",c.configurationBundle[0].networkConfiguration.endpoint));m.core.setConfig(h)}else if(va._convivaVersion&&va._convivaCustomerKey)try{delete va._convivaVersion,ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+va._convivaCustomerKey+"/remote_config.json",!0),ua.send()}catch(n){delete va._convivaVersion}else if(va._convivaCustomerKey)try{delete va._convivaCustomerKey,
ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0),ua.send()}catch(n){delete va._convivaCustomerKey}};var jb=function(c){try{ua.open("GET",c,!0),ua.send()}catch(h){}};if(k.trackerConfigUrl)jb(k.trackerConfigUrl),window.setInterval(jb,36E5,k.trackerConfigUrl);else{var va={_platform:"js",_convivaVersion:A,_convivaCustomerKey:k.convivaCustomerKey},Gc="https://drt1fhpy4haqm.cloudfront.net/js/"+k.convivaCustomerKey+"/"+A+"/remote_config.json";jb(Gc);window.setInterval(jb,36E5,
Gc)}}k.eventMethod=null!==(ja=k.eventMethod)&&void 0!==ja?ja:"post";var Ac=function(c){var h;return null!==(h=c.stateStorageStrategy)&&void 0!==h?h:"cookieAndLocalStorage"},Bc=function(c){var h,n;return"boolean"===typeof c.anonymousTracking?!1:null!==(n=!0===(null===(h=c.anonymousTracking)||void 0===h?void 0:h.withSessionTracking))&&void 0!==n?n:!1},Cc=function(c){var h,n;return"boolean"===typeof c.anonymousTracking?!1:null!==(n=!0===(null===(h=c.anonymousTracking)||void 0===h?void 0:h.withServerAnonymisation))&&
void 0!==n?n:!1};l.push(function(){return{beforeTrack:function(c){var h=F("ses"),n=ra();Xb=Yb?!!ha(Yb):!1;if(Hc||Xb)Ya();else{"0"===n[0]?(la=h||"none"==L?n[6]:Pa(n),Z=n[3]):(new Date).getTime()-Zb>1E3*yc&&(Z++,la=Pa(n,Z));tb(n);-1===n[10]&&(h=c.build(),n[8]=h.eid,h=h.dtm||h.ttm,n[9]=h?parseInt(h):void 0);n[10]+=1;h=c.add;if("innerWidth"in window){var v=window.innerWidth;var D=window.innerHeight}else D=document.documentElement||document.body,v=D.clientWidth,D=D.clientHeight;h.call(c,"vp",0<=v&&0<=
D?v+"x"+D:null);h=c.add;D=document.documentElement;var I=document.body;v=Math.max(D.clientWidth,D.offsetWidth,D.scrollWidth);D=Math.max(D.clientHeight,D.offsetHeight,D.scrollHeight,I?Math.max(I.offsetHeight,I.scrollHeight):0);v=isNaN(v)||isNaN(D)?"":v+"x"+D;h.call(c,"ds",v);c.add("vid",Ea?Z:ka?null:Z);c.add("sid",Ea?la:ka?null:la);c.add("duid",ka?null:n[1]);c.add("uid",ka?null:Fa);y();c.add("refr",G(ib||Qa));document&&c.add("page",document.title);c.add("url",G(Ka||sa));!nd||Ea||ka||(h=n[9],h={userId:n[1],
sessionId:n[6],eventIndex:n[10],sessionIndex:n[3],previousSessionId:n[7]||null,storageMechanism:"localStorage"==L?"LOCAL_STORAGE":"COOKIE_1",firstEventId:n[8]||null,firstEventTimestamp:h?(new Date(h)).toISOString():null},c.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:h}));"none"!=L&&(E(n),V());Zb=(new Date).getTime()}}}}());(null!==(da=null===(M=null===k||void 0===k?void 0:k.contexts)||void 0===M?void 0:M.webPage)&&void 0!==da?da:1)&&l.push(q());
l.push(function(){return{contexts:function(){var c={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-1",data:{clid:xb,iid:hb.toString(),ck:od}},h={eventIndex:pd++};null!=$b&&(h.previousEventTimestamp=$b);$b=(new Date).toISOString();return[c,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:h}]}}}());l.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:yb}}]}}}());l.push.apply(l,null!==(Ha=k.plugins)&&void 0!==Ha?Ha:[]);
var aa=cd({base64:N.base64,corePlugins:l,callback:function(c){Hc||Xb||ta.enqueueRequest(c.build(),ac)},linkClickTracking:N.linkClickTracking,buttonClickTracking:N.buttonClickTracking,customEvent:!0,exceptionAutotracking:N.exceptionAutotracking,enablePeriodicHeartbeat:N.enablePeriodicHeartbeat,periodicHeartbeatInterval:N.periodicHeartbeatInterval,customEventTrackingConfiguration:N.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:N.convivaVideoEventTrackingConfiguration}),qd=
navigator.userLanguage||navigator.language,rd=document.characterSet||document.charset,Ca=uc(window.location.hostname,window.location.href,sb()),vc=sc(Ca[0]),sa=Ca[1],Qa=Ca[2],ib,sd=null!==(zb=k.platform)&&void 0!==zb?zb:"web",ac=za(x),td=null!==(Ab=k.postPath)&&void 0!==Ab?Ab:"/"+k.convivaCustomerKey+"/ctp",ud=null!==(Bb=k.appId)&&void 0!==Bb?Bb:"",od=null!==(Cb=k.convivaCustomerKey)&&void 0!==Cb?Cb:"",Ka,yb={},Ja=document.title,Sa,ld=null!==(Db=k.resetActivityTrackingOnPageView)&&void 0!==Db?Db:
!0,wc,xc,Ia=null!==(Eb=k.cookieName)&&void 0!==Eb?Eb:"_sp_",Ra=null!==(Fb=k.cookieDomain)&&void 0!==Fb?Fb:void 0,ub="/",fb=null!==(Gb=k.cookieSameSite)&&void 0!==Gb?Gb:"None",gb=null!==(Hb=k.cookieSecure)&&void 0!==Hb?Hb:!0,Ic=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Hc="undefined"!==typeof k.respectDoNotTrack?k.respectDoNotTrack&&("yes"===Ic||"1"===Ic):!1,Yb,zc=null!==(Ib=k.cookieLifetime)&&void 0!==Ib?Ib:63072E3,yc=null!==(Jb=k.sessionCookieTimeout)&&void 0!==Jb?Jb:1800,Ea=
Bc(k),wb=Cc(k),ka=!!k.anonymousTracking,L=Ac(k),xb,hb,pd=0,vb,Zb=(new Date).getTime(),bb,cb,db,eb,Da,ab,la,Z=1,Fa,ta=gd(r,t,"localStorage"==L||"cookieAndLocalStorage"==L,k.eventMethod,td,null!==(Kb=k.bufferSize)&&void 0!==Kb?Kb:1,null!==(Lb=k.maxPostBytes)&&void 0!==Lb?Lb:4E4,null!==(Mb=k.maxGetBytes)&&void 0!==Mb?Mb:0,null!==(Nb=k.useStm)&&void 0!==Nb?Nb:!0,null!==(Ob=k.maxLocalStorageQueueSize)&&void 0!==Ob?Ob:1E3,null!==(Pb=k.connectionTimeout)&&void 0!==Pb?Pb:5E3,wb,null!==(Qb=k.customHeaders)&&
void 0!==Qb?Qb:{},null!==(Rb=k.withCredentials)&&void 0!==Rb?Rb:!0,null!==(Sb=k.retryStatusCodes)&&void 0!==Sb?Sb:[],(null!==(Tb=k.dontRetryStatusCodes)&&void 0!==Tb?Tb:[]).concat([400,401,403,410,422])),Dc=!1,$b,Ec=!1,ba={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:Za}}},nd=null!==(Vb=null===(Ub=k.contexts)||void 0===Ub?void 0:Ub.session)&&void 0!==Vb?Vb:!1,Xb;k.hasOwnProperty("discoverRootDomain")&&k.discoverRootDomain&&(Ra=fd(fb,
gb));aa.setTrackerVersion(A);aa.setTrackerNamespace(p);aa.setAppId(ud);aa.setPlatform(sd);aa.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0");aa.addPayloadPair("cs",rd);aa.addPayloadPair("lang",qd);aa.addPayloadPair("res",screen.width+"x"+screen.height);aa.addPayloadPair("cd",screen.colorDepth);Y();Ba();k.crossDomainLinker&&T(k.crossDomainLinker);var kd=function(c){try{return"object"===typeof JSON.parse(c)}catch(h){return!1}};return fa(fa({},{getDomainSessionIndex:function(){return Z},getPageViewId:function(){return ya()},
newSession:function(){var c=ra();"0"===c[0]?(la="none"!=L?Pa(c):c[6],Z=c[3],V()):(Z++,la=Pa(c,Z));tb(c);"none"!=L&&(E(c),V());Zb=(new Date).getTime()},getCookieName:function(c){return Ia+c+"."+Da},getUserId:function(){return Fa},getDomainUserId:function(){return ra()[1]},getDomainUserInfo:function(){return ra()},setReferrerUrl:function(c){ib=c},setCustomUrl:function(c){y();var h=sa,n;H(c)?Ka=c:"/"===c.slice(0,1)?Ka=H(h)+"://"+rb(h)+c:(h=G(h),0<=(n=h.indexOf("?"))&&(h=h.slice(0,n)),(n=h.lastIndexOf("/"))!==
h.length-1&&(h=h.slice(0,n+1)),Ka=h+c)},setDocumentTitle:function(c){Ja=document.title;Sa=c},discardHashTag:function(c){wc=c},discardBrace:function(c){xc=c},setCookiePath:function(c){ub=c;Y()},setVisitorCookieTimeout:function(c){zc=c},crossDomainLinker:function(c){T(c)},enableActivityTracking:function(c){ba.configurations.pagePing||(ba.enabled=!0,ba.configurations.pagePing=ea(fa(fa({},c),{callback:Za})))},enableActivityTrackingCallback:function(c){ba.configurations.callback||(ba.enabled=!0,ba.configurations.callback=
ea(c))},updatePageActivity:function(){ia()},setOptOutCookie:function(c){Yb=c},setUserId:function(c){Fa=c},setUserIdFromLocation:function(c){y();Fa=Ma(c,sa)},setUserIdFromReferrer:function(c){y();Fa=Ma(c,Qa)},setUserIdFromCookie:function(c){Fa=ha(c)},setCollectorUrl:function(c){ac=za(c);ta.setCollectorUrl(ac)},setBufferSize:function(c){ta.setBufferSize(c)},flushBuffer:function(c){void 0===c&&(c={});ta.executeQueue();c.newBufferSize&&ta.setBufferSize(c.newBufferSize)},trackPageView:function(c){void 0===
c&&(c={});K(c)},trackVideoEvent:function(c){void 0===c&&(c={});var h=this.core.getConfig();""!=c.name&&void 0!=c.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");void 0!=h.convivaVideoEventTrackingConfiguration?void 0!=h.convivaVideoEventTrackingConfiguration.blocklist&&0<h.convivaVideoEventTrackingConfiguration.blocklist.length?(h=h.convivaVideoEventTrackingConfiguration.blocklist,-1==h.indexOf("*")&&-1==h.indexOf(""+c.name)&&this.core.track(qb({name:c.name,
sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)):this.core.track(qb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),
c.context,c.timestamp):this.core.track(qb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)},setCustomTags:function(c){void 0===c&&(c={});z(c)},unsetCustomTags:function(c){void 0===c&&(c={});u(c)},preservePageViewId:function(){Dc=!0},disableAnonymousTracking:function(c){k.anonymousTracking=!1;
xa(c);Ba();ta.executeQueue()},enableAnonymousTracking:function(c){var h;k.anonymousTracking=null!==(h=c&&(null===c||void 0===c?void 0:c.options))&&void 0!==h?h:!0;xa(c);Ea||Oa()},clearUserData:Ya}),{id:r,namespace:p,core:aa,sharedState:t})}(a,b,d,e,g,f);var m=fa(fa({},a),{addPlugin:function(r){var p,A;m.core.addPlugin(r);null===(A=(p=r.plugin).activateBrowserPlugin)||void 0===A?void 0:A.call(p,m)}});l.forEach(function(r){var p;null===(p=r.activateBrowserPlugin)||void 0===p?void 0:p.call(r,m)});return m}
function C(a,b){try{var d=null!==a&&void 0!==a?a:Object.keys(Ta);a=Ta;for(var e=[],g=0;g<d.length;g++){var f=d[g];a.hasOwnProperty(f)?e.push(a[f]):ca.warn(f+" not configured")}e.forEach(b)}catch(l){ca.error("Function failed",l)}}function Jc(a,b,d,e,g,f){return Ta.hasOwnProperty(a)?null:(Ta[a]=id(a,b,d,e,g,f),Ta[a])}function vd(){function a(){"hidden"==g.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}function b(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();
return!0}function d(){g.addEventListener?g.addEventListener("DOMContentLoaded",function m(){g.removeEventListener("DOMContentLoaded",m,!1);b()}):g.attachEvent&&g.attachEvent("onreadystatechange",function r(){"complete"===g.readyState&&(g.detachEvent("onreadystatechange",r),b())});qa(f,"load",b,!1)}var e=new wd,g=document,f=window;g.visibilityState&&qa(g,"visibilitychange",a,!1);qa(f,"beforeunload",function(){e.bufferFlushers.forEach(function(l){l(!1)})},!1);"loading"===document.readyState?d():b();
return e}var fa=function(){fa=Object.assign||function(a){for(var b,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])}return a};return fa.apply(this,arguments)},wa={},Kc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Kc){var Lc=new Uint8Array(16);wa=function(){Kc(Lc);
return Lc}}else{var Mc=Array(16);wa=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Mc[a]=b>>>((a&3)<<3)&255;return Mc}}for(var O=[],kb=0;256>kb;++kb)O[kb]=(kb+256).toString(16).substr(1);var Nc=function(a,b){b=b||0;return[O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]]].join("")},xd=wa,Oc,bc,cc=0,dc=0,yd=wa;wa=function(a,b,d){d=b&&d||0;"string"==
typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||yd)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[d+e]=a[e];return b||Nc(a)};wa.v1=function(a,b,d){d=b&&d||0;var e=b||[];a=a||{};var g=a.node||Oc,f=void 0!==a.clockseq?a.clockseq:bc;if(null==g||null==f){var l=xd();null==g&&(g=Oc=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]);null==f&&(f=bc=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var m=void 0!==a.nsecs?a.nsecs:dc+1,r=l-cc+(m-dc)/1E4;0>r&&
void 0===a.clockseq&&(f=f+1&16383);(0>r||l>cc)&&void 0===a.nsecs&&(m=0);if(1E4<=m)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");cc=l;dc=m;bc=f;l+=122192928E5;a=(1E4*(l&268435455)+m)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=l/4294967296*1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=f>>>8|128;e[d++]=f&255;for(f=0;6>f;++f)e[d+f]=g[f];return b?b:Nc(e)};var pa=wa.v4=wa,oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
na;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(na||(na={}));var ca=function(a){void 0===a&&(a=na.warn);return{setLogLevel:function(b){a=na[b]?b:na.warn},warn:function(b,d){for(var e=[],g=2;g<arguments.length;g++)e[g-2]=arguments[g];a>=na.warn&&"undefined"!==typeof console&&(g="Snowplow: "+b,d?console.warn.apply(console,X([g+"\n",d],e,!1)):console.warn.apply(console,X([g],e,!1)))},error:function(b,d){for(var e=[],g=2;g<arguments.length;g++)e[g-
2]=arguments[g];a>=na.error&&"undefined"!==typeof console&&(g="Snowplow: "+b+"\n",d?console.error.apply(console,X([g+"\n",d],e,!1)):console.error.apply(console,X([g],e,!1)))},debug:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=na.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+b],d,!1))},info:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=na.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+
b],d,!1))}}}(),Pc={},Qc={};(function(){var a={rotl:function(b,d){return b<<d|b>>>32-d},rotr:function(b,d){return b<<32-d|b>>>d},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var d=0;d<b.length;d++)b[d]=a.endian(b[d]);return b},randomBytes:function(b){for(var d=[];0<b;b--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(b){for(var d=[],e=0,g=0;e<b.length;e++,g+=8)d[g>>>5]|=b[e]<<24-g%32;return d},wordsToBytes:function(b){for(var d=
[],e=0;e<32*b.length;e+=8)d.push(b[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(b){for(var d=[],e=0;e<b.length;e++)d.push((b[e]>>>4).toString(16)),d.push((b[e]&15).toString(16));return d.join("")},hexToBytes:function(b){for(var d=[],e=0;e<b.length;e+=2)d.push(parseInt(b.substr(e,2),16));return d},bytesToBase64:function(b){for(var d=[],e=0;e<b.length;e+=3)for(var g=b[e]<<16|b[e+1]<<8|b[e+2],f=0;4>f;f++)8*e+6*f<=8*b.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>
6*(3-f)&63)):d.push("=");return d.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,g=0;e<b.length;g=++e%4)0!=g&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-1))&Math.pow(2,-2*g+8)-1)<<2*g|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>6-2*g);return d}};Qc=a})();var ec={utf8:{stringToBytes:function(a){return ec.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(ec.bin.bytesToString(a)))}},
bin:{stringToBytes:function(a){for(var b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d)&255);return b},bytesToString:function(a){for(var b=[],d=0;d<a.length;d++)b.push(String.fromCharCode(a[d]));return b.join("")}}},Rc=ec;(function(){var a=Qc,b=Rc.utf8,d=Rc.bin,e=function(g,f){var l=a.wordsToBytes,m=g;m.constructor==String?m=b.stringToBytes(m):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(m)?m=Array.prototype.slice.call(m,0):Array.isArray(m)||(m=m.toString());g=a.bytesToWords(m);
var r=8*m.length;m=[];var p=1732584193,A=-271733879,x=-1732584194,t=271733878,k=-1009589776;g[r>>5]|=128<<24-r%32;g[(r+64>>>9<<4)+15]=r;for(r=0;r<g.length;r+=16){for(var y=p,J=A,T=x,G=t,H=k,F=0;80>F;F++){if(16>F)m[F]=g[r+F];else{var Y=m[F-3]^m[F-8]^m[F-14]^m[F-16];m[F]=Y<<1|Y>>>31}Y=(p<<5|p>>>27)+k+(m[F]>>>0)+(20>F?(A&x|~A&t)+1518500249:40>F?(A^x^t)+1859775393:60>F?(A&x|A&t|x&t)-1894007588:(A^x^t)-899497514);k=t;t=x;x=A<<30|A>>>2;A=p;p=Y}p+=y;A+=J;x+=T;t+=G;k+=H}l=l.call(a,[p,A,x,t,k]);return f&&
f.asBytes?l:f&&f.asString?d.bytesToString(l):a.bytesToHex(l)};e._blocksize=16;e._digestsize=20;Pc=e})();var jd=Pc,Ta={},wd=function(){return function(){this.outQueues=[];this.bufferFlushers=[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),lb="undefined"!==typeof window?vd():void 0;w.addGlobalContexts=function(a,b){C(b,function(d){d.core.addGlobalContexts(a)})};w.addPlugin=function(a,b){C(b,function(d){d.addPlugin(a)})};w.clearGlobalContexts=function(a){C(a,function(b){b.core.clearGlobalContexts()})};
w.clearUserData=function(a,b){C(b,function(d){d.clearUserData(a)})};w.convivaAppTracker=function(a){void 0===a&&(a={});if(lb){var b=Jc("CAT","CAT","js-".concat("0.3.7"),"",lb,a);document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&b&&b.trackVideoEvent(d)});return b}};w.crossDomainLinker=function(a,b){C(b,function(d){d.crossDomainLinker(a)})};w.disableAnonymousTracking=function(a,b){C(b,function(d){d.disableAnonymousTracking(a)})};w.discardBrace=function(a,
b){C(b,function(d){d.discardBrace(a)})};w.discardHashTag=function(a,b){C(b,function(d){d.discardHashTag(a)})};w.enableActivityTracking=function(a,b){C(b,function(d){d.enableActivityTracking(a)})};w.enableActivityTrackingCallback=function(a,b){C(b,function(d){d.enableActivityTrackingCallback(a)})};w.enableAnonymousTracking=function(a,b){C(b,function(d){d.enableAnonymousTracking(a)})};w.flushBuffer=function(a,b){C(b,function(d){d.flushBuffer(a)})};w.newSession=function(a){C(a,function(b){b.newSession()})};
w.newTracker=function(a,b,d){void 0===d&&(d={});if(lb)return Jc(a,a,"js-".concat("0.3.7"),b,lb,d)};w.preservePageViewId=function(a){C(a,function(b){b.preservePageViewId()})};w.removeGlobalContexts=function(a,b){C(b,function(d){d.core.removeGlobalContexts(a)})};w.setBufferSize=function(a,b){C(b,function(d){d.setBufferSize(a)})};w.setCollectorUrl=function(a,b){C(b,function(d){d.setCollectorUrl(a)})};w.setCookiePath=function(a,b){C(b,function(d){d.setCookiePath(a)})};w.setCustomTags=function(a,b){C(b,
function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};w.setCustomUrl=function(a,b){C(b,function(d){d.setCustomUrl(a)})};w.setDocumentTitle=function(a,b){C(b,function(d){d.setDocumentTitle(a)})};w.setOptOutCookie=function(a,b){C(b,function(d){d.setOptOutCookie(a)})};w.setReferrerUrl=function(a,b){C(b,function(d){d.setReferrerUrl(a)})};w.setUserId=function(a,b){C(b,function(d){d.setUserId(a)})};w.setUserIdFromCookie=function(a,b){C(b,function(d){d.setUserIdFromCookie(a)})};
w.setUserIdFromLocation=function(a,b){C(b,function(d){d.setUserIdFromLocation(a)})};w.setUserIdFromReferrer=function(a,b){C(b,function(d){d.setUserIdFromReferrer(a)})};w.setVisitorCookieTimeout=function(a,b){C(b,function(d){d.setVisitorCookieTimeout(a)})};w.trackCustomEvent=function(a,b){C(b,function(d){var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(g){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=
e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)})};w.trackPageView=function(a,b){C(b,function(d){d.trackPageView(a)})};
w.trackSelfDescribingEvent=function(a,b){C(b,function(d){d.core.track(ob({event:a.event}),a.context,a.timestamp)})};w.trackStructEvent=function(a,b){C(b,function(d){d=d.core;var e=d.track,g=a.category,f=a.action,l=a.label,m=a.property,r=a.value,p=Ua();p.add("e","se");p.add("se_ca",g);p.add("se_ac",f);p.add("se_la",l);p.add("se_pr",m);p.add("se_va",null==r?void 0:r.toString());e.call(d,p,a.context,a.timestamp)})};w.unsetCustomTags=function(a,b){C(b,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
w.updatePageActivity=function(a){C(a,function(b){b.updatePageActivity()})};w.version="0.3.7";Object.defineProperty(w,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
