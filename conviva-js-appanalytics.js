/*!
 * Browser tracker for Snowplow v3.1.6 (http://bit.ly/sp-js)
 * Copyright 2021 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(w,Z){"object"===typeof exports&&"undefined"!==typeof module?Z(exports):"function"===typeof define&&define.amd?define(["exports"],Z):(w="undefined"!==typeof globalThis?globalThis:w||self,Z(w.snowplowBrowserTracking={}))})(this,function(w){function Z(a,b,c){if(c||2===arguments.length)for(var e=0,g=b.length,f;e<g;e++)!f&&e in b||(f||(f=Array.prototype.slice.call(b,0,e)),f[e]=b[e]);return a.concat(f||b)}function fb(a){var b={exports:{}};return a(b,b.exports),b.exports}function Oa(){var a=
{},b=[],c=[],e,g=function(f,l){null!=l&&""!==l&&(a[f]=l)};return{add:g,addDict:function(f){for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&g(l,f[l])},addJson:function(f,l,m){m&&Lb(m)&&(f={keyIfEncoded:f,keyIfNotEncoded:l,json:m},c.push(f),b.push(f))},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(f){e=f},build:function(){null===e||void 0===e?void 0:e(this,c);return a}}}function rc(a){return function(b,c){for(var e=0;e<c.length;e++){var g=c[e],f=JSON.stringify(g.json);
if(a){var l=b,m=l.add;g=g.keyIfEncoded;if(f){var q=0,x=0,D=[];if(f){f=unescape(encodeURIComponent(f));do{var H=f.charCodeAt(q++);var v=f.charCodeAt(q++);var h=f.charCodeAt(q++);var t=H<<16|v<<8|h;H=t>>18&63;v=t>>12&63;h=t>>6&63;t&=63;D[x++]=Pa.charAt(H)+Pa.charAt(v)+Pa.charAt(h)+Pa.charAt(t)}while(q<f.length);q=D.join("");f=f.length%3;f=(f?q.slice(0,f-3):q)+"===".slice(f||3)}f=f.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}m.call(l,g,f)}else b.add(g.keyIfNotEncoded,f)}c.length=0}}function Lb(a){if(!Mb(a))return!1;
for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function Mb(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function sc(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(c){for(var e=[],g=[],f=0;f<c.length;f++){var l=c[f];Nb(l)?e.push(l):ua(l)&&g.push(l)}a=a.concat(g);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},
removeGlobalContexts:function(c){for(var e=function(f){Nb(f)?b=b.filter(function(l){return JSON.stringify(l)!==JSON.stringify(f)}):ua(f)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(f)}))},g=0;g<c.length;g++)e(c[g])},getApplicableContexts:function(c){a:{var e=0;for(var g=c.getJson();e<g.length;e++){var f=g[e];if("ue_px"===f.keyIfEncoded&&"object"===typeof f.json.data&&(f=f.json.data.schema,"string"==typeof f)){e=f;break a}}e=""}g=c.getPayload().e;f="string"===typeof g?g:"";g=
[];var l=gb(a,c,f,e);g.push.apply(g,l);c=tc(b,c,f,e);g.push.apply(g,c);return g}}}function uc(a){return{addPluginContexts:function(b){var c=null!==b&&void 0!==b?b:[];a.forEach(function(e){try{e.contexts&&c.push.apply(c,e.contexts())}catch(g){ea.error("Error adding plugin contexts",g)}});return c}}}function vc(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,c=0;for(a=a.slice(2);c<a.length;c++)if("*"===a[c])b=!0;else if(b)return!1;return!0}return 2==a.length?!0:!1}function Ob(a){return(a=
a.split("."))&&1<a.length?vc(a):!1}function Pb(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&Ob(a[1]))return a.slice(1,6)}function hb(a){if(a=Pb(a)){var b=a[0];return 5===a.length&&Ob(b)}return!1}function wc(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function Qb(a){return wc(a)?a.every(function(b){return hb(b)}):"string"===typeof a?hb(a):
!1}function Ea(a){return Lb(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function xc(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(Qb(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(Qb(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Qa(a){return"function"===typeof a&&1>=a.length}function ua(a){return Qa(a)||Ea(a)}function Rb(a){return Array.isArray(a)&&
2===a.length?Array.isArray(a[1])?Qa(a[0])&&a[1].every(ua):Qa(a[0])&&ua(a[1]):!1}function Sb(a){return Array.isArray(a)&&2===a.length?xc(a[0])?Array.isArray(a[1])?a[1].every(ua):ua(a[1]):!1:!1}function Nb(a){return Rb(a)||Sb(a)}function yc(a,b){var c=0,e=0,g=a.accept;Array.isArray(g)?a.accept.some(function(f){return Ra(f,b)})&&e++:"string"===typeof g&&Ra(g,b)&&e++;g=a.reject;Array.isArray(g)?a.reject.some(function(f){return Ra(f,b)})&&c++:"string"===typeof g&&Ra(g,b)&&c++;return 0<e&&0===c?!0:!1}function Ra(a,
b){if(!hb(a))return!1;a=Pb(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!zc(a[0],b[0]))return!1;for(var c=1;5>c;c++)if(!Tb(a[c],b[c]))return!1;return!0}return!1}function zc(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var c=0;c<a.length;c++)if(!Tb(b[c],a[c]))return!1;return!0}return!1}function Tb(a,b){return a&&b&&"*"===a||a===b}function Ub(a){return Array.isArray(a)?
a:[a]}function gb(a,b,c,e){var g;a=Ub(a).map(function(f){a:if(Ea(f))f=[f];else{if(Qa(f)){b:{var l=void 0;try{var m={event:b.getPayload(),eventType:c,eventSchema:e};l=f(m);if(Array.isArray(l)&&l.every(Ea)||Ea(l)){var q=l;break b}q=void 0;break b}catch(x){}q=void 0}if(Ea(q)){f=[q];break a}else if(Array.isArray(q)){f=q;break a}}f=void 0}if(f&&0!==f.length)return f});return(g=[]).concat.apply(g,a.filter(function(f){return null!=f&&f.filter(Boolean)}))}function tc(a,b,c,e){var g;a=Ub(a).map(function(f){a:{if(Rb(f)){var l=
f[0],m=!1;try{var q={event:b.getPayload(),eventType:c,eventSchema:e};m=l(q)}catch(x){m=!1}if(!0===m){f=gb(f[1],b,c,e);break a}}else if(Sb(f)&&yc(f[0],e)){f=gb(f[1],b,c,e);break a}f=[]}if(f&&0!==f.length)return f});return(g=[]).concat.apply(g,a.filter(function(f){return null!=f&&f.filter(Boolean)}))}function Ac(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}
function Bc(a){void 0===a&&(a={});var b=a.base64,c=a.corePlugins,e=null!==c&&void 0!==c?c:[];a=function(f,l,m){function q(h,t){h=D.getApplicableContexts(h);var I=[];t&&t.length&&I.push.apply(I,t);h&&h.length&&I.push.apply(I,h);return I}var x=uc(l),D=sc(),H=f,v={};return{track:function(h,t,I){h.withJsonProcessor(rc(H));h.add("eid",R.v4());h.addDict(v);I=Ac(I);h.add(I.type,I.value.toString());t=q(h,x.addPluginContexts(t));t=t&&t.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",
data:t}:void 0;void 0!==t&&h.addJson("cx","co",t);l.forEach(function(K){try{K.beforeTrack&&K.beforeTrack(h)}catch(aa){ea.error("Plugin beforeTrack",aa)}});"function"===typeof m&&m(h);var V=h.build();l.forEach(function(K){try{K.afterTrack&&K.afterTrack(V)}catch(aa){ea.error("Plugin afterTrack",aa)}});return V},addPayloadPair:function(h,t){v[h]=t},getBase64Encoding:function(){return H},setBase64Encoding:function(h){H=h},addPayloadDict:function(h){for(var t in h)Object.prototype.hasOwnProperty.call(h,
t)&&(v[t]=h[t])},resetPayloadPairs:function(h){v=Mb(h)?h:{}},setTrackerVersion:function(h){v.tv=h},setTrackerNamespace:function(h){v.tna=h},setAppId:function(h){v.aid=h},setPlatform:function(h){v.p=h},setUserId:function(h){v.uid=h},setScreenResolution:function(h,t){v.res=h+"x"+t},setViewport:function(h,t){v.vp=h+"x"+t},setColorDepth:function(h){v.cd=h},setTimezone:function(h){v.tz=h},setLang:function(h){v.lang=h},setIpAddress:function(h){v.ip=h},setUseragent:function(h){v.ua=h},addGlobalContexts:function(h){D.addGlobalContexts(h)},
clearGlobalContexts:function(){D.clearGlobalContexts()},removeGlobalContexts:function(h){D.removeGlobalContexts(h)}}}(null!==b&&void 0!==b?b:!0,e,a.callback);var g=ba(ba({},a),{addPlugin:function(f){var l,m;f=f.plugin;e.push(f);null===(l=f.logger)||void 0===l?void 0:l.call(f,ea);null===(m=f.activateCorePlugin)||void 0===m?void 0:m.call(f,g)}});null===e||void 0===e?void 0:e.forEach(function(f){var l,m;null===(l=f.logger)||void 0===l?void 0:l.call(f,ea);null===(m=f.activateCorePlugin)||void 0===m?void 0:
m.call(f,g)});return g}function Vb(a){var b=a.event;a=b.schema;var c=b.data;b=Oa();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:c}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function Cc(a){var b=a.pageUrl,c=a.pageTitle;a=a.referrer;var e=Oa();e.add("e","pv");e.add("url",b);e.add("page",c);e.add("refr",a);return e}function Dc(){try{var a=!!window.localStorage}catch(c){a=!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr",
"modernizr");b.removeItem("modernizr");return!0}catch(c){return!1}}function Wb(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function Xb(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function ib(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function Yb(a){var b=a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,
2)&&(a=a.slice(1));return a}function jb(a){var b=window,c="",e=Fa("referrer",b.location.href)||Fa("referer",b.location.href);if(e)return e;if(a)return a;try{c=b.top.document.referrer}catch(g){if(b.parent)try{c=b.parent.document.referrer}catch(f){c=""}}""===c&&(c=document.referrer);return c}function ja(a,b,c,e){if(a.addEventListener)return a.addEventListener(b,c,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,c);a["on"+b]=c}function Fa(a,b){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?
decodeURIComponent(a[1].replace(/\+/g," ")):null}function Sa(a,b,c){void 0===c&&(c=63072E3);try{var e=window.localStorage,g=Date.now()+1E3*c;e.setItem(a+".expires",g.toString());e.setItem(a,b);return!0}catch(f){return!1}}function Zb(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(c){return!1}}function Ec(a,b){for(var c=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),g="_test_value_"+(new Date).getTime(),f=c.split("."),l=f.length-1;0<=
l;){var m=f.slice(l,f.length).join(".");W(e,g,0,"/",m,a,b);if(W(e)===g){W(e,"",-1,"/",m,a,b);c=document.cookie.split("; ");e=[];for(g=0;g<c.length;g++)"_sp_root_domain_test_"===c[g].substring(0,21)&&e.push(c[g]);c=e;for(e=0;e<c.length;e++)W(c[e],"",-1,"/",m,a,b);return m}--l}return c}function W(a,b,c,e,g,f,l){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(c?"; Expires="+(new Date(+new Date+1E3*c)).toUTCString():"")+(e?"; Path="+e:"")+(g?"; Domain="+
g:"")+(f?"; SameSite="+f:"")+(l?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function Fc(a,b,c,e,g,f,l,m,q,x,D){function H(p){var y=Object.keys(p).map(function(A){return[A,p[A]]}).reduce(function(A,u){A[u[0]]=u[1].toString();return A},{});return{evt:y,bytes:v(JSON.stringify(y))}}function v(p){for(var y=0,A=0;A<p.length;A++){var u=p.charCodeAt(A);127>=u?y+=1:2047>=u?y+=2:55296<=u&&57343>=u?(y+=4,A++):y=65535>u?y+3:y+4}return y}function h(p){for(void 0===
p&&(p=!1);E.length&&"string"!==typeof E[0]&&"object"!==typeof E[0];)E.shift();if(1>E.length)F=!1;else{if(!O||"string"!==typeof O.valueOf())throw"No collector configured";F=!0;if(va){var y=function(ca){for(var fa=0,wa=0;fa<ca.length&&!(wa+=ca[fa].bytes,wa>=l);)fa+=1;return fa},A=void 0;if(xa(E)){A=O;var u=t(A,!0,p);var J=y(E)}else A=K(E[0]),u=t(A,!1,p),J=1;var P=setTimeout(function(){u.abort();F=!1},x),X=function(ca){for(var fa=0;fa<ca;fa++)E.shift();c&&Sa(qa,JSON.stringify(E.slice(0,q)));h()};u.onreadystatechange=
function(){4===u.readyState&&200<=u.status&&400>u.status?(clearTimeout(P),X(J)):4===u.readyState&&400<=u.status&&(clearTimeout(P),F=!1)};if(xa(E)){if(y=E.slice(0,J),0<y.length){p=!1;y=y.map(function(ca){return ca.evt});if(Ta){var ka=new Blob([I(V(y))],{type:"application/json"});try{p=navigator.sendBeacon(A,ka)}catch(ca){p=!1}}!0===p?X(J):u.send(I(V(y)))}}else u.send()}else if(D||xa(E))F=!1;else{A=new Image(1,1);var la=!0;A.onload=function(){la&&(la=!1,E.shift(),c&&Sa(qa,JSON.stringify(E.slice(0,q))),
h())};A.onerror=function(){la&&(F=la=!1)};A.src=K(E[0]);setTimeout(function(){la&&F&&(la=!1,h())},x)}}}function t(p,y,A){var u=new XMLHttpRequest;y?(u.open("POST",p,!A),u.setRequestHeader("Content-Type","application/json; charset=UTF-8")):u.open("GET",p,!A);u.withCredentials=!0;D&&u.setRequestHeader("SP-Anonymous","*");return u}function I(p){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:p})}function V(p){for(var y=(new Date).getTime().toString(),
A=0;A<p.length;A++)p[A].stm=y;return p}function K(p){return m?O+p.replace("?","?stm="+(new Date).getTime()+"&"):O+p}function aa(p){function y(u,J,P){return(P=P.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&P.length?parseInt(P[0])<=u||parseInt(P[0])===u&&parseInt(P[1])<=J:!1}function A(u){return u.match("Version/.* Safari/")&&!u.match("Chrom(e|ium)")}return function(u,J){return(J=J.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&J.length?parseInt(J[0])<=u:!1}(13,p)||y(10,15,
p)&&A(p)}var F=!1,O,E=[];e="string"===typeof e?e.toLowerCase():e;var Ga=null===e||!0===e||"beacon"===e||"true"===e,Ta=!(!(Ga&&window.navigator&&window.navigator.sendBeacon)||aa(window.navigator.userAgent))&&Ga,va=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),ha="get"!==e&&va&&("post"===e||Ga),ya=ha?g:"/i",qa="snowplowOutQueue_"+a+"_"+(ha?"post2":"get");f=c&&Dc()&&ha&&f||1;if(c)try{var Ha=window.localStorage.getItem(qa);E=Ha?JSON.parse(Ha):[]}catch(p){}Array.isArray(E)||(E=[]);
b.outQueues.push(E);va&&1<f&&b.bufferFlushers.push(function(p){F||h(p)});var xa=function(p){return"object"===typeof p[0]};return{enqueueRequest:function(p,y){O=y+ya;if(ha){p=H(p);if(p.bytes>=l){ea.warn("Event ("+p.bytes+"B) too big, max is "+l);t(O,!0,!1).send(I(V([p.evt])));return}E.push(p)}else{y=E;var A=y.push,u="?",J={co:!0,cx:!0},P=!0,X;for(X in p)p.hasOwnProperty(X)&&!J.hasOwnProperty(X)&&(P?P=!1:u+="&",u+=encodeURIComponent(X)+"="+encodeURIComponent(p[X]));for(var ka in J)p.hasOwnProperty(ka)&&
J.hasOwnProperty(ka)&&(u+="&"+ka+"="+encodeURIComponent(p[ka]));A.call(y,u)}p=!1;c&&(p=Sa(qa,JSON.stringify(E.slice(0,q))));F||p&&!(E.length>=f)||h()},executeQueue:function(){F||h()},setUseLocalStorage:function(p){c=p},setAnonymousTracking:function(p){D=p},setCollectorUrl:function(p){O=p+ya},setBufferSize:function(p){f=p}}}function $b(a,b,c){if("translate.googleusercontent.com"===a)""===c&&(c=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?Fa("u",
a[1]):null,b=null!==a&&void 0!==a?a:"",a=ib(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=ib(b);return[a,b,c]}function Gc(a,b,c,e,g,f){var l;void 0===f&&(f={});a=function(q,x,D,H,v,h){function t(){ra=$b(window.location.hostname,window.location.href,jb());ra[1]!==ma&&(Ia=jb(ma));ac=Yb(ra[0]);ma=ra[1]}function I(d){var k=(new Date).getTime();d=d.currentTarget;if(null===d||void 0===d?0:d.href){k="_sp="+(za+"."+k);var n=d.href.split("#"),r=n[0].split("?"),
C=r.shift();if(r=r.join("?")){for(var G=!0,M=r.split("&"),z=0;z<M.length;z++)if("_sp="===M[z].substr(0,4)){G=!1;M[z]=k;r=M.join("&");break}G&&(r=k+"&"+r)}else r=k;n[0]=C+"?"+r;k=n.join("#");d.href=k}}function V(d){for(var k=0;k<document.links.length;k++){var n=document.links[k];!n.spDecorationEnabled&&d(n)&&(ja(n,"click",I,!0),ja(n,"mousedown",I,!0),n.spDecorationEnabled=!0)}}function K(d){if(bc){var k=/#.*/;d=d.replace(k,"")}cc&&(k=/[{}]/g,d=d.replace(k,""));return d}function aa(d){return(d=/^([a-z]+):/.exec(d))?
d[1]:null}function F(d){d=Aa+d+"."+sa;if("localStorage"==L){try{var k=window.localStorage,n=k.getItem(d+".expires");if(null===n||+n>Date.now())var r=k.getItem(d);else k.removeItem(d),k.removeItem(d+".expires"),r=void 0}catch(C){r=void 0}return r}if("cookie"==L||"cookieAndLocalStorage"==L)return W(d)}function O(){t();sa=Hc((Ja||ac)+(kb||"/")).slice(0,4)}function E(){Ua=(new Date).getTime()}function Ga(){var d=Ta(),k=d[0];k<Va?Va=k:k>Wa&&(Wa=k);d=d[1];d<Xa?Xa=d:d>Ya&&(Ya=d);E()}function Ta(){var d=
document.documentElement;return d?[d.scrollLeft||window.pageXOffset,d.scrollTop||window.pageYOffset]:[0,0]}function va(){var d=Ta(),k=d[0];Wa=Va=k;Ya=Xa=d=d[1]}function ha(){qa(Aa+"ses."+sa,"*",dc)}function ya(d,k,n,r,C,G){qa(Aa+"id."+sa,d+"."+k+"."+n+"."+r+"."+C+"."+G,ec)}function qa(d,k,n){if(!na||Ba)"localStorage"==L?Sa(d,k,n):("cookie"==L||"cookieAndLocalStorage"==L)&&W(d,k,n,kb,Ja,Za,$a)}function Ha(d){var k=Aa+"id."+sa,n=Aa+"ses."+sa;Zb(k);Zb(n);W(k,"",-1,"/",Ja,Za,$a);W(n,"",-1,"/",Ja,Za,$a);
null!==d&&void 0!==d&&d.preserveSession||(Q=R.v4(),da=0);null!==d&&void 0!==d&&d.preserveUser||(za=R.v4(),ta=null)}function xa(d){d&&d.stateStorageStrategy&&(h.stateStorageStrategy=d.stateStorageStrategy,L=fc(h));na=!!h.anonymousTracking;Ba=gc(h);lb=hc(h);oa.setUseLocalStorage("localStorage"==L||"cookieAndLocalStorage"==L);oa.setAnonymousTracking(lb)}function p(){try{var d=window.localStorage.getItem("Conviva.sdkConfig"),k=JSON.parse(d||"{}");ab="{}"===k||"undefined"===typeof k?X():k.clId||X();try{Ka=
Math.floor(2147483647*Math.random())}catch(r){console.warn(r),Ka=-1}b:try{var n=window.localStorage;d={clId:ab,iid:Ka};k=null;try{k=JSON.stringify(d)}catch(r){break b}console.log("writing to the storage: Conviva.sdkConfig, value: "+k);n.setItem("Conviva.sdkConfig",k)}catch(r){}}catch(r){console.warn(r)}console.log("SP: initializing Ids and Cookies:sdkConfig Conviva "+ab+" "+Ka);if(!na||Ba)n="none"!=L&&!!F("ses"),d=y(),d[1]?za=d[1]:(za=na?"":R.v4(),d[1]=za),Q=d[6],n||(d[3]++,Q=R.v4(),d[6]=Q,d[5]=d[4]),
"none"!=L&&(ha(),d[4]=Math.round((new Date).getTime()/1E3),d.shift(),ya.apply(null,d))}function y(){if("none"==L)return[];var d=Math.round((new Date).getTime()/1E3),k=F("id");k?(d=k.split("."),d.unshift("0")):d=["1",za,d,0,d,""];d[6]&&"undefined"!==d[6]||(d[6]=R.v4());return d}function A(d){return 0===d.indexOf("http")?d:("https:"===document.location.protocol?"https":"http")+"://"+d}function u(){ic&&null!=v.pageViewId||(v.pageViewId=R.v4())}function J(){null==v.pageViewId&&(v.pageViewId=R.v4());return v.pageViewId}
function P(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:J()}}]}}}function X(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(d){console.warn(d)}}function ka(d){var k=d.title,n=d.context,r=d.timestamp;d=d.contextCallback;t();jc&&u();jc=!0;Ca=document.title;
La=k;k=Xb(La||Ca);S.track(Cc({pageUrl:K(Da||ma),pageTitle:k,referrer:K(bb||Ia)}),(n||[]).concat(d?d():[]),r);r=new Date;k=!1;if(T.enabled&&!T.installed){k=T.installed=!0;var C={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var M=!1,z=Object.defineProperty({},"passive",{get:function(){M=!0},set:function(){}}),U=function(){};window.addEventListener("testPassiveEventSupport",U,z);window.removeEventListener("testPassiveEventSupport",U,z);C.hasSupport=M}}};
C.update();var G="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(C,"hasSupport")?ja(document,G,E,{passive:!0}):ja(document,G,E);va();G=function(M,z){void 0===z&&(z=E);return function(U){return ja(document,U,z)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(G(document));["resize","focus","blur"].forEach(G(window));G(window,Ga)("scroll")}if(T.enabled&&(Ic||k))for(r in Ua=
r.getTime(),r=void 0,T.configurations)if(k=T.configurations[r])window.clearInterval(k.activityInterval),la(k,n,d)}function la(d,k,n){var r=function(G,M){t();G({context:M,pageViewId:J(),minXOffset:Va,minYOffset:Xa,maxXOffset:Wa,maxYOffset:Ya});va()},C=function(){Ua+d.configHeartBeatTimer>(new Date).getTime()&&r(d.callback,(k||[]).concat(n?n():[]))};d.activityInterval=0!=d.configMinimumVisitLength?window.setTimeout(function(){Ua+d.configMinimumVisitLength>(new Date).getTime()&&r(d.callback,(k||[]).concat(n?
n():[]));d.activityInterval=window.setInterval(C,d.configHeartBeatTimer)},d.configMinimumVisitLength):window.setInterval(C,d.configHeartBeatTimer)}function ca(d){var k=d.minimumVisitLength,n=d.heartbeatDelay;d=d.callback;if(Wb(k)&&Wb(n))return{configMinimumVisitLength:1E3*k,configHeartBeatTimer:1E3*n,callback:d};ea.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function fa(d){var k=d.context,n=d.minXOffset,r=d.minYOffset,C=d.maxXOffset,G=d.maxYOffset;d=document.title;
d!==Ca&&(Ca=d,La=void 0);d=S;var M=d.track,z=K(Da||ma),U=Xb(La||Ca),cb=K(bb||Ia);n=Math.round(n);C=Math.round(C);r=Math.round(r);G=Math.round(G);var Y=Oa();Y.add("e","pp");Y.add("url",z);Y.add("page",U);Y.add("refr",cb);n&&!isNaN(Number(n))&&Y.add("pp_mix",n.toString());C&&!isNaN(Number(C))&&Y.add("pp_max",C.toString());r&&!isNaN(Number(r))&&Y.add("pp_miy",r.toString());G&&!isNaN(Number(G))&&Y.add("pp_may",G.toString());M.call(d,Y,k)}var wa,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb;
H=h.gatewayUrl?h.gatewayUrl:"https://appgw.conviva.com";x||(x="CAT");h.eventMethod=null!==(wa=h.eventMethod)&&void 0!==wa?wa:"post";var fc=function(d){var k;return null!==(k=d.stateStorageStrategy)&&void 0!==k?k:"cookieAndLocalStorage"},gc=function(d){var k,n;return"boolean"===typeof d.anonymousTracking?!1:null!==(n=!0===(null===(k=d.anonymousTracking)||void 0===k?void 0:k.withSessionTracking))&&void 0!==n?n:!1},hc=function(d){var k,n;return"boolean"===typeof d.anonymousTracking?!1:null!==(n=!0===
(null===(k=d.anonymousTracking)||void 0===k?void 0:k.withServerAnonymisation))&&void 0!==n?n:!1};h.plugins=null!==(mb=h.plugins)&&void 0!==mb?mb:[];(null!==(ob=null===(nb=null===h||void 0===h?void 0:h.contexts)||void 0===nb?void 0:nb.webPage)&&void 0!==ob?ob:1)&&h.plugins.push(P());console.log("adding conviva plugin");h.plugins.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-1",data:{clid:ab,iid:Ka.toString(),ck:Jc}}]}}}());var S=Bc({base64:h.encodeBase64,
corePlugins:h.plugins,callback:function(d){var k=Math.round((new Date).getTime()/1E3),n=F("ses"),r=y(),C=r[0],G=r[1],M=r[2],z=r[3],U=r[4],cb=r[5];r=r[6];var Y=Ma?!!W(Ma):!1;kc||Y?Ha():("0"===C?(Q=r,n||"none"==L||(z++,cb=U,Q=R.v4()),da=z):(new Date).getTime()-Fb>1E3*dc&&(Q=R.v4(),da++),n=d.add,"innerWidth"in window?(C=window.innerWidth,z=window.innerHeight):(z=document.documentElement||document.body,C=z.clientWidth,z=z.clientHeight),n.call(d,"vp",0<=C&&0<=z?C+"x"+z:null),n=d.add,z=document.documentElement,
U=document.body,C=Math.max(z.clientWidth,z.offsetWidth,z.scrollWidth),z=Math.max(z.clientHeight,z.offsetHeight,z.scrollHeight,U?Math.max(U.offsetHeight,U.scrollHeight):0),C=isNaN(C)||isNaN(z)?"":C+"x"+z,n.call(d,"ds",C),d.add("vid",Ba?da:na?null:da),d.add("sid",Ba?Q:na?null:Q),d.add("duid",na?null:G),d.add("uid",na?null:ta),t(),d.add("refr",K(bb||Ia)),d.add("url",K(Da||ma)),"none"!=L&&(ya(G,M,da,k,cb,Q),ha()),Fb=(new Date).getTime());k=Ma?!!W(Ma):!1;kc||k||oa.enqueueRequest(d.build(),Gb)}}),Kc=navigator.userLanguage||
navigator.language,Lc=document.characterSet||document.charset,ra=$b(window.location.hostname,window.location.href,jb()),ac=Yb(ra[0]),ma=ra[1],Ia=ra[2],bb,Mc=null!==(pb=h.platform)&&void 0!==pb?pb:"web",Gb=A(H),Nc=null!==(qb=h.postPath)&&void 0!==qb?qb:"/"+h.convivaCustomerKey+"/ctp",Oc=null!==(rb=h.appId)&&void 0!==rb?rb:"",Jc=null!==(sb=h.convivaCustomerKey)&&void 0!==sb?sb:"",Da,Ca=document.title,La,Ic=null!==(tb=h.resetActivityTrackingOnPageView)&&void 0!==tb?tb:!0,bc,cc,Aa=null!==(ub=h.cookieName)&&
void 0!==ub?ub:"_sp_",Ja=null!==(vb=h.cookieDomain)&&void 0!==vb?vb:void 0,kb="/",Za=null!==(wb=h.cookieSameSite)&&void 0!==wb?wb:"None",$a=null!==(xb=h.cookieSecure)&&void 0!==xb?xb:!0,lc=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,kc="undefined"!==typeof h.respectDoNotTrack?h.respectDoNotTrack&&("yes"===lc||"1"===lc):!1,Ma,ec=null!==(yb=h.cookieLifetime)&&void 0!==yb?yb:63072E3,dc=null!==(zb=h.sessionCookieTimeout)&&void 0!==zb?zb:1800,Ba=gc(h),lb=hc(h),na=!!h.anonymousTracking,
L=fc(h),ab,Ka,Ua,Fb=(new Date).getTime(),Va,Wa,Xa,Ya,sa,za,Q,da=1,ta,oa=Fc(q,v,"localStorage"==L||"cookieAndLocalStorage"==L,h.eventMethod,Nc,null!==(Ab=h.bufferSize)&&void 0!==Ab?Ab:1,null!==(Bb=h.maxPostBytes)&&void 0!==Bb?Bb:4E4,null!==(Cb=h.useStm)&&void 0!==Cb?Cb:!0,null!==(Db=h.maxLocalStorageQueueSize)&&void 0!==Db?Db:1E3,null!==(Eb=h.connectionTimeout)&&void 0!==Eb?Eb:5E3,lb),ic=!1,jc=!1,T={enabled:!1,installed:!1,configurations:{}};h.hasOwnProperty("discoverRootDomain")&&h.discoverRootDomain&&
(Ja=Ec(Za,$a));S.setTrackerVersion(D);S.setTrackerNamespace(x);S.setAppId(Oc);S.setPlatform(Mc);S.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0");S.addPayloadPair("cs",Lc);S.addPayloadPair("lang",Kc);S.addPayloadPair("res",screen.width+"x"+screen.height);S.addPayloadPair("cd",screen.colorDepth);O();p();h.crossDomainLinker&&V(h.crossDomainLinker);return ba(ba({},{getDomainSessionIndex:function(){return da},getPageViewId:function(){return J()},newSession:function(){var d=Math.round((new Date).getTime()/
1E3),k=y(),n=k[1],r=k[2],C=k[3],G=k[4],M=k[5],z=k[6];"0"===k[0]?(Q=z,"none"!=L&&(C++,M=G,Q=R.v4()),da=C,ha()):(Q=R.v4(),da++);"none"!=L&&(ya(n,r,da,d,M,Q),ha());Fb=(new Date).getTime()},getCookieName:function(d){return Aa+d+"."+sa},getUserId:function(){return ta},getDomainUserId:function(){return y()[1]},getDomainUserInfo:function(){return y()},setReferrerUrl:function(d){bb=d},setCustomUrl:function(d){t();var k=ma,n;aa(d)?Da=d:"/"===d.slice(0,1)?Da=aa(k)+"://"+ib(k)+d:(k=K(k),0<=(n=k.indexOf("?"))&&
(k=k.slice(0,n)),(n=k.lastIndexOf("/"))!==k.length-1&&(k=k.slice(0,n+1)),Da=k+d)},setDocumentTitle:function(d){Ca=document.title;La=d},discardHashTag:function(d){bc=d},discardBrace:function(d){cc=d},setCookiePath:function(d){kb=d;O()},setVisitorCookieTimeout:function(d){ec=d},crossDomainLinker:function(d){V(d)},enableActivityTracking:function(d){T.configurations.pagePing||(T.enabled=!0,T.configurations.pagePing=ca(ba(ba({},d),{callback:fa})))},enableActivityTrackingCallback:function(d){T.configurations.callback||
(T.enabled=!0,T.configurations.callback=ca(d))},updatePageActivity:function(){E()},setOptOutCookie:function(d){Ma=d},setUserId:function(d){ta=d},setUserIdFromLocation:function(d){t();ta=Fa(d,ma)},setUserIdFromReferrer:function(d){t();ta=Fa(d,Ia)},setUserIdFromCookie:function(d){ta=W(d)},setCollectorUrl:function(d){Gb=A(d);oa.setCollectorUrl(Gb)},setBufferSize:function(d){oa.setBufferSize(d)},flushBuffer:function(d){void 0===d&&(d={});oa.executeQueue();d.newBufferSize&&oa.setBufferSize(d.newBufferSize)},
trackPageView:function(d){void 0===d&&(d={});ka(d)},preservePageViewId:function(){ic=!0},disableAnonymousTracking:function(d){h.anonymousTracking=!1;xa(d);p();oa.executeQueue()},enableAnonymousTracking:function(d){var k;h.anonymousTracking=null!==(k=d&&(null===d||void 0===d?void 0:d.options))&&void 0!==k?k:!0;xa(d);Ba||u()},clearUserData:Ha}),{id:q,namespace:x,core:S,sharedState:v})}(a,b,c,e,g,f);var m=ba(ba({},a),{addPlugin:function(q){var x,D;m.core.addPlugin(q);null===(D=(x=q.plugin).activateBrowserPlugin)||
void 0===D?void 0:D.call(x,m)}});null===(l=f.plugins)||void 0===l?void 0:l.forEach(function(q){var x;null===(x=q.activateBrowserPlugin)||void 0===x?void 0:x.call(q,m)});return m}function B(a,b){try{var c=null!==a&&void 0!==a?a:Object.keys(Na);a=Na;for(var e=[],g=0;g<c.length;g++){var f=c[g];a.hasOwnProperty(f)?e.push(a[f]):ea.warn(f+" not configured")}e.forEach(b)}catch(l){ea.error("Function failed",l)}}function mc(a,b,c,e,g,f){return Na.hasOwnProperty(a)?null:(Na[a]=Gc(a,b,c,e,g,f),Na[a])}function Pc(){function a(){"hidden"==
g.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}function b(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function c(){g.addEventListener?g.addEventListener("DOMContentLoaded",function m(){g.removeEventListener("DOMContentLoaded",m,!1);b()}):g.attachEvent&&g.attachEvent("onreadystatechange",function q(){"complete"===g.readyState&&(g.detachEvent("onreadystatechange",q),b())});ja(f,"load",b,!1)}var e=new Qc,
g=document,f=window;g.visibilityState&&ja(g,"visibilitychange",a,!1);ja(f,"beforeunload",function(){e.bufferFlushers.forEach(function(l){l(!1)})},!1);"loading"===document.readyState?c():b();return e}for(var ba=function(){ba=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])}return a};return ba.apply(this,arguments)},nc=fb(function(a){var b="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||
"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(b){var c=new Uint8Array(16);a.exports=function(){b(c);return c}}else{var e=Array(16);a.exports=function(){for(var g=0,f;16>g;g++)0===(g&3)&&(f=4294967296*Math.random()),e[g]=f>>>((g&3)<<3)&255;return e}}}),N=[],pa=0;256>pa;++pa)N[pa]=(pa+256).toString(16).substr(1);var oc=function(a,b){b=b||0;return[N[a[b++]],N[a[b++]],N[a[b++]],N[a[b++]],"-",N[a[b++]],N[a[b++]],"-",N[a[b++]],
N[a[b++]],"-",N[a[b++]],N[a[b++]],"-",N[a[b++]],N[a[b++]],N[a[b++]],N[a[b++]],N[a[b++]],N[a[b++]]].join("")},pc,Hb,Ib=0,Jb=0;pa=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||nc)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[c+e]=a[e];return b||oc(a)};pa.v1=function(a,b,c){c=b&&c||0;var e=b||[];a=a||{};var g=a.node||pc,f=void 0!==a.clockseq?a.clockseq:Hb;if(null==g||null==f){var l=nc();null==g&&(g=pc=[l[0]|1,l[1],l[2],
l[3],l[4],l[5]]);null==f&&(f=Hb=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var m=void 0!==a.nsecs?a.nsecs:Jb+1,q=l-Ib+(m-Jb)/1E4;0>q&&void 0===a.clockseq&&(f=f+1&16383);(0>q||l>Ib)&&void 0===a.nsecs&&(m=0);if(1E4<=m)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Ib=l;Jb=m;Hb=f;l+=122192928E5;a=(1E4*(l&268435455)+m)%4294967296;e[c++]=a>>>24&255;e[c++]=a>>>16&255;e[c++]=a>>>8&255;e[c++]=a&255;a=l/4294967296*1E4&268435455;e[c++]=a>>>8&255;e[c++]=a&255;e[c++]=
a>>>24&15|16;e[c++]=a>>>16&255;e[c++]=f>>>8|128;e[c++]=f&255;for(f=0;6>f;++f)e[c+f]=g[f];return b?b:oc(e)};var R=pa.v4=pa,Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ia;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(ia||(ia={}));var ea=function(a){void 0===a&&(a=ia.warn);return{setLogLevel:function(b){a=ia[b]?b:ia.warn},warn:function(b,c){for(var e=[],g=2;g<arguments.length;g++)e[g-2]=arguments[g];a>=ia.warn&&
"undefined"!==typeof console&&(g="Snowplow: "+b,c?console.warn.apply(console,Z([g+"\n",c],e)):console.warn.apply(console,Z([g],e)))},error:function(b,c){for(var e=[],g=2;g<arguments.length;g++)e[g-2]=arguments[g];a>=ia.error&&"undefined"!==typeof console&&(g="Snowplow: "+b+"\n",c?console.error.apply(console,Z([g+"\n",c],e)):console.error.apply(console,Z([g],e)))},debug:function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];a>=ia.debug&&"undefined"!==typeof console&&console.debug.apply(console,
Z(["Snowplow: "+b],c))},info:function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];a>=ia.info&&"undefined"!==typeof console&&console.info.apply(console,Z(["Snowplow: "+b],c))}}}(),db=fb(function(a){(function(){var b={rotl:function(c,e){return c<<e|c>>>32-e},rotr:function(c,e){return c<<32-e|c>>>e},endian:function(c){if(c.constructor==Number)return b.rotl(c,8)&16711935|b.rotl(c,24)&4278255360;for(var e=0;e<c.length;e++)c[e]=b.endian(c[e]);return c},randomBytes:function(c){for(var e=
[];0<c;c--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(c){for(var e=[],g=0,f=0;g<c.length;g++,f+=8)e[f>>>5]|=c[g]<<24-f%32;return e},wordsToBytes:function(c){for(var e=[],g=0;g<32*c.length;g+=8)e.push(c[g>>>5]>>>24-g%32&255);return e},bytesToHex:function(c){for(var e=[],g=0;g<c.length;g++)e.push((c[g]>>>4).toString(16)),e.push((c[g]&15).toString(16));return e.join("")},hexToBytes:function(c){for(var e=[],g=0;g<c.length;g+=2)e.push(parseInt(c.substr(g,2),16));return e},bytesToBase64:function(c){for(var e=
[],g=0;g<c.length;g+=3)for(var f=c[g]<<16|c[g+1]<<8|c[g+2],l=0;4>l;l++)8*g+6*l<=8*c.length?e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>>6*(3-l)&63)):e.push("=");return e.join("")},base64ToBytes:function(c){c=c.replace(/[^A-Z0-9+\/]/ig,"");for(var e=[],g=0,f=0;g<c.length;f=++g%4)0!=f&&e.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(g-1))&Math.pow(2,-2*f+8)-1)<<2*f|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(g))>>>
6-2*f);return e}};a.exports=b})()}),Kb={utf8:{stringToBytes:function(a){return Kb.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(Kb.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)&255);return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}},qc=Kb,Hc=fb(function(a){(function(){var b=qc.utf8,c=qc.bin,e=function(g,
f){var l=db.wordsToBytes,m=g;m.constructor==String?m=b.stringToBytes(m):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(m)?m=Array.prototype.slice.call(m,0):Array.isArray(m)||(m=m.toString());g=db.bytesToWords(m);var q=8*m.length;m=[];var x=1732584193,D=-271733879,H=-1732584194,v=271733878,h=-1009589776;g[q>>5]|=128<<24-q%32;g[(q+64>>>9<<4)+15]=q;for(q=0;q<g.length;q+=16){for(var t=x,I=D,V=H,K=v,aa=h,F=0;80>F;F++){if(16>F)m[F]=g[q+F];else{var O=m[F-3]^m[F-8]^m[F-14]^
m[F-16];m[F]=O<<1|O>>>31}O=(x<<5|x>>>27)+h+(m[F]>>>0)+(20>F?(D&H|~D&v)+1518500249:40>F?(D^H^v)+1859775393:60>F?(D&H|D&v|H&v)-1894007588:(D^H^v)-899497514);h=v;v=H;H=D<<30|D>>>2;D=x;x=O}x+=t;D+=I;H+=V;v+=K;h+=aa}l=l.call(db,[x,D,H,v,h]);return f&&f.asBytes?l:f&&f.asString?c.bytesToString(l):db.bytesToHex(l)};e._blocksize=16;e._digestsize=20;a.exports=e})()}),Na={},Qc=function(){return function(){this.outQueues=[];this.bufferFlushers=[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),eb="undefined"!==
typeof window?Pc():void 0;w.addGlobalContexts=function(a,b){B(b,function(c){c.core.addGlobalContexts(a)})};w.addPlugin=function(a,b){B(b,function(c){c.addPlugin(a)})};w.clearGlobalContexts=function(a){B(a,function(b){b.core.clearGlobalContexts()})};w.clearUserData=function(a,b){B(b,function(c){c.clearUserData(a)})};w.convivaAppTracker=function(a){void 0===a&&(a={});if(eb)return mc("CAT","CAT","js-0.2.1","",eb,a)};w.crossDomainLinker=function(a,b){B(b,function(c){c.crossDomainLinker(a)})};w.disableAnonymousTracking=
function(a,b){B(b,function(c){c.disableAnonymousTracking(a)})};w.discardBrace=function(a,b){B(b,function(c){c.discardBrace(a)})};w.discardHashTag=function(a,b){B(b,function(c){c.discardHashTag(a)})};w.enableActivityTracking=function(a,b){B(b,function(c){c.enableActivityTracking(a)})};w.enableActivityTrackingCallback=function(a,b){B(b,function(c){c.enableActivityTrackingCallback(a)})};w.enableAnonymousTracking=function(a,b){B(b,function(c){c.enableAnonymousTracking(a)})};w.flushBuffer=function(a,b){B(b,
function(c){c.flushBuffer(a)})};w.newSession=function(a){B(a,function(b){b.newSession()})};w.newTracker=function(a,b,c){void 0===c&&(c={});if(eb)return mc(a,a,"js-0.2.1",b,eb,c)};w.preservePageViewId=function(a){B(a,function(b){b.preservePageViewId()})};w.removeGlobalContexts=function(a,b){B(b,function(c){c.core.removeGlobalContexts(a)})};w.setBufferSize=function(a,b){B(b,function(c){c.setBufferSize(a)})};w.setCollectorUrl=function(a,b){B(b,function(c){c.setCollectorUrl(a)})};w.setCookiePath=function(a,
b){B(b,function(c){c.setCookiePath(a)})};w.setCustomUrl=function(a,b){B(b,function(c){c.setCustomUrl(a)})};w.setDocumentTitle=function(a,b){B(b,function(c){c.setDocumentTitle(a)})};w.setOptOutCookie=function(a,b){B(b,function(c){c.setOptOutCookie(a)})};w.setReferrerUrl=function(a,b){B(b,function(c){c.setReferrerUrl(a)})};w.setUserId=function(a,b){B(b,function(c){c.setUserId(a)})};w.setUserIdFromCookie=function(a,b){B(b,function(c){c.setUserIdFromCookie(a)})};w.setUserIdFromLocation=function(a,b){B(b,
function(c){c.setUserIdFromLocation(a)})};w.setUserIdFromReferrer=function(a,b){B(b,function(c){c.setUserIdFromReferrer(a)})};w.setVisitorCookieTimeout=function(a,b){B(b,function(c){c.setVisitorCookieTimeout(a)})};w.trackCustomEvent=function(a,b,c){B(c,function(e){e=e.core;var g=e.track,f={name:a.name,data:a.data},l=void 0;void 0===l&&(l={});var m={};for(q in f)if(l[q]||null!==f[q]&&"undefined"!==typeof f[q])m[q]=f[q];var q=Vb({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:m}});
g.call(e,q,b.context,b.timestamp)})};w.trackPageView=function(a,b){B(b,function(c){c.trackPageView(a)})};w.trackSelfDescribingEvent=function(a,b){B(b,function(c){c.core.track(Vb({event:a.event}),a.context,a.timestamp)})};w.trackStructEvent=function(a,b){B(b,function(c){c=c.core;var e=c.track,g=a.category,f=a.action,l=a.label,m=a.property,q=a.value,x=Oa();x.add("e","se");x.add("se_ca",g);x.add("se_ac",f);x.add("se_la",l);x.add("se_pr",m);x.add("se_va",null==q?void 0:q.toString());e.call(c,x,a.context,
a.timestamp)})};w.updatePageActivity=function(a){B(a,function(b){b.updatePageActivity()})};w.version="0.2.4";Object.defineProperty(w,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
