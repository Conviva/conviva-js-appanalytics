/*!
 * Browser tracker for Snowplow v0.3.10 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(w,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(w="undefined"!==typeof globalThis?globalThis:w||self,X(w.snowplowBrowserTracking={}))})(this,function(w){function X(a,c,d){if(d||2===arguments.length)for(var e=0,h=c.length,g;e<h;e++)!g&&e in c||(g||(g=Array.prototype.slice.call(c,0,e)),g[e]=c[e]);return a.concat(g||Array.prototype.slice.call(c))}function Tc(a){var c=0,d=0;var e="";var h=[];if(!a)return a;
a+="";do{var g=oa.indexOf(a.charAt(c++));var l=oa.indexOf(a.charAt(c++));e=oa.indexOf(a.charAt(c++));var n=oa.indexOf(a.charAt(c++));var r=g<<18|l<<12|e<<6|n;g=r>>16&255;l=r>>8&255;r&=255;64===e?h[d++]=String.fromCharCode(g):64===n?h[d++]=String.fromCharCode(g,l):h[d++]=String.fromCharCode(g,l,r)}while(c<a.length);e=h.join("");return function(p){return decodeURIComponent(p.split("").map(function(A){return"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Ua(){var a=
{},c=[],d=[],e=[],h,g=function(l,n){null!=n&&""!==n&&(a[l]=n)};return{add:g,addDict:function(l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&g(n,l[n])},addJson:function(l,n,r){r&&hc(r)&&(l={keyIfEncoded:l,keyIfNotEncoded:n,json:r},d.push(l),c.push(l))},addContextEntity:function(l){e.push(l)},getPayload:function(){return a},getJson:function(){return c},withJsonProcessor:function(l){h=l},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function Uc(a){return function(c,
d,e){for(var h=function(p,A,x){p=JSON.stringify(p);if(a){x=c.add;if(p){var t=0,k=0,y=[];if(p){p=unescape(encodeURIComponent(p));do{var J=p.charCodeAt(t++);var T=p.charCodeAt(t++);var G=p.charCodeAt(t++);var H=J<<16|T<<8|G;J=H>>18&63;T=H>>12&63;G=H>>6&63;H&=63;y[k++]=oa.charAt(J)+oa.charAt(T)+oa.charAt(G)+oa.charAt(H)}while(t<p.length);t=y.join("");p=p.length%3;p=(p?t.slice(0,p-3):t)+"===".slice(p||3)}p=p.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}x.call(c,A,p)}else c.add(x,p)},g=function(p,
A){if(!p){var x=c.getPayload();if(a?x.cx:x.co){p=JSON;var t=p.parse;if(a){if(x=x.cx){switch(4-x.length%4){case 2:x+="==";break;case 3:x+="="}x=x.replace(/-/g,"+").replace(/_/g,"/");x=Tc(x)}}else x=x.co;p=t.call(p,x)}else p=void 0}p?p.data=p.data.concat(A.data):p=A;return p},l=void 0,n=0;n<d.length;n++){var r=d[n];"cx"===r.keyIfEncoded?l=g(l,r.json):h(r.json,r.keyIfEncoded,r.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},l=g(l,d),e.length=0);l&&h(l,"cx","co")}}function hc(a){if(!ic(a))return!1;for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))return!0;return!1}function ic(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function Vc(){var a=[],c=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return c},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var l=d[g];jc(l)?e.push(l):Ga(l)&&h.push(l)}a=
a.concat(h);c=c.concat(e)},clearGlobalContexts:function(){c=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){jc(g)?c=c.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}):Ga(g)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==typeof g)){e=
g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var l=nb(a,d,g,e);h.push.apply(h,l);d=Wc(c,d,g,e);h.push.apply(h,d);return h}}}function Xc(a){return{addPluginContexts:function(c){var d=c?X([],c,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){ca.error("Error adding plugin contexts",h)}});return d}}}function Yc(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var c=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])c=!0;else if(c)return!1;
return!0}return 2==a.length?!0:!1}function kc(a){return(a=a.split("."))&&1<a.length?Yc(a):!1}function lc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&kc(a[1]))return a.slice(1,6)}function ob(a){if(a=lc(a)){var c=a[0];return 5===a.length&&kc(c)}return!1}function Zc(a){return Array.isArray(a)&&a.every(function(c){return"string"===typeof c})}function mc(a){return Zc(a)?a.every(function(c){return ob(c)}):
"string"===typeof a?ob(a):!1}function La(a){return hc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function $c(a){var c=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(mc(a.accept))c+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(mc(a.reject))c+=1;else return!1;return 0<c&&2>=c}return!1}function Va(a){return"function"===typeof a&&1>=a.length}function Ga(a){return Va(a)||La(a)}
function nc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Va(a[0])&&a[1].every(Ga):Va(a[0])&&Ga(a[1]):!1}function oc(a){return Array.isArray(a)&&2===a.length?$c(a[0])?Array.isArray(a[1])?a[1].every(Ga):Ga(a[1]):!1:!1}function jc(a){return nc(a)||oc(a)}function ad(a,c){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return Wa(g,c)})&&e++:"string"===typeof h&&Wa(h,c)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return Wa(g,c)})&&d++:"string"===typeof h&&
Wa(h,c)&&d++;return 0<e&&0===d?!0:!1}function Wa(a,c){if(!ob(a))return!1;a=lc(a);c=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(c);c=null!==c?c.slice(1,6):void 0;if(a&&c){if(!bd(a[0],c[0]))return!1;for(var d=1;5>d;d++)if(!pc(a[d],c[d]))return!1;return!0}return!1}function bd(a,c){c=c.split(".");a=a.split(".");if(c&&a){if(c.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!pc(c[d],a[d]))return!1;return!0}return!1}function pc(a,
c){return a&&c&&"*"===a||a===c}function qc(a){return Array.isArray(a)?a:[a]}function nb(a,c,d,e){var h;a=qc(a).map(function(g){a:if(La(g))g=[g];else{if(Va(g)){b:{var l=void 0;try{var n={event:c.getPayload(),eventType:d,eventSchema:e};l=g(n);if(Array.isArray(l)&&l.every(La)||La(l)){var r=l;break b}r=void 0;break b}catch(p){}r=void 0}if(La(r)){g=[r];break a}else if(Array.isArray(r)){g=r;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&
g.filter(Boolean)}))}function Wc(a,c,d,e){var h;a=qc(a).map(function(g){a:{if(nc(g)){var l=g[0],n=!1;try{var r={event:c.getPayload(),eventType:d,eventSchema:e};n=l(r)}catch(p){n=!1}if(!0===n){g=nb(g[1],c,d,e);break a}}else if(oc(g)&&ad(g[0],e)){g=nb(g[1],c,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function cd(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function dd(a){void 0===a&&(a={});var c=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];c=function(g,l,n){function r(k,y){k=A.getApplicableContexts(k);var J=[];y&&y.length&&J.push.apply(J,y);k&&k.length&&J.push.apply(J,k);return J}var p=Xc(l),A=Vc(),x=g,t={};return{track:function(k,y,J){k.withJsonProcessor(Uc(x));k.add("eid",pa.v4());k.addDict(t);J=cd(J);k.add(J.type,J.value.toString());y=r(k,p.addPluginContexts(y));
y=y&&y.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:y}:void 0;void 0!==y&&k.addJson("cx","co",y);l.forEach(function(G){try{G.beforeTrack&&G.beforeTrack(k)}catch(H){ca.error("Plugin beforeTrack",H)}});"function"===typeof n&&n(k);var T=k.build();l.forEach(function(G){try{G.afterTrack&&G.afterTrack(T)}catch(H){ca.error("Plugin afterTrack",H)}});return T},addPayloadPair:function(k,y){t[k]=y},configuration:a,getConfig:function(){return a},setConfig:function(k){k&&
("undefined"!==typeof k.base64&&(x=a.base64=k.base64),"undefined"!==typeof k.linkClickTracking&&(a.linkClickTracking=k.linkClickTracking),"undefined"!==typeof k.buttonClickTracking&&(a.buttonClickTracking=k.buttonClickTracking),"undefined"!==typeof k.customEvent&&(a.customEvent=k.customEvent),"undefined"!==typeof k.exceptionAutotracking&&(a.exceptionAutotracking=k.exceptionAutotracking),"undefined"!==typeof k.enablePeriodicHeartbeat&&(a.enablePeriodicHeartbeat=k.enablePeriodicHeartbeat),"undefined"!==
typeof k.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=k.periodicHeartbeatInterval),"undefined"!==typeof k.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=k.customEventTrackingConfiguration),"undefined"!==typeof k.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=k.convivaVideoEventTrackingConfiguration),"undefined"!==typeof k.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=k.ajaxTrackingConfiguration))},getBase64Encoding:function(){return x},
setBase64Encoding:function(k){x=k},addPayloadDict:function(k){for(var y in k)Object.prototype.hasOwnProperty.call(k,y)&&(t[y]=k[y])},resetPayloadPairs:function(k){t=ic(k)?k:{}},setTrackerVersion:function(k){t.tv=k},setTrackerNamespace:function(k){t.tna=k},setAppId:function(k){t.aid=k},setPlatform:function(k){t.p=k},setUserId:function(k){t.uid=k},setScreenResolution:function(k,y){t.res=k+"x"+y},setViewport:function(k,y){t.vp=k+"x"+y},setColorDepth:function(k){t.cd=k},setTimezone:function(k){t.tz=k},
setLang:function(k){t.lang=k},setIpAddress:function(k){t.ip=k},setUseragent:function(k){t.ua=k},addGlobalContexts:function(k){A.addGlobalContexts(k)},clearGlobalContexts:function(){A.clearGlobalContexts()},removeGlobalContexts:function(k){A.removeGlobalContexts(k)}}}(null!==c&&void 0!==c?c:!0,e,a.callback);var h=fa(fa({},c),{addPlugin:function(g){var l,n;g=g.plugin;e.push(g);null===(l=g.logger)||void 0===l?void 0:l.call(g,ca);null===(n=g.activateCorePlugin)||void 0===n?void 0:n.call(g,h)}});null===
e||void 0===e?void 0:e.forEach(function(g){var l,n;null===(l=g.logger)||void 0===l?void 0:l.call(g,ca);null===(n=g.activateCorePlugin)||void 0===n?void 0:n.call(g,h)});return h}function Xa(a){var c=a.event;a=c.schema;var d=c.data;c=Ua();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:d}};c.add("e","ue");c.addJson("ue_px","ue_pr",a);return c}function ed(a){var c=a.pageUrl,d=a.pageTitle;a=a.referrer;var e=Ua();e.add("e","pv");e.add("url",c);e.add("page",
d);e.add("refr",a);return e}function pb(a){return Xa({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:qb({name:a.name,data:a.data})}})}function rb(a){return Xa({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-1",data:qb({targetUrl:a.targetUrl,webResourceTiming:a.webResourceTiming})}})}function sb(a){return Xa({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:qb(a)}})}function qb(a,c){void 0===c&&(c={});var d={},e;for(e in a)if(c[e]||null!==
a[e]&&"undefined"!==typeof a[e])d[e]=a[e];return d}function fd(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var c=window.localStorage;c.setItem("modernizr","modernizr");c.removeItem("modernizr");return!0}catch(d){return!1}}function rc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function sc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var c=document.getElementsByTagName("title");c&&null!=c[0]&&(a=c[0].text)}return a}
function tb(a){var c=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return c?c[1]:a}function tc(a){var c=a.length;"."===a.charAt(--c)&&(a=a.slice(0,c));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function ub(a){var c=window,d=Ma("referrer",c.location.href)||Ma("referer",c.location.href);if(d)return d;if(a)return a;try{if(c.top)return c.top.document.referrer;if(c.parent)return c.parent.document.referrer}catch(e){}return document.referrer}function qa(a,c,d,e){if(a.addEventListener)return a.addEventListener(c,
d,e),!0;if(a.attachEvent)return a.attachEvent("on"+c,d);a["on"+c]=d}function Ma(a,c){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(c))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function Ya(a,c,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,c);return!0}catch(g){return!1}}function uc(a){try{var c=window.localStorage;c.removeItem(a);c.removeItem(a+".expires");return!0}catch(d){return!1}}function gd(a,
c){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),h="_test_value_"+(new Date).getTime(),g=d.split("."),l=g.length-1;0<=l;){var n=g.slice(l,g.length).join(".");ha(e,h,0,"/",n,a,c);if(ha(e)===h){ha(e,"",-1,"/",n,a,c);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)ha(d[e],"",-1,"/",n,a,c);return n}--l}return d}function ha(a,c,d,e,h,g,l){return 1<arguments.length?document.cookie=
a+"="+encodeURIComponent(null!==c&&void 0!==c?c:"")+(d?"; Expires="+(new Date(+new Date+1E3*d)).toUTCString():"")+(e?"; Path="+e:"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(l?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function hd(a,c,d,e,h,g,l,n,r,p,A,x,t,k,y,J){function T(q){var B=Object.keys(q).map(function(z){return[z,q[z]]}).reduce(function(z,v){z[v[0]]=v[1].toString();return z},{});return{evt:B,bytes:G(JSON.stringify(B))}}function G(q){for(var B=
0,z=0;z<q.length;z++){var v=q.charCodeAt(z);127>=v?B+=1:2047>=v?B+=2:55296<=v&&57343>=v?(B+=4,z++):B=65535>v?B+3:B+4}return B}function H(q){for(void 0===q&&(q=!1);E.length&&"string"!==typeof E[0]&&"object"!==typeof E[0];)E.shift();if(1>E.length)U=!1;else{if(!V||"string"!==typeof V.valueOf())throw"No collector configured";U=!0;if(xa){var B=function(N){for(var da=0,Ha=0;da<N.length&&!(Ha+=N[da].bytes,Ha>=l);)da+=1;return da},z=void 0;if(ya(E)){z=V;var v=F(z,!0,q);var K=B(E)}else z=Na(E[0]),v=F(z,!1,
q),K=1;var Q=setTimeout(function(){v.abort();U=!1},A),ea=function(N){for(var da=0;da<N;da++)E.shift();d&&Ya(za,JSON.stringify(E.slice(0,p)))};v.onreadystatechange=function(){if(4===v.readyState&&200<=v.status)if(clearTimeout(Q),300>v.status)ea(K),H();else{var N=v.status;N=200<=N&&300>N?!1:y.includes(N)?!0:!J.includes(N);N||(ca.error("Status ".concat(v.status,", will not retry.")),ea(K));U=!1}};if(ya(E)){if(B=E.slice(0,K),0<B.length){q=!1;B=B.map(function(N){return N.evt});if(Za){var $a=new Blob([Y(ia(B))],
{type:"application/json"});try{q=navigator.sendBeacon(z,$a)}catch(N){q=!1}}!0===q?(ea(K),H()):v.send(Y(ia(B)))}}else v.send()}else if(x||ya(E))U=!1;else{z=new Image(1,1);var ja=!0;z.onload=function(){ja&&(ja=!1,E.shift(),d&&Ya(za,JSON.stringify(E.slice(0,p))),H())};z.onerror=function(){ja&&(U=ja=!1)};z.src=Na(E[0]);setTimeout(function(){ja&&U&&(ja=!1,H())},A)}}}function F(q,B,z){var v=new XMLHttpRequest;B?(v.open("POST",q,!z),v.setRequestHeader("Content-Type","application/json; charset=UTF-8")):v.open("GET",
q,!z);v.withCredentials=k;x&&v.setRequestHeader("SP-Anonymous","*");for(var K in t)Object.prototype.hasOwnProperty.call(t,K)&&v.setRequestHeader(K,t[K]);return v}function Y(q){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:q})}function ia(q){for(var B=(new Date).getTime().toString(),z=0;z<q.length;z++)q[z].stm=B;return q}function Na(q){return r?V+q.replace("?","?stm="+(new Date).getTime()+"&"):V+q}function ab(q){function B(v,K,Q){return(Q=Q.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&
Q.length?parseInt(Q[0])<=v||parseInt(Q[0])===v&&parseInt(Q[1])<=K:!1}function z(v){return v.match("Version/.* Safari/")&&!v.match("Chrom(e|ium)")}return function(v,K){return(K=K.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&K.length?parseInt(K[0])<=v:!1}(13,q)||B(10,15,q)&&z(q)}var U=!1,V,E=[];e="string"===typeof e?e.toLowerCase():e;var Aa=!0===e||"beacon"===e||"true"===e,Za=!(!(Aa&&window.navigator&&window.navigator.sendBeacon)||ab(window.navigator.userAgent))&&Aa,xa=!!(window.XMLHttpRequest&&
"withCredentials"in new XMLHttpRequest),Ba="get"!==e&&xa&&("post"===e||Aa),ra=Ba?h:"/i",za="snowplowOutQueue_".concat(a,"_").concat(Ba?"post2":"get");Aa&&(t={});g=d&&fd()&&Ba&&g||1;if(d)try{var Oa=window.localStorage.getItem(za);E=Oa?JSON.parse(Oa):[]}catch(q){}Array.isArray(E)||(E=[]);c.outQueues.push(E);xa&&1<g&&c.bufferFlushers.push(function(q){U||H(q)});var ya=function(q){return"object"===typeof q[0]};return{enqueueRequest:function(q,B){V=B+ra;if(Ba){q=T(q);if(q.bytes>=l){ca.warn("Event ("+q.bytes+
"B) too big, max is "+l);B=q;F(V,!0,!1).send(Y(ia([B.evt])));return}E.push(q)}else{var z="?";var v={co:!0,cx:!0},K=!0,Q;for(Q in q)q.hasOwnProperty(Q)&&!v.hasOwnProperty(Q)&&(K?K=!1:z+="&",z+=encodeURIComponent(Q)+"="+encodeURIComponent(q[Q]));for(var ea in v)q.hasOwnProperty(ea)&&v.hasOwnProperty(ea)&&(z+="&"+ea+"="+encodeURIComponent(q[ea]));if(0<n&&(v=Na(z),v=G(v),v>=n)){ca.warn("Event ("+v+"B) too big, max is "+n);xa&&(q=T(q),F(B+h,!0,!1).send(Y(ia([q.evt]))));return}E.push(z)}B=!1;d&&(B=Ya(za,
JSON.stringify(E.slice(0,p))));U||B&&!(E.length>=g)||H()},executeQueue:function(){U||H()},setUseLocalStorage:function(q){d=q},setAnonymousTracking:function(q){x=q},setCollectorUrl:function(q){V=q+ra},setBufferSize:function(q){g=q}}}function vc(a,c,d){if("translate.googleusercontent.com"===a)""===d&&(d=c),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(c))&&1<(null===a||void 0===a?void 0:a.length)?Ma("u",a[1]):null,c=null!==a&&void 0!==a?a:"",a=tb(c);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===
a)c=document.links[0].href,a=tb(c);return[a,c,d]}function id(a,c,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",c,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=pa.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(l,n){l=parseInt(l);return isNaN(l)?n:l};c=function(l){return l?g(l,void 0):void 0};return[a[0],a[1],g(a[2],h),g(a[3],e),g(a[4],h),
c(a[5]),a[6],a[7],a[8],c(a[9]),g(a[10],-1)]}function Pa(a,c){void 0===c&&(c=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=c;c=pa.v4();a[6]=c;a[10]=-1;a[8]="";a[9]=void 0;return c}function vb(a){a[4]=Math.round((new Date).getTime()/1E3)}function jd(a,c,d,e,h,g){void 0===g&&(g={});var l=[];a=function(r,p,A,x,t,k){function y(){Ca=vc(window.location.hostname,window.location.href,ub());Ca[1]!==sa&&(Qa=ub(sa));wc=tc(Ca[0]);sa=Ca[1]}function J(b){var f=(new Date).getTime();b=b.currentTarget;if(null===
b||void 0===b?0:b.href){f="_sp="+(bb+"."+f);var m=b.href.split("#"),u=m[0].split("?"),C=u.shift();if(u=u.join("?")){for(var I=!0,R=u.split("&"),S=0;S<R.length;S++)if("_sp="===R[S].substr(0,4)){I=!1;R[S]=f;u=R.join("&");break}I&&(u=f+"&"+u)}else u=f;m[0]=C+"?"+u;f=m.join("#");b.href=f}}function T(b){for(var f=0;f<document.links.length;f++){var m=document.links[f];!m.spDecorationEnabled&&b(m)&&(qa(m,"click",J,!0),qa(m,"mousedown",J,!0),m.spDecorationEnabled=!0)}}function G(b){if(xc){var f=/#.*/;b=b.replace(f,
"")}yc&&(f=/[{}]/g,b=b.replace(f,""));return b}function H(b){return(b=/^([a-z]+):/.exec(b))?b[1]:null}function F(b){b=Ia+b+"."+Da;if("localStorage"==M){try{var f=window.localStorage,m=f.getItem(b+".expires");if(null===m||+m>Date.now())var u=f.getItem(b);else f.removeItem(b),f.removeItem(b+".expires"),u=void 0}catch(C){u=void 0}return u}if("cookie"==M||"cookieAndLocalStorage"==M)return ha(b)}function Y(){y();Da=kd((Ra||wc)+(wb||"/")).slice(0,4)}function ia(){xb=(new Date).getTime()}function Na(){var b=
ab(),f=b[0];f<cb?cb=f:f>db&&(db=f);b=b[1];b<eb?eb=b:b>fb&&(fb=b);ia()}function ab(){var b=document.documentElement;return b?[b.scrollLeft||window.pageXOffset,b.scrollTop||window.pageYOffset]:[0,0]}function U(){var b=ab(),f=b[0];db=cb=f;fb=eb=b=b[1]}function V(){Aa(Ia+"ses."+Da,"*",zc)}function E(b){var f=Ia+"id."+Da;b.shift();b=b.join(".");Aa(f,b,Ac)}function Aa(b,f,m){if(!ka||Ea)"localStorage"==M?Ya(b,f,m):("cookie"==M||"cookieAndLocalStorage"==M)&&ha(b,f,m,wb,Ra,gb,hb)}function Za(b){var f=Ia+"id."+
Da,m=Ia+"ses."+Da;uc(f);uc(m);ha(f,"",-1,"/",Ra,gb,hb);ha(m,"",-1,"/",Ra,gb,hb);null!==b&&void 0!==b&&b.preserveSession||(la=pa.v4(),Z=1);null!==b&&void 0!==b&&b.preserveUser||(bb=pa.v4(),Fa=null)}function xa(b){b&&b.stateStorageStrategy&&(k.stateStorageStrategy=b.stateStorageStrategy,M=Bc(k));ka=!!k.anonymousTracking;Ea=Cc(k);yb=Dc(k);ta.setUseLocalStorage("localStorage"==M||"cookieAndLocalStorage"==M);ta.setAnonymousTracking(yb)}function Ba(){try{var b=window.localStorage.getItem("Conviva.sdkConfig"),
f=JSON.parse(b||"{}");zb="{}"===f||"undefined"===typeof f?B():f.clId||B();try{ib=Math.floor(2147483647*Math.random())}catch(u){console.warn(u),ib=-1}b:try{var m=window.localStorage;b={clId:zb,iid:ib};f=null;try{f=JSON.stringify(b)}catch(u){break b}m.setItem("Conviva.sdkConfig",f)}catch(u){}}catch(u){console.warn(u)}if(!ka||Ea)m="none"!=M&&!!F("ses"),b=ra(),b[1]?f=b[1]:(f=ka?"":pa.v4(),b[1]=f),bb=f,la=m?b[6]:Pa(b),Z=b[3],"none"!=M&&(V(),vb(b),E(b))}function ra(){if("none"==M)return["1","",0,0,0,void 0,
"","","",void 0,0];var b=F("id")||void 0;return id(b,bb,la,Z)}function za(b){return 0===b.indexOf("http")?b:("https:"===document.location.protocol?"https":"http")+"://"+b}function Oa(){Ec&&null!=t.pageViewId||(t.pageViewId=pa.v4())}function ya(){null==t.pageViewId&&(t.pageViewId=pa.v4());return t.pageViewId}function q(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:ya()}}]}}}function B(){try{return Math.floor(2147483647*Math.random()).toString()+
"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(b){console.warn(b)}}function z(b){try{var f=Object.keys(b);ld(JSON.stringify(b))?f.forEach(function(m){""!==m&&Object.defineProperty(Ab,m,{value:""+b[m],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid format used for setCustomTags API")}catch(m){console.warn("Conviva AppTracker:: Failed to set Custom tags. Check format of data set.")}}
function v(b){try{b.forEach(function(f){delete Ab[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function K(b){var f=b.title,m=b.context,u=b.timestamp;b=b.contextCallback;y();Fc&&Oa();Fc=!0;Ja=document.title;Sa=f;f=sc(Sa||Ja);aa.track(ed({pageUrl:G(Ka||sa),pageTitle:f,referrer:G(jb||Qa)}),(m||[]).concat(b?b():[]),u);u=new Date;f=!1;if(ba.enabled&&!ba.installed){f=ba.installed=!0;var C={update:function(){if("undefined"!==typeof window&&
"function"===typeof window.addEventListener){var R=!1,S=Object.defineProperty({},"passive",{get:function(){R=!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",W,S);window.removeEventListener("testPassiveEventSupport",W,S);C.hasSupport=R}}};C.update();var I="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(C,"hasSupport")?qa(document,I,ia,{passive:!0}):qa(document,
I,ia);U();I=function(R,S){void 0===S&&(S=ia);return function(W){return qa(document,W,S)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(I(document));["resize","focus","blur"].forEach(I(window));I(window,Na)("scroll")}if(ba.enabled&&(md||f))for(u in xb=u.getTime(),u=void 0,ba.configurations)if(f=ba.configurations[u])window.clearInterval(f.activityInterval),Q(f,m,b)}function Q(b,f,m){var u=function(R,S){y();var W=n.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&
(W=1E3*W.periodicHeartbeatInterval,W!=b.configHeartBeatTimer&&(window.clearInterval(b.activityInterval),b.activityInterval=window.setInterval(I,W))):window.clearInterval(b.activityInterval);R({context:S,pageViewId:ya(),minXOffset:cb,minYOffset:eb,maxXOffset:db,maxYOffset:fb});U()},C=new Date;window.setTimeout(function(){u(b.callback,(f||[]).concat(m?m():[]))},2E3);var I=function(){var R=new Date;if(C.getTime()+b.configHeartBeatTimer>R.getTime()||xb+b.configHeartBeatTimer>R.getTime())C=R,u(b.callback,
(f||[]).concat(m?m():[]))};b.activityInterval=window.setInterval(I,b.configHeartBeatTimer)}function ea(b){var f=b.minimumVisitLength,m=b.heartbeatDelay;b=b.callback;if(rc(f)&&rc(m))return{configMinimumVisitLength:1E3*f,configHeartBeatTimer:1E3*m,callback:b};ca.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function $a(b){var f=b.context,m=b.minXOffset,u=b.minYOffset,C=b.maxXOffset,I=b.maxYOffset;b=document.title;b!==Ja&&(Ja=b,Sa=void 0);b=aa;var R=b.track,S=G(Ka||
sa),W=sc(Sa||Ja),nd=G(jb||Qa);m=Math.round(m);C=Math.round(C);u=Math.round(u);I=Math.round(I);var ma=Ua();ma.add("e","pp");ma.add("url",S);ma.add("page",W);ma.add("refr",nd);m&&!isNaN(Number(m))&&ma.add("pp_mix",m.toString());C&&!isNaN(Number(C))&&ma.add("pp_max",C.toString());u&&!isNaN(Number(u))&&ma.add("pp_miy",u.toString());I&&!isNaN(Number(I))&&ma.add("pp_may",I.toString());R.call(b,ma,f)}var ja,N,da,Ha,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,L={base64:!0,linkClickTracking:!0,
buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{}};if(window.localStorage){var Gc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(L);var Yb=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else Yb="https://appgw.conviva.com",
Gc=JSON.stringify(L);x=k.gatewayUrl?k.gatewayUrl:Yb?Yb:"https://appgw.conviva.com";p||(p="CAT");var O=JSON.parse(Gc);"undefined"!=typeof O.base64&&(L.base64=O.base64);"undefined"!=typeof O.linkClickTracking&&(L.linkClickTracking=O.linkClickTracking);"undefined"!=typeof O.buttonClickTracking&&(L.buttonClickTracking=O.buttonClickTracking);"undefined"!=typeof O.exceptionAutotracking&&(L.exceptionAutotracking=O.exceptionAutotracking);"undefined"!=typeof O.enablePeriodicHeartbeat&&(L.enablePeriodicHeartbeat=
O.enablePeriodicHeartbeat);"undefined"!=typeof O.periodicHeartbeatInterval&&(L.periodicHeartbeatInterval=O.periodicHeartbeatInterval);"undefined"!=typeof O.customEventTrackingConfiguration&&(L.customEventTrackingConfiguration=O.customEventTrackingConfiguration);"undefined"!=typeof O.convivaVideoEventTrackingConfiguration&&(L.convivaVideoEventTrackingConfiguration=O.convivaVideoEventTrackingConfiguration);"undefined"!=typeof O.ajaxTrackingConfiguration&&(L.ajaxTrackingConfiguration=O.ajaxTrackingConfiguration);
if(window.XMLHttpRequest){var ua=new XMLHttpRequest;ua.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var b=JSON.parse(ua.response),f={base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{}};f.base64=b.configurationBundle[0].trackerConfiguration.base64Encoding;f.linkClickTracking=
b.configurationBundle[0].trackerConfiguration.linkClickTracking;f.buttonClickTracking=b.configurationBundle[0].trackerConfiguration.buttonClickTracking;f.customEvent=b.configurationBundle[0].trackerConfiguration.customEvent;f.exceptionAutotracking=b.configurationBundle[0].trackerConfiguration.exceptionAutotracking;f.enablePeriodicHeartbeat=b.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;f.periodicHeartbeatInterval=b.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;
f.customEventTrackingConfiguration=b.configurationBundle[0].customEventTrackingConfiguration;f.convivaVideoEventTrackingConfiguration=b.configurationBundle[0].convivaVideoEventTrackingConfiguration;f.ajaxTrackingConfiguration=b.configurationBundle[0].ajaxTrackingConfiguration;n.setCollectorUrl(b.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(f)),localStorage.setItem("ConvivaEndpoint",b.configurationBundle[0].networkConfiguration.endpoint));
n.core.setConfig(f)}else if(va._convivaVersion&&va._convivaCustomerKey)try{delete va._convivaVersion,ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+va._convivaCustomerKey+"/remote_config.json",!0),ua.send()}catch(m){delete va._convivaVersion}else if(va._convivaCustomerKey)try{delete va._convivaCustomerKey,ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0),ua.send()}catch(m){delete va._convivaCustomerKey}};var kb=function(b){try{ua.open("GET",b,!0),ua.send()}catch(f){}};
if(k.trackerConfigUrl)kb(k.trackerConfigUrl),window.setInterval(kb,36E5,k.trackerConfigUrl);else{var va={_platform:"js",_convivaVersion:A,_convivaCustomerKey:k.convivaCustomerKey},Hc="https://drt1fhpy4haqm.cloudfront.net/js/"+k.convivaCustomerKey+"/"+A+"/remote_config.json";kb(Hc);window.setInterval(kb,36E5,Hc)}}k.eventMethod=null!==(ja=k.eventMethod)&&void 0!==ja?ja:"post";var Bc=function(b){var f;return null!==(f=b.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},Cc=function(b){var f,
m;return"boolean"===typeof b.anonymousTracking?!1:null!==(m=!0===(null===(f=b.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==m?m:!1},Dc=function(b){var f,m;return"boolean"===typeof b.anonymousTracking?!1:null!==(m=!0===(null===(f=b.anonymousTracking)||void 0===f?void 0:f.withServerAnonymisation))&&void 0!==m?m:!1};l.push(function(){return{beforeTrack:function(b){var f=F("ses"),m=ra();Zb=$b?!!ha($b):!1;if(Ic||Zb)Za();else{"0"===m[0]?(la=f||"none"==M?m[6]:Pa(m),Z=m[3]):(new Date).getTime()-
ac>1E3*zc&&(Z++,la=Pa(m,Z));vb(m);-1===m[10]&&(f=b.build(),m[8]=f.eid,f=f.dtm||f.ttm,m[9]=f?parseInt(f):void 0);m[10]+=1;f=b.add;if("innerWidth"in window){var u=window.innerWidth;var C=window.innerHeight}else C=document.documentElement||document.body,u=C.clientWidth,C=C.clientHeight;f.call(b,"vp",0<=u&&0<=C?u+"x"+C:null);f=b.add;C=document.documentElement;var I=document.body;u=Math.max(C.clientWidth,C.offsetWidth,C.scrollWidth);C=Math.max(C.clientHeight,C.offsetHeight,C.scrollHeight,I?Math.max(I.offsetHeight,
I.scrollHeight):0);u=isNaN(u)||isNaN(C)?"":u+"x"+C;f.call(b,"ds",u);b.add("vid",Ea?Z:ka?null:Z);b.add("sid",Ea?la:ka?null:la);b.add("duid",ka?null:m[1]);b.add("uid",ka?null:Fa);y();b.add("refr",G(jb||Qa));document&&b.add("page",document.title);b.add("url",G(Ka||sa));!od||Ea||ka||(f=m[9],f={userId:m[1],sessionId:m[6],eventIndex:m[10],sessionIndex:m[3],previousSessionId:m[7]||null,storageMechanism:"localStorage"==M?"LOCAL_STORAGE":"COOKIE_1",firstEventId:m[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():
null},b.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:f}));"none"!=M&&(E(m),V());ac=(new Date).getTime()}}}}());(null!==(da=null===(N=null===k||void 0===k?void 0:k.contexts)||void 0===N?void 0:N.webPage)&&void 0!==da?da:1)&&l.push(q());l.push(function(){return{contexts:function(){var b={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-1",data:{clid:zb,iid:ib.toString(),ck:pd}},f={eventIndex:qd++};null!=bc&&(f.previousEventTimestamp=bc);bc=(new Date).toISOString();
return[b,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());l.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:Ab}}]}}}());l.push.apply(l,null!==(Ha=k.plugins)&&void 0!==Ha?Ha:[]);var aa=dd({base64:L.base64,corePlugins:l,callback:function(b){Ic||Zb||ta.enqueueRequest(b.build(),cc)},linkClickTracking:L.linkClickTracking,buttonClickTracking:L.buttonClickTracking,customEvent:!0,exceptionAutotracking:L.exceptionAutotracking,
enablePeriodicHeartbeat:L.enablePeriodicHeartbeat,periodicHeartbeatInterval:L.periodicHeartbeatInterval,customEventTrackingConfiguration:L.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:L.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:L.ajaxTrackingConfiguration}),rd=navigator.userLanguage||navigator.language,sd=document.characterSet||document.charset,Ca=vc(window.location.hostname,window.location.href,ub()),wc=tc(Ca[0]),sa=Ca[1],Qa=Ca[2],jb,td=null!==(Bb=
k.platform)&&void 0!==Bb?Bb:"web",cc=za(x),ud=null!==(Cb=k.postPath)&&void 0!==Cb?Cb:"/"+k.convivaCustomerKey+"/ctp",vd=null!==(Db=k.appId)&&void 0!==Db?Db:"",pd=null!==(Eb=k.convivaCustomerKey)&&void 0!==Eb?Eb:"",Ka,Ab={},Ja=document.title,Sa,md=null!==(Fb=k.resetActivityTrackingOnPageView)&&void 0!==Fb?Fb:!0,xc,yc,Ia=null!==(Gb=k.cookieName)&&void 0!==Gb?Gb:"_sp_",Ra=null!==(Hb=k.cookieDomain)&&void 0!==Hb?Hb:void 0,wb="/",gb=null!==(Ib=k.cookieSameSite)&&void 0!==Ib?Ib:"None",hb=null!==(Jb=k.cookieSecure)&&
void 0!==Jb?Jb:!0,Jc=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Ic="undefined"!==typeof k.respectDoNotTrack?k.respectDoNotTrack&&("yes"===Jc||"1"===Jc):!1,$b,Ac=null!==(Kb=k.cookieLifetime)&&void 0!==Kb?Kb:63072E3,zc=null!==(Lb=k.sessionCookieTimeout)&&void 0!==Lb?Lb:1800,Ea=Cc(k),yb=Dc(k),ka=!!k.anonymousTracking,M=Bc(k),zb,ib,qd=0,xb,ac=(new Date).getTime(),cb,db,eb,fb,Da,bb,la,Z=1,Fa,ta=hd(r,t,"localStorage"==M||"cookieAndLocalStorage"==M,k.eventMethod,ud,null!==(Mb=k.bufferSize)&&
void 0!==Mb?Mb:1,null!==(Nb=k.maxPostBytes)&&void 0!==Nb?Nb:4E4,null!==(Ob=k.maxGetBytes)&&void 0!==Ob?Ob:0,null!==(Pb=k.useStm)&&void 0!==Pb?Pb:!0,null!==(Qb=k.maxLocalStorageQueueSize)&&void 0!==Qb?Qb:1E3,null!==(Rb=k.connectionTimeout)&&void 0!==Rb?Rb:5E3,yb,null!==(Sb=k.customHeaders)&&void 0!==Sb?Sb:{},null!==(Tb=k.withCredentials)&&void 0!==Tb?Tb:!0,null!==(Ub=k.retryStatusCodes)&&void 0!==Ub?Ub:[],(null!==(Vb=k.dontRetryStatusCodes)&&void 0!==Vb?Vb:[]).concat([400,401,403,410,422])),Ec=!1,
bc,Fc=!1,ba={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:$a}}},od=null!==(Xb=null===(Wb=k.contexts)||void 0===Wb?void 0:Wb.session)&&void 0!==Xb?Xb:!1,Zb;k.hasOwnProperty("discoverRootDomain")&&k.discoverRootDomain&&(Ra=gd(gb,hb));aa.setTrackerVersion(A);aa.setTrackerNamespace(p);aa.setAppId(vd);aa.setPlatform(td);aa.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0");aa.addPayloadPair("cs",sd);aa.addPayloadPair("lang",rd);
aa.addPayloadPair("res",screen.width+"x"+screen.height);aa.addPayloadPair("cd",screen.colorDepth);Y();Ba();k.crossDomainLinker&&T(k.crossDomainLinker);var ld=function(b){try{return"object"===typeof JSON.parse(b)}catch(f){return!1}};return fa(fa({},{getDomainSessionIndex:function(){return Z},getPageViewId:function(){return ya()},newSession:function(){var b=ra();"0"===b[0]?(la="none"!=M?Pa(b):b[6],Z=b[3],V()):(Z++,la=Pa(b,Z));vb(b);"none"!=M&&(E(b),V());ac=(new Date).getTime()},getCookieName:function(b){return Ia+
b+"."+Da},getUserId:function(){return Fa},getDomainUserId:function(){return ra()[1]},getDomainUserInfo:function(){return ra()},setReferrerUrl:function(b){jb=b},setCustomUrl:function(b){y();var f=sa,m;H(b)?Ka=b:"/"===b.slice(0,1)?Ka=H(f)+"://"+tb(f)+b:(f=G(f),0<=(m=f.indexOf("?"))&&(f=f.slice(0,m)),(m=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,m+1)),Ka=f+b)},setDocumentTitle:function(b){Ja=document.title;Sa=b},discardHashTag:function(b){xc=b},discardBrace:function(b){yc=b},setCookiePath:function(b){wb=
b;Y()},setVisitorCookieTimeout:function(b){Ac=b},crossDomainLinker:function(b){T(b)},enableActivityTracking:function(b){ba.configurations.pagePing||(ba.enabled=!0,ba.configurations.pagePing=ea(fa(fa({},b),{callback:$a})))},enableActivityTrackingCallback:function(b){ba.configurations.callback||(ba.enabled=!0,ba.configurations.callback=ea(b))},updatePageActivity:function(){ia()},setOptOutCookie:function(b){$b=b},setUserId:function(b){Fa=b},setUserIdFromLocation:function(b){y();Fa=Ma(b,sa)},setUserIdFromReferrer:function(b){y();
Fa=Ma(b,Qa)},setUserIdFromCookie:function(b){Fa=ha(b)},setCollectorUrl:function(b){cc=za(b);ta.setCollectorUrl(cc)},setBufferSize:function(b){ta.setBufferSize(b)},flushBuffer:function(b){void 0===b&&(b={});ta.executeQueue();b.newBufferSize&&ta.setBufferSize(b.newBufferSize)},trackPageView:function(b){void 0===b&&(b={});K(b)},trackVideoEvent:function(b){void 0===b&&(b={});try{var f=this.core.getConfig();""!=b.name&&void 0!=b.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");
if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var m=f.convivaVideoEventTrackingConfiguration.blocklist;-1==m.indexOf("*")&&-1==m.indexOf(""+b.name)&&this.core.track(sb({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],
err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp)}else this.core.track(sb({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp);else this.core.track(sb({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,
tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp)}catch(u){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",u)}},trackAjaxEvent:function(b){void 0===b&&(b={});try{if("xmlhttprequest"===b.initiatorType){var f=this.core.getConfig();if(""==b.name||void 0==b.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(void 0!=f.ajaxTrackingConfiguration)if(void 0!=
f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var m=f.ajaxTrackingConfiguration.blocklist;if(-1==m.indexOf("*")){f=!1;for(var u=0;u<m.length;u++)-1!==b.name.indexOf(m[u])&&(f=!0);f||this.core.track(rb({targetUrl:b.name,webResourceTiming:b}),b.context,b.timestamp)}}else this.core.track(rb({targetUrl:b.name,webResourceTiming:b}),b.context,b.timestamp);else this.core.track(rb({targetUrl:b.name,webResourceTiming:b}),b.context,b.timestamp)}}catch(C){console.warn("Conviva App Tracker:: Ajax request could not be tracked due an exception!!",
C)}},setCustomTags:function(b){void 0===b&&(b={});z(b)},unsetCustomTags:function(b){void 0===b&&(b={});v(b)},preservePageViewId:function(){Ec=!0},disableAnonymousTracking:function(b){k.anonymousTracking=!1;xa(b);Ba();ta.executeQueue()},enableAnonymousTracking:function(b){var f;k.anonymousTracking=null!==(f=b&&(null===b||void 0===b?void 0:b.options))&&void 0!==f?f:!0;xa(b);Ea||Oa()},clearUserData:Za}),{id:r,namespace:p,core:aa,sharedState:t})}(a,c,d,e,h,g);var n=fa(fa({},a),{addPlugin:function(r){var p,
A;n.core.addPlugin(r);null===(A=(p=r.plugin).activateBrowserPlugin)||void 0===A?void 0:A.call(p,n)}});l.forEach(function(r){var p;null===(p=r.activateBrowserPlugin)||void 0===p?void 0:p.call(r,n)});return n}function D(a,c){try{var d=null!==a&&void 0!==a?a:Object.keys(Ta);a=Ta;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):ca.warn(g+" not configured")}e.forEach(c)}catch(l){ca.error("Function failed",l)}}function Kc(a,c,d,e,h,g){return Ta.hasOwnProperty(a)?null:(Ta[a]=
jd(a,c,d,e,h,g),Ta[a])}function wd(){function a(){"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}function c(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function n(){h.removeEventListener("DOMContentLoaded",n,!1);c()}):h.attachEvent&&h.attachEvent("onreadystatechange",function r(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",
r),c())});qa(g,"load",c,!1)}var e=new xd,h=document,g=window;h.visibilityState&&qa(h,"visibilitychange",a,!1);qa(g,"beforeunload",function(){e.bufferFlushers.forEach(function(l){l(!1)})},!1);"loading"===document.readyState?d():c();return e}var fa=function(){fa=Object.assign||function(a){for(var c,d=1,e=arguments.length;d<e;d++){c=arguments[d];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h])}return a};return fa.apply(this,arguments)},wa={},Lc="undefined"!=typeof crypto&&crypto.getRandomValues&&
crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Lc){var Mc=new Uint8Array(16);wa=function(){Lc(Mc);return Mc}}else{var Nc=Array(16);wa=function(){for(var a=0,c;16>a;a++)0===(a&3)&&(c=4294967296*Math.random()),Nc[a]=c>>>((a&3)<<3)&255;return Nc}}for(var P=[],lb=0;256>lb;++lb)P[lb]=(lb+256).toString(16).substr(1);var Oc=function(a,c){c=c||0;return[P[a[c++]],P[a[c++]],P[a[c++]],P[a[c++]],
"-",P[a[c++]],P[a[c++]],"-",P[a[c++]],P[a[c++]],"-",P[a[c++]],P[a[c++]],"-",P[a[c++]],P[a[c++]],P[a[c++]],P[a[c++]],P[a[c++]],P[a[c++]]].join("")},yd=wa,Pc,dc,ec=0,fc=0,zd=wa;wa=function(a,c,d){d=c&&d||0;"string"==typeof a&&(c="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||zd)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(c)for(var e=0;16>e;++e)c[d+e]=a[e];return c||Oc(a)};wa.v1=function(a,c,d){d=c&&d||0;var e=c||[];a=a||{};var h=a.node||Pc,g=void 0!==a.clockseq?a.clockseq:dc;if(null==h||
null==g){var l=yd();null==h&&(h=Pc=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]);null==g&&(g=dc=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var n=void 0!==a.nsecs?a.nsecs:fc+1,r=l-ec+(n-fc)/1E4;0>r&&void 0===a.clockseq&&(g=g+1&16383);(0>r||l>ec)&&void 0===a.nsecs&&(n=0);if(1E4<=n)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");ec=l;fc=n;dc=g;l+=122192928E5;a=(1E4*(l&268435455)+n)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=l/4294967296*
1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>g;++g)e[d+g]=h[g];return c?c:Oc(e)};var pa=wa.v4=wa,oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",na;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(na||(na={}));var ca=function(a){void 0===a&&(a=na.warn);return{setLogLevel:function(c){a=na[c]?c:na.warn},warn:function(c,d){for(var e=[],h=
2;h<arguments.length;h++)e[h-2]=arguments[h];a>=na.warn&&"undefined"!==typeof console&&(h="Snowplow: "+c,d?console.warn.apply(console,X([h+"\n",d],e,!1)):console.warn.apply(console,X([h],e,!1)))},error:function(c,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=na.error&&"undefined"!==typeof console&&(h="Snowplow: "+c+"\n",d?console.error.apply(console,X([h+"\n",d],e,!1)):console.error.apply(console,X([h],e,!1)))},debug:function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];
a>=na.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+c],d,!1))},info:function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=na.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+c],d,!1))}}}(),Qc={},Rc={};(function(){var a={rotl:function(c,d){return c<<d|c>>>32-d},rotr:function(c,d){return c<<32-d|c>>>d},endian:function(c){if(c.constructor==Number)return a.rotl(c,8)&16711935|a.rotl(c,24)&4278255360;for(var d=0;d<c.length;d++)c[d]=
a.endian(c[d]);return c},randomBytes:function(c){for(var d=[];0<c;c--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(c){for(var d=[],e=0,h=0;e<c.length;e++,h+=8)d[h>>>5]|=c[e]<<24-h%32;return d},wordsToBytes:function(c){for(var d=[],e=0;e<32*c.length;e+=8)d.push(c[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(c){for(var d=[],e=0;e<c.length;e++)d.push((c[e]>>>4).toString(16)),d.push((c[e]&15).toString(16));return d.join("")},hexToBytes:function(c){for(var d=[],e=0;e<c.length;e+=
2)d.push(parseInt(c.substr(e,2),16));return d},bytesToBase64:function(c){for(var d=[],e=0;e<c.length;e+=3)for(var h=c[e]<<16|c[e+1]<<8|c[e+2],g=0;4>g;g++)8*e+6*g<=8*c.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(c){c=c.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,h=0;e<c.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(e-
1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(e))>>>6-2*h);return d}};Rc=a})();var gc={utf8:{stringToBytes:function(a){return gc.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(gc.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var c=[],d=0;d<a.length;d++)c.push(a.charCodeAt(d)&255);return c},bytesToString:function(a){for(var c=[],d=0;d<a.length;d++)c.push(String.fromCharCode(a[d]));
return c.join("")}}},Sc=gc;(function(){var a=Rc,c=Sc.utf8,d=Sc.bin,e=function(h,g){var l=a.wordsToBytes,n=h;n.constructor==String?n=c.stringToBytes(n):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||(n=n.toString());h=a.bytesToWords(n);var r=8*n.length;n=[];var p=1732584193,A=-271733879,x=-1732584194,t=271733878,k=-1009589776;h[r>>5]|=128<<24-r%32;h[(r+64>>>9<<4)+15]=r;for(r=0;r<h.length;r+=16){for(var y=p,J=A,
T=x,G=t,H=k,F=0;80>F;F++){if(16>F)n[F]=h[r+F];else{var Y=n[F-3]^n[F-8]^n[F-14]^n[F-16];n[F]=Y<<1|Y>>>31}Y=(p<<5|p>>>27)+k+(n[F]>>>0)+(20>F?(A&x|~A&t)+1518500249:40>F?(A^x^t)+1859775393:60>F?(A&x|A&t|x&t)-1894007588:(A^x^t)-899497514);k=t;t=x;x=A<<30|A>>>2;A=p;p=Y}p+=y;A+=J;x+=T;t+=G;k+=H}l=l.call(a,[p,A,x,t,k]);return g&&g.asBytes?l:g&&g.asString?d.bytesToString(l):a.bytesToHex(l)};e._blocksize=16;e._digestsize=20;Qc=e})();var kd=Qc,Ta={},xd=function(){return function(){this.outQueues=[];this.bufferFlushers=
[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),mb="undefined"!==typeof window?wd():void 0;w.addGlobalContexts=function(a,c){D(c,function(d){d.core.addGlobalContexts(a)})};w.addPlugin=function(a,c){D(c,function(d){d.addPlugin(a)})};w.clearGlobalContexts=function(a){D(a,function(c){c.core.clearGlobalContexts()})};w.clearUserData=function(a,c){D(c,function(d){d.clearUserData(a)})};w.convivaAppTracker=function(a){void 0===a&&(a={});if(mb){var c=Kc("CAT","CAT","js-".concat("0.3.10"),"",mb,a);
document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&c&&c.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){c&&c.trackAjaxEvent(e)})})).observe({type:"resource",buffered:!0});return c}};w.crossDomainLinker=function(a,c){D(c,function(d){d.crossDomainLinker(a)})};w.disableAnonymousTracking=function(a,c){D(c,function(d){d.disableAnonymousTracking(a)})};w.discardBrace=function(a,c){D(c,function(d){d.discardBrace(a)})};
w.discardHashTag=function(a,c){D(c,function(d){d.discardHashTag(a)})};w.enableActivityTracking=function(a,c){D(c,function(d){d.enableActivityTracking(a)})};w.enableActivityTrackingCallback=function(a,c){D(c,function(d){d.enableActivityTrackingCallback(a)})};w.enableAnonymousTracking=function(a,c){D(c,function(d){d.enableAnonymousTracking(a)})};w.flushBuffer=function(a,c){D(c,function(d){d.flushBuffer(a)})};w.newSession=function(a){D(a,function(c){c.newSession()})};w.newTracker=function(a,c,d){void 0===
d&&(d={});if(mb)return Kc(a,a,"js-".concat("0.3.10"),c,mb,d)};w.preservePageViewId=function(a){D(a,function(c){c.preservePageViewId()})};w.removeGlobalContexts=function(a,c){D(c,function(d){d.core.removeGlobalContexts(a)})};w.setBufferSize=function(a,c){D(c,function(d){d.setBufferSize(a)})};w.setCollectorUrl=function(a,c){D(c,function(d){d.setCollectorUrl(a)})};w.setCookiePath=function(a,c){D(c,function(d){d.setCookiePath(a)})};w.setCustomTags=function(a,c){D(c,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
w.setCustomUrl=function(a,c){D(c,function(d){d.setCustomUrl(a)})};w.setDocumentTitle=function(a,c){D(c,function(d){d.setDocumentTitle(a)})};w.setOptOutCookie=function(a,c){D(c,function(d){d.setOptOutCookie(a)})};w.setReferrerUrl=function(a,c){D(c,function(d){d.setReferrerUrl(a)})};w.setUserId=function(a,c){D(c,function(d){d.setUserId(a)})};w.setUserIdFromCookie=function(a,c){D(c,function(d){d.setUserIdFromCookie(a)})};w.setUserIdFromLocation=function(a,c){D(c,function(d){d.setUserIdFromLocation(a)})};
w.setUserIdFromReferrer=function(a,c){D(c,function(d){d.setUserIdFromReferrer(a)})};w.setVisitorCookieTimeout=function(a,c){D(c,function(d){d.setVisitorCookieTimeout(a)})};w.trackCustomEvent=function(a,c){D(c,function(d){var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(h){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=
e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)})};w.trackPageView=function(a,c){D(c,function(d){d.trackPageView(a)})};
w.trackSelfDescribingEvent=function(a,c){D(c,function(d){d.core.track(Xa({event:a.event}),a.context,a.timestamp)})};w.trackStructEvent=function(a,c){D(c,function(d){d=d.core;var e=d.track,h=a.category,g=a.action,l=a.label,n=a.property,r=a.value,p=Ua();p.add("e","se");p.add("se_ca",h);p.add("se_ac",g);p.add("se_la",l);p.add("se_pr",n);p.add("se_va",null==r?void 0:r.toString());e.call(d,p,a.context,a.timestamp)})};w.unsetCustomTags=function(a,c){D(c,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
w.updatePageActivity=function(a){D(a,function(c){c.updatePageActivity()})};w.version="0.3.10";Object.defineProperty(w,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
