/*!
 * Browser tracker for Snowplow v0.3.20 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(z,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(z="undefined"!==typeof globalThis?globalThis:z||self,X(z.snowplowBrowserTracking={}))})(this,function(z){function X(a,b,d){if(d||2===arguments.length)for(var e=0,h=b.length,g;e<h;e++)!g&&e in b||(g||(g=Array.prototype.slice.call(b,0,e)),g[e]=b[e]);return a.concat(g||Array.prototype.slice.call(b))}function Yc(a){var b=0,d=0;var e="";var h=[];if(!a)return a;
a+="";do{var g=ma.indexOf(a.charAt(b++));var k=ma.indexOf(a.charAt(b++));e=ma.indexOf(a.charAt(b++));var p=ma.indexOf(a.charAt(b++));var u=g<<18|k<<12|e<<6|p;g=u>>16&255;k=u>>8&255;u&=255;64===e?h[d++]=String.fromCharCode(g):64===p?h[d++]=String.fromCharCode(g,k):h[d++]=String.fromCharCode(g,k,u)}while(b<a.length);e=h.join("");return function(q){return decodeURIComponent(q.split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Wa(){var a=
{},b=[],d=[],e=[],h,g=function(k,p){null!=p&&""!==p&&(a[k]=p)};return{add:g,addDict:function(k){for(var p in k)Object.prototype.hasOwnProperty.call(k,p)&&g(p,k[p])},addJson:function(k,p,u){u&&lc(u)&&(k={keyIfEncoded:k,keyIfNotEncoded:p,json:u},d.push(k),b.push(k))},addContextEntity:function(k){e.push(k)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(k){h=k},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function Zc(a){return function(b,
d,e){for(var h=function(q,t,y){q=JSON.stringify(q);if(a){y=b.add;if(q){var x=0,l=0,n=[];if(q){q=unescape(encodeURIComponent(q));do{var F=q.charCodeAt(x++);var T=q.charCodeAt(x++);var O=q.charCodeAt(x++);var E=F<<16|T<<8|O;F=E>>18&63;T=E>>12&63;O=E>>6&63;E&=63;n[l++]=ma.charAt(F)+ma.charAt(T)+ma.charAt(O)+ma.charAt(E)}while(x<q.length);x=n.join("");q=q.length%3;q=(q?x.slice(0,q-3):x)+"===".slice(q||3)}q=q.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}y.call(b,t,q)}else b.add(y,q)},g=function(q,
t){if(!q){var y=b.getPayload();if(a?y.cx:y.co){q=JSON;var x=q.parse;if(a){if(y=y.cx){switch(4-y.length%4){case 2:y+="==";break;case 3:y+="="}y=y.replace(/-/g,"+").replace(/_/g,"/");y=Yc(y)}}else y=y.co;q=x.call(q,y)}else q=void 0}q?q.data=q.data.concat(t.data):q=t;return q},k=void 0,p=0;p<d.length;p++){var u=d[p];"cx"===u.keyIfEncoded?k=g(k,u.json):h(u.json,u.keyIfEncoded,u.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},k=g(k,d),e.length=0);k&&h(k,"cx","co")}}function lc(a){if(!mc(a))return!1;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function mc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function $c(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var k=d[g];nc(k)?e.push(k):Ba(k)&&h.push(k)}a=
a.concat(h);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){nc(g)?b=b.filter(function(k){return JSON.stringify(k)!==JSON.stringify(g)}):Ba(g)&&(a=a.filter(function(k){return JSON.stringify(k)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==typeof g)){e=
g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var k=nb(a,d,g,e);h.push.apply(h,k);d=ad(b,d,g,e);h.push.apply(h,d);return h}}}function bd(a){return{addPluginContexts:function(b){var d=b?X([],b,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){Z.error("Error adding plugin contexts",h)}});return d}}}function cd(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])b=!0;else if(b)return!1;
return!0}return 2==a.length?!0:!1}function oc(a){return(a=a.split("."))&&1<a.length?cd(a):!1}function pc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&oc(a[1]))return a.slice(1,6)}function ob(a){if(a=pc(a)){var b=a[0];return 5===a.length&&oc(b)}return!1}function dd(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function qc(a){return dd(a)?a.every(function(b){return ob(b)}):
"string"===typeof a?ob(a):!1}function Ka(a){return lc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function ed(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(qc(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(qc(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Xa(a){return"function"===typeof a&&1>=a.length}function Ba(a){return Xa(a)||Ka(a)}
function rc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Xa(a[0])&&a[1].every(Ba):Xa(a[0])&&Ba(a[1]):!1}function sc(a){return Array.isArray(a)&&2===a.length?ed(a[0])?Array.isArray(a[1])?a[1].every(Ba):Ba(a[1]):!1:!1}function nc(a){return rc(a)||sc(a)}function fd(a,b){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return Ya(g,b)})&&e++:"string"===typeof h&&Ya(h,b)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return Ya(g,b)})&&d++:"string"===typeof h&&
Ya(h,b)&&d++;return 0<e&&0===d?!0:!1}function Ya(a,b){if(!ob(a))return!1;a=pc(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!gd(a[0],b[0]))return!1;for(var d=1;5>d;d++)if(!tc(a[d],b[d]))return!1;return!0}return!1}function gd(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!tc(b[d],a[d]))return!1;return!0}return!1}function tc(a,
b){return a&&b&&"*"===a||a===b}function uc(a){return Array.isArray(a)?a:[a]}function nb(a,b,d,e){var h;a=uc(a).map(function(g){a:if(Ka(g))g=[g];else{if(Xa(g)){b:{var k=void 0;try{var p={event:b.getPayload(),eventType:d,eventSchema:e};k=g(p);if(Array.isArray(k)&&k.every(Ka)||Ka(k)){var u=k;break b}u=void 0;break b}catch(q){}u=void 0}if(Ka(u)){g=[u];break a}else if(Array.isArray(u)){g=u;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&
g.filter(Boolean)}))}function ad(a,b,d,e){var h;a=uc(a).map(function(g){a:{if(rc(g)){var k=g[0],p=!1;try{var u={event:b.getPayload(),eventType:d,eventSchema:e};p=k(u)}catch(q){p=!1}if(!0===p){g=nb(g[1],b,d,e);break a}}else if(sc(g)&&fd(g[0],e)){g=nb(g[1],b,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function hd(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function id(a){void 0===a&&(a={});var b=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];b=function(g,k,p){function u(l,n){l=t.getApplicableContexts(l);var F=[];n&&n.length&&F.push.apply(F,n);l&&l.length&&F.push.apply(F,l);return F}var q=bd(k),t=$c(),y=g,x={};return{track:function(l,n,F){l.withJsonProcessor(Zc(y));l.add("eid",na.v4());l.addDict(x);F=hd(F);l.add(F.type,F.value.toString());n=u(l,q.addPluginContexts(n));
n=n&&n.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:n}:void 0;void 0!==n&&l.addJson("cx","co",n);k.forEach(function(O){try{O.beforeTrack&&O.beforeTrack(l)}catch(E){Z.error("Plugin beforeTrack",E)}});"function"===typeof p&&p(l);var T=l.build();k.forEach(function(O){try{O.afterTrack&&O.afterTrack(T)}catch(E){Z.error("Plugin afterTrack",E)}});return T},addPayloadPair:function(l,n){x[l]=n},configuration:a,getConfig:function(){return a},setConfig:function(l){l&&("undefined"!==
typeof l.base64&&(y=a.base64=l.base64),"undefined"!==typeof l.linkClickTracking&&(a.linkClickTracking=l.linkClickTracking),"undefined"!==typeof l.cacheRefreshInterval&&(a.cacheRefreshInterval=l.cacheRefreshInterval),"undefined"!==typeof l.buttonClickTracking&&(a.buttonClickTracking=l.buttonClickTracking),"undefined"!==typeof l.customEvent&&(a.customEvent=l.customEvent),"undefined"!==typeof l.exceptionAutotracking&&(a.exceptionAutotracking=l.exceptionAutotracking),"undefined"!==typeof l.enablePeriodicHeartbeat&&
(a.enablePeriodicHeartbeat=l.enablePeriodicHeartbeat),"undefined"!==typeof l.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=l.periodicHeartbeatInterval),"undefined"!==typeof l.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=l.customEventTrackingConfiguration),"undefined"!==typeof l.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=l.convivaVideoEventTrackingConfiguration),"undefined"!==typeof l.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=
l.ajaxTrackingConfiguration))},getBase64Encoding:function(){return y},setBase64Encoding:function(l){y=l},addPayloadDict:function(l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(x[n]=l[n])},resetPayloadPairs:function(l){x=mc(l)?l:{}},setTrackerVersion:function(l){x.tv=l},setTrackerNamespace:function(l){x.tna=l},setAppId:function(l){x.aid=l},setPlatform:function(l){x.p=l},setUserId:function(l){x.uid=l},setScreenResolution:function(l,n){x.res=l+"x"+n},setViewport:function(l,n){x.vp=l+"x"+
n},setColorDepth:function(l){x.cd=l},setTimezone:function(l){x.tz=l},setLang:function(l){x.lang=l},setIpAddress:function(l){x.ip=l},setUseragent:function(l){x.ua=l},addGlobalContexts:function(l){t.addGlobalContexts(l)},clearGlobalContexts:function(){t.clearGlobalContexts()},removeGlobalContexts:function(l){t.removeGlobalContexts(l)}}}(null!==b&&void 0!==b?b:!0,e,a.callback);var h=ba(ba({},b),{addPlugin:function(g){var k,p;g=g.plugin;e.push(g);null===(k=g.logger)||void 0===k?void 0:k.call(g,Z);null===
(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)}});null===e||void 0===e?void 0:e.forEach(function(g){var k,p;null===(k=g.logger)||void 0===k?void 0:k.call(g,Z);null===(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)});return h}function Za(a){var b=a.event;a=b.schema;var d=b.data;b=Wa();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:a,data:d}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function jd(a){var b=a.pageUrl,d=a.pageTitle;
a=a.referrer;var e=Wa();e.add("e","pv");e.add("url",b);e.add("page",d);e.add("refr",a);return e}function pb(a){return Za({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:qb({name:a.name,data:a.data})}})}function rb(a){return Za({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:qb({name:a.name,sid:a.sid,iid:a.iid,clid:a.clid,st:a.st,cen:a.cen,ced:a.ced})}})}function qb(a,b){void 0===b&&(b={});var d={},e;for(e in a)if(b[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=
a[e];return d}function vc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function wc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function sb(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function xc(a){var b=a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function tb(a){var b=
window,d=La("referrer",b.location.href)||La("referer",b.location.href);if(d)return d;if(a)return a;try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function oa(a,b,d,e){if(a.addEventListener)return a.addEventListener(b,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,d);a["on"+b]=d}function La(a,b){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function $a(a,
b,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,b);return!0}catch(g){return!1}}function yc(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(d){return!1}}function kd(a,b){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),h="_test_value_"+(new Date).getTime(),g=d.split("."),k=g.length-1;0<=k;){var p=g.slice(k,g.length).join(".");ca(e,h,0,
"/",p,a,b);if(ca(e)===h){ca(e,"",-1,"/",p,a,b);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)ca(d[e],"",-1,"/",p,a,b);return p}--k}return d}function ca(a,b,d,e,h,g,k){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(d?"; Expires="+(new Date(+new Date+1E3*d)).toUTCString():"")+(e?"; Path="+e:"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(k?"; Secure":""):
decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function ld(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr","modernizr");b.removeItem("modernizr");return!0}catch(d){return!1}}function md(a,b,d,e,h,g,k,p,u,q,t,y,x,l,n,F){function T(r){var B=Object.keys(r).map(function(A){return[A,r[A]]}).reduce(function(A,v){A[v[0]]=v[1].toString();return A},{});return{evt:B,bytes:O(JSON.stringify(B))}}function O(r){for(var B=
0,A=0;A<r.length;A++){var v=r.charCodeAt(A);127>=v?B+=1:2047>=v?B+=2:55296<=v&&57343>=v?(B+=4,A++):B=65535>v?B+3:B+4}return B}function E(r){for(void 0===r&&(r=!1);D.length&&"string"!==typeof D[0]&&"object"!==typeof D[0];)D.shift();if(1>D.length)U=!1;else{if(!aa||"string"!==typeof aa.valueOf())throw"No collector configured";U=!0;if(ta){var B=function(P){for(var da=0,Ma=0;da<P.length&&!(Ma+=P[da].bytes,Ma>=k);)da+=1;return da},A=void 0;if(Ca(D)){A=aa;var v=H(A,!0,r);var I=B(D)}else A=ia(D[0]),v=H(A,
!1,r),I=1;var S=setTimeout(function(){v.abort();U=!1},t),fa=function(P){for(var da=0;da<P;da++)D.shift();d&&$a(ea,JSON.stringify(D.slice(0,q)))};v.onreadystatechange=function(){if(4===v.readyState&&200<=v.status)if(clearTimeout(S),300>v.status)fa(I),E();else{var P=v.status;P=200<=P&&300>P?!1:n.includes(P)?!0:!F.includes(P);P||(Z.error("Status ".concat(v.status,", will not retry.")),fa(I));U=!1}};if(Ca(D)){if(B=D.slice(0,I),0<B.length){r=!1;B=B.map(function(P){return P.evt});if(ab){var ub=new Blob([V(ua(B))],
{type:"application/json"});try{r=navigator.sendBeacon(A,ub)}catch(P){r=!1}}!0===r?(fa(I),E()):v.send(V(ua(B)))}}else v.send()}else if(y||Ca(D))U=!1;else{A=new Image(1,1);var pa=!0;A.onload=function(){pa&&(pa=!1,D.shift(),d&&$a(ea,JSON.stringify(D.slice(0,q))),E())};A.onerror=function(){pa&&(U=pa=!1)};A.src=ia(D[0]);setTimeout(function(){pa&&U&&(pa=!1,E())},t)}}}function H(r,B,A){var v=new XMLHttpRequest;B?(v.open("POST",r,!A),v.setRequestHeader("Content-Type","application/json; charset=UTF-8")):v.open("GET",
r,!A);v.withCredentials=l;y&&v.setRequestHeader("SP-Anonymous","*");for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&v.setRequestHeader(I,x[I]);return v}function V(r){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:r})}function ua(r){for(var B=(new Date).getTime().toString(),A=0;A<r.length;A++)r[A].stm=B;return r}function ia(r){return u?aa+r.replace("?","?stm="+(new Date).getTime()+"&"):aa+r}function vb(r){function B(v,I,S){return(S=
S.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&S.length?parseInt(S[0])<=v||parseInt(S[0])===v&&parseInt(S[1])<=I:!1}function A(v){return v.match("Version/.* Safari/")&&!v.match("Chrom(e|ium)")}return function(v,I){return(I=I.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&I.length?parseInt(I[0])<=v:!1}(13,r)||B(10,15,r)&&A(r)}var U=!1,aa,D=[];e="string"===typeof e?e.toLowerCase():e;var qa=!0===e||"beacon"===e||"true"===e,ab=!(!(qa&&window.navigator&&window.navigator.sendBeacon)||
vb(window.navigator.userAgent))&&qa,ta=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),va="get"!==e&&ta&&("post"===e||qa),Na=va?h:"/i",ea="snowplowOutQueue_".concat(a,"_").concat(va?"post2":"get");qa&&(x={});g=d&&ld()&&va&&g||1;if(d)try{var Oa=window.localStorage.getItem(ea);D=Oa?JSON.parse(Oa):[]}catch(r){}Array.isArray(D)||(D=[]);b.outQueues.push(D);ta&&1<g&&b.bufferFlushers.push(function(r){U||E(r)});var Ca=function(r){return"object"===typeof r[0]};return{enqueueRequest:function(r,
B){aa=B+Na;if(va){r=T(r);if(r.bytes>=k){Z.warn("Event ("+r.bytes+"B) too big, max is "+k);B=r;H(aa,!0,!1).send(V(ua([B.evt])));return}D.push(r)}else{var A="?";var v={co:!0,cx:!0},I=!0,S;for(S in r)r.hasOwnProperty(S)&&!v.hasOwnProperty(S)&&(I?I=!1:A+="&",A+=encodeURIComponent(S)+"="+encodeURIComponent(r[S]));for(var fa in v)r.hasOwnProperty(fa)&&v.hasOwnProperty(fa)&&(A+="&"+fa+"="+encodeURIComponent(r[fa]));if(0<p&&(v=ia(A),v=O(v),v>=p)){Z.warn("Event ("+v+"B) too big, max is "+p);ta&&(r=T(r),H(B+
h,!0,!1).send(V(ua([r.evt]))));return}D.push(A)}B=!1;d&&(B=$a(ea,JSON.stringify(D.slice(0,q))));U||B&&!(D.length>=g)||E()},executeQueue:function(){U||E()},setUseLocalStorage:function(r){d=r},setAnonymousTracking:function(r){y=r},setCollectorUrl:function(r){aa=r+Na},setBufferSize:function(r){g=r},setCustomHeaders:function(r){x=r}}}function zc(a,b,d){if("translate.googleusercontent.com"===a)""===d&&(d=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?
La("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=sb(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=sb(b);return[a,b,d]}function nd(a,b,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=na.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(k,p){k=parseInt(k);
return isNaN(k)?p:k};b=function(k){return k?g(k,void 0):void 0};return[a[0],a[1],g(a[2],h),g(a[3],e),g(a[4],h),b(a[5]),a[6],a[7],a[8],b(a[9]),g(a[10],-1)]}function Pa(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=b;b=na.v4();a[6]=b;a[10]=-1;a[8]="";a[9]=void 0;return b}function wb(a){a[4]=Math.round((new Date).getTime()/1E3)}function od(a,b,d,e,h,g){function k(q){var t={cacheRefreshInterval:60,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,
enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{}};t.cacheRefreshInterval=q.cacheRefreshInterval;t.base64=q.configurationBundle[0].trackerConfiguration.base64Encoding;t.linkClickTracking=q.configurationBundle[0].trackerConfiguration.linkClickTracking;t.buttonClickTracking=q.configurationBundle[0].trackerConfiguration.buttonClickTracking;t.customEvent=q.configurationBundle[0].trackerConfiguration.customEvent;
t.exceptionAutotracking=q.configurationBundle[0].trackerConfiguration.exceptionAutotracking;t.enablePeriodicHeartbeat=q.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;t.periodicHeartbeatInterval=q.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;t.customEventTrackingConfiguration=q.configurationBundle[0].customEventTrackingConfiguration;t.convivaVideoEventTrackingConfiguration=q.configurationBundle[0].convivaVideoEventTrackingConfiguration;t.ajaxTrackingConfiguration=
q.configurationBundle[0].ajaxTrackingConfiguration;t.ajaxTrackingConfiguration&&(t.ajaxTrackingConfiguration.blocklist.push(q.configurationBundle[0].networkConfiguration.endpoint),t.ajaxTrackingConfiguration.blocklist.push("wsg"),t.ajaxTrackingConfiguration.blocklist.push("remote_config"));u.setCollectorUrl(q.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",
JSON.stringify(t)),localStorage.setItem("ConvivaEndpoint",q.configurationBundle[0].networkConfiguration.endpoint));u.core.setConfig(t)}void 0===g&&(g={});var p=[];a=function(q,t,y,x,l,n){function F(){wa=zc(window.location.hostname,window.location.href,tb());wa[1]!==ra&&(Qa=tb(ra));Ac=xc(wa[0]);ra=wa[1]}function T(c){var f=(new Date).getTime();c=c.currentTarget;if(null===c||void 0===c?0:c.href){f="_sp="+(bb+"."+f);var m=c.href.split("#"),w=m[0].split("?"),J=w.shift();if(w=w.join("?")){for(var K=!0,
N=w.split("&"),Q=0;Q<N.length;Q++)if("_sp="===N[Q].substr(0,4)){K=!1;N[Q]=f;w=N.join("&");break}K&&(w=f+"&"+w)}else w=f;m[0]=J+"?"+w;f=m.join("#");c.href=f}}function O(c){for(var f=0;f<document.links.length;f++){var m=document.links[f];!m.spDecorationEnabled&&c(m)&&(oa(m,"click",T,!0),oa(m,"mousedown",T,!0),m.spDecorationEnabled=!0)}}function E(c){if(Bc){var f=/#.*/;c=c.replace(f,"")}Cc&&(f=/[{}]/g,c=c.replace(f,""));return c}function H(c){return(c=/^([a-z]+):/.exec(c))?c[1]:null}function V(c){c=
Da+c+"."+xa;if("localStorage"==M){try{var f=window.localStorage,m=f.getItem(c+".expires");if(null===m||+m>Date.now())var w=f.getItem(c);else f.removeItem(c),f.removeItem(c+".expires"),w=void 0}catch(J){w=void 0}return w}if("cookie"==M||"cookieAndLocalStorage"==M)return ca(c)}function ua(){F();xa=pd((Ra||Ac)+(xb||"/")).slice(0,4)}function ia(){yb=(new Date).getTime()}function vb(){var c=U(),f=c[0];f<cb?cb=f:f>db&&(db=f);c=c[1];c<eb?eb=c:c>fb&&(fb=c);ia()}function U(){var c=document.documentElement;
return c?[c.scrollLeft||window.pageXOffset,c.scrollTop||window.pageYOffset]:[0,0]}function aa(){var c=U(),f=c[0];db=cb=f;fb=eb=c=c[1]}function D(){ab(Da+"ses."+xa,"*",Dc)}function qa(c){var f=Da+"id."+xa;c.shift();c=c.join(".");ab(f,c,Ec)}function ab(c,f,m){if(!Ea||Sa)"localStorage"==M?$a(c,f,m):("cookie"==M||"cookieAndLocalStorage"==M)&&ca(c,f,m,xb,Ra,gb,hb)}function ta(c){var f=Da+"id."+xa,m=Da+"ses."+xa;yc(f);yc(m);ca(f,"",-1,"/",Ra,gb,hb);ca(m,"",-1,"/",Ra,gb,hb);null!==c&&void 0!==c&&c.preserveSession||
(ya=na.v4(),ha=1);null!==c&&void 0!==c&&c.preserveUser||(bb=na.v4(),za=null)}function va(c){c&&c.stateStorageStrategy&&(n.stateStorageStrategy=c.stateStorageStrategy,M=Fc(n));Ea=!!n.anonymousTracking;Sa=Gc(n);zb=Hc(n);ja.setUseLocalStorage("localStorage"==M||"cookieAndLocalStorage"==M);ja.setAnonymousTracking(zb)}function Na(){try{var c=window.localStorage.getItem(Ic+"."+Jc),f=JSON.parse(c||"{}");"{}"===f||"undefined"===typeof f?(Ta=v(),ib=I(),Aa=-1):(Ta=f.clId||v(),Aa=f.eventIndex&&2147483648>f.eventIndex?
f.eventIndex:-1,ib=I());A()}catch(w){console.warn(w)}if(!Ea||Sa){c="none"!=M&&!!V("ses");f=ea();if(f[1])var m=f[1];else m=Ea?"":na.v4(),f[1]=m;bb=m;ya=c?f[6]:Pa(f);ha=f[3];"none"!=M&&(D(),wb(f),qa(f))}}function ea(){if("none"==M)return["1","",0,0,0,void 0,"","","",void 0,0];var c=V("id")||void 0;return nd(c,bb,ya,ha)}function Oa(c){return 0===c.indexOf("http")?c:("https:"===document.location.protocol?"https":"http")+"://"+c}function Ca(){Kc&&null!=l.pageViewId||(l.pageViewId=na.v4())}function r(){null==
l.pageViewId&&(l.pageViewId=na.v4());return l.pageViewId}function B(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:r()}}]}}}function A(){try{var c=window.localStorage,f={clId:Ta,iid:ib,eventIndex:Aa},m=null;try{m=JSON.stringify(f)}catch(w){return}return c.setItem(Ic+"."+Jc,m)}catch(w){}}function v(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*
Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(c){console.warn(c)}}function I(){try{return Math.floor(2147483647*Math.random())}catch(c){return console.warn(c),-1}}function S(c){try{var f=Object.keys(c);qd(JSON.stringify(c))?f.forEach(function(m){""!==m&&Object.defineProperty(Ab,m,{value:""+c[m],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(m){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",
m)}}function fa(c){try{c.forEach(function(f){delete Ab[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function ub(c){var f=c.title,m=c.context,w=c.timestamp;c=c.contextCallback;F();Lc&&Ca();Lc=!0;Fa=document.title;Ua=f;f=wc(Ua||Fa);Ga.track(jd({pageUrl:E(Ha||ra),pageTitle:f,referrer:E(jb||Qa)}),(m||[]).concat(c?c():[]),w);w=new Date;f=!1;if(Y.enabled&&!Y.installed){f=Y.installed=!0;var J={update:function(){if("undefined"!==typeof window&&
"function"===typeof window.addEventListener){var N=!1,Q=Object.defineProperty({},"passive",{get:function(){N=!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",W,Q);window.removeEventListener("testPassiveEventSupport",W,Q);J.hasSupport=N}}};J.update();var K="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(J,"hasSupport")?oa(document,K,ia,{passive:!0}):oa(document,
K,ia);aa();K=function(N,Q){void 0===Q&&(Q=ia);return function(W){return oa(document,W,Q)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(K(document));["resize","focus","blur"].forEach(K(window));K(window,vb)("scroll")}if(Y.enabled&&(rd||f))for(w in yb=w.getTime(),w=void 0,Y.configurations)if(f=Y.configurations[w])window.clearInterval(f.activityInterval),pa(f,m,c)}function pa(c,f,m){var w=function(N,Q){F();var W=u.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&
(W=1E3*W.periodicHeartbeatInterval,W!=c.configHeartBeatTimer&&(window.clearInterval(c.activityInterval),c.activityInterval=window.setInterval(K,W))):window.clearInterval(c.activityInterval);N({context:Q,pageViewId:r(),minXOffset:cb,minYOffset:eb,maxXOffset:db,maxYOffset:fb});aa()},J=new Date;window.setTimeout(function(){w(c.callback,(f||[]).concat(m?m():[]))},2E3);var K=function(){var N=new Date;if(J.getTime()+c.configHeartBeatTimer>N.getTime()||yb+c.configHeartBeatTimer>N.getTime())J=N,w(c.callback,
(f||[]).concat(m?m():[]))};c.activityInterval=window.setInterval(K,c.configHeartBeatTimer)}function P(c){var f=c.minimumVisitLength,m=c.heartbeatDelay;c=c.callback;if(vc(f)&&vc(m))return{configMinimumVisitLength:1E3*f,configHeartBeatTimer:1E3*m,callback:c};Z.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function da(c){var f=c.context,m=c.minXOffset,w=c.minYOffset,J=c.maxXOffset,K=c.maxYOffset;c=document.title;c!==Fa&&(Fa=c,Ua=void 0);c=Ga;var N=c.track,Q=E(Ha||ra),
W=wc(Ua||Fa),sd=E(jb||Qa);m=Math.round(m);J=Math.round(J);w=Math.round(w);K=Math.round(K);var ka=Wa();ka.add("e","pp");ka.add("url",Q);ka.add("page",W);ka.add("refr",sd);m&&!isNaN(Number(m))&&ka.add("pp_mix",m.toString());J&&!isNaN(Number(J))&&ka.add("pp_max",J.toString());w&&!isNaN(Number(w))&&ka.add("pp_miy",w.toString());K&&!isNaN(Number(K))&&ka.add("pp_may",K.toString());N.call(c,ka,f)}function Ma(c){if(n.trackerConfigUrl)kb(n.trackerConfigUrl),Ia=window.setInterval(kb,6E4*c,n.trackerConfigUrl);
else{var f="https://drt1fhpy4haqm.cloudfront.net/js/"+n.convivaCustomerKey+"/"+y+"/remote_config.json";kb(f);Ia=window.setInterval(kb,6E4*c,f)}}var Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,ac,td={},ud={},vd={blocklist:["*"]},G={},Ia=null;if(window.localStorage){var Mc=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(G);var bc=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else bc=
"https://appgw.conviva.com",Mc=JSON.stringify(G);x=n.gatewayUrl?n.gatewayUrl:bc?bc:"https://appgw.conviva.com";t||(t="CAT");var L=JSON.parse(Mc);G.base64="undefined"!=typeof L.base64?L.base64:!0;G.cacheRefreshInterval="undefined"!=typeof L.cacheRefreshInterval?L.cacheRefreshInterval:60;G.linkClickTracking="undefined"!=typeof L.linkClickTracking?L.linkClickTracking:!0;G.buttonClickTracking="undefined"!=typeof L.buttonClickTracking?L.buttonClickTracking:!0;G.exceptionAutotracking="undefined"!=typeof L.exceptionAutotracking?
L.exceptionAutotracking:!0;G.enablePeriodicHeartbeat="undefined"!=typeof L.enablePeriodicHeartbeat?L.enablePeriodicHeartbeat:!0;G.periodicHeartbeatInterval="undefined"!=typeof L.periodicHeartbeatInterval?L.periodicHeartbeatInterval:40;G.customEventTrackingConfiguration="undefined"!=typeof L.customEventTrackingConfiguration?L.customEventTrackingConfiguration:td;G.convivaVideoEventTrackingConfiguration="undefined"!=typeof L.convivaVideoEventTrackingConfiguration?L.convivaVideoEventTrackingConfiguration:
ud;G.ajaxTrackingConfiguration="undefined"!=typeof L.ajaxTrackingConfiguration?L.ajaxTrackingConfiguration:vd;var wd=n.convivaCustomerKey;if(window.XMLHttpRequest){var Ja=new XMLHttpRequest;Ja.onreadystatechange=function(){if(4==Ja.readyState)if(200==Ja.status){var c=JSON.parse(Ja.response);c.cacheRefreshInterval||(c.cacheRefreshInterval=60);G.cacheRefreshInterval!=c.cacheRefreshInterval&&(G.cacheRefreshInterval=c.cacheRefreshInterval,"number"===typeof Ia&&window.clearInterval(Ia),Ma(c.cacheRefreshInterval));
k(c)}else try{var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){var m=JSON.parse(f.response);k(m)}else try{var w=new XMLHttpRequest;w.onreadystatechange=function(){if(4==w.readyState&&200==w.status){var J=JSON.parse(w.response);k(J)}};w.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0);w.send()}catch(J){}};f.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+wd+"/remote_config.json",!0);f.send()}catch(m){}};var kb=function(c){try{Ja.open("GET",
c,!0),Ja.send()}catch(f){}};"number"===typeof Ia&&window.clearInterval(Ia);Ma(G.cacheRefreshInterval)}n.eventMethod=null!==(Bb=n.eventMethod)&&void 0!==Bb?Bb:"post";var Fc=function(c){var f;return null!==(f=c.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},Gc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==m?m:!1},Hc=function(c){var f,m;return"boolean"===typeof c.anonymousTracking?
!1:null!==(m=!0===(null===(f=c.anonymousTracking)||void 0===f?void 0:f.withServerAnonymisation))&&void 0!==m?m:!1};p.push(function(){return{beforeTrack:function(c){var f=V("ses"),m=ea();cc=dc?!!ca(dc):!1;Nc||cc?ta():("0"===m[0]?(ya=f||"none"==M?m[6]:Pa(m),ha=m[3]):(new Date).getTime()-ec>1E3*Dc&&(ha++,ya=Pa(m,ha)),wb(m),-1===m[10]&&(f=c.build(),m[8]=f.eid,f=f.dtm||f.ttm,m[9]=f?parseInt(f):void 0),m[10]+=1,c.add("uid",Ea?null:za),F(),c.add("refr",E(jb||Qa)),document&&c.add("page",document.title),c.add("url",
E(Ha||ra)),!xd||Sa||Ea||(f=m[9],f={userId:m[1],sessionId:m[6],eventIndex:m[10],sessionIndex:m[3],previousSessionId:m[7]||null,storageMechanism:"localStorage"==M?"LOCAL_STORAGE":"COOKIE_1",firstEventId:m[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():null},c.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:f})),"none"!=M&&(qa(m),D()),ec=(new Date).getTime())}}}());(null!==(Db=null===(Cb=null===n||void 0===n?void 0:n.contexts)||void 0===
Cb?void 0:Cb.webPage)&&void 0!==Db?Db:1)&&p.push(B());p.push(function(){return{contexts:function(){var c=Ta,f=ib.toString(),m=yd;2147483647<=Aa?Aa=0:Aa++;A();c={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-2",data:{clid:c,iid:f,ck:m,eventIndex:Aa}};f={eventIndex:zd++};null!=fc&&(f.previousEventTimestamp=fc);fc=(new Date).toISOString();return[c,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());p.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",
data:{data:Ab}}]}}}());p.push.apply(p,null!==(Eb=n.plugins)&&void 0!==Eb?Eb:[]);var Ga=id({base64:G.base64,corePlugins:p,callback:function(c){Nc||cc||ja.enqueueRequest(c.build(),gc)},linkClickTracking:G.linkClickTracking,buttonClickTracking:G.buttonClickTracking,customEvent:!0,exceptionAutotracking:G.exceptionAutotracking,enablePeriodicHeartbeat:G.enablePeriodicHeartbeat,periodicHeartbeatInterval:G.periodicHeartbeatInterval,customEventTrackingConfiguration:G.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:G.convivaVideoEventTrackingConfiguration,
ajaxTrackingConfiguration:G.ajaxTrackingConfiguration}),wa=zc(window.location.hostname,window.location.href,tb()),Ac=xc(wa[0]),ra=wa[1],Qa=wa[2],jb,Ad=null!==(Fb=n.platform)&&void 0!==Fb?Fb:"web",gc=Oa(x),Bd=null!==(Gb=n.postPath)&&void 0!==Gb?Gb:"/"+n.convivaCustomerKey+"/ctp",Cd=null!==(Hb=n.appId)&&void 0!==Hb?Hb:"",yd=null!==(Ib=n.convivaCustomerKey)&&void 0!==Ib?Ib:"",Ha,Ab={},Fa=document.title,Ua,rd=null!==(Jb=n.resetActivityTrackingOnPageView)&&void 0!==Jb?Jb:!0,Bc,Cc,Da=null!==(Kb=n.cookieName)&&
void 0!==Kb?Kb:"_sp_",Ra=null!==(Lb=n.cookieDomain)&&void 0!==Lb?Lb:void 0,xb="/",gb=null!==(Mb=n.cookieSameSite)&&void 0!==Mb?Mb:"None",hb=null!==(Nb=n.cookieSecure)&&void 0!==Nb?Nb:!0,Oc=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Nc="undefined"!==typeof n.respectDoNotTrack?n.respectDoNotTrack&&("yes"===Oc||"1"===Oc):!1,dc,Ec=null!==(Ob=n.cookieLifetime)&&void 0!==Ob?Ob:63072E3,Dc=null!==(Pb=n.sessionCookieTimeout)&&void 0!==Pb?Pb:1800,Sa=Gc(n),zb=Hc(n),Ea=!!n.anonymousTracking,
M=Fc(n),Ic="Conviva",Jc="sdkConfig",Ta,ib,Aa=-1,zd=0,yb,ec=(new Date).getTime(),cb,db,eb,fb,xa,bb,ya,ha=1,za,ja=md(q,l,"localStorage"==M||"cookieAndLocalStorage"==M,n.eventMethod,Bd,null!==(Qb=n.bufferSize)&&void 0!==Qb?Qb:1,null!==(Rb=n.maxPostBytes)&&void 0!==Rb?Rb:4E4,null!==(Sb=n.maxGetBytes)&&void 0!==Sb?Sb:0,null!==(Tb=n.useStm)&&void 0!==Tb?Tb:!0,null!==(Ub=n.maxLocalStorageQueueSize)&&void 0!==Ub?Ub:1E3,null!==(Vb=n.connectionTimeout)&&void 0!==Vb?Vb:5E3,zb,null!==(Wb=n.customHeaders)&&void 0!==
Wb?Wb:{},null!==(Xb=n.withCredentials)&&void 0!==Xb?Xb:!0,null!==(Yb=n.retryStatusCodes)&&void 0!==Yb?Yb:[],(null!==(Zb=n.dontRetryStatusCodes)&&void 0!==Zb?Zb:[]).concat([400,401,403,410,422])),Kc=!1,fc,Lc=!1,Y={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:da}}},xd=null!==(ac=null===($b=n.contexts)||void 0===$b?void 0:$b.session)&&void 0!==ac?ac:!1,cc;n.hasOwnProperty("discoverRootDomain")&&n.discoverRootDomain&&(Ra=kd(gb,hb));Ga.setTrackerVersion(y);
Ga.setAppId(Cd);Ga.setPlatform(Ad);ua();Na();ja.setCustomHeaders({"x-client-id":""+Ta});n.crossDomainLinker&&O(n.crossDomainLinker);var qd=function(c){try{return"object"===typeof JSON.parse(c)}catch(f){return!1}};return ba(ba({},{getDomainSessionIndex:function(){return ha},getPageViewId:function(){return r()},newSession:function(){var c=ea();"0"===c[0]?(ya="none"!=M?Pa(c):c[6],ha=c[3],D()):(ha++,ya=Pa(c,ha));wb(c);"none"!=M&&(qa(c),D());ec=(new Date).getTime()},getCookieName:function(c){return Da+
c+"."+xa},getUserId:function(){return za},getDomainUserId:function(){return ea()[1]},getDomainUserInfo:function(){return ea()},setReferrerUrl:function(c){jb=c},setCustomUrl:function(c){F();var f=ra,m;H(c)?Ha=c:"/"===c.slice(0,1)?Ha=H(f)+"://"+sb(f)+c:(f=E(f),0<=(m=f.indexOf("?"))&&(f=f.slice(0,m)),(m=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,m+1)),Ha=f+c)},setDocumentTitle:function(c){Fa=document.title;Ua=c},discardHashTag:function(c){Bc=c},discardBrace:function(c){Cc=c},setCookiePath:function(c){xb=
c;ua()},setVisitorCookieTimeout:function(c){Ec=c},crossDomainLinker:function(c){O(c)},enableActivityTracking:function(c){Y.configurations.pagePing||(Y.enabled=!0,Y.configurations.pagePing=P(ba(ba({},c),{callback:da})))},enableActivityTrackingCallback:function(c){Y.configurations.callback||(Y.enabled=!0,Y.configurations.callback=P(c))},updatePageActivity:function(){ia()},setOptOutCookie:function(c){dc=c},setUserId:function(c){za=c},setUserIdFromLocation:function(c){F();za=La(c,ra)},setUserIdFromReferrer:function(c){F();
za=La(c,Qa)},setUserIdFromCookie:function(c){za=ca(c)},setCollectorUrl:function(c){gc=Oa(c);ja.setCollectorUrl(gc)},setBufferSize:function(c){ja.setBufferSize(c)},flushBuffer:function(c){void 0===c&&(c={});ja.executeQueue();c.newBufferSize&&ja.setBufferSize(c.newBufferSize)},trackPageView:function(c){void 0===c&&(c={});ub(c)},trackVideoEvent:function(c){void 0===c&&(c={});try{var f=this.core.getConfig();""!=c.name&&void 0!=c.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");
if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var m=f.convivaVideoEventTrackingConfiguration.blocklist;-1==m.indexOf("*")&&-1==m.indexOf(""+c.name)&&this.core.track(rb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],
err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}else this.core.track(rb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp);else this.core.track(rb({name:c.name,sid:c.sid,iid:c.iid,clid:c.clid,st:c.st,sst:c.sst,an:c.an,cl:c.cl,lv:c.lv,pn:c.pn,vid:c.vid,fw:c.fw,fwv:c.fwv,mn:c.mn,mv:c.mv,url:c.url,
tags:c.tags,cen:c.cen,ced:c.ced,oldsc:c.old,newsc:c["new"],err:c.err,br:c.br,ft:c.ft}),c.context,c.timestamp)}catch(w){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",w)}},trackAjaxEvent:function(c){void 0===c&&(c={});try{if("xmlhttprequest"===c.initiatorType){var f=this.core.getConfig();if(""==c.name||void 0==c.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(void 0!=f.ajaxTrackingConfiguration&&
void 0!=f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var m=f.ajaxTrackingConfiguration.blocklist;if(-1==m.indexOf("*")){f=!1;for(var w=0;w<m.length;w++)""!==m[w]&&-1!==c.name.indexOf(m[w])&&(f=!0);if(!f){var J=this.core,K=J.track;var N=Za({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:qb({targetUrl:c.name,webResourceTiming:c,duration:c.duration})}});K.call(J,N,c.context,c.timestamp)}}}}}catch(Q){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",
Q)}},setCustomTags:function(c){void 0===c&&(c={});S(c)},unsetCustomTags:function(c){void 0===c&&(c={});fa(c)},preservePageViewId:function(){Kc=!0},disableAnonymousTracking:function(c){n.anonymousTracking=!1;va(c);Na();ja.executeQueue()},enableAnonymousTracking:function(c){var f;n.anonymousTracking=null!==(f=c&&(null===c||void 0===c?void 0:c.options))&&void 0!==f?f:!0;va(c);Sa||Ca()},clearUserData:ta}),{id:q,namespace:t,core:Ga,sharedState:l})}(a,b,d,e,h,g);var u=ba(ba({},a),{addPlugin:function(q){var t,
y;u.core.addPlugin(q);null===(y=(t=q.plugin).activateBrowserPlugin)||void 0===y?void 0:y.call(t,u)}});p.forEach(function(q){var t;null===(t=q.activateBrowserPlugin)||void 0===t?void 0:t.call(q,u)});return u}function C(a,b){try{var d=null!==a&&void 0!==a?a:Object.keys(Va);a=Va;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):Z.warn(g+" not configured")}e.forEach(b)}catch(k){Z.error("Function failed",k)}}function Pc(a,b,d,e,h,g){return Va.hasOwnProperty(a)?null:(Va[a]=od(a,
b,d,e,h,g),Va[a])}function Dd(){function a(){"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(k){k(!1)})}function b(){var k;if(!e.hasLoaded)for(e.hasLoaded=!0,k=0;k<e.registeredOnLoadHandlers.length;k++)e.registeredOnLoadHandlers[k]();return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function p(){h.removeEventListener("DOMContentLoaded",p,!1);b()}):h.attachEvent&&h.attachEvent("onreadystatechange",function u(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",
u),b())});oa(g,"load",b,!1)}var e=new Ed,h=document,g=window;h.visibilityState&&oa(h,"visibilitychange",a,!1);oa(g,"beforeunload",function(){e.bufferFlushers.forEach(function(k){k(!1)})},!1);"loading"===document.readyState?d():b();return e}var ba=function(){ba=Object.assign||function(a){for(var b,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h])}return a};return ba.apply(this,arguments)},sa={},Qc="undefined"!=typeof crypto&&crypto.getRandomValues&&
crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Qc){var Rc=new Uint8Array(16);sa=function(){Qc(Rc);return Rc}}else{var Sc=Array(16);sa=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Sc[a]=b>>>((a&3)<<3)&255;return Sc}}for(var R=[],lb=0;256>lb;++lb)R[lb]=(lb+256).toString(16).substr(1);var Tc=function(a,b){b=b||0;return[R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],
"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],"-",R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]],R[a[b++]]].join("")},Fd=sa,Uc,hc,ic=0,jc=0,Gd=sa;sa=function(a,b,d){d=b&&d||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Gd)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[d+e]=a[e];return b||Tc(a)};sa.v1=function(a,b,d){d=b&&d||0;var e=b||[];a=a||{};var h=a.node||Uc,g=void 0!==a.clockseq?a.clockseq:hc;if(null==h||
null==g){var k=Fd();null==h&&(h=Uc=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]);null==g&&(g=hc=(k[6]<<8|k[7])&16383)}k=void 0!==a.msecs?a.msecs:(new Date).getTime();var p=void 0!==a.nsecs?a.nsecs:jc+1,u=k-ic+(p-jc)/1E4;0>u&&void 0===a.clockseq&&(g=g+1&16383);(0>u||k>ic)&&void 0===a.nsecs&&(p=0);if(1E4<=p)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");ic=k;jc=p;hc=g;k+=122192928E5;a=(1E4*(k&268435455)+p)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=k/4294967296*
1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>g;++g)e[d+g]=h[g];return b?b:Tc(e)};var na=sa.v4=sa,ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",la;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(la||(la={}));var Z=function(a){void 0===a&&(a=la.warn);return{setLogLevel:function(b){a=la[b]?b:la.warn},warn:function(b,d){for(var e=[],h=
2;h<arguments.length;h++)e[h-2]=arguments[h];a>=la.warn&&"undefined"!==typeof console&&(h="Snowplow: "+b,d?console.warn.apply(console,X([h+"\n",d],e,!1)):console.warn.apply(console,X([h],e,!1)))},error:function(b,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=la.error&&"undefined"!==typeof console&&(h="Snowplow: "+b+"\n",d?console.error.apply(console,X([h+"\n",d],e,!1)):console.error.apply(console,X([h],e,!1)))},debug:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];
a>=la.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+b],d,!1))},info:function(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=la.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+b],d,!1))}}}(),Vc={},Wc={};(function(){var a={rotl:function(b,d){return b<<d|b>>>32-d},rotr:function(b,d){return b<<32-d|b>>>d},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var d=0;d<b.length;d++)b[d]=
a.endian(b[d]);return b},randomBytes:function(b){for(var d=[];0<b;b--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(b){for(var d=[],e=0,h=0;e<b.length;e++,h+=8)d[h>>>5]|=b[e]<<24-h%32;return d},wordsToBytes:function(b){for(var d=[],e=0;e<32*b.length;e+=8)d.push(b[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(b){for(var d=[],e=0;e<b.length;e++)d.push((b[e]>>>4).toString(16)),d.push((b[e]&15).toString(16));return d.join("")},hexToBytes:function(b){for(var d=[],e=0;e<b.length;e+=
2)d.push(parseInt(b.substr(e,2),16));return d},bytesToBase64:function(b){for(var d=[],e=0;e<b.length;e+=3)for(var h=b[e]<<16|b[e+1]<<8|b[e+2],g=0;4>g;g++)8*e+6*g<=8*b.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],e=0,h=0;e<b.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-
1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>6-2*h);return d}};Wc=a})();var kc={utf8:{stringToBytes:function(a){return kc.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(kc.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d)&255);return b},bytesToString:function(a){for(var b=[],d=0;d<a.length;d++)b.push(String.fromCharCode(a[d]));
return b.join("")}}},Xc=kc;(function(){var a=Wc,b=Xc.utf8,d=Xc.bin,e=function(h,g){var k=a.wordsToBytes,p=h;p.constructor==String?p=b.stringToBytes(p):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(p)?p=Array.prototype.slice.call(p,0):Array.isArray(p)||(p=p.toString());h=a.bytesToWords(p);var u=8*p.length;p=[];var q=1732584193,t=-271733879,y=-1732584194,x=271733878,l=-1009589776;h[u>>5]|=128<<24-u%32;h[(u+64>>>9<<4)+15]=u;for(u=0;u<h.length;u+=16){for(var n=q,F=t,
T=y,O=x,E=l,H=0;80>H;H++){if(16>H)p[H]=h[u+H];else{var V=p[H-3]^p[H-8]^p[H-14]^p[H-16];p[H]=V<<1|V>>>31}V=(q<<5|q>>>27)+l+(p[H]>>>0)+(20>H?(t&y|~t&x)+1518500249:40>H?(t^y^x)+1859775393:60>H?(t&y|t&x|y&x)-1894007588:(t^y^x)-899497514);l=x;x=y;y=t<<30|t>>>2;t=q;q=V}q+=n;t+=F;y+=T;x+=O;l+=E}k=k.call(a,[q,t,y,x,l]);return g&&g.asBytes?k:g&&g.asString?d.bytesToString(k):a.bytesToHex(k)};e._blocksize=16;e._digestsize=20;Vc=e})();var pd=Vc,Va={},Ed=function(){return function(){this.outQueues=[];this.bufferFlushers=
[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),mb="undefined"!==typeof window?Dd():void 0;z.addGlobalContexts=function(a,b){C(b,function(d){d.core.addGlobalContexts(a)})};z.addPlugin=function(a,b){C(b,function(d){d.addPlugin(a)})};z.clearGlobalContexts=function(a){C(a,function(b){b.core.clearGlobalContexts()})};z.clearUserData=function(a,b){C(b,function(d){d.clearUserData(a)})};z.convivaAppTracker=function(a){void 0===a&&(a={});if(mb){var b=Pc("CAT","CAT","js-".concat("0.3.20"),"",mb,a);
document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&b&&b.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){b&&b.trackAjaxEvent(e)})})).observe({type:"resource",buffered:!0});return b}};z.crossDomainLinker=function(a,b){C(b,function(d){d.crossDomainLinker(a)})};z.disableAnonymousTracking=function(a,b){C(b,function(d){d.disableAnonymousTracking(a)})};z.discardBrace=function(a,b){C(b,function(d){d.discardBrace(a)})};
z.discardHashTag=function(a,b){C(b,function(d){d.discardHashTag(a)})};z.enableActivityTracking=function(a,b){C(b,function(d){d.enableActivityTracking(a)})};z.enableActivityTrackingCallback=function(a,b){C(b,function(d){d.enableActivityTrackingCallback(a)})};z.enableAnonymousTracking=function(a,b){C(b,function(d){d.enableAnonymousTracking(a)})};z.flushBuffer=function(a,b){C(b,function(d){d.flushBuffer(a)})};z.newSession=function(a){C(a,function(b){b.newSession()})};z.newTracker=function(a,b,d){void 0===
d&&(d={});if(mb)return Pc(a,a,"js-".concat("0.3.20"),b,mb,d)};z.preservePageViewId=function(a){C(a,function(b){b.preservePageViewId()})};z.removeGlobalContexts=function(a,b){C(b,function(d){d.core.removeGlobalContexts(a)})};z.setBufferSize=function(a,b){C(b,function(d){d.setBufferSize(a)})};z.setCollectorUrl=function(a,b){C(b,function(d){d.setCollectorUrl(a)})};z.setCookiePath=function(a,b){C(b,function(d){d.setCookiePath(a)})};z.setCustomTags=function(a,b){C(b,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
z.setCustomUrl=function(a,b){C(b,function(d){d.setCustomUrl(a)})};z.setDocumentTitle=function(a,b){C(b,function(d){d.setDocumentTitle(a)})};z.setOptOutCookie=function(a,b){C(b,function(d){d.setOptOutCookie(a)})};z.setReferrerUrl=function(a,b){C(b,function(d){d.setReferrerUrl(a)})};z.setUserId=function(a,b){C(b,function(d){d.setUserId(a)})};z.setUserIdFromCookie=function(a,b){C(b,function(d){d.setUserIdFromCookie(a)})};z.setUserIdFromLocation=function(a,b){C(b,function(d){d.setUserIdFromLocation(a)})};
z.setUserIdFromReferrer=function(a,b){C(b,function(d){d.setUserIdFromReferrer(a)})};z.setVisitorCookieTimeout=function(a,b){C(b,function(d){d.setVisitorCookieTimeout(a)})};z.trackCustomEvent=function(a,b){C(b,function(d){var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(h){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=
e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp):d.core.track(pb({name:a.name,data:a.data}),a.context,a.timestamp)})};z.trackPageView=function(a,b){C(b,function(d){d.trackPageView(a)})};
z.trackSelfDescribingEvent=function(a,b){C(b,function(d){d.core.track(Za({event:a.event}),a.context,a.timestamp)})};z.trackStructEvent=function(a,b){C(b,function(d){d=d.core;var e=d.track,h=a.category,g=a.action,k=a.label,p=a.property,u=a.value,q=Wa();q.add("e","se");q.add("se_ca",h);q.add("se_ac",g);q.add("se_la",k);q.add("se_pr",p);q.add("se_va",null==u?void 0:u.toString());e.call(d,q,a.context,a.timestamp)})};z.unsetCustomTags=function(a,b){C(b,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};
z.updatePageActivity=function(a){C(a,function(b){b.updatePageActivity()})};z.version="0.3.20";Object.defineProperty(z,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
