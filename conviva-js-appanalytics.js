/*!
 * Browser tracker for Conviva v1.5.2 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(Aa,Kb){"object"===typeof exports&&"undefined"!==typeof module?Kb(exports):"function"===typeof define&&define.amd?define(["exports"],Kb):(Aa="undefined"!==typeof globalThis?globalThis:Aa||self,Kb(Aa.convivaBrowserTracking={}))})(this,function(Aa){function Kb(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,e=Array(b);c<b;c++)e[c]=a[c];return e}function Yd(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function Kf(a,b){for(var c=0;c<b.length;c++){var e=
b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,Lf(e.key),e)}}function Zd(a,b,c){return b&&Kf(a.prototype,b),c&&Kf(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function Xa(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=Mf(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var e=0;b=function(){};return{s:b,n:function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}},e:function(g){throw g;
},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var d,f=!0,h=!1;return{s:function(){c=c.call(a)},n:function(){var g=c.next();return f=g.done,g},e:function(g){h=!0;d=g},f:function(){try{f||null==c.return||c.return()}finally{if(h)throw d;}}}}function nb(a,b,c){return(b=Lf(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function Nf(a,b){var c=
Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));c.push.apply(c,e)}return c}function di(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Nf(Object(c),!0).forEach(function(e){nb(a,e,c[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Nf(Object(c)).forEach(function(e){Object.defineProperty(a,e,
Object.getOwnPropertyDescriptor(c,e))})}return a}function Lf(a){a:if("object"==typeof a&&a){var b=a[Symbol.toPrimitive];if(void 0!==b){a=b.call(a,"string");if("object"!=typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"==typeof a?a:a+""}function na(a){"@babel/helpers - typeof";return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===
Symbol&&b!==Symbol.prototype?"symbol":typeof b},na(a)}function Mf(a,b){if(a){if("string"==typeof a)return Kb(a,b);var c={}.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Kb(a,b):void 0}}function $d(a,b){var c={},e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&0>b.indexOf(e)&&(c[e]=a[e]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var d=
0;for(e=Object.getOwnPropertySymbols(a);d<e.length;d++)0>b.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(a,e[d])&&(c[e[d]]=a[e[d]])}return c}function Ac(a,b,c,e){function d(f){return f instanceof c?f:new c(function(h){h(f)})}return new (c||(c=Promise))(function(f,h){function g(r){try{n(e.next(r))}catch(k){h(k)}}function m(r){try{n(e["throw"](r))}catch(k){h(k)}}function n(r){r.done?f(r.value):d(r.value).then(g,m)}n((e=e.apply(a,b||[])).next())})}function Bc(a,b){function c(n){return function(r){return e([n,
r])}}function e(n){if(f)throw new TypeError("Generator is already executing.");for(;d;)try{if(f=1,h&&(g=n[0]&2?h["return"]:n[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,n[1])).done)return g;if(h=0,g)n=[n[0]&2,g.value];switch(n[0]){case 0:case 1:g=n;break;case 4:return d.label++,{value:n[1],done:!1};case 5:d.label++;h=n[1];n=[0];continue;case 7:n=d.ops.pop();d.trys.pop();continue;default:if(!(g=d.trys,g=0<g.length&&g[g.length-1])&&(6===n[0]||2===n[0])){d=0;continue}if(3===n[0]&&
(!g||n[1]>g[0]&&n[1]<g[3]))d.label=n[1];else if(6===n[0]&&d.label<g[1])d.label=g[1],g=n;else if(g&&d.label<g[2])d.label=g[2],d.ops.push(n);else{g[2]&&d.ops.pop();d.trys.pop();continue}}n=b.call(a,d)}catch(r){n=[6,r],h=0}finally{f=g=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,h,g,m;return m={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),
m}function Ka(a,b,c){if(c||2===arguments.length)for(var e=0,d=b.length,f;e<d;e++)!f&&e in b||(f||(f=Array.prototype.slice.call(b,0,e)),f[e]=b[e]);return a.concat(f||Array.prototype.slice.call(b))}function ei(a){var b=0,c=0;var e="";var d=[];if(!a)return a;a+="";do{var f=Ya.indexOf(a.charAt(b++));var h=Ya.indexOf(a.charAt(b++));e=Ya.indexOf(a.charAt(b++));var g=Ya.indexOf(a.charAt(b++));var m=f<<18|h<<12|e<<6|g;f=m>>16&255;h=m>>8&255;m&=255;64===e?d[c++]=String.fromCharCode(f):64===g?d[c++]=String.fromCharCode(f,
h):d[c++]=String.fromCharCode(f,h,m)}while(b<a.length);e=d.join("");return function(n){return decodeURIComponent(n.split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function fi(a){a=unescape(encodeURIComponent(a));for(var b="",c=0;c<a.length;){var e=a.charCodeAt(c++),d=a.charCodeAt(c++),f=a.charCodeAt(c++),h=e>>2;e=(e&3)<<4|d>>4;d=isNaN(d)?64:(d&15)<<2|f>>6;f=isNaN(f)?64:f&63;b+=Ya.charAt(h)+Ya.charAt(e)+Ya.charAt(d)+Ya.charAt(f)}return b}
function ae(){var a={},b=[],c=[],e=[],d,f=function(h,g){null!=g&&""!==g&&(a[h]=g)};return{add:f,addDict:function(h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&f(g,h[g])},addJson:function(h,g,m){m&&Of(m)&&(h={keyIfEncoded:h,keyIfNotEncoded:g,json:m},c.push(h),b.push(h))},addContextEntity:function(h){e.push(h)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(h){d=h},build:function(){null===d||void 0===d?void 0:d(this,c,e);return a}}}function gi(a){return function(b,
c,e){for(var d=function(n,r,k){n=JSON.stringify(n);if(a){k=b.add;if(n){var p=0,t=0,q=[];if(n){n=unescape(encodeURIComponent(n));do{var w=n.charCodeAt(p++);var v=n.charCodeAt(p++);var u=n.charCodeAt(p++);var A=w<<16|v<<8|u;w=A>>18&63;v=A>>12&63;u=A>>6&63;A&=63;q[t++]=Ya.charAt(w)+Ya.charAt(v)+Ya.charAt(u)+Ya.charAt(A)}while(p<n.length);p=q.join("");n=n.length%3;n=(n?p.slice(0,n-3):p)+"===".slice(n||3)}n=n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}k.call(b,r,n)}else b.add(k,n)},f=function(n,
r){if(!n){var k=b.getPayload();if(a?k.cx:k.co){n=JSON;var p=n.parse;if(a){if(k=k.cx){switch(4-k.length%4){case 2:k+="==";break;case 3:k+="="}k=k.replace(/-/g,"+").replace(/_/g,"/");k=ei(k)}}else k=k.co;n=p.call(n,k)}else n=void 0}n?n.dt=n.dt.concat(r.dt):n=r;return n},h=void 0,g=0;g<c.length;g++){var m=c[g];"cx"===m.keyIfEncoded?h=f(h,m.json):d(m.json,m.keyIfEncoded,m.keyIfNotEncoded)}c.length=0;e.length&&(c={sc:"sp/ctx/1-0-0",dt:Ka([],e,!0)},h=f(h,c),e.length=0);h&&d(h,"cx","co")}}function Of(a){if(!Pf(a))return!1;
for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function Pf(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function hi(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(c){for(var e=[],d=[],f=0;f<c.length;f++){var h=c[f];Qf(h)?e.push(h):ec(h)&&d.push(h)}a=a.concat(d);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},
removeGlobalContexts:function(c){for(var e=function(f){Qf(f)?b=b.filter(function(h){return JSON.stringify(h)!==JSON.stringify(f)}):ec(f)&&(a=a.filter(function(h){return JSON.stringify(h)!==JSON.stringify(f)}))},d=0;d<c.length;d++)e(c[d])},getApplicableContexts:function(c){a:{var e=0;for(var d=c.getJson();e<d.length;e++){var f=d[e];if("ue_px"===f.keyIfEncoded&&"object"===na(f.json.data)&&(f=f.json.data.schema,"string"==typeof f)){e=f;break a}}e=""}d=c.getPayload().e;f="string"===typeof d?d:"";d=[];
var h=be(a,c,f,e);d.push.apply(d,h);c=ii(b,c,f,e);d.push.apply(d,c);return d}}}function ji(a){return{addPluginContexts:function(b){var c=b?Ka([],b,!0):[];a.forEach(function(e){try{e.contexts&&c.push.apply(c,e.contexts())}catch(d){ha.error("Error adding plugin contexts",d)}});return c}}}function Rf(a){for(var b,c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];return null!==(b=null===a||void 0===a?void 0:a.map(function(d){if("function"===typeof d)try{return d.apply(void 0,c)}catch(f){}else return d}).filter(Boolean))&&
void 0!==b?b:[]}function ki(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,c=0;for(a=a.slice(2);c<a.length;c++)if("*"===a[c])b=!0;else if(b)return!1;return!0}return 2==a.length?!0:!1}function Sf(a){return(a=a.split("."))&&1<a.length?ki(a):!1}function Tf(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&Sf(a[1]))return a.slice(1,6)}function ce(a){if(a=
Tf(a)){var b=a[0];return 5===a.length&&Sf(b)}return!1}function li(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function Uf(a){return li(a)?a.every(function(b){return ce(b)}):"string"===typeof a?ce(a):!1}function Cc(a){return Of(a)&&"sc"in a&&"dt"in a?"string"===typeof a.sc&&"object"===na(a.dt):!1}function mi(a){var b=0;if(null!=a&&"object"===na(a)&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(Uf(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,
"reject"))if(Uf(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function gd(a){return"function"===typeof a&&1>=a.length}function ec(a){return gd(a)||Cc(a)}function Vf(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?gd(a[0])&&a[1].every(ec):gd(a[0])&&ec(a[1]):!1}function Wf(a){return Array.isArray(a)&&2===a.length?mi(a[0])?Array.isArray(a[1])?a[1].every(ec):ec(a[1]):!1:!1}function Qf(a){return Vf(a)||Wf(a)}function ni(a,b){var c=0,e=0,d=a.accept;Array.isArray(d)?a.accept.some(function(f){return hd(f,
b)})&&e++:"string"===typeof d&&hd(d,b)&&e++;d=a.reject;Array.isArray(d)?a.reject.some(function(f){return hd(f,b)})&&c++:"string"===typeof d&&hd(d,b)&&c++;return 0<e&&0===c?!0:!1}function hd(a,b){if(!ce(a))return!1;a=Tf(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!oi(a[0],b[0]))return!1;for(var c=1;5>c;c++)if(!Xf(a[c],b[c]))return!1;return!0}return!1}function oi(a,b){b=b.split(".");a=
a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var c=0;c<a.length;c++)if(!Xf(b[c],a[c]))return!1;return!0}return!1}function Xf(a,b){return a&&b&&"*"===a||a===b}function Yf(a){return Array.isArray(a)?a:[a]}function be(a,b,c,e){var d;a=Yf(a).map(function(f){a:if(Cc(f))f=[f];else{if(gd(f)){b:{var h=void 0;try{var g={event:b.getPayload(),eventType:c,eventSchema:e};h=f(g);if(Array.isArray(h)&&h.every(Cc)||Cc(h)){var m=h;break b}m=void 0;break b}catch(n){}m=void 0}if(Cc(m)){f=[m];break a}else if(Array.isArray(m)){f=
m;break a}}f=void 0}if(f&&0!==f.length)return f});return(d=[]).concat.apply(d,a.filter(function(f){return null!=f&&f.filter(Boolean)}))}function ii(a,b,c,e){var d;a=Yf(a).map(function(f){a:{if(Vf(f)){var h=f[0],g=!1;try{var m={event:b.getPayload(),eventType:c,eventSchema:e};g=h(m)}catch(n){g=!1}if(!0===g){f=be(f[1],b,c,e);break a}}else if(Wf(f)&&ni(f[0],e)){f=be(f[1],b,c,e);break a}f=[]}if(f&&0!==f.length)return f});return(d=[]).concat.apply(d,a.filter(function(f){return null!=f&&f.filter(Boolean)}))}
function pi(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function qi(a){void 0===a&&(a={});var b=a.base64,c=a.corePlugins,e=null!==c&&void 0!==c?c:[];b=function(f,h,g){function m(q,w){q=r.getApplicableContexts(q);var v=[];w&&w.length&&v.push.apply(v,w);q&&q.length&&v.push.apply(v,q);return v}var n=ji(h),r=hi(),k=f,p={},t=null;return{track:function(q,w,v){q.withJsonProcessor(gi(k));
q.add("eid",yb.v4());q.addDict(p);v=pi(v);q.add(v.type,v.value.toString());w=m(q,n.addPluginContexts(w));w=w&&w.length?{sc:"sp/ctx/1-0-0",dt:w}:void 0;void 0!==w&&q.addJson("cx","co",w);h.forEach(function(A){try{A.beforeTrack&&A.beforeTrack(q)}catch(F){ha.error("Plugin beforeTrack",F)}});"function"===typeof g&&g(q);var u=q.build();h.forEach(function(A){try{A.afterTrack&&A.afterTrack(u)}catch(F){ha.error("Plugin afterTrack",F)}});return u},addPayloadPair:function(q,w){p[q]=w},configuration:a,getConfig:function(){return a},
setConfig:function(q){q&&("undefined"!==typeof q.base64&&(k=a.base64=q.base64),"undefined"!==typeof q.lifecycleAutotracking&&(a.lifecycleAutotracking=q.lifecycleAutotracking),"undefined"!==typeof q.cacheRefreshInterval&&(a.cacheRefreshInterval=q.cacheRefreshInterval),"undefined"!==typeof q.exceptionAutotracking&&(a.exceptionAutotracking=q.exceptionAutotracking),"undefined"!==typeof q.enablePeriodicHeartbeat&&(a.enablePeriodicHeartbeat=q.enablePeriodicHeartbeat),"undefined"!==typeof q.periodicHeartbeatInterval&&
(a.periodicHeartbeatInterval=q.periodicHeartbeatInterval),"undefined"!==typeof q.enc&&(a.enc=q.enc),"undefined"!==typeof q.mend&&(a.mend=q.mend),"undefined"!==typeof q.maxLocalStorageQueueSize&&(a.maxLocalStorageQueueSize=q.maxLocalStorageQueueSize),"undefined"!==typeof q.maxGetBytes&&(a.maxGetBytes=q.maxGetBytes),"undefined"!==typeof q.bufferSize&&(a.bufferSize=q.bufferSize),"undefined"!==typeof q.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=q.customEventTrackingConfiguration),
"undefined"!==typeof q.networkRequestTrackingConfiguration&&(a.networkRequestTrackingConfiguration=q.networkRequestTrackingConfiguration),"undefined"!==typeof q.traceparentconfig&&(a.traceparentconfig=q.traceparentconfig),"undefined"!==typeof q.baggageConfiguration&&(a.baggageConfiguration=q.baggageConfiguration),"undefined"!==typeof q.metaTagsTrackingConfiguration&&(a.metaTagsTrackingConfiguration=q.metaTagsTrackingConfiguration),"undefined"!==typeof q.evtStreamTrackingConfiguration&&(a.evtStreamTrackingConfiguration=
q.evtStreamTrackingConfiguration),"undefined"!==typeof q.performanceContextConfig&&(a.performanceContextConfig=q.performanceContextConfig),"undefined"!==typeof q.configurationVersion&&(a.configurationVersion=q.configurationVersion),"undefined"!==typeof q.catRcLastUpdatedTs&&(a.catRcLastUpdatedTs=q.catRcLastUpdatedTs),"undefined"!==typeof q.endpoint&&(a.endpoint=q.endpoint),"undefined"!==typeof q.controlIngestConfig&&(a.controlIngestConfig=q.controlIngestConfig),"undefined"!==typeof q.applicationContext&&
(a.applicationContext=q.applicationContext),"undefined"!==typeof q.emitterConfiguration&&(a.emitterConfiguration=q.emitterConfiguration),"undefined"!==typeof q.di&&(a.di=q.di),"undefined"!==typeof q.clickcc&&(a.clickcc=q.clickcc),"undefined"!==typeof q.collectionRateLimit&&(a.collectionRateLimit=q.collectionRateLimit),a.pageUrlTrackingConfig="undefined"!==typeof q.pageUrlTrackingConfig?q.pageUrlTrackingConfig:null,a.sessionReplayConfiguration="undefined"!==typeof q.sessionReplayConfiguration?q.sessionReplayConfiguration:
null,a.valueProbes="undefined"!==typeof q.valueProbes?q.valueProbes:null,a.webVitals="undefined"!==typeof q.webVitals?q.webVitals:null)},getBase64Encoding:function(){return k},setBase64Encoding:function(q){k=q},addPayloadDict:function(q){for(var w in q)Object.prototype.hasOwnProperty.call(q,w)&&(p[w]=q[w])},resetPayloadPairs:function(q){p=Pf(q)?q:{}},setTrackerVersion:function(q){p.tv=q},setTrackerNamespace:function(q){p.tna=q},setAppId:function(q){p.aid=q},setPlatform:function(q){p.p=q},setUserId:function(q){p.uid=
q},setConversationId:function(q){t=q},getConversationId:function(){return t},setScreenResolution:function(q,w){p.res=q+"x"+w},setViewport:function(q,w){p.vp=q+"x"+w},setColorDepth:function(q){p.cd=q},setTimezone:function(q){p.tz=q},setLang:function(q){p.lang=q},setIpAddress:function(q){p.ip=q},setUseragent:function(q){p.ua=q},addGlobalContexts:function(q){r.addGlobalContexts(q)},clearGlobalContexts:function(){r.clearGlobalContexts()},removeGlobalContexts:function(q){r.removeGlobalContexts(q)}}}(null!==
b&&void 0!==b?b:!0,e,a.callback);var d=N(N({},b),{addPlugin:function(f){var h,g;f=f.plugin;e.push(f);null===(h=f.logger)||void 0===h?void 0:h.call(f,ha);null===(g=f.activateCorePlugin)||void 0===g?void 0:g.call(f,d)}});null===e||void 0===e?void 0:e.forEach(function(f){var h,g;null===(h=f.logger)||void 0===h?void 0:h.call(f,ha);null===(g=f.activateCorePlugin)||void 0===g?void 0:g.call(f,d)});return d}function Lb(a){var b=a.event;a=b.sc;var c=b.dt;b=ae();a={sc:"sp/ue/1-0-0",dt:{sc:a,dt:c}};b.add("e",
"ue");b.addJson("ue_px","ue_pr",a);return b}function zb(a){return Lb({event:{sc:"cv/re/1-0-1",dt:fc({name:a.name,data:a.data})}})}function ri(a){return Lb({event:{sc:"cv/ve/1-0-6",dt:fc({name:a.name,sid:a.sid,iid:a.iid,clid:a.clid,st:a.st,sst:a.sst,an:a.an,cl:a.cl,lv:a.lv,pn:a.pn,vid:a.vid,fw:a.fw,fwv:a.fwv,mn:a.mn,mv:a.mv,url:a.url,tags:a.tags,cen:a.cen,ced:a.ced,oldsc:a.oldsc,newsc:a.newsc,err:a.err,br:a.br,ft:a.ft,avgbr:a.avgbr})}})}function fc(a,b){void 0===b&&(b={});var c={},e;for(e in a)if(b[e]||
null!==a[e]&&"undefined"!==typeof a[e])c[e]=a[e];return c}function gc(a){for(var b=a.length;0<=--b;)a[b]=0}function de(a,b,c,e,d){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=e;this.max_length=d;this.has_stree=a&&a.length}function ee(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function fb(a,b,c,e,d){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=e;this.func=d}function si(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=
this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=id;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=
this.ins_h=0;this.dyn_ltree=new Uint16Array(1146);this.dyn_dtree=new Uint16Array(122);this.bl_tree=new Uint16Array(78);Ab(this.dyn_ltree);Ab(this.dyn_dtree);Ab(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new Uint16Array(16);this.heap=new Uint16Array(573);Ab(this.heap);this.heap_max=this.heap_len=0;this.depth=new Uint16Array(573);Ab(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.sym_end=this.sym_next=this.lit_bufsize=this.sym_buf=
0}function Dc(a){a=this.options=jd.assign({level:ti,method:ui,chunkSize:16384,windowBits:15,memLevel:8,strategy:vi},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Zf;this.strm.avail_out=0;var b=Ec.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(b!==kd)throw Error(Mb[b]);a.header&&Ec.deflateSetHeader(this.strm,a.header);if(a.dictionary){a=
"string"===typeof a.dictionary?Fc.string2buf(a.dictionary):"[object ArrayBuffer]"===$f.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary;b=Ec.deflateSetDictionary(this.strm,a);if(b!==kd)throw Error(Mb[b]);this._dict_set=!0}}function fe(a,b){b=new Dc(b);b.push(a,!0);if(b.err)throw b.msg||Mb[b.err];return b.result}function wi(){this.strm=null;this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=
this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function Gc(a){var b=this.options=jd.assign({chunkSize:65536,windowBits:15,to:""},a||{});b.raw&&0<=b.windowBits&&16>b.windowBits&&(b.windowBits=-b.windowBits,0===b.windowBits&&
(b.windowBits=-15));!(0<=b.windowBits&&16>b.windowBits)||a&&a.windowBits||(b.windowBits+=32);15<b.windowBits&&48>b.windowBits&&0===(b.windowBits&15)&&(b.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Zf;this.strm.avail_out=0;a=ob.inflateInit2(this.strm,b.windowBits);if(a!==Hc)throw Error(Mb[a]);this.header=new xi;ob.inflateGetHeader(this.strm,this.header);if(b.dictionary&&("string"===typeof b.dictionary?b.dictionary=Fc.string2buf(b.dictionary):"[object ArrayBuffer]"===
ag.call(b.dictionary)&&(b.dictionary=new Uint8Array(b.dictionary)),b.raw&&(a=ob.inflateSetDictionary(this.strm,b.dictionary),a!==Hc)))throw Error(Mb[a]);}function ge(a,b){b=new Gc(b);b.push(a);if(b.err)throw b.msg||Mb[b.err];return b.result}function he(a){return a&&"string"===typeof a.valueOf()?!0:!1}function Ic(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function ie(a){if(!he(a)){a=a.text||"";var b=document.getElementsByTagName("title");b&&
null!=b[0]&&(a=b[0].text)}return a}function ld(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function bg(a){var b=a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function je(a){var b=window,c=Jc("referrer",b.location.href)||Jc("referer",b.location.href);if(c)return c;if(a)return a;try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function Za(a,b,c,
e){if("undefined"===typeof a)return!1;if(a.addEventListener)return a.addEventListener(b,c,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,c);a["on"+b]=c}function Jc(a,b){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function md(a,b,c){void 0===c&&(c=63072E3);try{var e=window.localStorage,d=Date.now()+1E3*c;e.setItem("".concat(a,".expires"),d.toString());e.setItem(a,b);return!0}catch(f){return!1}}function cg(a){try{var b=window.localStorage;
b.removeItem(a);b.removeItem(a+".expires");return!0}catch(c){return!1}}function yi(a,b){for(var c=window.location.hostname,e="_cnv_root_domain_test_"+(new Date).getTime(),d="_test_value_"+(new Date).getTime(),f=c.split("."),h=f.length-1;0<=h;){var g=f.slice(h,f.length).join(".");pb(e,d,0,"/",g,a,b);if(pb(e)===d){hc(e,g,a,b);c=document.cookie.split("; ");e=[];for(d=0;d<c.length;d++)"_cnv_root_domain_test_"===c[d].substring(0,22)&&e.push(c[d]);c=e;for(e=0;e<c.length;e++)hc(c[e],g,a,b);return g}--h}return c}
function hc(a,b,c,e){return pb(a,"",-1,"/",b,c,e)}function pb(a,b,c,e,d,f,h){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(c?"; Expires="+(new Date(+new Date+1E3*c)).toUTCString():"")+(e?"; Path="+e:"")+(d?"; Domain="+d:"")+(f?"; SameSite="+f:"")+(h?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function dg(a){try{var b=null===window||void 0===window?void 0:window.localStorage;return b?(b.removeItem(a),
!0):!1}catch(c){return!1}}function zi(a,b){return Ka(Ka([],a,!0),b,!0).reduce(function(c,e){var d=c.find(function(f){return f.key===e.key});d?e.condition&&(d.condition=Ka(Ka([],d.condition||[],!0),e.condition,!0)):c.push(N({},e));return c},[])}function Ai(a){try{if("undefined"===typeof a.sel)return nd(),E.SAMPLING_MODES.RCFG;var b=a.sel.pct;if("number"==typeof b&&100>b&&0<b&&0==b%1){if("undefined"!==typeof window&&"undefined"!==typeof window.localStorage){var c=localStorage.getItem(E.SAMPLING_STORAGE_RANDOM_NUMBER_KEY);
if("undefined"!==typeof c&&null!==c)return parseFloat(c)<=b?od(a,E.SAMPLING_ACTION.SAMPLED):od(a,E.SAMPLING_ACTION.NON_SAMPLED);var e=100*Math.random();localStorage.setItem(E.SAMPLING_STORAGE_RANDOM_NUMBER_KEY,e.toString());return e<b?od(a,E.SAMPLING_ACTION.SAMPLED):od(a,E.SAMPLING_ACTION.NON_SAMPLED)}return E.SAMPLING_MODES.NONE}if("number"==typeof b&&0===b)return nd(),E.SAMPLING_MODES.NONE;nd();return E.SAMPLING_MODES.RCFG}catch(d){}return E.SAMPLING_MODES.RCFG}function nd(){"undefined"!==typeof window&&
"undefined"!==typeof window.localStorage&&(localStorage.removeItem(E.SAMPLING_STORAGE_RANDOM_NUMBER_KEY),localStorage.removeItem(E.SAMPLING_MODE_STORAGE_KEY))}function od(a,b){return"undefined"!==typeof a.act&&"undefined"!==typeof a.act[b]&&(a=a.act[b],"undefined"!==typeof a)?a:E.DEFAULT_SAMPLING_ACTION[b]}function xa(a,b){return a.length<=b?a:a.slice(0,b-3)+"..."}function eg(a,b,c,e,d){var f=[ma.request_body,ma.response_body,ma.request_headers,ma.response_headers,ma.request_query],h={};"number"===
typeof d&&(ic=1024*d);if(b&&0<b.length)for(d=0;d<b.length;d++){var g=b[d],m=g.conditions;g=$d(g,["conditions"]);try{if(fg(a,m)){m=0;for(var n=Object.entries(a);m<n.length;m++){var r=n[m],k=r[0],p=r[1];f.includes(k)||(h[k]=p)}m=0;for(var t=Object.entries(g);m<t.length;m++){var q=t[m];k=q[0];p=q[1];try{if(p&&0<g[k].length){var w=!1;if(k===ma.response_headers||k===ma.request_headers)w=!0;if(k===ma.request_body){var v=void 0,u=void 0,A=void 0,F=void 0,B=void 0,G=void 0,D=void 0,z=c,J=a;void 0===z&&(z=
{});var K=pd(null===(D=null===z||void 0===z?void 0:z.requestDetails)||void 0===D?void 0:D.headers);if("undefined"!==typeof K&&(K.toLowerCase().includes("text/plain")||K.toLowerCase().includes("json")||K.toLowerCase().includes("text/javascript")||K.toLowerCase().includes("application/javascript")||K.toLowerCase().includes("text/html"))||"undefined"===typeof K)try{if("string"===typeof(null===(G=null===z||void 0===z?void 0:z.requestDetails)||void 0===G?void 0:G.body)&&(null===(B=null===z||void 0===z?
void 0:z.requestDetails)||void 0===B?void 0:B.body.length)<=ic)try{J[ma.request_body]=JSON.parse(null===(F=null===z||void 0===z?void 0:z.requestDetails)||void 0===F?void 0:F.body)}catch(qa){}else"object"===na(null===(A=null===z||void 0===z?void 0:z.requestDetails)||void 0===A?void 0:A.body)&&JSON.stringify(null===(u=null===z||void 0===z?void 0:z.requestDetails)||void 0===u?void 0:u.body).length<=ic&&(J[ma.request_body]=null===(v=null===z||void 0===z?void 0:z.requestDetails)||void 0===v?void 0:v.body)}catch(qa){}}if(k===
ma.response_body){var Y=J=z=D=G=B=F=A=u=v=void 0,V=void 0,Z=void 0,M=void 0,C=c,X=a;void 0===C&&(C={});a:{var H=null===(M=null===C||void 0===C?void 0:C.responseDetails)||void 0===M?void 0:M.headers;try{M=void 0;"undefined"!=typeof H&&null!==H&&(M=H["content-length"]||H["Content-Length"]||H["Content-length"]);var fa="undefined"==typeof M||null===M||isNaN(M)?M:Number(M);break a}catch(qa){}fa=void 0}var ia=pd(null===(Z=null===C||void 0===C?void 0:C.responseDetails)||void 0===Z?void 0:Z.headers);if("undefined"!==
typeof ia&&(ia.toLowerCase().includes("text/plain")||ia.toLowerCase().includes("json")||ia.toLowerCase().includes("text/javascript")||ia.toLowerCase().includes("application/javascript")||ia.toLowerCase().includes("text/html")))if("undefined"!==typeof fa&&fa<=ic)if("string"===typeof(null===(V=null===C||void 0===C?void 0:C.responseDetails)||void 0===V?void 0:V.body))try{X[ma.response_body]=JSON.parse(null===(Y=null===C||void 0===C?void 0:C.responseDetails)||void 0===Y?void 0:Y.body)}catch(qa){}else"object"===
na(null===(J=null===C||void 0===C?void 0:C.responseDetails)||void 0===J?void 0:J.body)&&(X[ma.response_body]=null===(z=null===C||void 0===C?void 0:C.responseDetails)||void 0===z?void 0:z.body);else if("undefined"===typeof fa)try{if("string"===typeof(null===(D=null===C||void 0===C?void 0:C.responseDetails)||void 0===D?void 0:D.body)&&(null===(B=null===(G=null===C||void 0===C?void 0:C.responseDetails)||void 0===G?void 0:G.body)||void 0===B?void 0:B.length)<=ic)try{X[ma.response_body]=JSON.parse(null===
(F=null===C||void 0===C?void 0:C.responseDetails)||void 0===F?void 0:F.body)}catch(qa){}else"object"===na(null===(A=null===C||void 0===C?void 0:C.responseDetails)||void 0===A?void 0:A.body)&&JSON.stringify(null===(u=null===C||void 0===C?void 0:C.responseDetails)||void 0===u?void 0:u.body).length<=ic&&(X[ma.response_body]=null===(v=null===C||void 0===C?void 0:C.responseDetails)||void 0===v?void 0:v.body)}catch(qa){}}k===ma.request_query&&ke(a,e);var ta=Bi(a[k],g[k],w);0!==Object.keys(ta).length&&(h[k]=
ta)}}catch(qa){h[k]=void 0}}return h}}catch(qa){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(qa))}}h=N({},a);for(a=0;a<f.length;a++)b=f[a],"undefined"!==typeof h&&null!==h&&h.hasOwnProperty(b)&&delete h[b];return h}function Ci(a,b,c){var e,d,f,h,g,m,n;if(a&&0<a.length){var r={targetUrl:null===(e=null===b||void 0===b?void 0:b.requestDetails)||void 0===e?void 0:e.url};for(e=0;e<a.length;e++){var k=a[e],p=k.conditions;k=$d(k,["conditions"]);try{if(fg(r,p)){p=
0;for(var t=Object.entries(k);p<t.length;p++){var q=t[p],w=q[0],v=q[1];try{if(v&&0<k[w].length){if(w===ma.response_headers&&(r[w]=null===(d=null===b||void 0===b?void 0:b.responseDetails)||void 0===d?void 0:d.headers,Array.isArray(v)))for(var u=0,A=v;u<A.length;u++){var F=A[u],B=Nb(r[w],F);if(null!==B&&void 0!==B)return B}if(w===ma.request_headers&&(r[w]=null===(f=null===b||void 0===b?void 0:b.requestDetails)||void 0===f?void 0:f.headers,Array.isArray(v)))for(u=0,A=v;u<A.length;u++)if(F=A[u],B=Nb(r[w],
F),null!==B&&void 0!==B)return B;if(w===ma.request_body){var G=pd(null===(h=null===b||void 0===b?void 0:b.requestDetails)||void 0===h?void 0:h.headers);if("undefined"!==typeof G&&(G.toLowerCase().includes("text/plain")||G.toLowerCase().includes("json")||G.toLowerCase().includes("text/javascript")||G.toLowerCase().includes("application/javascript")||G.toLowerCase().includes("text/html"))||"undefined"===typeof G)if(r[w]=null===(g=null===b||void 0===b?void 0:b.requestDetails)||void 0===g?void 0:g.body,
Array.isArray(v))for(u=0,A=v;u<A.length;u++)if(F=A[u],B=Nb(r[w],F),null!==B&&void 0!==B)return B}if(w===ma.response_body){var D=pd(null===(m=null===b||void 0===b?void 0:b.responseDetails)||void 0===m?void 0:m.headers);if("undefined"!==typeof D&&(D.toLowerCase().includes("text/plain")||D.toLowerCase().includes("json")||D.toLowerCase().includes("text/javascript")||D.toLowerCase().includes("application/javascript")||D.toLowerCase().includes("text/html"))&&(r[w]=null===(n=null===b||void 0===b?void 0:
b.responseDetails)||void 0===n?void 0:n.body,Array.isArray(v)))for(u=0,A=v;u<A.length;u++)if(F=A[u],B=Nb(r[w],F),null!==B&&void 0!==B)return B}if(w===ma.request_query&&(ke(r,c),Array.isArray(v)))for(u=0,A=v;u<A.length;u++)if(F=A[u],B=Nb(r[w],F),null!==B&&void 0!==B)return B}}catch(z){console.warn("Conviva App Tracker: Error in extracting attributes nwreqConfig ".concat(z))}}}}catch(z){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(z))}}}}function Di(a,b,c){try{if("string"===
typeof c&&"string"===typeof a&&"*"===c.trim())return!0;switch(b){case "==":case "equal":return a===c;case "!=":return a!==c;case ">":return a>c;case "<":return a<c;case ">=":return a>=c;case "<=":return a<=c;case "contains":return""!==c&&"string"===typeof a&&"string"===typeof c&&-1!==a.toLowerCase().indexOf(c.toLowerCase());default:return!1}}catch(e){return console.warn("Conviva App Tracker: Error in Compare values nwreq ".concat(e)),!1}}function fg(a,b){try{for(var c=0;c<b.length;c++){var e=b[c],
d=!1;if(0<Object.keys(e).length)for(var f=0,h=Object.entries(e);f<h.length;f++){var g=h[f],m=g[1],n=a[g[0]];if(0<m.length){for(var r=0,k=0,p=m;k<p.length;k++){var t=p[k],q="contains",w=t;if("object"===na(t)&&t.length)q=t[1],w=t[0];else if("boolean"===typeof t||null===t)q="equal",w=t;if(Di(n,q,w)){d=!0;break}else if(d=!1,r+1===m.length)break;r++}if(!1===d)break}}if(d)return!0}}catch(v){console.warn("Conviva App Tracker: Error in Applying nwreqConfig ".concat(v))}return!1}function Bi(a,b,c){var e={};
try{for(var d=0;d<b.length;d++){var f=b[d],h=a,g=e;c&&(f=f.toLowerCase(),h=h&&Object.entries(h).reduce(function(k,p){var t=p[1];k[p[0].toLowerCase()]=t;return k},{}));for(var m=f.split("."),n=0;n<m.length;n++){var r=m[n];if("undefined"!==typeof h&&null!==h&&h.hasOwnProperty(r))n===m.length-1?g[r]=h[r]:(g[r]=g[r]||{},h=h[r],g=g[r]);else break}}}catch(k){console.warn("Conviva App Tracker: Error in filtering schema object nwreq ".concat(k))}return e}function ke(a,b){try{var c=(null===a||void 0===a?void 0:
a.targetUrl)||(null===a||void 0===a?void 0:a.url);if(c&&"string"===typeof c&&c.includes("?")){var e=void 0;try{var d=c.indexOf("?");if(-1===d)return;var f=c.indexOf("#",d),h=-1!==f?c.substring(d+1,f):c.substring(d+1);if(!h||h.length>(b||10240))return;e="undefined"!==typeof URLSearchParams?new URLSearchParams(h):null}catch(t){console.warn("Conviva App Tracker: Error creating URLSearchParams: ".concat(t));return}var g={};if(e instanceof URLSearchParams)e.forEach(function(t,q){g[q]=t});else{b=0;for(var m=
c.substring(c.indexOf("?")+1).split("&");b<m.length;b++){var n=m[b];if(n){var r=n.indexOf("="),k=0<r?decodeURIComponent(n.substring(0,r)):decodeURIComponent(n);if(k){var p=0<r&&r<n.length-1?decodeURIComponent(n.substring(r+1)):"";g[k]=p}}}}0<Object.keys(g).length&&(a[ma.request_query]=g)}}catch(t){console.warn("Conviva App Tracker: Error parsing request query parameters: ".concat(t))}}function le(a,b,c,e,d,f){for(var h={},g=0;g<b.length;g++){var m=b[g],n=m.req,r=m.opt,k=m.smb;m=m.rqq;try{var p=e([{req:n,
opt:r}],[],a,c);if(null===p||void 0===p?0:p.result){if(k&&Array.isArray(k)){var t=gg(a,k,!1,f);0<Object.keys(t).length&&Object.assign(h,t)}if(m&&Array.isArray(m)&&(ke(a,d),t=gg(a[ma.request_query],m,!1,f),0<Object.keys(t).length)){if(void 0===h[ma.request_query]||null===h[ma.request_query])h[ma.request_query]={};Object.assign(h[ma.request_query],t)}return h}}catch(q){console.warn("Conviva App Tracker: Error in collecting conditional SSE attributes ".concat(q))}}return h}function gg(a,b,c,e){void 0===
e&&(e=!1);if(e)return Ei(a,b,c);e={};try{for(var d=0;d<b.length;d++){var f=b[d],h=a,g=e;c&&(f=f.toLowerCase(),h=h&&Object.entries(h).reduce(function(k,p){var t=p[1];k[p[0].toLowerCase()]=t;return k},{}));for(var m=f.split("."),n=0;n<m.length;n++){var r=m[n];if("undefined"!==typeof h&&null!==h&&h.hasOwnProperty(r))if(n===m.length-1)g[r]=h[r];else{g[r]=g[r]||{};h=h[r];if("string"===typeof h&&n<m.length-1)try{h=JSON.parse(h)}catch(k){}g=g[r]}else break}}}catch(k){console.warn("Conviva App Tracker: Error in filtering SSE object ".concat(k))}return e}
function Ei(a,b,c){var e={};try{for(var d=new Map,f=new Set,h=0;h<b.length;h++){var g=b[h];c&&(g=g.toLowerCase());var m=g.split(".");if(1===m.length)f.add(m[0]);else if(2===m.length&&!isNaN(Number(m[1]))){var n=m[0],r=Number(m[1]),k="".concat(n,".").concat(r);d.has(k)||d.set(k,[]);d.get(k).push("")}else if(1<m.length&&!isNaN(Number(m[1]))){n=m[0];r=Number(m[1]);var p=m.slice(2);k="".concat(n,".").concat(r);d.has(k)||d.set(k,[]);d.get(k).push(p.join("."))}}b=0;for(var t=Array.from(f);b<t.length;b++){var q=
t[b],w=a;c&&(w=w&&Object.entries(w).reduce(function(J,K){var Y=K[1];J[K[0].toLowerCase()]=Y;return J},{}));"undefined"!==typeof w&&null!==w&&w.hasOwnProperty(q)&&(e[q]=w[q])}f=0;for(var v=Array.from(d.entries());f<v.length;f++){var u=v[f];k=u[0];var A=u[1],F=k.split(".");n=F[0];r=Number(F[1]);w=a;d=e;c&&(w=w&&Object.entries(w).reduce(function(J,K){var Y=K[1];J[K[0].toLowerCase()]=Y;return J},{}));if("undefined"!==typeof w&&null!==w&&w.hasOwnProperty(n)&&(w=w[n],Array.isArray(d[n])||(d[n]=[]),d=d[n],
Array.isArray(w)&&void 0!==w[r])){for(w=w[r];d.length<=r;)d.push(null);var B=d[r]||{};t=0;for(q=A;t<q.length;t++){var G=q[t];if(""===G)B=w;else for(p=G.split("."),b=w,h=B,g=0;g<p.length;g++){var D=p[g];if("undefined"!==typeof b&&null!==b&&b.hasOwnProperty(D))if(g===p.length-1){var z=b[D];if("string"===typeof z)try{z=JSON.parse(z)}catch(J){}h[D]=z}else{if(isNaN(Number(p[g+1]))){if(h[D]&&"object"===na(h[D])||(h[D]={}),b=b[D],"string"===typeof b&&g<p.length-1)try{b=JSON.parse(b)}catch(J){}}else if(h[D]&&
"object"===na(h[D])||(h[D]={}),b=b[D],"string"===typeof b&&g<p.length-1)try{b=JSON.parse(b)}catch(J){}h=h[D]}else break}}d[r]=B}}}catch(J){console.warn("Conviva App Tracker: Error in filtering SSE ArrayBuffer object ".concat(J))}return e}function Nb(a,b){return b?b.split(".").reduce(function(c,e){if(null!=c){if("string"===typeof c)try{c=JSON.parse(c)}catch(d){}e=/^\d+$/.test(e)?Number(e):e;return null===c||void 0===c?void 0:c[e]}},a):a}function hg(a,b,c){if("translate.googleusercontent.com"===a)""===
c&&(c=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?Jc("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=ld(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=ld(b);return[a,b,c]}function Fi(a,b,c,e){var d=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,d,e,d,"",c];a[6]&&"undefined"!==a[6]||(a[6]=yb.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]=
"");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var f=function(h,g){h=parseInt(h);return isNaN(h)?g:h};b=function(h){return h?f(h,void 0):void 0};return[a[0],a[1],f(a[2],d),f(a[3],e),f(a[4],d),b(a[5]),a[6],a[7],a[8],b(a[9])]}function Kc(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=b;b=yb.v4();a[6]=b;a[8]="";a[9]=void 0;return b}function me(a){a[4]=Math.round((new Date).getTime()/1E3)}function qd(a){return{activateLCPObserver:function(){try{PerformanceObserver&&
(new PerformanceObserver(function(b){try{b.getEntries().forEach(function(c){var e;if("largest-contentful-paint"===c.entryType){var d=null===performance||void 0===performance?void 0:performance.getEntriesByType("navigation"),f=void 0;d&&0<(null===d||void 0===d?void 0:d.length)&&(f=null===(e=d[0])||void 0===e?void 0:e.activationStart);va=N(N({},c.toJSON()),{performanceNavigationActivationStart:null!==f&&void 0!==f?f:0})}})}catch(c){console.warn("convivaAppTracker error in conviva lcp observer "+c)}})).observe({type:"largest-contentful-paint",
buffered:!0})}catch(b){console.warn("convivaAppTracker conviva_lcp failed "+b)}},contexts:function(){try{switch(a){case E.PERFORMANCE_CONTEXT.DISABLED:return[];case E.PERFORMANCE_CONTEXT.PERFORMANCE_NAVIGATION_TIMING:return Gi();default:var b=window,c=b.performance||b.mozPerformance||b.msPerformance||b.webkitPerformance,e=c.timing;var d=c?[{sc:"w3/pt/1-0-0",dt:{navigationStart:e.navigationStart,domainLookupStart:e.domainLookupStart,domainLookupEnd:e.domainLookupEnd,responseStart:e.responseStart,responseEnd:e.responseEnd,
loadEventEnd:e.loadEventEnd}}]:[];return Ka(Ka([],d,!0),Hi().contexts(),!0)}}catch(f){return console.warn("convivaAppTracker problem in perfromance context "+f),[]}}}}function Gi(){var a,b,c;try{var e=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};if(e.getEntriesByType){var d=e.getEntriesByType("navigation")[0],f=null!==(a=null===e||void 0===e?void 0:e.timeOrigin)&&void 0!==a?a:0;if(!d)return[];var h={st:Math.floor(f+d.startTime),dls:Math.floor(f+d.domainLookupStart),
dle:Math.floor(f+d.domainLookupEnd),rss:Math.floor(f+d.responseStart),rse:Math.floor(f+d.responseEnd),le:Math.floor(f+d.loadEventEnd),dur:Math.floor(d.loadEventEnd-d.activationStart),as:Math.floor(f+d.activationStart)};if(null===va||void 0===va?0:va.startTime)h.lcp={rt:Math.floor(f+va.startTime),url:128<(null===(b=null===va||void 0===va?void 0:va.url)||void 0===b?void 0:b.length)?null===(c=null===va||void 0===va?void 0:va.url)||void 0===c?void 0:c.substring(0,128):va.url,sz:va.size};return[{sc:"cv/pc/1-0-1",
dt:h}]}return[]}catch(g){return console.warn("ConvivaAppTracker: issue will getting performance Navigation timing context"),[]}}function Hi(){return{contexts:function(){var a,b,c;try{if("undefined"!=typeof(null===va||void 0===va?void 0:va.startTime)&&"number"===typeof(null===va||void 0===va?void 0:va.startTime))return[{sc:"cv/lcp/1-0-0",dt:{lcp:Math.round(va.startTime)-(null!==(a=va.performanceNavigationActivationStart)&&void 0!==a?a:0),url:128<(null===(b=null===va||void 0===va?void 0:va.url)||void 0===
b?void 0:b.length)?null===(c=null===va||void 0===va?void 0:va.url)||void 0===c?void 0:c.substring(0,128):va.url}}]}catch(e){}return[]}}}function jc(a,b,c,e,d,f){var h;try{var g=null,m=null!==(h=f.url)&&void 0!==h?h:"";if(!m)return!0;if(Ii.some(function(t){return m.includes(t)}))return!1;var n=new URL(m);var r=n.protocol.replace(":","");h=function(t,q){var w;t=ig(t,{scheme:r,host:n.hostname,path:decodeURIComponent(n.pathname)},gb.NETWORK_REQUEST);return t.matched?t.opt?Bb(t.opt,{responseStatusCode:null!==
(w=null===d||void 0===d?void 0:d.status)&&void 0!==w?w:0,duration:Date.now()-f.requestTimestamp},gb.NETWORK_REQUEST)===q:q:null};a&&null===g&&(g=h(a,!0));b&&null===g&&(g=h(b,!1));if(null===g){var k=(null===c||void 0===c?void 0:c.includes("*"))||(null===c||void 0===c?void 0:c.some(function(t){return t&&""!==t?m.includes(t):!1})),p=null===e||void 0===e?void 0:e.some(function(t){return t&&""!==t?m.includes(t):!1});g=!k||p}return!0===g?!0:!1}catch(t){return!0}}function kc(a,b,c,e){try{var d=null;e=null!==
e&&void 0!==e?e:"";if(!e)return{result:!0};var f=new URL(e);var h=f.protocol.replace(":","");e=function(g,m){var n;g=ig(g,N({scheme:h,host:f.hostname,path:decodeURIComponent(f.pathname)},c),gb.SSE_EVENT);if(g.matched){if(g.opt){var r=Bb(g.opt,c,gb.SSE_EVENT);return!0!==(null===(n=null===g||void 0===g?void 0:g.item)||void 0===n?void 0:n.count)||r?{result:r===m,matchedConfig:g.item,shouldSend:!0}:{result:g.matched===m,matchedConfig:g.item,shouldSend:!1}}return{result:m,matchedConfig:g.item,shouldSend:!1}}return null};
a&&null===d&&(d=e(a,!0));b&&null===d&&(d=e(b,!1));(!a||Array.isArray(a)&&0===a.length)&&null===d&&(d={result:!0});return d}catch(g){return{result:!0}}}function ig(a,b,c){try{for(var e=0;e<a.length;e++){var d=a[e],f=d.opt;if(Bb(d.req,b,c))return{matched:!0,opt:f||null,item:d}}return{matched:!1,opt:null}}catch(h){return{matched:!1,opt:null}}}function Bb(a,b,c){try{if(!a)return!1;if("and"===a.type){for(var e=0,d=a.cond;e<d.length;e++){var f=d[e];if(!Bb(f,b,c))return!1}return!0}if("or"===a.type){d=0;
for(e=a.cond;d<e.length;d++)if(f=e[d],Bb(f,b,c))return!0;return!1}return c===gb.NETWORK_REQUEST?Ji(a,b):c===gb.CUSTOM_EVENT?Ki(a,b):c===gb.SSE_EVENT?Li(a,b):!1}catch(h){return!1}}function Ki(a,b){var c=a.key,e=a.op;a=a.val;if(!c||!e)return!1;if("undefined"!==typeof b[c]){if(he(b[c]))return Cb(b[c],e,a);if("boolean"===typeof b[c])switch(b=b[c],e){case "!=":return b!==a;case "==":return b===a;default:return!1}if(Number.isInteger(b[c]))return rd(b[c],e,a)}return!1}function Li(a,b){var c=a.key,e=a.op;
a=a.val;if(!c||!e)return!1;switch(c){case "sch":return b.scheme?Cb(b.scheme,e,a):!1;case "host":return b.host?Cb(b.host,e,a):!1;case "path":return b.path?Cb(b.path,e,a):!1;default:b=Nb(b,c);if(null!==b&&void 0!==b){if("string"===typeof b)return Cb(b,e,a);if("boolean"===typeof b)switch(e){case "!=":return b!==a;case "==":return b===a;default:return!1}if("number"===typeof b&&Number.isInteger(b))return rd(b,e,a)}return!1}}function Ji(a,b){var c=a.key,e=a.op;a=a.val;if(!c||!e)return!1;switch(c){case "sch":return b.scheme?
Cb(b.scheme,e,a):!1;case "host":return b.host?Cb(b.host,e,a):!1;case "path":return b.path?Cb(b.path,e,a):!1;case "dur":return b.duration?rd(b.duration,e,a):!1;case "rsc":return void 0!==b.responseStatusCode&&0<=b.responseStatusCode?rd(b.responseStatusCode,e,a):!1;default:return!1}}function Cb(a,b,c){return"=="===b&&Array.isArray(c)?(b=c,b.includes("*")?!0:b.some(function(e){return e&&""!==e?a===e:!1})):"contains"===b&&Array.isArray(c)?(b=c,b.includes("*")?!0:b.some(function(e){return e&&""!==e?a.includes(e):
!1})):"sw"===b&&Array.isArray(c)?(b=c,b.includes("*")?!0:b.some(function(e){return e&&""!==e?a.startsWith(e):!1})):"ew"===b&&Array.isArray(c)?(b=c,b.includes("*")?!0:b.some(function(e){return e&&""!==e?a.endsWith(e):!1})):!1}function rd(a,b,c){if("in"===b.toLowerCase()&&Array.isArray(c))return c.includes(a);if("range"===b.toLowerCase()&&"object"===na(c)){b=c.min;var e=c.max,d=c.minExclusive;c=c.maxExclusive;return void 0!==b&&void 0!==e?a>=b&&a<=e:void 0!==d&&void 0!==c?a>d&&a<c:!1}if(Ic(c))switch(b){case "!=":return a!==
c;case ">":return a>c;case ">=":return a>=c;case "<":return a<c;case "<=":return a<=c;case "==":return a===c}return!1}function jg(a,b,c){var e=null;a:{for(var d=0;d<a.length;d++){var f=a[d];var h=f.opt;if(Bb(f.req,b,c))if(h){if(Bb(h,b,c)){a=!0;break a}}else{a=!0;h=null;break a}}a=!1;h=null}a&&(e=h?Bb(h,b,c)?!0:!1:!0);return e}function Ha(a,b,c){var e,d;try{if(a&&b){var f=null===a||void 0===a?void 0:a.getConfig();a:{var h,g,m,n={message:""};try{var r=c.message,k=c.error,p=c.className,t=c.extraData;
if(r)n.message=r;else if("string"===typeof k)if(0<k.trim().length)n.message=k;else{ha.warn("Conviva Eco Sensor:: Mandatory field message is missing");var q=null;break a}else"object"===na(k)&&("string"===typeof k.message&&0<k.message.trim().length&&(n.message=xa(k.message,E.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_MESSAGE_LENGTH)),"string"===typeof k.name&&0<k.name.trim().length&&(n.exceptionName=xa(k.name,E.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_EXCEPTION_NAME_LENGTH)),"string"===typeof k.stack&&0<k.stack.trim().length&&
(n.stackTrace=xa(k.stack,E.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_STACK_LENGTH)));if(0===n.message.trim().length){ha.warn("Conviva Eco Sensor:: Mandatory field message is missing");q=null;break a}"string"===typeof p&&0<p.trim().length&&(n.className=xa(p,E.DIAGNOSTIC_INFO_MAX_LENGTH.MAX_CLASSNAME_LENGTH));"undefined"!==typeof t&&null!==t&&(n.extraData=t);var w=null===a||void 0===a?void 0:a.getConfig();if(null===w||void 0===w?0:w.configurationVersion)n.remoteConfigVersion=w.configurationVersion;if(null===c||
void 0===c?0:c.configAppliedTime)n.configAppliedTime=null===c||void 0===c?void 0:c.configAppliedTime;if(null===w||void 0===w?0:w.cacheRefreshInterval)n.cacheRefreshInterval=w.cacheRefreshInterval;if(null===c||void 0===c?0:c.configAppliedSrc)n.configAppliedSrc=null===c||void 0===c?void 0:c.configAppliedSrc;if(localStorage){var v=localStorage.getItem(E.SAMPLING_STORAGE_RANDOM_NUMBER_KEY);"undefined"!==typeof v&&null!==v&&(n.samplingRandomNumber=parseFloat(v))}"number"===typeof(null===(g=null===(h=null===
w||void 0===w?void 0:w.controlIngestConfig)||void 0===h?void 0:h.sel)||void 0===g?void 0:g.pct)?(n.samplingPercentage=w.controlIngestConfig.sel.pct,n.samplingDecision=E.SAMPLING_STATUS.DERIVED,void 0!=na(null===(m=null===w||void 0===w?void 0:w.controlIngestConfig)||void 0===m?void 0:m.act)&&(n.extraData=N(N({},n.extraData),{samplingActionConfig:w.controlIngestConfig.act}))):n.samplingDecision=E.SAMPLING_STATUS.DEFAULT;"function"==typeof b&&"string"==typeof b()&&(n.samplingStatus=b()==E.SAMPLING_MODES.RCFG?
!0:!1)}catch(K){ha.warn("Error occurred while generating diagnostic object",K);q=null;break a}q=n}var u;if(!(u=!q)){var A;try{var F=null===a||void 0===a?void 0:a.getConfig(),B=(null===(A=null===F||void 0===F?void 0:F.di)||void 0===A?void 0:A.lim)||10,G=Date.now();6E4<=G-kg&&(ne=0,kg=G);ne++;var D=ne>B?!1:!0}catch(K){ha.warn("Conviva Eco Sensor:: Error occured while checking diagnostic event is allowed",K),D=!1}u=!D}if(!u&&"boolean"==typeof(null===(e=null===f||void 0===f?void 0:f.di)||void 0===e?void 0:
e.en)&&!0===(null===(d=null===f||void 0===f?void 0:f.di)||void 0===d?void 0:d.en))if(null===a||void 0===a)void 0;else{var z=a.track;var J=Lb({event:{sc:"iglu:com.conviva/di/jsonschema/1-0-4",dt:fc({msg:q.message,cn:q.className,st:q.stackTrace,en:q.exceptionName,ed:q.extraData,rcv:q.remoteConfigVersion,cat:q.configAppliedTime,cri:q.cacheRefreshInterval,csrc:q.configAppliedSrc,srn:q.samplingRandomNumber,spr:q.samplingPercentage,ss:q.samplingStatus,sd:q.samplingDecision})}});z.call(a,J)}}}catch(K){ha.warn("Conviva Eco Sensor:: Error occurred while sending reportDiagnosticError",
K)}}function Mi(){(null===window||void 0===window?0:window.addEventListener)&&window.addEventListener("RemoteConfigUpdateApplied",function(){lg()},{signal:Ia})}function lg(){var a,b,c=null===(a=null===wa||void 0===wa?void 0:wa.core)||void 0===a?void 0:a.getConfig();Ob=(null===(b=null===c||void 0===c?void 0:c.clickcc)||void 0===b?void 0:b.cssSelectorList)||Ob;Ob=(null===Ob||void 0===Ob?void 0:Ob.replace(/\s+/g,""))||""}function Ni(a,b){var c;a=a.querySelectorAll(mg);if(0===a.length)return null;if(1===
a.length&&0<a[0].offsetWidth&&0<a[0].offsetHeight)return a[0];var e=b.clientX;b=b.clientY;if(a.length<=("IntersectionObserver"in window&&"fetch"in window&&"Promise"in window?E.MAX_NATIVE_SCAN:E.MAX_NATIVE_SCAN_LEGACY))for(var d=0;d<a.length;d++){var f=null===(c=a[d])||void 0===c?void 0:c.getBoundingClientRect();if(f&&e>=f.left&&e<=f.right&&b>=f.top&&b<f.bottom)return a[d]}return null}function ng(a,b){if(!(a instanceof HTMLElement||a instanceof SVGElement))return null;var c=null===a||void 0===a?void 0:
a.closest(mg);if(c)return c;if(c=null===a||void 0===a?void 0:a.closest(Ob))return Ni(c,b)||c;b=a;c=0;var e=E.CLICK_MAX_DEPTH;a:{if(b.style){if(b.style.visibility&&""!==b.style.visibility&&"hidden"==b.style.visibility||b.style.pointerEvents&&""!==b.style.pointerEvents&&"none"==b.style.pointerEvents){var d=!1;break a}if(b.style.cursor&&""!==b.style.cursor&&"pointer"==b.style.cursor){d=!0;break a}}d=getComputedStyle(b);d="hidden"===d.visibility||"none"===d.pointerEvents?!1:"pointer"===d.cursor?!0:!1}if(d){for(;b&&
b!==document.documentElement&&(b instanceof HTMLElement||b instanceof SVGElement)&&c<e;){if("function"===typeof b.onclick)return b;b=b.parentElement;c++}return a.closest(Oi)||a}return null}function Pi(a){return"undefined"!==typeof CSS&&CSS.escape?CSS.escape(a):a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}function Qi(a){try{if(!a||a.nodeType!==Node.ELEMENT_NODE)return null;if(a.id&&"string"===typeof a.id&&""!==a.id.trim()&&1===document.querySelectorAll("#".concat(Pi(a.id))).length)return'//*[@id="'.concat(a.id,
'"]');var b=[],c=a;for(a=function(){var e=c.tagName.toLowerCase(),d=c.parentElement;if(d){var f=Array.from(d.children).filter(function(h){return h.tagName.toLowerCase()===e});1<f.length&&(f=f.indexOf(c)+1,e+="[".concat(f,"]"));b.unshift(e);c=d}else if(d=c.getRootNode(),d instanceof ShadowRoot)b.unshift(e),b.unshift(">>"),c=d.host;else return b.unshift(e),"break"};c&&c.nodeType===Node.ELEMENT_NODE&&"break"!==a(););return"/"+b.join("/")}catch(e){return ha.warn("Conviva Browser Tracker caused Exception in calculateXPath method of user click tracking module",
e),null}}function Ri(a,b){var c,e;try{if(!wa||!wa.core||!a)return null;var d=wa.core.getConfig();if(!0!==(null===(c=null===d||void 0===d?void 0:d.clickcc)||void 0===c?void 0:c.en))return null;var f=null===(e=null===d||void 0===d?void 0:d.clickcc)||void 0===e?void 0:e.uiMode;return f===Lc.RAW?a:f===Lc.BOTH?ng(a,b)||a:ng(a,b)}catch(h){return ha.warn("Conviva App Tracker caused Exception in getTrackedElement method of user click tracking module",h),null}}function og(a){try{var b=Date.now(),c=E.CLICK_DEBOUNCING_DELAY;
if(null===oe||b-oe>=c){var e,d,f,h,g,m,n;try{var r,k;if(null===(r=a.target)||void 0===r?0:r.shadowRoot)var p=null===(k=a.composedPath)||void 0===k?void 0:k.call(a);var t=Ri(p&&p[0]||a.target,a);if(t&&(t instanceof HTMLElement||t instanceof HTMLInputElement)){a={};var q=E.CLICK_KEY_MAX_LENGTH;if(null===t||void 0===t?0:t.id)a.id=xa(t.id,q);if(null===t||void 0===t?0:t.className)a["class"]=xa(t.className,q);if(null===t||void 0===t?0:t.tagName)a.elementName=xa(t.tagName.toLowerCase(),q);if(null===(e=null===
t||void 0===t?void 0:t.innerText)||void 0===e?0:e.trim())a.text=xa(t.innerText.trim(),q);if(null===t||void 0===t?0:t.getAttribute("name"))a.name=xa(t.getAttribute("name")||"",q);if(null===t||void 0===t?0:t.getAttribute("type"))a.elementType=xa((null===(d=t.getAttribute("type"))||void 0===d?void 0:d.toLowerCase())||"",q);if(null===t||void 0===t?0:t.placeholder)a.placeholder=xa(t.placeholder,q);(null===t||void 0===t?0:t.getAttribute("type"))&&"password"!==(null===t||void 0===t?void 0:t.getAttribute("type"))&&
t.value&&(a.value=xa(t.value,q));var w=null===(f=null===wa||void 0===wa?void 0:wa.core)||void 0===f?void 0:f.getConfig(),v=null===(h=null===w||void 0===w?void 0:w.clickcc)||void 0===h?void 0:h.collectattr;if(v)for(e=0;e<v.length;e++){var u=v[e],A=null===t||void 0===t?void 0:t.getAttribute(u);A&&(a[u]=xa(A,q))}try{if("A"===t.tagName.toUpperCase()||"AREA"===t.tagName.toUpperCase()){if(null!=t.href){var F=t.hostname||ld(t.href),B=F.toLowerCase(),G=t.href.replace(F,B);/^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):/i.test(G)||
(a.targetUrl=xa(decodeURIComponent(G),q))}t.target&&(a.target=xa(t.target,q))}}catch(C){ha.warn("Conviva App Tracker caused Exception in handleClick href setting",C)}var D=null===(g=t.querySelector("use"))||void 0===g?void 0:g.getAttribute("xlink:href");D&&(a["xlink:href"]=xa(D,q));var z=Qi(t);z&&(a.xpath=xa(z,q));var J=null!==(m=null===w||void 0===w?void 0:w.clickcc)&&void 0!==m?m:{},K=gb.CUSTOM_EVENT,Y=J.collect,V=J.block;g=null;Y&&(g=jg(Y,a,K));if(V&&null===g){var Z=jg(V,a,K);"boolean"===typeof Z&&
(g=!Z)}var M=null===g?!0:g;if("boolean"!==typeof M||!1!==M)null===(n=null===wa||void 0===wa?void 0:wa.core)||void 0===n?void 0:n.track(zb({name:"conviva_click",data:JSON.stringify(a)}))}}catch(C){ha.warn("Conviva App Tracker caused Exception in handleClick method of user click tracking module",C)}0<sd&&Ha(wa.core,wa.getSamplingMode,{className:"clickTracking - droppedEvent",message:"total click events dropped to Avoid tracking spam from rapid clicks",extraData:{clickEventDropped:sd}});sd=0}else sd++;
oe=b}catch(C){console.warn("Conviva App Tracker caused Exception in immediateClickHandler method of user click tracking module",C)}}function Si(){try{Mc||"undefined"===typeof document||(document.body?(Pb=og,Za(document.body,"click",Pb,{signal:Ia,capture:!0,passive:!0}),Mc=!0):document.addEventListener("DOMContentLoaded",function(){if(null===document||void 0===document?0:document.body)Pb=og,Za(document.body,"click",Pb,{signal:Ia,capture:!0,passive:!0}),Mc=!0}),lg(),Mi())}catch(a){ha.warn("Conviva App Tracker caused Exception in enableUserClickTracking method of user click tracking module",
a)}}function pg(){try{Mc&&"undefined"!==typeof document&&document.body&&(Pb&&(document.body.removeEventListener("click",Pb),Pb=null),Mc=!1)}catch(a){ha.warn("Conviva App Tracker caused Exception in disableUserClickTracking method of user click tracking module",a)}}function td(a,b,c,e){return(null===c||void 0===c?0:c.enabled)&&(null===c||void 0===c?0:c.attributeExtraction)?(a=Ci(c.attributeExtraction,{requestDetails:a,responseDetails:b}))?(e.setConversationId("string"===typeof a?a:JSON.stringify(a)),
!0):!1:!1}function qg(a,b,c,e,d,f,h){var g,m,n;void 0===f&&(f={});return Ac(this,void 0,void 0,function(){var r,k,p,t,q,w,v,u,A,F,B,G,D,z,J,K,Y,V;return Bc(this,function(Z){switch(Z.label){case 0:r=null!==(g=f.idleMs)&&void 0!==g?g:3E4,k=null!==(m=f.maxEvents)&&void 0!==m?m:1E4,p=null!==(n=f.bufferMaxBytes)&&void 0!==n?n:1E6,t=a.getReader(),q=new TextDecoder("utf-8"),w="",v=0,u=void 0,A=function(){void 0!==u&&(clearTimeout(u),u=void 0);u=setTimeout(function(){console.warn("Conviva App Tracker:: stream idle >",
r,"ms \u2192 cancelling",b);t.cancel()},r)},A(),Z.label=1;case 1:Z.trys.push([1,5,6,7]),Z.label=2;case 2:return[4,t.read()];case 3:F=Z.sent();B=F.value;if(G=F.done)return[3,4];A();w+=q.decode(B,{stream:!0});if((new TextEncoder).encode(w).length>p)return console.warn("Conviva App Tracker:: SSE buffer exceeded",p,"bytes, cancelling stream",b),t.cancel(),[3,4];for(D=void 0;-1!==(D=w.search(c));)if(z=w.slice(0,D).replace(/\s+$/,""),K=(J=w.match(c))?J[0].length:0,w=w.slice(D+K),Y=e(z))if(d(Y),++v>=k){console.warn("Conviva App Tracker:: event budget reached \u2192 cancelling",
b);t.cancel();break}return[3,2];case 4:return[3,7];case 5:V=Z.sent();if(!(V instanceof DOMException&&"AbortError"===V.name))throw V;return[3,7];case 6:return clearTimeout(u),t.releaseLock(),h&&h(),[7];case 7:return[2]}})})}function Ti(a){var b={data:""},c=0;for(a=a.split(/\n+/);c<a.length;c++){var e=a[c];if(e&&!e.startsWith(":")){var d=e.indexOf(":"),f=(-1===d?e:e.slice(0,d)).trim();e=-1===d?"":e.slice(d+1).replace(/^\s+/,"");switch(f){case "data":b.data+=(b.data?"\n":"")+e;break;case "event":b.event=
e;break;case "id":b.id=e}}}return b.data?b:null}function Ui(a){return{data:a}}function Vi(a,b){var c;return(null===(c=null===b||void 0===b?void 0:b.configs)||void 0===c?void 0:c.plainTextChunkTracking)&&b.configs.plainTextChunkTracking.enabled&&b.configs.plainTextChunkTracking.endpoints.some(function(e){return a.includes(e)})}function pe(a,b,c){var e={};c&&(c=(new URL(c)).searchParams,a||(a={}),c.forEach(function(r,k){a[k]=r}));c=0;for(b=b.cond;c<b.length;c++){var d=b[c],f=Nb(a,d.key);if("string"===
typeof f)for(var h=0,g=d.val;h<g.length;h++){var m=g[h],n=!1;switch(d.op){case "contains":n=f.toLowerCase().includes(m.toLowerCase());break;case "==":case "equals":n=f===m;break;case "startsWith":n=f.startsWith(m);break;case "endsWith":n=f.endsWith(m);break;default:n=f.toLowerCase().includes(m.toLowerCase())}n&&(e[d.type]||(e[d.type]={}),e[d.type][m]=n)}}return e}function rg(a){for(var b=[a],c=0,e=["\r\n","\n","\x00"];c<e.length;c++){var d=e[c];if(a.includes(d)){b=a.split(d).filter(function(f){return 0<
f.trim().length});break}}return b}function Wi(){try{var a=!!window.localStorage}catch(c){a=!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr","modernizr");b.removeItem("modernizr");return!0}catch(c){return!1}}function Xi(a,b,c,e,d,f,h,g,m,n,r,k,p,t,q,w,v,u,A){function F(L){var W=Object.keys(L).map(function(ca){return[ca,L[ca]]}).reduce(function(ca,aa){ca[aa[0]]=aa[1].toString();return ca},{});return{evt:W,bytes:B(JSON.stringify(W))}}function B(L){for(var W=0,ca=0;ca<L.length;ca++){var aa=
L.charCodeAt(ca);127>=aa?W+=1:2047>=aa?W+=2:55296<=aa&&57343>=aa?(W+=4,ca++):W=65535>aa?W+3:W+4}return W}function G(L,W){W=J(W,!0,!1);L=K(Y([L.evt]));try{q().toLowerCase()!==qb.NONE&&(L=sg.gzip(L,{level:6}),W.setRequestHeader("Content-Encoding",qb.GZIP))}catch(ca){}A()!==E.SAMPLING_MODES.NONE&&W.send(L)}function D(L){try{if("undefined"!==typeof window&&"undefined"!==typeof window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__&&"function"===typeof window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__.postMessage){var W=
K(Y(L));W&&0<W.length&&window.__CONVIVA_VISUAL_ACTIVATION_EXTENSION__.postMessage(W)}}catch(ca){ha.warn("Error occured while sending message to Visual Labelling Extension",ca)}}function z(L){for(void 0===L&&(L=!1);H.length&&"string"!==typeof H[0]&&"object"!==na(H[0]);)H.shift();if(1>H.length)C=!1;else{if(!he(X))throw"No collector configured";C=!0;window.clearTimeout(fa);fa=-1;if(qa){var W=function(oa){for(var db=0,lc=0;db<oa.length&&!(lc+=oa[db].bytes,lc>=v());)db+=1;return db},ca=void 0,aa=void 0;
if("object"===na(H[0])){ca=X;var ea=J(ca,!0,L);aa=W(H)}else ca=V(H[0]),ea=J(ca,!1,L),aa=1;var Ba=setTimeout(function(){ea.abort();C=!1},n);ea.onreadystatechange=function(){4===ea.readyState&&(clearTimeout(Ba),200<=ea.status&&300>ea.status?z():(ha.error("Status ".concat(ea.status,", will not retry.")),C=!1))};if("object"!==na(H[0]))ea.send();else if(W=H.slice(0,aa),0<W.length){L=!1;W=W.map(function(oa){return oa.evt});if(ta){var Pa=new Blob([K(Y(W))],{type:"application/json"});try{L=navigator.sendBeacon(ca,
Pa)}catch(oa){L=!1}}if(!0===L)z();else{ca=K(Y(W));try{q().toLowerCase()!==qb.NONE&&(ca=sg.gzip(ca,{level:6}),ea.setRequestHeader("Content-Encoding",qb.GZIP))}catch(oa){}try{A()!==E.SAMPLING_MODES.NONE&&ea.send(ca)}catch(oa){}}}(function(oa){for(var db=0;db<oa;db++)H.shift();c&&md(O,JSON.stringify(H.slice(-1*m())))})(aa)}else if(r||"object"===na(H[0]))C=!1;else{aa=new Image(1,1);var Fa=!0;aa.onload=function(){Fa&&(Fa=!1,H.shift(),c&&md(O,JSON.stringify(H.slice(-1*m()))),z())};aa.onerror=function(){Fa&&
(C=Fa=!1)};aa.src=V(H[0]);setTimeout(function(){Fa&&C&&(Fa=!1,z())},n)}}}function J(L,W,ca){var aa=new XMLHttpRequest;W?(aa.open("POST",L,!ca),aa.setRequestHeader("Content-Type","application/json; charset=UTF-8")):aa.open("GET",L,!ca);aa.withCredentials=p;r&&aa.setRequestHeader("SP-Anonymous","*");for(var ea in k)Object.prototype.hasOwnProperty.call(k,ea)&&aa.setRequestHeader(ea,k[ea]);return aa}function K(L){return JSON.stringify({sc:"sp/pd/1-0-4",dt:L})}function Y(L){for(var W=(new Date).getTime().toString(),
ca=0;ca<L.length;ca++)L[ca].stm=W;return L}function V(L){return g?X+L.replace("?","?stm="+(new Date).getTime()+"&"):X+L}function Z(){var L=0;return L=da?H.reduce(function(W,ca){return W+ca.bytes},0):H.reduce(function(W,ca){return W+ca.length},0)}function M(L){function W(aa,ea,Ba){return(Ba=Ba.match("(Macintosh;.*Mac OS X (\\d+)_(\\d+)[_\\d]*.*) AppleWebKit/"))&&Ba.length?parseInt(Ba[2])<=aa||parseInt(Ba[2])===aa&&parseInt(Ba[3])<=ea:!1}function ca(aa){var ea;if(ea=/^(?!.*Chrome)(?!.*Chromium)(?!.*Edg)(?!.*OPR)(?=.*Safari)/.test(aa))ea=
!/(Chrome|Chromium|Edg|OPR)/.test(aa);return ea}return function(aa,ea){return(ea=ea.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//))&&ea.length?parseInt(ea[0])<=aa:!1}(13,L)||W(10,15,L)&&ca(L)}(null===window||void 0===window?0:window.addEventListener)&&window.addEventListener("RemoteConfigUpdateApplied",function(){z()},{signal:Ia});var C=!1,X,H=[],fa=-1;e="string"===typeof e?e.toLowerCase():e;var ia=!0===e||"beacon"===e||"true"===e,ta=!(!(ia&&window.navigator&&window.navigator.sendBeacon)||
M(window.navigator.userAgent))&&ia,qa=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),da="get"!==e&&qa&&("post"===e||ia),ya=da?d:"/i";e="convivaOutQueue_".concat(a,"_").concat(da?"post2":"get");var O="convivaOutQueue_".concat(a,"_").concat(da?"post2":"get");dg(e);dg("".concat(e,".expires"));ia&&(k={});f=c&&Wi()&&da&&f||1;if(c)try{var ra=window.localStorage.getItem(O);H=ra?JSON.parse(ra):[]}catch(L){}Array.isArray(H)||(H=[]);b.outQueues.push(H);qa&&1<f&&b.bufferFlushers.push(function(L){C||
z(L)});return{enqueueRequest:function(L,W,ca){if(A()!=E.SAMPLING_MODES.NONE){X=W+ya;if(da){L=F(L);D([L.evt]);W=v();if(L.bytes>=W){C||z();ha.warn("Event ("+L.bytes+"B) too big, max is "+W);G(L,X);return}H.push(L)}else{var aa="?";var ea={co:!0,cx:!0},Ba=!0,Pa;for(Pa in L)L.hasOwnProperty(Pa)&&!ea.hasOwnProperty(Pa)&&(Ba?Ba=!1:aa+="&",aa+=encodeURIComponent(Pa)+"="+encodeURIComponent(L[Pa]));for(var Fa in ea)L.hasOwnProperty(Fa)&&ea.hasOwnProperty(Fa)&&(aa+="&"+Fa+"="+encodeURIComponent(L[Fa]));ea=h();
if(0<ea&&(Ba=V(aa),Ba=B(Ba),Ba>=ea)){ha.warn("Event ("+Ba+"B) too big, max is "+ea);qa&&(L=F(L),D([L.evt]),G(L,W+d));return}H.push(aa)}W=!1;c&&(W=md(O,JSON.stringify(H.slice(-1*m()))));!C&&-1===fa&&W&&(fa=window.setTimeout(z,u()+Math.floor(Math.random()*t)));(C?0:!W||!w()||da&&Z()>v()||H.length>f||ca)&&z()}},executeQueue:function(){C||z()},setUseLocalStorage:function(L){c=L},setAnonymousTracking:function(L){r=L},setCollectorUrl:function(L){X=L+ya},setBufferSize:function(L){f=L},setCustomHeaders:function(L){k=
L}}}function Yi(){(null===window||void 0===window?0:window.addEventListener)&&window.addEventListener("RemoteConfigUpdateApplied",function(){var a,b,c,e,d,f,h,g=null===(a=null===Ja||void 0===Ja?void 0:Ja.core)||void 0===a?void 0:a.getConfig();a=null===(c=null===(b=null===g||void 0===g?void 0:g.collectionRateLimit)||void 0===b?void 0:b.exceptionAutotracking)||void 0===c?void 0:c.maxEvents;b=null===(d=null===(e=null===g||void 0===g?void 0:g.collectionRateLimit)||void 0===e?void 0:e.exceptionAutotracking)||
void 0===d?void 0:d.disconnectDuration;e=null===(h=null===(f=null===g||void 0===g?void 0:g.collectionRateLimit)||void 0===f?void 0:f.exceptionAutotracking)||void 0===h?void 0:h.timeWindow;null===hb||void 0===hb?void 0:hb.updateErrortRateLimitConfig(a,b,e)},{signal:Ia})}function Zi(){var a,b,c,e,d,f,h;try{var g=null===(a=null===Ja||void 0===Ja?void 0:Ja.core)||void 0===a?void 0:a.getConfig(),m=null===(c=null===(b=null===g||void 0===g?void 0:g.collectionRateLimit)||void 0===b?void 0:b.exceptionAutotracking)||
void 0===c?void 0:c.maxEvents,n=null===(d=null===(e=null===g||void 0===g?void 0:g.collectionRateLimit)||void 0===e?void 0:e.exceptionAutotracking)||void 0===d?void 0:d.disconnectDuration,r=null===(h=null===(f=null===g||void 0===g?void 0:g.collectionRateLimit)||void 0===f?void 0:f.exceptionAutotracking)||void 0===h?void 0:h.timeWindow;hb=new $i(m,n,r,null===Ja||void 0===Ja?void 0:Ja.core,null===Ja||void 0===Ja?void 0:Ja.getSamplingMode)}catch(k){console.warn("Conviva App Tracker caused Exception in initialiseRateLimiter method of error tracking module",
k)}}function tg(a){try{(null===hb||void 0===hb?0:hb.isAllowedToSendEvent())&&qe({message:a.message,filename:a.filename,lineno:a.lineno,colno:a.colno,error:a.error})}catch(b){console.warn("Conviva App Tracker caused Exception in captureError method of error tracking module",b)}}function ug(a){try{(null===hb||void 0===hb?0:hb.isAllowedToSendEvent())&&qe({message:a.reason})}catch(b){console.warn("Conviva App Tracker caused Exception in captureRejection method of error tracking module",b)}}function qe(a){var b,
c,e=a.message,d=a.filename,f=a.lineno,h=a.colno,g=a.error,m=a.context;a=a.timestamp;g=g&&g.stack?g.stack:void 0;if(!("undefined"===typeof e||null===e&&"undefined"===typeof g||null===g&&"undefined"===typeof f||null===f&&"undefined"===typeof h||null===h&&"undefined"===typeof d||null===d)){var n=null===(b=null===Ja||void 0===Ja?void 0:Ja.core)||void 0===b?void 0:b.getConfig();if(null===n||void 0===n?0:n.exceptionAutotracking)null===(c=null===Ja||void 0===Ja?void 0:Ja.core)||void 0===c?void 0:c.track(Lb({event:{sc:"sp/ae/1-0-1",
dt:{programmingLanguage:"JAVASCRIPT",message:e?vg(e,2048):"JS Exception.",stackTrace:g?vg(g,8192):"",lineNumber:f,lineColumn:h,fileName:d}}}),m,a)}}function aj(a,b){var c;void 0===b&&(b=!0);if(!1!==b){var e=null===(c=null===a||void 0===a?void 0:a.core)||void 0===c?void 0:c.getConfig();null===a||void 0===a?void 0:a.trackPagePing({context:qd(null===e||void 0===e?void 0:e.performanceContextConfig).contexts()});try{var d=function(){null===a||void 0===a?void 0:a.trackCustomEvent({name:"conviva_window_loaded",
data:"{}",context:qd(null===e||void 0===e?void 0:e.performanceContextConfig).contexts()});null===a||void 0===a?void 0:a.setPageMetaTagsAsCustomTags()},f=0,h=0;"complete"===document.readyState?setTimeout(function(){try{d()}catch(g){console.warn("ConvivaAppTracker : issue while detecting readyState complete",g)}},0):null===window||void 0===window?void 0:window.addEventListener("load",function(){setTimeout(function(){try{d()}catch(g){console.warn("ConvivaAppTracker : issue while registering window loaded event",
g)}},0)},{signal:Ia});null===document||void 0===document?void 0:document.addEventListener("visibilitychange",function(){var g,m;try{if((null===a||void 0===a?void 0:a.getSamplingMode())!==E.SAMPLING_MODES.NONE)if("hidden"===document.visibilityState)setTimeout(function(){var r,k;try{var p=null===(r=null===a||void 0===a?void 0:a.core)||void 0===r?void 0:r.getConfig();h++;if(null===p||void 0===p?0:p.lifecycleAutotracking)if(null===(k=null===a||void 0===a?void 0:a.core)||void 0===k)void 0;else{var t=k.track;
var q=Lb({event:{sc:"sp/abg/1-0-0",dt:fc({backgroundIndex:h})}});t.call(k,q)}"hidden"!==document.visibilityState||(null===a||void 0===a?0:a.getPageViewSent())||(null===a||void 0===a?void 0:a.trackCustomEvent({name:"conviva_app_backgrnd_before_page_view",data:"{}"}))}catch(w){console.warn("ConvivaAppTracker : issue while tracking visibility change",w)}},0);else{var n=null===(g=null===a||void 0===a?void 0:a.core)||void 0===g?void 0:g.getConfig();f++;if(null===n||void 0===n?0:n.lifecycleAutotracking)null===
(m=null===a||void 0===a?void 0:a.core)||void 0===m?void 0:m.track(Lb({event:{sc:"sp/afg/1-0-0",dt:fc({foregroundIndex:f})}}))}}catch(r){console.warn("convivaAppTracker visibilitychange failed "+r)}},{signal:Ia});"undefined"!=typeof document&&document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(g){g&&a&&(null===a||void 0===a?void 0:a.getSamplingMode())!==E.SAMPLING_MODES.NONE&&(null===a||void 0===a?void 0:a.trackVideoEvent(g))},{signal:Ia})}catch(g){console.warn("convivaAppTracker error in page load metrics"+
g)}}}function bj(a){var b,c,e,d,f;if(null===a||void 0===a?0:a.softNavigationTrackingConfiguration)a=a.softNavigationTrackingConfiguration,Qb=N(N({},rb),{idleWindowMs:null!==(b=a.idleWindowMs)&&void 0!==b?b:rb.idleWindowMs,maxMeasurementMs:null!==(c=a.maxMeasurementMs)&&void 0!==c?c:rb.maxMeasurementMs,includeHashChanges:null!==(e=a.includeHashChanges)&&void 0!==e?e:rb.includeHashChanges,domainAllowlist:null!==(d=a.domainAllowlist)&&void 0!==d?d:rb.domainAllowlist,domainBlocklist:null!==(f=a.domainBlocklist)&&
void 0!==f?f:rb.domainBlocklist,requireLcp:rb.requireLcp,lcpTimeoutMs:rb.lcpTimeoutMs})}function re(a){a=new URL(a,location.href);return"".concat(a.origin).concat(a.pathname).concat(a.search).concat(a.hash)}function wg(a){a=a.split("#");var b=a[1];return{originPathSearch:a[0],hash:null!==b&&void 0!==b?b:""}}function cj(a,b){return new Promise(function(c){var e=function(){var d=performance.now();if(d-a>=Qb.maxMeasurementMs)c(d);else{var f=performance.now()-((null===Ca||void 0===Ca?void 0:Ca.lastLongTaskTs)||
0)>=b,h=0===((null===ud||void 0===ud?void 0:ud.getInflightRequests())||0);f&&h?c(d):requestAnimationFrame(e)}};setTimeout(function(){return requestAnimationFrame(e)},50)})}function dj(){if(Ca&&!Ca.patched){Ca.patched=!0;try{(new PerformanceObserver(function(b){var c=0;for(b=b.getEntries();c<b.length;c++)Ca.lastLongTaskTs=performance.now()})).observe({entryTypes:["longtask"]})}catch(b){}try{var a=new PerformanceObserver(function(b){var c=0;for(b=b.getEntries();c<b.length;c++)Ca.lastLcpTs=b[c].startTime});
a.observe({type:"largest-contentful-paint",buffered:!0});null===window||void 0===window?void 0:window.addEventListener("pagehide",function(){try{a.disconnect()}catch(b){}})}catch(b){}}}function xg(a){var b=history[a];history[a]=function(c,e,d){c=b.call(this,c,e,d);se(a,null!==d&&void 0!==d?d:location.href);return c}}function se(a,b){if(Ca){b=re(b);if(!Qb.includeHashChanges){var c=wg(Ca.lastUrlKey),e=wg(b);if(c.originPathSearch===e.originPathSearch&&c.hash!==e.hash)return}if(b!==Ca.lastUrlKey||"replaceState"===
a)Ca.lastUrlKey=b,Ca.currentMeasurement&&(Ca.currentMeasurement=null),ej(a,b)}}function ej(a,b){return Ac(this,void 0,void 0,function(){var c,e,d,f,h;return Bc(this,function(g){switch(g.label){case 0:if(!Ca||!te)return[2];c=++Ca.navSeq;e=performance.now();Ca.currentMeasurement={id:c,startTime:e,urlKey:b,trigger:a};return[4,cj(e,Qb.idleWindowMs)];case 1:d=g.sent();if(!Ca.currentMeasurement||Ca.currentMeasurement.id!==c)return[2];f=Math.round((d-e)/1E3*100)/100;h={load_time:f,page_url:b,trigger:a,navigation_id:c,
start_time:Math.round(e/1E3*100)/100,end_time:Math.round(d/1E3*100)/100};try{te.trackCustomEvent({name:"conviva_soft_navigation",data:h})}catch(m){}Ca.currentMeasurement=null;return[2]}})})}function fj(a){var b,c,e;try{var d=null===(b=null===a||void 0===a?void 0:a.core)||void 0===b?void 0:b.getConfig();bj(d);if((null!==(e=null===(c=null===d||void 0===d?void 0:d.softNavigationTrackingConfiguration)||void 0===c?void 0:c.enabled)&&void 0!==e?e:ja.softNavigationTrackingConfiguration.enabled)&&(null===
a||void 0===a?void 0:a.getSamplingMode())!==E.SAMPLING_MODES.NONE){var f=location.hostname;Qb.domainAllowlist.length&&!Qb.domainAllowlist.some(function(h){return f.endsWith(h)})||Qb.domainBlocklist.some(function(h){return f.endsWith(h)})||(Ca={lastLongTaskTs:0,lastLcpTs:0,currentMeasurement:null,navSeq:0,patched:!1,lastUrlKey:re(location.href)},te=a,ud=yg.getInstance(a.trackNetworkRequest,a.trackerConfiguration,a.getSamplingMode),dj(),xg("pushState"),xg("replaceState"),addEventListener("popstate",
function(){return se("popstate",location.href)},{signal:Ia}),addEventListener("hashchange",function(){return se("hashchange",location.href)},{signal:Ia}),document.addEventListener("DOMContentLoaded",function(){Ca&&(Ca.lastUrlKey=re(location.href))},{signal:Ia}))}}catch(h){}}function Ta(){if(!$a)return!1;var a=$a.core.getConfig();a=null===a||void 0===a?void 0:a.valueProbes;return!0===(null===a||void 0===a?void 0:a.enabled)}function gj(a){return new Promise(function(b){return setTimeout(b,a)})}function zg(a){a=
new URL(a,location.href);return"".concat(a.origin).concat(a.pathname).concat(a.search).concat(a.hash)}function Ag(a){var b=a.emit||"once_per_view";return"always"===b?!0:"once_per_session"===b?!vd.has(a.id):"once_per_view"===b?!Nc.has(a.id):!1}function hj(a,b){if(!b)return!0;var c=b.key,e=b.op;b=b.val;var d=null;d="class"===c?a.className||"":"id"===c?a.id||"":a.getAttribute(c)||"";var f=d.toLowerCase();a=Array.isArray(b)?b.map(function(h){return String(h).toLowerCase()}):[String(b).toLowerCase()];
return"=="===e?a.includes(f):"contains"===e?a.some(function(h){return f.includes(h)}):!1}function Bg(a){return Ac(this,void 0,void 0,function(){var b;return Bc(this,function(c){switch(c.label){case 0:if(!Ta())return[2];if(10<=ue)return ve.push(a),[2];ue++;c.label=1;case 1:return c.trys.push([1,,3,4]),[4,ij(a)];case 2:return c.sent(),[3,4];case 3:return ue--,0<ve.length&&(b=ve.shift(),Bg(b)),[7];case 4:return[2]}})})}function ij(a){var b,c,e;return Ac(this,void 0,void 0,function(){var d,f,h,g,m,n,
r,k,p,t,q,w,v,u,A,F,B;return Bc(this,function(G){switch(G.label){case 0:if(!Ta()||!Ag(a))return[2];d=Date.now();f=[0,50,200];h=null!==(c=null===(b=a.strategy)||void 0===b?void 0:b.maxTotalMs)&&void 0!==c?c:1E3;g=(null===(e=a.strategy)||void 0===e?0:e.retries)&&0<a.strategy.retries.length?a.strategy.retries:f;for(var D=a.id,z=0,J=0;J<D.length;J++)z=(z<<5)-z+D.charCodeAt(J),z&=z;m=Math.abs(z)%100;n=0;r=[];t=p=k=0;G.label=1;case 1:if(!(t<g.length))return[3,5];q=g[t];w=0===t?0:Math.max(0,q+2*(m%20/20-
.5)*Math.min(.1*q,5));return 0<w?[4,gj(w)]:[3,3];case 2:G.sent(),G.label=3;case 3:if(Date.now()-d>=h)return[3,5];n++;D=a.conditions;z=[];J=0;for(var K=a.selectors;J<K.length;J++){var Y=K[J];try{var V=document.querySelectorAll(Y);for(Y=0;Y<V.length;Y++){var Z=V[Y];hj(Z,D)&&z.push(Z)}if(0<z.length)break}catch(ra){}}v=z;0<v.length&&0===r.length&&(r=v,k=Date.now()-d,p=n);G.label=4;case 4:return t++,[3,1];case 5:if(0<r.length){u=a.emit||"once_per_view";A=0;for(F=r;A<F.length;A++){B=F[A];var M=B;G=a;V=
k;Z=p;if($a)try{if($a.getSamplingMode()!==E.SAMPLING_MODES.NONE){var C=void 0,X=void 0,H=M,fa=G,ia={};z=E.CLICK_KEY_MAX_LENGTH;H.id&&(ia.id=xa(H.id,z));H.className&&(ia["class"]=xa(H.className,z));H.tagName&&(ia.elementName=xa(H.tagName.toLowerCase(),z));if(null===(X=H.innerText)||void 0===X?0:X.trim())ia.text=xa(H.innerText.trim(),z);H.getAttribute("name")&&(ia.name=xa(H.getAttribute("name")||"",z));H.getAttribute("type")&&(ia.elementType=xa((null===(C=H.getAttribute("type"))||void 0===C?void 0:
C.toLowerCase())||"",z));if(null===H||void 0===H?0:H.placeholder)ia.placeholder=xa(H.placeholder,z);"password"!==H.getAttribute("type")&&H.value&&(ia.value=xa(H.value,z));if(fa.collectAttributes&&0<fa.collectAttributes.length)for(C=0,J=fa.collectAttributes;C<J.length;C++)K=J[C],(Y=H.getAttribute(K))&&(ia[K]=xa(Y,z));D=ia;b:{var ta=G.selectors;for(H=0;H<ta.length;H++){var qa=ta[H];try{if(M.matches(qa)){var da=qa;break b}}catch(ra){}}da=null}var ya={probeId:G.id,selectorMatched:da||G.selectors[0]||
"",timestamp:Date.now(),attemptCount:Z,discoveryTime:V,method:1===Z?"immediate":"retry"},O=N(N({},D),ya);$a.core.track(zb({name:"conviva_dom_value_probe",data:JSON.stringify(O)}))}}catch(ra){ha.warn("Conviva App Tracker: Error emitting probe event",ra)}}D=a.id;z=u||"once_per_view";"once_per_session"===z?vd.add(D):"once_per_view"===z&&Nc.add(D)}return[2]}})})}function we(a){if(Ta()&&$a&&0!==a.length){var b=0;for(a=a.filter(function(c){return Ag(c)});b<a.length;b++)Bg(a[b])}}function Cg(){var a;if(Ta()&&
$a){var b=$a.core.getConfig(),c=null===b||void 0===b?void 0:b.valueProbes;(null===c||void 0===c?0:c.enabled)&&(null===(a=null===c||void 0===c?void 0:c.probes)||void 0===a?0:a.length)&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){Ta()&&requestAnimationFrame(function(){return we(c.probes)})}):Ta()&&requestAnimationFrame(function(){return we(c.probes)}))}}function xe(a,b){var c;if(Ta()&&$a){b=zg(b);var e=zg(location.href);if(b!==e||"replaceState"===a)Nc.clear(),
a=$a.core.getConfig(),a=null===a||void 0===a?void 0:a.valueProbes,(null===a||void 0===a?0:a.enabled)&&(null===(c=null===a||void 0===a?void 0:a.probes)||void 0===c?0:c.length)&&(c=a.probes.filter(function(d){return"once_per_view"===(d.emit||"once_per_view")}),0<c.length&&we(c))}}function jj(){if(Ta()&&!Dg&&$a){var a=history.pushState,b=history.replaceState;history.pushState=function(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];a.apply(this,c);Ta()&&xe("pushState",location.href)};history.replaceState=
function(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];b.apply(this,c);Ta()&&xe("replaceState",location.href)};Za(window,"popstate",function(){Ta()&&xe("popstate",location.href)},{signal:Ia});Dg=!0}}function kj(){"undefined"!==typeof window&&window.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",function(){Eg?Ta()?(vd.clear(),Nc.clear(),Cg()):(vd.clear(),Nc.clear()):Eg=!0},{signal:Ia})}function lj(a){try{$a=a,(null===a||void 0===a?void 0:a.getSamplingMode())!==
E.SAMPLING_MODES.NONE&&Ta()&&(jj(),kj(),Cg())}catch(b){ha.warn("Conviva App Tracker: Error enabling DOM value probe",b)}}function mc(a,b){return ye.get(a)||ye.set(a,new b),ye.get(a)}function ze(a){var b,c;try{var e=Ae.core.getConfig();if(!0===(null===(b=null===e||void 0===e?void 0:e.webVitals)||void 0===b?void 0:b.enabled)){var d="conviva_webvitals_".concat(a.name.toLowerCase()),f={value:a.value,rating:a.rating,delta:a.delta,id:a.id,navigationType:a.navigationType,attribution:mj(a,(null===(c=null===
e||void 0===e?void 0:e.webVitals)||void 0===c?void 0:c.collectattr)||[])};Ae.core.track(zb({name:d,data:JSON.stringify(f)}))}}catch(h){console.warn("Error sending Web Vitals event",h)}}function mj(a,b){var c=a.attribution;if(c){var e={};(a={LCP:"target",INP:"interactionTarget",CLS:"largestShiftTarget"}[a.name])&&null!=c[a]&&(e[a]=c[a]);b.forEach(function(d){if(d){var f=d.split("."),h=c;for(d=0;d<f.length;d++){var g=f[d];if(h&&"object"===na(h)&&g in h)h=h[g];else return}var m=e;f.forEach(function(n,
r){if(r===f.length-1)m[n]=h;else{if("object"!==na(m[n])||null===m[n])m[n]={};m=m[n]}})}});return Object.keys(e).length?e:void 0}}function nj(a,b,c,e,d){void 0===d&&(d={});var f=[];a=function(g,m,n,r,k){function p(){Rb=hg(window.location.hostname,window.location.href,je());Rb[1]!==sb&&(Oc=je(sb));Fg=bg(Rb[0]);sb=Rb[1]}function t(l){try{var x=(new Date).getTime(),y=l.currentTarget;if(null===y||void 0===y?0:y.href){l="_cnv="+(wd+"."+x);var I=y.href.split("#"),P=I[0].split("?"),S=P.shift(),U=P.join("?");
if(U){P=!0;var Q=U.split("&");for(x=0;x<Q.length;x++)if("_cnv="===Q[x].substr(0,5)){P=!1;Q[x]=l;U=Q.join("&");break}P&&(U=l+"&"+U)}else U=l;I[0]=S+"?"+U;var T=I.join("#");y.href=T}}catch(la){console.warn("Conviva App Tracker:: Error in linkDecorationHandler of decorateLinks ".concat(la))}}function q(l){if("undefined"!=typeof document&&document.links&&0<document.links.length)for(var x=0;x<document.links.length;x++){var y=document.links[x];!y.spDecorationEnabled&&l(y)&&(Za(y,"click",t,!0),Za(y,"mousedown",
t,!0),y.spDecorationEnabled=!0)}}function w(l){if(Gg){var x=/#.*/;l=l.replace(x,"")}Hg&&(x=/[{}]/g,l=l.replace(x,""));return l}function v(l){return(l=/^([a-z]+):/.exec(l))?l[1]:null}function u(l){var x,y,I,P=null!==(I=null===(y=null===(x=tb.getConfig().emitterConfiguration)||void 0===x?void 0:x.batching)||void 0===y?void 0:y.urgentEvents)&&void 0!==I?I:[],S=x="",U="",Q="";y=l.getPayload();"string"===typeof y.e&&(Q=y.e);if("ue"!==Q&&"pv"!==Q&&"pp"!==Q)return!1;l=l.getJson().find(function(T){return"ue_pr"===
T.keyIfNotEncoded||"ue_px"===T.keyIfEncoded});"undefined"!==typeof l&&(l=l.json,"object"===na(l.dt)&&null!==l.dt&&(l=l.dt,"string"===typeof l.sc&&(x=l.sc),"object"===na(l.dt)&&"string"===typeof l.dt.name&&(S=l.dt.name)),U=x.split("/")[1]||"");return P.some(function(T){T=T.toLowerCase();return""===T?!1:T===Q.toLowerCase()||T===U.toLowerCase()||T===S.toLowerCase()})}function A(l){l=nc+l+"."+Sb;if("localStorage"==Ma){try{var x=window.localStorage,y=x.getItem(l+".expires");if(null===y||+y>Date.now())var I=
x.getItem(l);else x.removeItem(l),x.removeItem(l+".expires"),I=void 0}catch(P){I=void 0}return I}if("cookie"==Ma||"cookieAndLocalStorage"==Ma)return pb(l)}function F(){p();Sb=oj((Pc||Fg)+(Be||"/")).slice(0,4)}function B(){Ce=(new Date).getTime()}function G(){var l=D(),x=l[0];x<xd?xd=x:x>yd&&(yd=x);l=l[1];l<zd?zd=l:l>Ad&&(Ad=l);B()}function D(){var l="undefined"!=typeof document?null===document||void 0===document?void 0:document.documentElement:void 0;return l?[l.scrollLeft||window.pageXOffset,l.scrollTop||
window.pageYOffset]:[0,0]}function z(){var l=D(),x=l[0];yd=xd=x;Ad=zd=l=l[1]}function J(){Y(nc+"ses."+Sb,"*",Ig)}function K(l){var x=nc+"id."+Sb;l.shift();l=l.join(".");Y(x,l,Jg)}function Y(l,x,y){if(!Qc||Bd)"localStorage"==Ma?md(l,x,y):("cookie"==Ma||"cookieAndLocalStorage"==Ma)&&pb(l,x,y,Be,Pc,Cd,Dd)}function V(l){var x=nc+"id."+Sb,y=nc+"ses."+Sb;cg(x);cg(y);hc(x,Pc,Cd,Dd);hc(y,Pc,Cd,Dd);null!==l&&void 0!==l&&l.preserveSession||(Tb=yb.v4(),ib=1);null!==l&&void 0!==l&&l.preserveUser||(wd=yb.v4(),
Ub=null)}function Z(l){l&&l.stateStorageStrategy&&(k.stateStorageStrategy=l.stateStorageStrategy,Ma=Kg(k));Qc=!!k.anonymousTracking;Bd=Lg(k);De=Mg(k);ub.setUseLocalStorage("localStorage"==Ma||"cookieAndLocalStorage"==Ma);ub.setAnonymousTracking(De)}function M(){var l;try{var x=null;if(null===(l=null===k||void 0===k?void 0:k.configs)||void 0===l?0:l.enableClIdInCookies){b:{l="Conviva_sdkConfig";try{var y=pb(l);if(y&&0<y.length){try{if("string"===typeof y&&0!==y.length&&/%[0-9A-Fa-f]{2}/.test(y)){var I=
decodeURIComponent(y);var P=!/%[0-9A-Fa-f]{2}/.test(I)}else P=!1}catch(pa){P=!1}if(P)hc(l,ia(),"None",!0);else{var S=y;break b}}S=window.localStorage.getItem(l)}catch(pa){ha.warn("getConvivaCookie",pa),S=null}}S&&(x=S)}else try{hc("Conviva_sdkConfig",ia(),"None",!0)}catch(pa){}x||(x=window.localStorage.getItem("Conviva.sdkConfig"));var U=JSON.parse(x||"{}");"{}"===U||"undefined"===typeof U?Rc=ta():(Rc=U.clId||ta(),2147483648<=Ed?Ed=-1:Ed++);try{Fd=Math.floor(2147483647*Math.random())}catch(pa){console.warn(pa),
Fd=-1}var Q=N(N({},U),{clId:Rc,iid:Fd});b:{var T;try{x=null;try{x=JSON.stringify(Q)}catch(pa){break b}window.localStorage.setItem("Conviva.sdkConfig",x);if(null===(T=null===k||void 0===k?void 0:k.configs)||void 0===T?0:T.enableClIdInCookies){Q=x;try{var la=ia();pb("Conviva_sdkConfig",Q,void 0,"/",la,"None",!0)}catch(pa){ha.warn("setConvivaCookie",pa)}}}catch(pa){}}}catch(pa){ha.warn("getEventIndexByClid",pa)}if(!Qc||Bd)la="none"!=Ma&&!!A("ses"),Q=C(),Q[1]?T=Q[1]:(T=Qc?"":yb.v4(),Q[1]=T),wd=T,Tb=la?
Q[6]:Kc(Q),ib=Q[3],"none"!=Ma&&(J(),me(Q),K(Q))}function C(){if("none"==Ma)return["1","",0,0,0,void 0,"","","",void 0];var l=A("id")||void 0;return Fi(l,wd,Tb,ib)}function X(l,x){var y,I,P,S,U=!0,Q=tb.getConfig();"undefined"!==typeof Q.mend?U=Q.mend:"undefined"!==typeof(null===(I=null===(y=null===k||void 0===k?void 0:k.configs)||void 0===y?void 0:y.network)||void 0===I?void 0:I.mergeEndpoint)&&(U=null===(S=null===(P=null===k||void 0===k?void 0:k.configs)||void 0===P?void 0:P.network)||void 0===S?
void 0:S.mergeEndpoint);return 0===l.indexOf("http")?(x&&U&&(l=l.replace(/^(https?:\/\/)(.*)$/,"$1"+x+".$2")),l):x&&U?("https:"===document.location.protocol?"https":"http")+"://"+x+"."+l:("https:"===document.location.protocol?"https":"http")+"://"+l}function H(){Ng&&null!=r.pageViewId||(r.pageViewId=yb.v4())}function fa(){null==r.pageViewId&&(r.pageViewId=yb.v4());return r.pageViewId}function ia(){var l=window.location.hostname,x=l.split(".");return 2<=x.length?"."+x.slice(-2).join("."):l}function ta(){try{return da({"First Launch":"Yes"}),
Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(l){console.warn(l)}}function qa(l){try{var x=JSON.parse(l);return"object"===na(x)}catch(y){return!1}}function da(l){try{var x=Object.keys(l);qa(JSON.stringify(l))?x.forEach(function(y){if(""!==y.trim()){var I=l[y];I&&""!==I&&(I="object"===na(I)?JSON.stringify(I):""+I,Object.defineProperty(Sc,
y,{value:I,writable:!0,enumerable:!0,configurable:!0}))}}):console.warn("Conviva AppTracker:: Invalid JSON Format")}catch(y){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",y)}}function ya(l){try{l.forEach(function(x){delete Sc[x]})}catch(x){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}function O(l){try{var x=Object.keys(l);qa(JSON.stringify(l))?x.forEach(function(y){""!==y&&Object.defineProperty(Ee,y,{value:""+l[y],writable:!0,
enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(y){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",y)}}function ra(l){try{var x=Object.keys(l);qa(JSON.stringify(l))?x.forEach(function(y){if(""!==y.trim()){var I=l[y];I&&""!==I&&("object"!==na(I)&&(I=""+I),Object.defineProperty(Sc,y,{value:I,writable:!0,enumerable:!0,configurable:!0}))}}):console.warn("Conviva AppTracker:: Invalid JSON Format")}catch(y){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",
y)}}function L(l){var x=l.context;l=l.contextCallback;var y=new Date,I=!1;if(Qa.enabled&&!Qa.installed){I=Qa.installed=!0;var P={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var U=!1,Q=Object.defineProperty({},"passive",{get:function(){U=!0},set:function(){}}),T=function(){};window.addEventListener("testPassiveEventSupport",T,Q);window.removeEventListener("testPassiveEventSupport",T,Q);P.hasSupport=U}}};P.update();var S="onwheel"in document.createElement("div")?
"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(P,"hasSupport")?Za(document,S,B,{passive:!0}):Za(document,S,B);z();S=function(U,Q){void 0===Q&&(Q=B);return function(T){return Za(document,T,Q)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(S(document));["resize","focus","blur"].forEach(S(window));S(window,G)("scroll")}if(Qa.enabled&&(pj||I))for(y in Ce=y.getTime(),y=void 0,Qa.configurations)if(I=Qa.configurations[y])window.clearInterval(I.activityInterval),
ca(I,x,l)}function W(){var l,x,y,I,P,S,U,Q,T,la,pa,eb,jb,Ua,Vb,Tc,Da,oc,Uc,Vc,vb,Fe,Ge,He,Ie,Je,Ke,Le,Me,Ne,Oe,Pe;try{var ua=null===(l=null===h||void 0===h?void 0:h.core)||void 0===l?void 0:l.getConfig();l=void 0;Ee={};var Gd=pc.MERGE;"undefined"!==typeof(null===(y=null===(x=null===k||void 0===k?void 0:k.configs)||void 0===x?void 0:x.metaTagsTracking)||void 0===y?void 0:y.preference)?Gd=null===(P=null===(I=null===k||void 0===k?void 0:k.configs)||void 0===I?void 0:I.metaTagsTracking)||void 0===P?void 0:
P.preference:!0===(null===(U=null===(S=null===k||void 0===k?void 0:k.configs)||void 0===S?void 0:S.metaTagsTracking)||void 0===U?void 0:U.force)?Gd=pc.APP:"undefined"!==typeof(null===(Q=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===Q?void 0:Q.pref)&&(Gd=null===(T=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===T?void 0:T.pref);switch(Gd){case pc.APP:if(!1===(null===(pa=null===(la=null===k||void 0===k?void 0:k.configs)||void 0===la?void 0:la.metaTagsTracking)||
void 0===pa?void 0:pa.enabled))return;0<(null===(Ua=null===(jb=null===(eb=null===k||void 0===k?void 0:k.configs)||void 0===eb?void 0:eb.metaTagsTracking)||void 0===jb?void 0:jb.tags)||void 0===Ua?void 0:Ua.length)&&(l=Ka([],null===(Tc=null===(Vb=null===k||void 0===k?void 0:k.configs)||void 0===Vb?void 0:Vb.metaTagsTracking)||void 0===Tc?void 0:Tc.tags,!0));break;case pc.REMOTE:if(!1===(null===(Da=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===Da?void 0:Da.enabled))return;
"undefined"!=typeof(null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)&&0<(null===(Uc=null===(oc=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===oc?void 0:oc.tags)||void 0===Uc?void 0:Uc.length)&&(l=Ka([],null===(Vc=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===Vc?void 0:Vc.tags,!0));break;default:if("undefined"==typeof(null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)&&!1===(null===(Fe=null===(vb=null===k||void 0===
k?void 0:k.configs)||void 0===vb?void 0:vb.metaTagsTracking)||void 0===Fe?void 0:Fe.enabled)||"undefined"==typeof(null===(Ge=null===k||void 0===k?void 0:k.configs)||void 0===Ge?void 0:Ge.metaTagsTracking)&&!1===(null===(He=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===He?void 0:He.enabled))return;var Og=null===(Je=null===(Ie=null===k||void 0===k?void 0:k.configs)||void 0===Ie?void 0:Ie.metaTagsTracking)||void 0===Je?void 0:Je.tags,Pg=null===(Ke=null===ua||void 0===ua?void 0:
ua.metaTagsTrackingConfiguration)||void 0===Ke?void 0:Ke.tags;!1===(null===(Me=null===(Le=null===k||void 0===k?void 0:k.configs)||void 0===Le?void 0:Le.metaTagsTracking)||void 0===Me?void 0:Me.enabled)&&(Og=[]);!1===(null===(Ne=null===ua||void 0===ua?void 0:ua.metaTagsTrackingConfiguration)||void 0===Ne?void 0:Ne.enabled)&&(Pg=[]);l=Ka([],zi(Og||[],Pg||[]),!0)}if("undefined"!=typeof l&&0<(null===l||void 0===l?void 0:l.length)){x={};var Wb=null===document||void 0===document?void 0:document.head,qc=
null===Wb||void 0===Wb?void 0:Wb.getElementsByTagName("meta");if("undefined"!=typeof qc&&0<(null===qc||void 0===qc?void 0:qc.length))for(Wb=0;Wb<qc.length;Wb++){var Qg=qc[Wb];for(y=0;y<l.length;y++){var Hd=Qg.getAttribute(l[y].key),Rg=Qg.getAttribute(l[y].value);I=void 0;if(null===(Oe=l[y])||void 0===Oe?0:Oe.condition)I=null===(Pe=l[y])||void 0===Pe?void 0:Pe.condition;Hd&&(I&&I.includes(Hd)?x[Hd]=Rg:I&&0!==I.length||(x[Hd]=Rg))}}h.setMetaCustomTags(x)}}catch(qj){console.warn("Conviva App Tracker:: setPageMetaTagsAsCustomTags",
qj)}}function ca(l,x,y){var I=function(S,U){var Q;p();var T=null===(Q=null===h||void 0===h?void 0:h.core)||void 0===Q?void 0:Q.getConfig();T.enablePeriodicHeartbeat?(void 0!=T.periodicHeartbeatInterval&&(Q=1E3*T.periodicHeartbeatInterval,Q!=l.configHeartBeatTimer&&(l.configHeartBeatTimer=Q,window.clearInterval(l.activityInterval),l.activityInterval=window.setInterval(P,Q))),S({context:U,pageViewId:fa(),minXOffset:xd,minYOffset:zd,maxXOffset:yd,maxYOffset:Ad})):window.clearInterval(l.activityInterval);
z()};window.setTimeout(function(){I(l.callback,(x||[]).concat(y?y():[]))},2E3);var P=function(){var S=new Date;(!1===(null===document||void 0===document?void 0:document.hidden)||"visible"==(null===document||void 0===document?void 0:document.visibilityState)||(null===document||void 0===document?0:document.pictureInPictureElement)||Ce+l.configHeartBeatTimer>S.getTime()||!0===Sg)&&I(l.callback,(x||[]).concat(y?y():[]))};l.activityInterval=window.setInterval(P,l.configHeartBeatTimer)}function aa(l){var x=
l.minimumVisitLength,y=l.heartbeatDelay;l=l.callback;if(Ic(x)&&Ic(y))return{configMinimumVisitLength:1E3*x,configHeartBeatTimer:1E3*y,callback:l};ha.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function ea(l){var x=l.context,y=l.minXOffset,I=l.minYOffset,P=l.maxXOffset,S=l.maxYOffset;l=document.title;l!==Db&&(Db=l,rc=void 0);if(Xb()!==E.SAMPLING_MODES.NONE){Ba();l=tb;var U=l.track,Q=w(Yb||sb),T=ie(rc||Db),la=w(Id||Oc);y=Math.round(y);P=Math.round(P);I=Math.round(I);
S=Math.round(S);var pa=ae();pa.add("e","pp");pa.add("url",Q);pa.add("page",T);pa.add("refr",la);y&&!isNaN(Number(y))&&pa.add("pp_mix",y.toString());P&&!isNaN(Number(P))&&pa.add("pp_max",P.toString());I&&!isNaN(Number(I))&&pa.add("pp_miy",I.toString());S&&!isNaN(Number(S))&&pa.add("pp_may",S.toString());U.call(l,pa,x)}}function Ba(){var l,x,y=null===(x=null===h||void 0===h?void 0:h.core)||void 0===x?void 0:x.getConfig().pageUrlTrackingConfig;x=Sc[E.PAGE_URL_QUERY_PARAMS];if(y){var I={targetUrl:w(Yb||
sb),rqq:{}};I=eg(I,null===y||void 0===y?void 0:y.collectattr,null,null===y||void 0===y?void 0:y.maxQueryLength);if(!x&&I.rqq||x!==JSON.stringify(I.rqq))ya([E.PAGE_URL_QUERY_PARAMS]),ra((l={},l[E.PAGE_URL_QUERY_PARAMS]=I.rqq,l))}else x&&ya([E.PAGE_URL_QUERY_PARAMS])}var Pa,Fa,oa,db,lc,Qe,Re,Se,Te,Ue,Ve,We,Xe,Ye,Ze,$e;if(window&&window.localStorage){var rj=window.localStorage,sc={sensorVersion:n,ck:null!==(Pa=k.convivaCustomerKey)&&void 0!==Pa?Pa:""};sc=JSON.stringify(sc);sc="function"===typeof btoa?
btoa(sc):fi(sc);rj.setItem(E.VISUAL_LABELLING_CONFIG,sc)}var Jd=kb,sj=Ia;Jd&&sj||("function"===typeof AbortController&&(kb=new AbortController),Ia=null===kb||void 0===kb?void 0:kb.signal);m||(m="CAT");var ka=tj(n,m,k).convivaRemoteTrackerConfig;null===(Fa=qd(ka.performanceContextConfig))||void 0===Fa?void 0:Fa.activateLCPObserver();k.eventMethod=null!==(oa=k.eventMethod)&&void 0!==oa?oa:"post";var Kg=function(l){var x;return null!==(x=l.stateStorageStrategy)&&void 0!==x?x:"cookieAndLocalStorage"},
Lg=function(l){var x,y;return"boolean"===typeof l.anonymousTracking?!1:null!==(y=!0===(null===(x=l.anonymousTracking)||void 0===x?void 0:x.withSessionTracking))&&void 0!==y?y:!1},Mg=function(l){var x,y;return"boolean"===typeof l.anonymousTracking?!1:null!==(y=!0===(null===(x=l.anonymousTracking)||void 0===x?void 0:x.withServerAnonymisation))&&void 0!==y?y:!1};f.push(function(){return{beforeTrack:function(l){var x=A("ses"),y=C();af=bf?!!pb(bf):!1;Tg||af?V():("0"===y[0]?(Tb=x||"none"==Ma?y[6]:Kc(y),
ib=y[3]):(new Date).getTime()-cf>1E3*Ig&&(ib++,Tb=Kc(y,ib)),me(y),l.add("uid",Qc?null:Ub),p(),l.add("refr",w(Id||Oc)),document&&(Db=document.title,x=ie(rc||Db),l.add("page",x)),l.add("url",w(Yb||sb)),"none"!=Ma&&(K(y),J()),cf=(new Date).getTime())}}}());f.push(function(){return{contexts:function(){return[{sc:"cv/clid/1-0-2",dt:{clid:Rc,iid:Fd.toString(),ck:uj,eventIndex:Ed++}}]}}}());f.push(function(){return{contexts:function(){return[{sc:"cv/ct/1-0-0",dt:{data:N(N({},Sc),Ee)}}]}}}());f.push(function(){return{contexts:function(){var l,
x=null===(l=null===h||void 0===h?void 0:h.core)||void 0===l?void 0:l.getConfig();return!0===(null===x||void 0===x?void 0:x.applicationContext)?[{sc:"spm/app/1-0-0",dt:{build:Ug,version:Ug}}]:[]}}}());f.push(function(){return{contexts:function(){var l={sch:"sdk.js.eco.1"};l.cat=df.DeviceCategory.WEB;try{var x=null===k||void 0===k?void 0:k.deviceMetadata;if(x){var y=x.DeviceBrand,I=x.DeviceCategory,P=x.DeviceManufacturer,S=x.DeviceModel,U=x.DeviceType,Q=x.DeviceVersion,T=x.OperatingSystemName,la=x.OperatingSystemVersion,
pa=x.FrameworkName,eb=x.FrameworkVersion;"string"===typeof I&&Object.values(df.DeviceCategory).includes(I)?l.cat=I:l.cat="INVALID"+(I?": ".concat(I):"");"string"===typeof y&&""!=y&&(l.dvb=y);"string"===typeof P&&""!=P&&(l.dvma=P);"string"===typeof S&&""!=S&&(l.dvm=S);U&&Object.values(df.DeviceType).includes(U)&&(l.dvt=U);"string"===typeof Q&&""!=Q&&(l.dvv=Q);"string"===typeof T&&""!=T&&(l.os=T);"string"===typeof la&&""!=la&&(l.osv=la);"string"===typeof pa&&""!=pa&&(l.fw=pa);"string"===typeof eb&&
""!=eb&&(l.fwv=eb)}}catch(jb){ha.warn("error in setting platform metadata context",jb)}return null!=l&&0<Object.keys(l).length?[{sc:"iglu:com.conviva/pm/jsonschema/1-0-2",dt:l}]:[]}}}());try{(null!==(db=null===k||void 0===k?void 0:k.plugins)&&void 0!==db?db:[]).forEach(function(l){l.contexts||f.push(l)})}catch(l){console.warn("ConvivaAppTracker : issue while processing customer passed pligins",l)}var Xb=function(){var l;try{var x=null===(l=null===h||void 0===h?void 0:h.core)||void 0===l?void 0:l.getConfig();
if(x){if(void 0===x.catRcLastUpdatedTs||0===x.catRcLastUpdatedTs)return E.SAMPLING_MODES.RCFG;var y=x.controlIngestConfig?Ai(null===x||void 0===x?void 0:x.controlIngestConfig):E.SAMPLING_MODES.RCFG;"undefined"!==typeof window&&"undefined"!==typeof window.localStorage&&localStorage.setItem(E.SAMPLING_MODE_STORAGE_KEY,y);return y}return E.SAMPLING_MODES.RCFG}catch(I){return ha.error("Error while getting sampling mode"),E.SAMPLING_MODES.RCFG}},Kd=function(l){if("object"===na(l)&&null!==l)return l;if("string"===
typeof l)try{var x=JSON.parse(l);return x&&"object"===na(x)&&0===Object.keys(x).length?void 0:x}catch(y){}};var tb=za=qi({base64:null===ka||void 0===ka?void 0:ka.base64,corePlugins:f,callback:function(l){Tg||af||ub.enqueueRequest(l.build(),ef,u(l))},exceptionAutotracking:ka.exceptionAutotracking,enablePeriodicHeartbeat:ka.enablePeriodicHeartbeat,periodicHeartbeatInterval:ka.periodicHeartbeatInterval,enc:ka.enc,mend:ka.mend,maxLocalStorageQueueSize:ka.maxLocalStorageQueueSize,maxGetBytes:ka.maxGetBytes,
bufferSize:ka.bufferSize,customEventTrackingConfiguration:ka.customEventTrackingConfiguration,softNavigationTrackingConfiguration:ka.softNavigationTrackingConfiguration,networkRequestTrackingConfiguration:ka.networkRequestTrackingConfiguration,metaTagsTrackingConfiguration:ka.metaTagsTrackingConfiguration,traceparentconfig:ka.traceparentconfig,baggageConfiguration:ka.baggageConfiguration,performanceContextConfig:ka.performanceContextConfig,lifecycleAutotracking:ka.lifecycleAutotracking,configurationVersion:ka.configurationVersion,
catRcLastUpdatedTs:ka.catRcLastUpdatedTs,cacheRefreshInterval:ka.cacheRefreshInterval,endpoint:ka.endpoint,controlIngestConfig:ka.controlIngestConfig,applicationContext:ka.applicationContext,emitterConfiguration:ka.emitterConfiguration,di:ka.di,clickcc:ka.clickcc,collectionRateLimit:ka.collectionRateLimit,pageUrlTrackingConfig:ka.pageUrlTrackingConfig,sessionReplayConfiguration:ka.sessionReplayConfiguration,evtStreamTrackingConfiguration:ka.evtStreamTrackingConfiguration,valueProbes:ka.valueProbes,
webVitals:ka.webVitals});var Rb=hg(window.location.hostname,window.location.href,je()),Fg=bg(Rb[0]),sb=Rb[1],Oc=Rb[2],Id,vj=null!==(lc=k.platform)&&void 0!==lc?lc:"web",ef=X(ka.endpoint,k.convivaCustomerKey),wj=null!==(Qe=k.postPath)&&void 0!==Qe?Qe:"/ctp",xj=null!==(Re=k.appId)&&void 0!==Re?Re:"",uj=null!==(Se=k.convivaCustomerKey)&&void 0!==Se?Se:"",Ug=null!==(Te=k.appVersion)&&void 0!==Te?Te:"",Yb,Sc={},Ee={},Db="undefined"!==typeof document?document.title:void 0,rc,pj=null!==(Ue=k.resetActivityTrackingOnPageView)&&
void 0!==Ue?Ue:!0,Gg,Hg,nc=null!==(Ve=k.cookieName)&&void 0!==Ve?Ve:"_cnv_",Pc=null!==(We=k.cookieDomain)&&void 0!==We?We:void 0,Be="/",Cd=null!==(Xe=k.cookieSameSite)&&void 0!==Xe?Xe:"None",Dd=null!==(Ye=k.cookieSecure)&&void 0!==Ye?Ye:!0,Vg=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Tg="undefined"!==typeof k.respectDoNotTrack?k.respectDoNotTrack&&("yes"===Vg||"1"===Vg):!1,bf,Jg=null!==(Ze=k.cookieLifetime)&&void 0!==Ze?Ze:63072E3,Ig=null!==($e=k.sessionCookieTimeout)&&void 0!==
$e?$e:1800,Bd=Lg(k),De=Mg(k),Qc=!!k.anonymousTracking,Ma=Kg(k),Rc,Fd,Ed=-1,Ce,cf=(new Date).getTime(),xd,yd,zd,Ad,Sb,wd,Tb,ib=1,Ub,ub=yj(g,r,Ma,k,wj,De,5E3,Xb),Ng=!1,ff=!1,Qa={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:1E3*ka.periodicHeartbeatInterval,callback:ea}}},Sg=!1,af;k.hasOwnProperty("discoverRootDomain")&&k.discoverRootDomain&&(Pc=yi(Cd,Dd));tb.setTrackerVersion(n);tb.setAppId(xj);tb.setPlatform(vj);F();M();ub.setCustomHeaders({"x-client-id":""+
Rc});k.crossDomainLinker&&q(k.crossDomainLinker);var gf={getDomainSessionIndex:function(){return ib},getPageViewId:function(){return fa()},newSession:function(){var l=C();"0"===l[0]?(Tb="none"!=Ma?Kc(l):l[6],ib=l[3],J()):(ib++,Tb=Kc(l,ib));me(l);"none"!=Ma&&(K(l),J());cf=(new Date).getTime()},getCookieName:function(l){return nc+l+"."+Sb},getUserId:function(){return Ub},getDomainUserId:function(){var l=C();return l&&1<l.length?l[1]:null},getDomainUserInfo:function(){return C()},setReferrerUrl:function(l){Id=
l},setCustomUrl:function(l){p();var x=sb,y;v(l)?Yb=l:"/"===l.slice(0,1)?Yb=v(x)+"://"+ld(x)+l:(x=w(x),0<=(y=x.indexOf("?"))&&(x=x.slice(0,y)),(y=x.lastIndexOf("/"))!==x.length-1&&(x=x.slice(0,y+1)),Yb=x+l)},setDocumentTitle:function(l){Db=document.title;rc=l},discardHashTag:function(l){Gg=l},discardBrace:function(l){Hg=l},setCookiePath:function(l){Be=l;F()},setVisitorCookieTimeout:function(l){Jg=l},crossDomainLinker:function(l){q(l)},enableActivityTracking:function(l){Qa.configurations.pagePing||
(Qa.enabled=!0,Qa.configurations.pagePing=aa(N(N({},l),{callback:ea})))},enableActivityTrackingCallback:function(l){Qa.configurations.callback||(Qa.enabled=!0,Qa.configurations.callback=aa(l))},updatePageActivity:function(){B()},setOptOutCookie:function(l){bf=l},setUserId:function(l){Ub=l},setConversationId:function(l){tb.setConversationId(l)},setUserIdFromLocation:function(l){p();Ub=Jc(l,sb)},setUserIdFromReferrer:function(l){p();Ub=Jc(l,Oc)},setUserIdFromCookie:function(l){Ub=pb(l)},setCollectorUrl:function(l,
x){ef=X(l,x);ub.setCollectorUrl(ef)},setBufferSize:function(l){ub.setBufferSize(l)},flushBuffer:function(l){void 0===l&&(l={});ub.executeQueue();l.newBufferSize&&ub.setBufferSize(l.newBufferSize)},trackPageView:function(l){var x;void 0===l&&(l={});W();var y=null===(x=null===h||void 0===h?void 0:h.core)||void 0===x?void 0:x.getConfig();try{l=N(N({},l),{context:qd(null===y||void 0===y?void 0:y.performanceContextConfig).contexts()})}catch(la){console.warn("Conviva App Tracker:: error adding performacetiming context to page view",
la)}var I=l.title;x=l.context;y=l.timestamp;l=l.contextCallback;p();ff&&H();ff=!0;Db=document.title;rc=I;I=ie(rc||Db);if(Xb()!==E.SAMPLING_MODES.NONE){Ba();var P=tb,S=P.track,U=w(Yb||sb),Q=w(Id||Oc),T=ae();T.add("e","pv");T.add("url",U);T.add("page",I);T.add("refr",Q);S.call(P,T,(x||[]).concat(l?l():[]),y)}},trackPagePing:function(l){void 0===l&&(l={});L(l)},trackVideoEvent:function(l){var x,y,I;void 0===l&&(l={});try{var P=this.core.getConfig(),S=!1;if(null!==(y=null===(x=null===P||void 0===P?void 0:
P.customEventTrackingConfiguration)||void 0===x?void 0:x.enabled)&&void 0!==y?y:ja.customEventTrackingConfiguration.enabled)if(""==l.name||void 0==l.name)console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");else{l.ced=Kd(l.ced);l.old=Kd(l.old);l["new"]=Kd(l["new"]);l.tags=Kd(l.tags);l.cen&&E.V2A_CUSTOM_EVENTS.includes(l.name)&&(l.name=l.cen,S=!0);var U=null===(I=null===P||void 0===P?void 0:P.customEventTrackingConfiguration)||void 0===I?void 0:I.blocklist;
if(!((null===U||void 0===U?0:U.includes("*"))||(null===U||void 0===U?0:U.some(function(la){return 0<(null===la||void 0===la?void 0:la.length)&&l.name.toLowerCase().includes(la.toLowerCase())}))))if(!0===S){var Q=l.name,T=$d(l,["isTrusted","name","cen","new","old"]);this.core.track(zb({name:Q,data:JSON.stringify(T)}),l.context,l.timestamp)}else this.core.track(ri({name:l.name,sid:l.sid,iid:l.iid,clid:l.clid,st:l.st,sst:l.sst,an:l.an,cl:l.cl,lv:l.lv,pn:l.pn,vid:l.vid,fw:l.fw,fwv:l.fwv,mn:l.mn,mv:l.mv,
url:l.url,tags:l.tags,cen:l.cen,ced:l.ced,oldsc:l.old,newsc:l["new"],err:l.err,br:l.br,ft:l.ft,avgbr:l.avgbr}),l.context,l.timestamp)}}catch(la){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",la)}},trackCustomEvent:function(l){var x,y,I,P,S;void 0===l&&(l={});try{if(Xb()!==E.SAMPLING_MODES.NONE){var U=null===(x=null===h||void 0===h?void 0:h.core)||void 0===x?void 0:x.getConfig();if(null!==(I=null===(y=null===U||void 0===U?void 0:U.customEventTrackingConfiguration)||
void 0===y?void 0:y.enabled)&&void 0!==I?I:ja.customEventTrackingConfiguration.enabled)if(!l.name||"string"==typeof l.name&&""==l.name.trim())console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");else{var Q=l.data;try{"string"!==typeof l.data&&(Q=JSON.stringify(l.data))}catch(la){}var T=null===(P=null===U||void 0===U?void 0:U.customEventTrackingConfiguration)||void 0===P?void 0:P.blocklist;(null===T||void 0===T?0:T.includes("*"))||(null===T||void 0===T?0:
T.some(function(la){return 0<(null===la||void 0===la?void 0:la.length)&&l.name.toLowerCase().includes(la.toLowerCase())}))||(null===(S=null===h||void 0===h?void 0:h.core)||void 0===S?void 0:S.track(zb({name:l.name,data:Q}),l.context,l.timestamp))}}}catch(la){console.warn("Conviva App Tracker:: Unable to track custom event! "+la)}},trackSSEEvent:function(l){var x;void 0===l&&(l={});try{Xb()!==E.SAMPLING_MODES.NONE&&(null===(x=null===h||void 0===h?void 0:h.core)||void 0===x?void 0:x.track(zb(l),l.context,
l.timestamp))}catch(y){}},trackNetworkRequest:function(l){var x,y,I,P,S,U,Q,T,la,pa,eb,jb;void 0===l&&(l={});try{var Ua=null===(I=null===h||void 0===h?void 0:h.core)||void 0===I?void 0:I.getConfig().networkRequestTrackingConfiguration,Vb=l.responseDetails.responseTime-l.requestDetails.requestTime;try{Vb=parseFloat(Vb.toFixed(3))}catch(vb){console.warn("Conviva App Tracker:: exception while converting duration to 3 decimal",vb)}try{var Tc=(x={targetUrl:null===(P=null===l||void 0===l?void 0:l.requestDetails)||
void 0===P?void 0:P.url,method:null===(S=null===l||void 0===l?void 0:l.requestDetails)||void 0===S?void 0:S.method,responseStatusCode:(null===(U=null===l||void 0===l?void 0:l.responseDetails)||void 0===U?0:U.status)?l.responseDetails.status:0,responseStatusText:(null===(Q=null===l||void 0===l?void 0:l.responseDetails)||void 0===Q?0:Q.statusText)?l.responseDetails.statusText:"ok"},x[ma.request_headers]=null===(T=null===l||void 0===l?void 0:l.requestDetails)||void 0===T?void 0:T.headers,x[ma.response_headers]=
null===(la=null===l||void 0===l?void 0:l.responseDetails)||void 0===la?void 0:la.headers,x.duration=Vb,x),Da=eg(Tc,null===Ua||void 0===Ua?void 0:Ua.collectattr,l,null===Ua||void 0===Ua?void 0:Ua.maxQueryLength,null===Ua||void 0===Ua?void 0:Ua.rbl);if(null===(pa=null===l||void 0===l?void 0:l.requestDetails)||void 0===pa?0:pa[E.TRACEPARENT_HEADER_KEY]){var oc=(y={},y[E.TRACEPARENT_HEADER_KEY]=null===(eb=null===l||void 0===l?void 0:l.requestDetails)||void 0===eb?void 0:eb[E.TRACEPARENT_HEADER_KEY],y);
Da[ma.request_headers]=Da[ma.request_headers]?N(N({},Da[ma.request_headers]),oc):oc}if(null===(jb=null===h||void 0===h?void 0:h.core)||void 0===jb)void 0;else{var Uc=jb.track;var Vc=Lb({event:{sc:"cv/nr/1-0-5",dt:fc({targetUrl:Da.targetUrl,method:Da.method,queryParameters:Da.queryParameters,responseStatusCode:Da.responseStatusCode,responseStatusText:Da.responseStatusText,rqh:Da.rqh,rsh:Da.rsh,rqb:Da.rqb,rsb:Da.rsb,rqq:Da.rqq,requestSize:Da.requestSize,responseSize:Da.responseSize,duration:Da.duration,
contentType:Da.contentType,requestTimestamp:Da.requestTimestamp,responseTimestamp:Da.responseTimestamp})}});Uc.call(jb,Vc,l.context,l.timestamp)}}catch(vb){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",vb)}}catch(vb){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",vb)}},trackButtonClick:function(l){var x,y,I;try{var P=null===(x=null===wa||void 0===wa?void 0:wa.core)||void 0===x?void 0:x.getConfig();!0===
(null===(y=null===P||void 0===P?void 0:P.clickcc)||void 0===y?void 0:y.en)&&(l.elementType="button",null===(I=null===wa||void 0===wa?void 0:wa.core)||void 0===I?void 0:I.track(zb({name:"conviva_click",data:JSON.stringify(l)}),Rf(void 0,void 0)))}catch(S){ha.warn("Conviva App Tracker caused Exception in sendButtonClick method of user click tracking module",S)}},trackLinkClick:function(l){var x,y,I;try{var P=null===(x=null===wa||void 0===wa?void 0:wa.core)||void 0===x?void 0:x.getConfig();!0===(null===
(y=null===P||void 0===P?void 0:P.clickcc)||void 0===y?void 0:y.en)&&(l.elementType="link",null===(I=null===wa||void 0===wa?void 0:wa.core)||void 0===I?void 0:I.track(zb({name:"conviva_click",data:JSON.stringify(l)}),Rf(void 0,void 0)))}catch(S){ha.warn("Conviva App Tracker caused Exception in sendLinkClick method of user click tracking module",S)}},trackErrorEvent:function(l){qe(l)},setCustomTags:function(l){void 0===l&&(l={});da(l)},setMetaCustomTags:function(l){void 0===l&&(l={});O(l)},unsetCustomTags:function(l){void 0===
l&&(l=[]);ya(l)},preservePageViewId:function(){Ng=!0},disableAnonymousTracking:function(l){k.anonymousTracking=!1;Z(l);M();ub.executeQueue()},enableAnonymousTracking:function(l){var x;k.anonymousTracking=null!==(x=l&&(null===l||void 0===l?void 0:l.options))&&void 0!==x?x:!0;Z(l);Bd||H()},clearUserData:V,setKeepAliveInBG:function(l){void 0===l&&(l=!1);Sg=l},clearTimers:function(){za=null;Wg.cleanupNetworkRequestHandler();try{Ja=h,removeEventListener("error",tg,!0),removeEventListener("unhandledrejection",
ug,!0)}catch(y){console.warn("Conviva App Tracker caused Exception in disableErrorTracking method of error tracking module",y)}pg();null===Jd||void 0===Jd?void 0:Jd.abort();Ia=kb=void 0;Wc&&window.clearInterval(Wc);if(Qa.enabled){var l=void 0;for(l in Qa.configurations){var x=Qa.configurations[l];x&&window.clearInterval(x.activityInterval)}}h&&(h.core=null);this.tracker=null},getSamplingMode:Xb,getPageViewSent:function(){return ff},setPageMetaTagsAsCustomTags:function(){W()},determineShouldTrack:function(l,
x,y,I,P,S){return jc(l,x,y,I,P,S)}};R=gf;var Wg=yg.getInstance(gf,k,Xb);Wg.initiateNetworkRequestTracking();return N(N({},gf),{id:g,namespace:m,core:tb,sharedState:r})}(a,b,c,e,d);var h=N(N({},a),{addPlugin:function(g){var m,n,r;null===(m=null===h||void 0===h?void 0:h.core)||void 0===m?void 0:m.addPlugin(g);null===(r=(n=g.plugin).activateBrowserPlugin)||void 0===r?void 0:r.call(n,h)}});f.forEach(function(g){var m;null===(m=g.activateBrowserPlugin)||void 0===m?void 0:m.call(g,h)});aj(h,null===d||void 0===
d?void 0:d.enableCommonEvents);fj(h);try{Ja=h,Zi(),Yi(),Za(window,"error",tg,!0),Za(window,"unhandledrejection",ug,!0)}catch(g){console.warn("Conviva App Tracker caused Exception in enableErrorTracking method of error tracking module",g)}wa=h;lj(h);try{Ae=h,zj(ze),Aj(ze),Bj(ze)}catch(g){console.warn("Conviva App Tracker caused Exception in enabling Web Vitals tracking",g)}try{(null===window||void 0===window?void 0:window.self)===(null===window||void 0===window?void 0:window.top)&&function(){(null===
window||void 0===window?0:window.addEventListener)&&window.addEventListener("SessionRecordingStatus",function(g){h.setCustomTags(g.detail)},{signal:Ia})}()}catch(g){}return h}function Ra(a,b){try{var c=null!==a&&void 0!==a?a:Object.keys(Zb);a=Zb;for(var e=[],d=0;d<c.length;d++){var f=c[d];a.hasOwnProperty(f)?e.push(a[f]):ha.warn(f+" not configured")}e.forEach(b)}catch(h){ha.error("Function failed",h)}}function Cj(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];Zb.hasOwnProperty(c)?delete Zb[c]:ha.warn(c+
" not configured")}}function Dj(){function a(){var f;if(!c.hasLoaded)for(c.hasLoaded=!0,f=0;f<c.registeredOnLoadHandlers.length;f++)c.registeredOnLoadHandlers[f]();return!0}function b(){e.addEventListener?e.addEventListener("DOMContentLoaded",function h(){e.removeEventListener("DOMContentLoaded",h,!1);a()}):e.attachEvent&&e.attachEvent("onreadystatechange",function g(){"complete"===e.readyState&&(e.detachEvent("onreadystatechange",g),a())});Za(d,"load",a,!1)}var c=new Ej,e=document,d=window;Za(d,
"beforeunload",function(){try{c.bufferFlushers.forEach(function(f){f(!1)})}catch(f){console.warn("Conviva App Tracker:: Error in flushBuffers of constructor ".concat(f))}},!1);"loading"===document.readyState?b():a();return c}var N=function(){N=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a};return N.apply(this,arguments)},Ld={},Xg="undefined"!=typeof crypto&&crypto.getRandomValues&&
crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Xg){var Yg=new Uint8Array(16);Ld=function(){Xg(Yg);return Yg}}else{var Zg=Array(16);Ld=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Zg[a]=b>>>((a&3)<<3)&255;return Zg}}for(var Na=[],Md=0;256>Md;++Md)Na[Md]=(Md+256).toString(16).substr(1);var $g=function(a,b){b=b||0;return[Na[a[b++]],Na[a[b++]],Na[a[b++]],Na[a[b++]],
"-",Na[a[b++]],Na[a[b++]],"-",Na[a[b++]],Na[a[b++]],"-",Na[a[b++]],Na[a[b++]],"-",Na[a[b++]],Na[a[b++]],Na[a[b++]],Na[a[b++]],Na[a[b++]],Na[a[b++]]].join("")},Fj=Ld,ah,hf,jf=0,kf=0,Gj=Ld,lf=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Gj)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[c+e]=a[e];return b||$g(a)};lf.v1=function(a,b,c){c=b&&c||0;var e=b||[];a=a||{};var d=a.node||ah,f=void 0!==a.clockseq?a.clockseq:hf;
if(null==d||null==f){var h=Fj();null==d&&(d=ah=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]);null==f&&(f=hf=(h[6]<<8|h[7])&16383)}h=void 0!==a.msecs?a.msecs:(new Date).getTime();var g=void 0!==a.nsecs?a.nsecs:kf+1,m=h-jf+(g-kf)/1E4;0>m&&void 0===a.clockseq&&(f=f+1&16383);(0>m||h>jf)&&void 0===a.nsecs&&(g=0);if(1E4<=g)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");jf=h;kf=g;hf=f;h+=122192928E5;a=(1E4*(h&268435455)+g)%4294967296;e[c++]=a>>>24&255;e[c++]=a>>>16&255;e[c++]=a>>>8&255;e[c++]=a&255;
a=h/4294967296*1E4&268435455;e[c++]=a>>>8&255;e[c++]=a&255;e[c++]=a>>>24&15|16;e[c++]=a>>>16&255;e[c++]=f>>>8|128;e[c++]=f&255;for(f=0;6>f;++f)e[c+f]=d[f];return b?b:$g(e)};var yb=lf.v4=lf,Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",wb;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(wb||(wb={}));var ha=function(a){void 0===a&&(a=wb.warn);return{setLogLevel:function(b){a=wb[b]?b:wb.warn},warn:function(b,c){for(var e=
[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];a>=wb.warn&&"undefined"!==typeof console&&(d="Conviva: "+b,c?console.warn.apply(console,Ka([d+"\n",c],e,!1)):console.warn.apply(console,Ka([d],e,!1)))},error:function(b,c){for(var e=[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];a>=wb.error&&"undefined"!==typeof console&&(d="Conviva: "+b+"\n",c?console.error.apply(console,Ka([d+"\n",c],e,!1)):console.error.apply(console,Ka([d],e,!1)))},debug:function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-
1]=arguments[e];a>=wb.debug&&"undefined"!==typeof console&&console.debug.apply(console,Ka(["Conviva: "+b],c,!1))},info:function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];a>=wb.info&&"undefined"!==typeof console&&console.info.apply(console,Ka(["Conviva: "+b],c,!1))}}}(),bh;(function(a){a.response_body="rsb";a.request_body="rqb";a.response_headers="rsh";a.request_headers="rqh";a.request_query="rqq"})(bh||(bh={}));var ch={},dh={};(function(){var a={rotl:function(b,c){return b<<c|
b>>>32-c},rotr:function(b,c){return b<<32-c|b>>>c},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var c=0;c<b.length;c++)b[c]=a.endian(b[c]);return b},randomBytes:function(b){for(var c=[];0<b;b--)c.push(Math.floor(256*Math.random()));return c},bytesToWords:function(b){for(var c=[],e=0,d=0;e<b.length;e++,d+=8)c[d>>>5]|=b[e]<<24-d%32;return c},wordsToBytes:function(b){for(var c=[],e=0;e<32*b.length;e+=8)c.push(b[e>>>5]>>>24-e%32&255);return c},bytesToHex:function(b){for(var c=
[],e=0;e<b.length;e++)c.push((b[e]>>>4).toString(16)),c.push((b[e]&15).toString(16));return c.join("")},hexToBytes:function(b){for(var c=[],e=0;e<b.length;e+=2)c.push(parseInt(b.substr(e,2),16));return c},bytesToBase64:function(b){for(var c=[],e=0;e<b.length;e+=3)for(var d=b[e]<<16|b[e+1]<<8|b[e+2],f=0;4>f;f++)8*e+6*f<=8*b.length?c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>>6*(3-f)&63)):c.push("=");return c.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,
"");for(var c=[],e=0,d=0;e<b.length;d=++e%4)0!=d&&c.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-1))&Math.pow(2,-2*d+8)-1)<<2*d|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>6-2*d);return c}};dh=a})();var mf={utf8:{stringToBytes:function(a){return mf.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(mf.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=
[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)&255);return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}},eh=mf;(function(){var a=dh,b=eh.utf8,c=eh.bin,e=function(d,f){var h=a.wordsToBytes,g=d;g.constructor==String?g=b.stringToBytes(g):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(g)?g=Array.prototype.slice.call(g,0):Array.isArray(g)||(g=g.toString());d=a.bytesToWords(g);var m=8*g.length;g=[];var n=
1732584193,r=-271733879,k=-1732584194,p=271733878,t=-1009589776;d[m>>5]|=128<<24-m%32;d[(m+64>>>9<<4)+15]=m;for(m=0;m<d.length;m+=16){for(var q=n,w=r,v=k,u=p,A=t,F=0;80>F;F++){if(16>F)g[F]=d[m+F];else{var B=g[F-3]^g[F-8]^g[F-14]^g[F-16];g[F]=B<<1|B>>>31}B=(n<<5|n>>>27)+t+(g[F]>>>0)+(20>F?(r&k|~r&p)+1518500249:40>F?(r^k^p)+1859775393:60>F?(r&k|r&p|k&p)-1894007588:(r^k^p)-899497514);t=p;p=k;k=r<<30|r>>>2;r=n;n=B}n+=q;r+=w;k+=v;p+=u;t+=A}h=h.call(a,[n,r,k,p,t]);return f&&f.asBytes?h:f&&f.asString?c.bytesToString(h):
a.bytesToHex(h)};e._blocksize=16;e._digestsize=20;ch=e})();var oj=ch,nf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Nd=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Hj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),fh=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xb=Array(576);gc(xb);var Xc=Array(60);gc(Xc);var $b=Array(512);gc($b);var Yc=Array(256);gc(Yc);var of=Array(29);gc(of);var Od=Array(30);gc(Od);
var gh,hh,ih,Zc=function(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255},Sa=function(a,b,c){a.bi_valid>16-c?(a.bi_buf|=b<<a.bi_valid&65535,Zc(a,a.bi_buf),a.bi_buf=b>>16-a.bi_valid,a.bi_valid+=c-16):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)},lb=function(a,b,c){Sa(a,c[2*b],c[2*b+1])},jh=function(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1},kh=function(a,b,c){var e=Array(16),d=0,f;for(f=1;15>=f;f++)d=d+c[f-1]<<1,e[f]=d;for(c=0;c<=b;c++)d=a[2*c+1],0!==
d&&(a[2*c]=jh(e[d]++,d))},lh=function(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.sym_next=a.matches=0},mh=function(a){8<a.bi_valid?Zc(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0},nh=function(a,b,c,e){var d=2*b,f=2*c;return a[d]<a[f]||a[d]===a[f]&&e[b]<=e[c]},pf=function(a,b,c){for(var e=a.heap[c],d=c<<1;d<=a.heap_len;){d<a.heap_len&&nh(b,
a.heap[d+1],a.heap[d],a.depth)&&d++;if(nh(b,e,a.heap[d],a.depth))break;a.heap[c]=a.heap[d];c=d;d<<=1}a.heap[c]=e},oh=function(a,b,c){var e=0;if(0!==a.sym_next){do{var d=a.pending_buf[a.sym_buf+e++]&255;d+=(a.pending_buf[a.sym_buf+e++]&255)<<8;var f=a.pending_buf[a.sym_buf+e++];if(0===d)lb(a,f,b);else{var h=Yc[f];lb(a,h+256+1,b);var g=nf[h];0!==g&&(f-=of[h],Sa(a,f,g));d--;h=256>d?$b[d]:$b[256+(d>>>7)];lb(a,h,c);g=Nd[h];0!==g&&(d-=Od[h],Sa(a,d,g))}}while(e<a.sym_next)}lb(a,256,b)},qf=function(a,b){var c=
b.dyn_tree,e=b.stat_desc.static_tree,d=b.stat_desc.has_stree,f=b.stat_desc.elems,h,g=-1;a.heap_len=0;a.heap_max=573;for(h=0;h<f;h++)0!==c[2*h]?(a.heap[++a.heap_len]=g=h,a.depth[h]=0):c[2*h+1]=0;for(;2>a.heap_len;){var m=a.heap[++a.heap_len]=2>g?++g:0;c[2*m]=1;a.depth[m]=0;a.opt_len--;d&&(a.static_len-=e[2*m+1])}b.max_code=g;for(h=a.heap_len>>1;1<=h;h--)pf(a,c,h);m=f;do h=a.heap[1],a.heap[1]=a.heap[a.heap_len--],pf(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=h,a.heap[--a.heap_max]=e,c[2*m]=c[2*h]+c[2*
e],a.depth[m]=(a.depth[h]>=a.depth[e]?a.depth[h]:a.depth[e])+1,c[2*h+1]=c[2*e+1]=m,a.heap[1]=m++,pf(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];h=b.dyn_tree;m=b.max_code;e=b.stat_desc.static_tree;d=b.stat_desc.has_stree;f=b.stat_desc.extra_bits;var n=b.stat_desc.extra_base,r=b.stat_desc.max_length,k,p=0;for(k=0;15>=k;k++)a.bl_count[k]=0;h[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++){var t=a.heap[b];k=h[2*h[2*t+1]+1]+1;k>r&&(k=r,p++);h[2*t+1]=k;if(!(t>m)){a.bl_count[k]++;
var q=0;t>=n&&(q=f[t-n]);var w=h[2*t];a.opt_len+=w*(k+q);d&&(a.static_len+=w*(e[2*t+1]+q))}}if(0!==p){do{for(k=r-1;0===a.bl_count[k];)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[r]--;p-=2}while(0<p);for(k=r;0!==k;k--)for(t=a.bl_count[k];0!==t;)e=a.heap[--b],e>m||(h[2*e+1]!==k&&(a.opt_len+=(k-h[2*e+1])*h[2*e],h[2*e+1]=k),t--)}kh(c,g,a.bl_count)},ph=function(a,b,c){var e,d=-1,f=b[1],h=0,g=7,m=4;0===f&&(g=138,m=3);b[2*(c+1)+1]=65535;for(e=0;e<=c;e++){var n=f;f=b[2*(e+1)+1];++h<g&&n===f||(h<m?a.bl_tree[2*
n]+=h:0!==n?(n!==d&&a.bl_tree[2*n]++,a.bl_tree[32]++):10>=h?a.bl_tree[34]++:a.bl_tree[36]++,h=0,d=n,0===f?(g=138,m=3):n===f?(g=6,m=3):(g=7,m=4))}},qh=function(a,b,c){var e,d=-1,f=b[1],h=0,g=7,m=4;0===f&&(g=138,m=3);for(e=0;e<=c;e++){var n=f;f=b[2*(e+1)+1];if(!(++h<g&&n===f)){if(h<m){do lb(a,n,a.bl_tree);while(0!==--h)}else 0!==n?(n!==d&&(lb(a,n,a.bl_tree),h--),lb(a,16,a.bl_tree),Sa(a,h-3,2)):10>=h?(lb(a,17,a.bl_tree),Sa(a,h-3,3)):(lb(a,18,a.bl_tree),Sa(a,h-11,7));h=0;d=n;0===f?(g=138,m=3):n===f?(g=
6,m=3):(g=7,m=4)}}},Ij=function(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0},rh=!1,Pd=function(a,b,c,e){Sa(a,e?1:0,3);mh(a);Zc(a,c);Zc(a,~c);c&&a.pending_buf.set(a.window.subarray(b,b+c),a.pending);a.pending+=c},$c=function(a,b,c,e){var d=a&65535|0;a=a>>>16&65535|0;for(var f;0!==c;){f=2E3<c?2E3:c;c-=f;do d=d+b[e++]|0,a=a+d|
0;while(--f);d%=65521;a%=65521}return d|a<<16|0},Jj=new Uint32Array(function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var e=0;8>e;e++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}()),La=function(a,b,c,e){c=e+c;for(a^=-1;e<c;e++)a=a>>>8^Jj[(a^b[e])&255];return a^-1},Mb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ba={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,
Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Eb=function(a,b,c){a.pending_buf[a.sym_buf+a.sym_next++]=b;a.pending_buf[a.sym_buf+a.sym_next++]=b>>8;a.pending_buf[a.sym_buf+a.sym_next++]=c;0===b?a.dyn_ltree[2*c]++:
(a.matches++,b--,a.dyn_ltree[2*(Yc[c]+256+1)]++,a.dyn_dtree[2*(256>b?$b[b]:$b[256+(b>>>7)])]++);return a.sym_next===a.sym_end},Fb=ba.Z_NO_FLUSH,Kj=ba.Z_PARTIAL_FLUSH,Lj=ba.Z_FULL_FLUSH,ab=ba.Z_FINISH,sh=ba.Z_BLOCK,Oa=ba.Z_OK,th=ba.Z_STREAM_END,mb=ba.Z_STREAM_ERROR,Mj=ba.Z_DATA_ERROR,rf=ba.Z_BUF_ERROR,Nj=ba.Z_DEFAULT_COMPRESSION,Oj=ba.Z_FILTERED,Qd=ba.Z_HUFFMAN_ONLY,Pj=ba.Z_RLE,Qj=ba.Z_FIXED,Rj=ba.Z_DEFAULT_STRATEGY,Sj=ba.Z_UNKNOWN,id=ba.Z_DEFLATED,ac=function(a,b){a.msg=Mb[b];return b},Ab=function(a){for(var b=
a.length;0<=--b;)a[b]=0},Gb=function(a,b,c){return(b<<a.hash_shift^c)&a.hash_mask},Va=function(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(a.output.set(b.pending_buf.subarray(b.pending_out,b.pending_out+c),a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))},Wa=function(a,b){var c=0<=a.block_start?a.block_start:-1,e=a.strstart-a.block_start,d=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=Ij(a));qf(a,
a.l_desc);qf(a,a.d_desc);ph(a,a.dyn_ltree,a.l_desc.max_code);ph(a,a.dyn_dtree,a.d_desc.max_code);qf(a,a.bl_desc);for(d=18;3<=d&&0===a.bl_tree[2*fh[d]+1];d--);a.opt_len+=3*(d+1)+14;var f=a.opt_len+3+7>>>3;var h=a.static_len+3+7>>>3;h<=f&&(f=h)}else f=h=e+5;if(e+4<=f&&-1!==c)Pd(a,c,e,b);else if(4===a.strategy||h===f)Sa(a,2+(b?1:0),3),oh(a,xb,Xc);else{Sa(a,4+(b?1:0),3);c=a.l_desc.max_code+1;e=a.d_desc.max_code+1;d+=1;Sa(a,c-257,5);Sa(a,e-1,5);Sa(a,d-4,4);for(f=0;f<d;f++)Sa(a,a.bl_tree[2*fh[f]+1],3);
qh(a,a.dyn_ltree,c-1);qh(a,a.dyn_dtree,e-1);oh(a,a.dyn_ltree,a.dyn_dtree)}lh(a);b&&mh(a);a.block_start=a.strstart;Va(a.strm)},sa=function(a,b){a.pending_buf[a.pending++]=b},ad=function(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255},sf=function(a,b,c,e){var d=a.avail_in;d>e&&(d=e);if(0===d)return 0;a.avail_in-=d;b.set(a.input.subarray(a.next_in,a.next_in+d),c);1===a.state.wrap?a.adler=$c(a.adler,b,d,c):2===a.state.wrap&&(a.adler=La(a.adler,b,d,c));a.next_in+=d;a.total_in+=
d;return d},uh=function(a,b){var c=a.max_chain_length,e=a.strstart,d=a.prev_length,f=a.nice_match,h=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,g=a.window,m=a.w_mask,n=a.prev,r=a.strstart+258,k=g[e+d-1],p=g[e+d];a.prev_length>=a.good_match&&(c>>=2);f>a.lookahead&&(f=a.lookahead);do{var t=b;if(g[t+d]===p&&g[t+d-1]===k&&g[t]===g[e]&&g[++t]===g[e+1]){e+=2;for(t++;g[++e]===g[++t]&&g[++e]===g[++t]&&g[++e]===g[++t]&&g[++e]===g[++t]&&g[++e]===g[++t]&&g[++e]===g[++t]&&g[++e]===g[++t]&&g[++e]===g[++t]&&
e<r;);t=258-(r-e);e=r-258;if(t>d){a.match_start=b;d=t;if(t>=f)break;k=g[e+d-1];p=g[e+d]}}}while((b=n[b&m])>h&&0!==--c);return d<=a.lookahead?d:a.lookahead},tc=function(a){var b=a.w_size;do{var c=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){a.window.set(a.window.subarray(b,b+b-c),0);a.match_start-=b;a.strstart-=b;a.block_start-=b;a.insert>a.strstart&&(a.insert=a.strstart);var e,d=a,f=d.w_size;var h=e=d.hash_size;do{var g=d.head[--h];d.head[h]=g>=f?g-f:0}while(--e);h=e=f;do g=d.prev[--h],
d.prev[h]=g>=f?g-f:0;while(--e);c+=b}if(0===a.strm.avail_in)break;c=sf(a.strm,a.window,a.strstart+a.lookahead,c);a.lookahead+=c;if(3<=a.lookahead+a.insert)for(c=a.strstart-a.insert,a.ins_h=a.window[c],a.ins_h=Gb(a,a.ins_h,a.window[c+1]);a.insert&&!(a.ins_h=Gb(a,a.ins_h,a.window[c+3-1]),a.prev[c&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=c,c++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)},vh=function(a,b){var c=a.pending_buf_size-5>a.w_size?a.w_size:a.pending_buf_size-
5,e=0,d=a.strm.avail_in;do{var f=65535;var h=a.bi_valid+42>>3;if(a.strm.avail_out<h)break;h=a.strm.avail_out-h;var g=a.strstart-a.block_start;f>g+a.strm.avail_in&&(f=g+a.strm.avail_in);f>h&&(f=h);if(f<c&&(0===f&&b!==ab||b===Fb||f!==g+a.strm.avail_in))break;e=b===ab&&f===g+a.strm.avail_in?1:0;Pd(a,0,0,e);a.pending_buf[a.pending-4]=f;a.pending_buf[a.pending-3]=f>>8;a.pending_buf[a.pending-2]=~f;a.pending_buf[a.pending-1]=~f>>8;Va(a.strm);g&&(g>f&&(g=f),a.strm.output.set(a.window.subarray(a.block_start,
a.block_start+g),a.strm.next_out),a.strm.next_out+=g,a.strm.avail_out-=g,a.strm.total_out+=g,a.block_start+=g,f-=g);f&&(sf(a.strm,a.strm.output,a.strm.next_out,f),a.strm.next_out+=f,a.strm.avail_out-=f,a.strm.total_out+=f)}while(0===e);if(d-=a.strm.avail_in)d>=a.w_size?(a.matches=2,a.window.set(a.strm.input.subarray(a.strm.next_in-a.w_size,a.strm.next_in),0),a.strstart=a.w_size,a.insert=a.strstart):(a.window_size-a.strstart<=d&&(a.strstart-=a.w_size,a.window.set(a.window.subarray(a.w_size,a.w_size+
a.strstart),0),2>a.matches&&a.matches++,a.insert>a.strstart&&(a.insert=a.strstart)),a.window.set(a.strm.input.subarray(a.strm.next_in-d,a.strm.next_in),a.strstart),a.strstart+=d,a.insert+=d>a.w_size-a.insert?a.w_size-a.insert:d),a.block_start=a.strstart;a.high_water<a.strstart&&(a.high_water=a.strstart);if(e)return 4;if(b!==Fb&&b!==ab&&0===a.strm.avail_in&&a.strstart===a.block_start)return 2;h=a.window_size-a.strstart;a.strm.avail_in>h&&a.block_start>=a.w_size&&(a.block_start-=a.w_size,a.strstart-=
a.w_size,a.window.set(a.window.subarray(a.w_size,a.w_size+a.strstart),0),2>a.matches&&a.matches++,h+=a.w_size,a.insert>a.strstart&&(a.insert=a.strstart));h>a.strm.avail_in&&(h=a.strm.avail_in);h&&(sf(a.strm,a.window,a.strstart,h),a.strstart+=h,a.insert+=h>a.w_size-a.insert?a.w_size-a.insert:h);a.high_water<a.strstart&&(a.high_water=a.strstart);h=a.bi_valid+42>>3;h=65535<a.pending_buf_size-h?65535:a.pending_buf_size-h;c=h>a.w_size?a.w_size:h;g=a.strstart-a.block_start;if(g>=c||(g||b===ab)&&b!==Fb&&
0===a.strm.avail_in&&g<=h)f=g>h?h:g,e=b===ab&&0===a.strm.avail_in&&f===g?1:0,Pd(a,a.block_start,f,e),a.block_start+=f,Va(a.strm);return e?3:1},tf=function(a,b){for(var c;;){if(262>a.lookahead){tc(a);if(262>a.lookahead&&b===Fb)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=Gb(a,a.ins_h,a.window[a.strstart+3-1]),c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==c&&a.strstart-c<=a.w_size-262&&(a.match_length=uh(a,c));if(3<=a.match_length)if(c=Eb(a,a.strstart-
a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=Gb(a,a.ins_h,a.window[a.strstart+3-1]),a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Gb(a,a.ins_h,a.window[a.strstart+1]);else c=Eb(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(c&&(Wa(a,!1),
0===a.strm.avail_out))return 1}a.insert=2>a.strstart?a.strstart:2;return b===ab?(Wa(a,!0),0===a.strm.avail_out?3:4):a.sym_next&&(Wa(a,!1),0===a.strm.avail_out)?1:2},uc=function(a,b){for(var c,e;;){if(262>a.lookahead){tc(a);if(262>a.lookahead&&b===Fb)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=Gb(a,a.ins_h,a.window[a.strstart+3-1]),c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==
c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-262&&(a.match_length=uh(a,c),5>=a.match_length&&(a.strategy===Oj||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-3;c=Eb(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=Gb(a,a.ins_h,a.window[a.strstart+3-1]),a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);
while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(c&&(Wa(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((c=Eb(a,0,a.window[a.strstart-1]))&&Wa(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(Eb(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return b===ab?(Wa(a,!0),0===a.strm.avail_out?3:4):a.sym_next&&(Wa(a,!1),0===a.strm.avail_out)?
1:2},Tj=function(a,b){for(var c,e,d,f=a.window;;){if(258>=a.lookahead){tc(a);if(258>=a.lookahead&&b===Fb)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(e=a.strstart-1,c=f[e],c===f[++e]&&c===f[++e]&&c===f[++e])){for(d=a.strstart+258;c===f[++e]&&c===f[++e]&&c===f[++e]&&c===f[++e]&&c===f[++e]&&c===f[++e]&&c===f[++e]&&c===f[++e]&&e<d;);a.match_length=258-(d-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(c=Eb(a,1,a.match_length-3),a.lookahead-=
a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=Eb(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(c&&(Wa(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return b===ab?(Wa(a,!0),0===a.strm.avail_out?3:4):a.sym_next&&(Wa(a,!1),0===a.strm.avail_out)?1:2},Uj=function(a,b){for(var c;;){if(0===a.lookahead&&(tc(a),0===a.lookahead)){if(b===Fb)return 1;break}a.match_length=0;c=Eb(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(c&&(Wa(a,!1),0===a.strm.avail_out))return 1}a.insert=
0;return b===ab?(Wa(a,!0),0===a.strm.avail_out?3:4):a.sym_next&&(Wa(a,!1),0===a.strm.avail_out)?1:2},bd=[new fb(0,0,0,0,vh),new fb(4,4,8,4,tf),new fb(4,5,16,8,tf),new fb(4,6,32,32,tf),new fb(4,4,16,16,uc),new fb(8,16,32,32,uc),new fb(8,16,128,128,uc),new fb(8,32,128,256,uc),new fb(32,128,258,1024,uc),new fb(32,258,258,4096,uc)],cd=function(a){if(!a)return 1;var b=a.state;return!b||b.strm!==a||42!==b.status&&57!==b.status&&69!==b.status&&73!==b.status&&91!==b.status&&103!==b.status&&113!==b.status&&
666!==b.status?1:0},wh=function(a){if(cd(a))return ac(a,mb);a.total_in=a.total_out=0;a.data_type=Sj;var b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=2===b.wrap?57:b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=-2;if(!rh){var c,e,d;a=Array(16);for(d=e=0;28>d;d++)for(of[d]=e,c=0;c<1<<nf[d];c++)Yc[e++]=d;Yc[e-1]=d;for(d=e=0;16>d;d++)for(Od[d]=e,c=0;c<1<<Nd[d];c++)$b[e++]=d;for(e>>=7;30>d;d++)for(Od[d]=e<<7,c=0;c<1<<Nd[d]-7;c++)$b[256+e++]=d;for(c=0;15>=c;c++)a[c]=0;for(c=
0;143>=c;)xb[2*c+1]=8,c++,a[8]++;for(;255>=c;)xb[2*c+1]=9,c++,a[9]++;for(;279>=c;)xb[2*c+1]=7,c++,a[7]++;for(;287>=c;)xb[2*c+1]=8,c++,a[8]++;kh(xb,287,a);for(c=0;30>c;c++)Xc[2*c+1]=5,Xc[2*c]=jh(c,5);gh=new de(xb,nf,257,286,15);hh=new de(Xc,Nd,0,30,15);ih=new de([],Hj,0,19,7);rh=!0}b.l_desc=new ee(b.dyn_ltree,gh);b.d_desc=new ee(b.dyn_dtree,hh);b.bl_desc=new ee(b.bl_tree,ih);b.bi_buf=0;b.bi_valid=0;lh(b);return Oa},xh=function(a){var b=wh(a);b===Oa&&(a=a.state,a.window_size=2*a.w_size,Ab(a.head),a.max_lazy_match=
bd[a.level].max_lazy,a.good_match=bd[a.level].good_length,a.nice_match=bd[a.level].nice_length,a.max_chain_length=bd[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b},yh=function(a,b,c,e,d,f){if(!a)return mb;var h=1;b===Nj&&(b=6);0>e?(h=0,e=-e):15<e&&(h=2,e-=16);if(1>d||9<d||c!==id||8>e||15<e||0>b||9<b||0>f||f>Qj||8===e&&1!==h)return ac(a,mb);8===e&&(e=9);var g=new si;a.state=g;g.strm=a;g.status=42;g.wrap=
h;g.gzhead=null;g.w_bits=e;g.w_size=1<<g.w_bits;g.w_mask=g.w_size-1;g.hash_bits=d+7;g.hash_size=1<<g.hash_bits;g.hash_mask=g.hash_size-1;g.hash_shift=~~((g.hash_bits+3-1)/3);g.window=new Uint8Array(2*g.w_size);g.head=new Uint16Array(g.hash_size);g.prev=new Uint16Array(g.w_size);g.lit_bufsize=1<<d+6;g.pending_buf_size=4*g.lit_bufsize;g.pending_buf=new Uint8Array(g.pending_buf_size);g.sym_buf=g.lit_bufsize;g.sym_end=3*(g.lit_bufsize-1);g.level=b;g.strategy=f;g.method=c;return xh(a)},Ec={deflateInit:function(a,
b){return yh(a,b,id,15,8,Rj)},deflateInit2:yh,deflateReset:xh,deflateResetKeep:wh,deflateSetHeader:function(a,b){if(cd(a)||2!==a.state.wrap)return mb;a.state.gzhead=b;return Oa},deflate:function(a,b){if(cd(a)||b>sh||0>b)return a?ac(a,mb):mb;var c=a.state;if(!a.output||0!==a.avail_in&&!a.input||666===c.status&&b!==ab)return ac(a,0===a.avail_out?rf:mb);var e=c.last_flush;c.last_flush=b;if(0!==c.pending){if(Va(a),0===a.avail_out)return c.last_flush=-1,Oa}else if(0===a.avail_in&&2*b-(4<b?9:0)<=2*e-(4<
e?9:0)&&b!==ab)return ac(a,rf);if(666===c.status&&0!==a.avail_in)return ac(a,rf);42===c.status&&0===c.wrap&&(c.status=113);if(42===c.status&&(e=id+(c.w_bits-8<<4)<<8,e|=(c.strategy>=Qd||2>c.level?0:6>c.level?1:6===c.level?2:3)<<6,0!==c.strstart&&(e|=32),ad(c,e+(31-e%31)),0!==c.strstart&&(ad(c,a.adler>>>16),ad(c,a.adler&65535)),a.adler=1,c.status=113,Va(a),0!==c.pending))return c.last_flush=-1,Oa;if(57===c.status)if(a.adler=0,sa(c,31),sa(c,139),sa(c,8),c.gzhead)sa(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?
2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),sa(c,c.gzhead.time&255),sa(c,c.gzhead.time>>8&255),sa(c,c.gzhead.time>>16&255),sa(c,c.gzhead.time>>24&255),sa(c,9===c.level?2:c.strategy>=Qd||2>c.level?4:0),sa(c,c.gzhead.os&255),c.gzhead.extra&&c.gzhead.extra.length&&(sa(c,c.gzhead.extra.length&255),sa(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(a.adler=La(a.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69;else if(sa(c,0),sa(c,0),sa(c,0),sa(c,0),sa(c,0),sa(c,9===
c.level?2:c.strategy>=Qd||2>c.level?4:0),sa(c,3),c.status=113,Va(a),0!==c.pending)return c.last_flush=-1,Oa;if(69===c.status){if(c.gzhead.extra){e=c.pending;for(var d=(c.gzhead.extra.length&65535)-c.gzindex;c.pending+d>c.pending_buf_size;){var f=c.pending_buf_size-c.pending;c.pending_buf.set(c.gzhead.extra.subarray(c.gzindex,c.gzindex+f),c.pending);c.pending=c.pending_buf_size;c.gzhead.hcrc&&c.pending>e&&(a.adler=La(a.adler,c.pending_buf,c.pending-e,e));c.gzindex+=f;Va(a);if(0!==c.pending)return c.last_flush=
-1,Oa;e=0;d-=f}f=new Uint8Array(c.gzhead.extra);c.pending_buf.set(f.subarray(c.gzindex,c.gzindex+d),c.pending);c.pending+=d;c.gzhead.hcrc&&c.pending>e&&(a.adler=La(a.adler,c.pending_buf,c.pending-e,e));c.gzindex=0}c.status=73}if(73===c.status){if(c.gzhead.name){e=c.pending;do{if(c.pending===c.pending_buf_size){c.gzhead.hcrc&&c.pending>e&&(a.adler=La(a.adler,c.pending_buf,c.pending-e,e));Va(a);if(0!==c.pending)return c.last_flush=-1,Oa;e=0}d=c.gzindex<c.gzhead.name.length?c.gzhead.name.charCodeAt(c.gzindex++)&
255:0;sa(c,d)}while(0!==d);c.gzhead.hcrc&&c.pending>e&&(a.adler=La(a.adler,c.pending_buf,c.pending-e,e));c.gzindex=0}c.status=91}if(91===c.status){if(c.gzhead.comment){e=c.pending;do{if(c.pending===c.pending_buf_size){c.gzhead.hcrc&&c.pending>e&&(a.adler=La(a.adler,c.pending_buf,c.pending-e,e));Va(a);if(0!==c.pending)return c.last_flush=-1,Oa;e=0}d=c.gzindex<c.gzhead.comment.length?c.gzhead.comment.charCodeAt(c.gzindex++)&255:0;sa(c,d)}while(0!==d);c.gzhead.hcrc&&c.pending>e&&(a.adler=La(a.adler,
c.pending_buf,c.pending-e,e))}c.status=103}if(103===c.status){if(c.gzhead.hcrc){if(c.pending+2>c.pending_buf_size&&(Va(a),0!==c.pending))return c.last_flush=-1,Oa;sa(c,a.adler&255);sa(c,a.adler>>8&255);a.adler=0}c.status=113;Va(a);if(0!==c.pending)return c.last_flush=-1,Oa}if(0!==a.avail_in||0!==c.lookahead||b!==Fb&&666!==c.status){e=0===c.level?vh(c,b):c.strategy===Qd?Uj(c,b):c.strategy===Pj?Tj(c,b):bd[c.level].func(c,b);if(3===e||4===e)c.status=666;if(1===e||3===e)return 0===a.avail_out&&(c.last_flush=
-1),Oa;if(2===e&&(b===Kj?(Sa(c,2,3),lb(c,256,xb),16===c.bi_valid?(Zc(c,c.bi_buf),c.bi_buf=0,c.bi_valid=0):8<=c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf&255,c.bi_buf>>=8,c.bi_valid-=8)):b!==sh&&(Pd(c,0,0,!1),b===Lj&&(Ab(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),Va(a),0===a.avail_out))return c.last_flush=-1,Oa}if(b!==ab)return Oa;if(0>=c.wrap)return th;2===c.wrap?(sa(c,a.adler&255),sa(c,a.adler>>8&255),sa(c,a.adler>>16&255),sa(c,a.adler>>24&255),sa(c,a.total_in&255),
sa(c,a.total_in>>8&255),sa(c,a.total_in>>16&255),sa(c,a.total_in>>24&255)):(ad(c,a.adler>>>16),ad(c,a.adler&65535));Va(a);0<c.wrap&&(c.wrap=-c.wrap);return 0!==c.pending?Oa:th},deflateEnd:function(a){if(cd(a))return mb;var b=a.state.status;a.state=null;return 113===b?ac(a,Mj):Oa},deflateSetDictionary:function(a,b){var c=b.length;if(cd(a))return mb;var e=a.state,d=e.wrap;if(2===d||1===d&&42!==e.status||e.lookahead)return mb;1===d&&(a.adler=$c(a.adler,b,c,0));e.wrap=0;if(c>=e.w_size){0===d&&(Ab(e.head),
e.strstart=0,e.block_start=0,e.insert=0);var f=new Uint8Array(e.w_size);f.set(b.subarray(c-e.w_size,c),0);b=f;c=e.w_size}f=a.avail_in;var h=a.next_in,g=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(tc(e);3<=e.lookahead;){b=e.strstart;c=e.lookahead-2;do e.ins_h=Gb(e,e.ins_h,e.window[b+3-1]),e.prev[b&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=b,b++;while(--c);e.strstart=b;e.lookahead=2;tc(e)}e.strstart+=e.lookahead;e.block_start=e.strstart;e.insert=e.lookahead;e.lookahead=0;e.match_length=e.prev_length=
2;e.match_available=0;a.next_in=h;a.input=g;a.avail_in=f;e.wrap=d;return Oa},deflateInfo:"pako deflate (from Nodeca project)"},jd={assign:function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==na(c))throw new TypeError(c+"must be non-object");for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}}return a},flattenChunks:function(a){for(var b=0,c=0,e=a.length;c<e;c++)b+=a[c].length;b=new Uint8Array(b);e=c=0;for(var d=a.length;c<
d;c++){var f=a[c];b.set(f,e);e+=f.length}return b}},zh=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){zh=!1}for(var dd=new Uint8Array(256),Hb=0;256>Hb;Hb++)dd[Hb]=252<=Hb?6:248<=Hb?5:240<=Hb?4:224<=Hb?3:192<=Hb?2:1;dd[254]=dd[254]=1;var Fc={string2buf:function(a){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(a);var b,c,e=a.length,d=0;for(b=0;b<e;b++){var f=a.charCodeAt(b);if(55296===(f&64512)&&b+1<e){var h=a.charCodeAt(b+1);56320===
(h&64512)&&(f=65536+(f-55296<<10)+(h-56320),b++)}d+=128>f?1:2048>f?2:65536>f?3:4}var g=new Uint8Array(d);for(b=c=0;c<d;b++)f=a.charCodeAt(b),55296===(f&64512)&&b+1<e&&(h=a.charCodeAt(b+1),56320===(h&64512)&&(f=65536+(f-55296<<10)+(h-56320),b++)),128>f?g[c++]=f:(2048>f?g[c++]=192|f>>>6:(65536>f?g[c++]=224|f>>>12:(g[c++]=240|f>>>18,g[c++]=128|f>>>12&63),g[c++]=128|f>>>6&63),g[c++]=128|f&63);return g},buf2string:function(a,b){var c=b||a.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(a.subarray(0,
b));var e,d;b=Array(2*c);for(e=d=0;e<c;){var f=a[e++];if(128>f)b[d++]=f;else{var h=dd[f];if(4<h)b[d++]=65533,e+=h-1;else{for(f&=2===h?31:3===h?15:7;1<h&&e<c;)f=f<<6|a[e++]&63,h--;1<h?b[d++]=65533:65536>f?b[d++]=f:(f-=65536,b[d++]=55296|f>>10&1023,b[d++]=56320|f&1023)}}}a=d;if(65534>a&&b.subarray&&zh)b=String.fromCharCode.apply(null,b.length===a?b:b.subarray(0,a));else{c="";for(e=0;e<a;e++)c+=String.fromCharCode(b[e]);b=c}return b},utf8border:function(a,b){b=b||a.length;b>a.length&&(b=a.length);for(var c=
b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||0===c?b:c+dd[a[c]]>b?c:b}},Zf=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},$f=Object.prototype.toString,Vj=ba.Z_NO_FLUSH,Wj=ba.Z_SYNC_FLUSH,Xj=ba.Z_FULL_FLUSH,Yj=ba.Z_FINISH,kd=ba.Z_OK,Zj=ba.Z_STREAM_END,ti=ba.Z_DEFAULT_COMPRESSION,vi=ba.Z_DEFAULT_STRATEGY,ui=ba.Z_DEFLATED;Dc.prototype.push=function(a,b){var c=
this.strm,e=this.options.chunkSize;if(this.ended)return!1;b=b===~~b?b:!0===b?Yj:Vj;"string"===typeof a?c.input=Fc.string2buf(a):"[object ArrayBuffer]"===$f.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;for(c.avail_in=c.input.length;;)if(0===c.avail_out&&(c.output=new Uint8Array(e),c.next_out=0,c.avail_out=e),(b===Wj||b===Xj)&&6>=c.avail_out)this.onData(c.output.subarray(0,c.next_out)),c.avail_out=0;else{a=Ec.deflate(c,b);if(a===Zj){if(0<c.next_out)this.onData(c.output.subarray(0,c.next_out));
a=Ec.deflateEnd(this.strm);this.onEnd(a);this.ended=!0;return a===kd}if(0===c.avail_out)this.onData(c.output);else if(0<b&&0<c.next_out)this.onData(c.output.subarray(0,c.next_out)),c.avail_out=0;else if(0===c.avail_in)break}return!0};Dc.prototype.onData=function(a){this.chunks.push(a)};Dc.prototype.onEnd=function(a){a===kd&&(this.result=jd.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var ak=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,
99,115,131,163,195,227,258,0,0]),bk=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ck=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dk=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ed=function(a,b,c,e,d,f,h,g){var m=g.bits,n,r,k,p,t,q,w=new Uint16Array(16);var v=new Uint16Array(16);
var u;for(n=0;15>=n;n++)w[n]=0;for(r=0;r<e;r++)w[b[c+r]]++;var A=m;for(k=15;1<=k&&0===w[k];k--);A>k&&(A=k);if(0===k)return d[f++]=20971520,d[f++]=20971520,g.bits=1,0;for(m=1;m<k&&0===w[m];m++);A<m&&(A=m);for(n=p=1;15>=n;n++)if(p<<=1,p-=w[n],0>p)return-1;if(0<p&&(0===a||1!==k))return-1;v[1]=0;for(n=1;15>n;n++)v[n+1]=v[n]+w[n];for(r=0;r<e;r++)0!==b[c+r]&&(h[v[b[c+r]]++]=r);if(0===a){var F=u=h;var B=20}else 1===a?(F=ak,u=bk,B=257):(F=ck,u=dk,B=0);r=t=0;n=m;var G=f;e=A;v=0;var D=-1;var z=1<<A;var J=z-
1;if(1===a&&852<z||2===a&&592<z)return 1;for(;;){var K=n-v;if(h[r]+1<B){var Y=0;var V=h[r]}else h[r]>=B?(Y=u[h[r]-B],V=F[h[r]-B]):(Y=96,V=0);p=1<<n-v;m=q=1<<e;do q-=p,d[G+(t>>v)+q]=K<<24|Y<<16|V|0;while(0!==q);for(p=1<<n-1;t&p;)p>>=1;0!==p?(t&=p-1,t+=p):t=0;r++;if(0===--w[n]){if(n===k)break;n=b[c+h[r]]}if(n>A&&(t&J)!==D){0===v&&(v=A);G+=m;e=n-v;for(p=1<<e;e+v<k;){p-=w[e+v];if(0>=p)break;e++;p<<=1}z+=1<<e;if(1===a&&852<z||2===a&&592<z)return 1;D=t&J;d[D]=A<<24|e<<16|G-f|0}}0!==t&&(d[G+t]=n-v<<24|4194304);
g.bits=A;return 0},Ah=ba.Z_FINISH,ek=ba.Z_BLOCK,Rd=ba.Z_TREES,bc=ba.Z_OK,fk=ba.Z_STREAM_END,gk=ba.Z_NEED_DICT,bb=ba.Z_STREAM_ERROR,Bh=ba.Z_DATA_ERROR,Ch=ba.Z_MEM_ERROR,hk=ba.Z_BUF_ERROR,Dh=ba.Z_DEFLATED,Eh=function(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)},cc=function(a){if(!a)return 1;var b=a.state;return!b||b.strm!==a||16180>b.mode||16211<b.mode?1:0},Fh=function(a){if(cc(a))return bb;var b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=
16180;b.last=0;b.havedict=0;b.flags=-1;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new Int32Array(852);b.distcode=b.distdyn=new Int32Array(592);b.sane=1;b.back=-1;return bc},Gh=function(a){if(cc(a))return bb;var b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return Fh(a)},Hh=function(a,b){if(cc(a))return bb;var c=a.state;if(0>b){var e=0;b=-b}else e=(b>>4)+5,48>b&&(b&=15);if(b&&(8>b||15<b))return bb;null!==c.window&&c.wbits!==b&&(c.window=null);c.wrap=e;c.wbits=b;return Gh(a)},Ih=function(a,
b){if(!a)return bb;var c=new wi;a.state=c;c.strm=a;c.window=null;c.mode=16180;b=Hh(a,b);b!==bc&&(a.state=null);return b},Jh=!0,uf,vf,Kh=function(a,b,c,e){var d=a.state;null===d.window&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize));e>=d.wsize?(d.window.set(b.subarray(c-d.wsize,c),0),d.wnext=0,d.whave=d.wsize):(a=d.wsize-d.wnext,a>e&&(a=e),d.window.set(b.subarray(c-e,c-e+a),d.wnext),(e-=a)?(d.window.set(b.subarray(c-e,c),0),d.wnext=e,d.whave=d.wsize):(d.wnext+=a,d.wnext===
d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=a)));return 0},ob={inflateReset:Gh,inflateReset2:Hh,inflateResetKeep:Fh,inflateInit:function(a){return Ih(a,15)},inflateInit2:Ih,inflate:function(a,b){var c=new Uint8Array(4),e=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cc(a)||!a.output||!a.input&&0!==a.avail_in)return bb;var d=a.state;16191===d.mode&&(d.mode=16192);var f=a.next_out;var h=a.output;var g=a.avail_out;var m=a.next_in;var n=a.input;var r=a.avail_in;var k=d.hold;
var p=d.bits;var t=r;var q=g;var w=bc;a:for(;;)switch(d.mode){case 16180:if(0===d.wrap){d.mode=16192;break}for(;16>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if(d.wrap&2&&35615===k){0===d.wbits&&(d.wbits=15);d.check=0;c[0]=k&255;c[1]=k>>>8&255;d.check=La(d.check,c,2,0);p=k=0;d.mode=16181;break}d.head&&(d.head.done=!1);if(!(d.wrap&1)||(((k&255)<<8)+(k>>8))%31){a.msg="incorrect header check";d.mode=16209;break}if((k&15)!==Dh){a.msg="unknown compression method";d.mode=16209;break}k>>>=4;p-=4;var v=(k&
15)+8;0===d.wbits&&(d.wbits=v);if(15<v||v>d.wbits){a.msg="invalid window size";d.mode=16209;break}d.dmax=1<<d.wbits;d.flags=0;a.adler=d.check=1;d.mode=k&512?16189:16191;p=k=0;break;case 16181:for(;16>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.flags=k;if((d.flags&255)!==Dh){a.msg="unknown compression method";d.mode=16209;break}if(d.flags&57344){a.msg="unknown header flags set";d.mode=16209;break}d.head&&(d.head.text=k>>8&1);d.flags&512&&d.wrap&4&&(c[0]=k&255,c[1]=k>>>8&255,d.check=La(d.check,c,2,
0));p=k=0;d.mode=16182;case 16182:for(;32>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.head&&(d.head.time=k);d.flags&512&&d.wrap&4&&(c[0]=k&255,c[1]=k>>>8&255,c[2]=k>>>16&255,c[3]=k>>>24&255,d.check=La(d.check,c,4,0));p=k=0;d.mode=16183;case 16183:for(;16>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.head&&(d.head.xflags=k&255,d.head.os=k>>8);d.flags&512&&d.wrap&4&&(c[0]=k&255,c[1]=k>>>8&255,d.check=La(d.check,c,2,0));p=k=0;d.mode=16184;case 16184:if(d.flags&1024){for(;16>p;){if(0===r)break a;r--;
k+=n[m++]<<p;p+=8}d.length=k;d.head&&(d.head.extra_len=k);d.flags&512&&d.wrap&4&&(c[0]=k&255,c[1]=k>>>8&255,d.check=La(d.check,c,2,0));p=k=0}else d.head&&(d.head.extra=null);d.mode=16185;case 16185:if(d.flags&1024){var u=d.length;u>r&&(u=r);u&&(d.head&&(v=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Uint8Array(d.head.extra_len)),d.head.extra.set(n.subarray(m,m+u),v)),d.flags&512&&d.wrap&4&&(d.check=La(d.check,n,u,m)),r-=u,m+=u,d.length-=u);if(d.length)break a}d.length=0;d.mode=16186;
case 16186:if(d.flags&2048){if(0===r)break a;u=0;do v=n[m+u++],d.head&&v&&65536>d.length&&(d.head.name+=String.fromCharCode(v));while(v&&u<r);d.flags&512&&d.wrap&4&&(d.check=La(d.check,n,u,m));r-=u;m+=u;if(v)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=16187;case 16187:if(d.flags&4096){if(0===r)break a;u=0;do v=n[m+u++],d.head&&v&&65536>d.length&&(d.head.comment+=String.fromCharCode(v));while(v&&u<r);d.flags&512&&d.wrap&4&&(d.check=La(d.check,n,u,m));r-=u;m+=u;if(v)break a}else d.head&&
(d.head.comment=null);d.mode=16188;case 16188:if(d.flags&512){for(;16>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if(d.wrap&4&&k!==(d.check&65535)){a.msg="header crc mismatch";d.mode=16209;break}p=k=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0);a.adler=d.check=0;d.mode=16191;break;case 16189:for(;32>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}a.adler=d.check=Eh(k);p=k=0;d.mode=16190;case 16190:if(0===d.havedict)return a.next_out=f,a.avail_out=g,a.next_in=m,a.avail_in=r,d.hold=k,d.bits=p,gk;a.adler=
d.check=1;d.mode=16191;case 16191:if(b===ek||b===Rd)break a;case 16192:if(d.last){k>>>=p&7;p-=p&7;d.mode=16206;break}for(;3>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.last=k&1;k>>>=1;--p;switch(k&3){case 0:d.mode=16193;break;case 1:u=d;if(Jh){uf=new Int32Array(512);vf=new Int32Array(32);for(v=0;144>v;)u.lens[v++]=8;for(;256>v;)u.lens[v++]=9;for(;280>v;)u.lens[v++]=7;for(;288>v;)u.lens[v++]=8;ed(1,u.lens,0,288,uf,0,u.work,{bits:9});for(v=0;32>v;)u.lens[v++]=5;ed(2,u.lens,0,32,vf,0,u.work,{bits:5});
Jh=!1}u.lencode=uf;u.lenbits=9;u.distcode=vf;u.distbits=5;d.mode=16199;if(b===Rd){k>>>=2;p-=2;break a}break;case 2:d.mode=16196;break;case 3:a.msg="invalid block type",d.mode=16209}k>>>=2;p-=2;break;case 16193:k>>>=p&7;for(p-=p&7;32>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if((k&65535)!==(k>>>16^65535)){a.msg="invalid stored block lengths";d.mode=16209;break}d.length=k&65535;p=k=0;d.mode=16194;if(b===Rd)break a;case 16194:d.mode=16195;case 16195:if(u=d.length){u>r&&(u=r);u>g&&(u=g);if(0===u)break a;
h.set(n.subarray(m,m+u),f);r-=u;m+=u;g-=u;f+=u;d.length-=u;break}d.mode=16191;break;case 16196:for(;14>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.nlen=(k&31)+257;k>>>=5;p-=5;d.ndist=(k&31)+1;k>>>=5;p-=5;d.ncode=(k&15)+4;k>>>=4;p-=4;if(286<d.nlen||30<d.ndist){a.msg="too many length or distance symbols";d.mode=16209;break}d.have=0;d.mode=16197;case 16197:for(;d.have<d.ncode;){for(;3>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.lens[e[d.have++]]=k&7;k>>>=3;p-=3}for(;19>d.have;)d.lens[e[d.have++]]=
0;d.lencode=d.lendyn;d.lenbits=7;u={bits:d.lenbits};w=ed(0,d.lens,0,19,d.lencode,0,d.work,u);d.lenbits=u.bits;if(w){a.msg="invalid code lengths set";d.mode=16209;break}d.have=0;d.mode=16198;case 16198:for(;d.have<d.nlen+d.ndist;){for(;;){var A=d.lencode[k&(1<<d.lenbits)-1];u=A>>>24;A&=65535;if(u<=p)break;if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if(16>A)k>>>=u,p-=u,d.lens[d.have++]=A;else{if(16===A){for(v=u+2;p<v;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}k>>>=u;p-=u;if(0===d.have){a.msg="invalid bit length repeat";
d.mode=16209;break}v=d.lens[d.have-1];u=3+(k&3);k>>>=2;p-=2}else if(17===A){for(v=u+3;p<v;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}k>>>=u;p-=u;v=0;u=3+(k&7);k>>>=3;p-=3}else{for(v=u+7;p<v;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}k>>>=u;p-=u;v=0;u=11+(k&127);k>>>=7;p-=7}if(d.have+u>d.nlen+d.ndist){a.msg="invalid bit length repeat";d.mode=16209;break}for(;u--;)d.lens[d.have++]=v}}if(16209===d.mode)break;if(0===d.lens[256]){a.msg="invalid code -- missing end-of-block";d.mode=16209;break}d.lenbits=9;
u={bits:d.lenbits};w=ed(1,d.lens,0,d.nlen,d.lencode,0,d.work,u);d.lenbits=u.bits;if(w){a.msg="invalid literal/lengths set";d.mode=16209;break}d.distbits=6;d.distcode=d.distdyn;u={bits:d.distbits};w=ed(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,u);d.distbits=u.bits;if(w){a.msg="invalid distances set";d.mode=16209;break}d.mode=16199;if(b===Rd)break a;case 16199:d.mode=16200;case 16200:if(6<=r&&258<=g){a.next_out=f;a.avail_out=g;a.next_in=m;a.avail_in=r;d.hold=k;d.bits=p;var F=a,B=F.state;var G=F.next_in;
h=F.input;var D=G+(F.avail_in-5);var z=F.next_out;n=F.output;var J=z-(q-F.avail_out);var K=z+(F.avail_out-257);var Y=B.dmax;A=B.wsize;var V=B.whave;var Z=B.wnext;var M=B.window;v=B.hold;u=B.bits;p=B.lencode;k=B.distcode;g=(1<<B.lenbits)-1;r=(1<<B.distbits)-1;b:do{15>u&&(v+=h[G++]<<u,u+=8,v+=h[G++]<<u,u+=8);var C=p[v&g];c:for(;;){f=C>>>24;v>>>=f;u-=f;f=C>>>16&255;if(0===f)n[z++]=C&65535;else if(f&16){m=C&65535;if(f&=15)u<f&&(v+=h[G++]<<u,u+=8),m+=v&(1<<f)-1,v>>>=f,u-=f;15>u&&(v+=h[G++]<<u,u+=8,v+=
h[G++]<<u,u+=8);C=k[v&r];d:for(;;){f=C>>>24;v>>>=f;u-=f;f=C>>>16&255;if(f&16){var X=C&65535;f&=15;u<f&&(v+=h[G++]<<u,u+=8,u<f&&(v+=h[G++]<<u,u+=8));X+=v&(1<<f)-1;if(X>Y){F.msg="invalid distance too far back";B.mode=16209;break b}v>>>=f;u-=f;f=z-J;if(X>f){f=X-f;if(f>V&&B.sane){F.msg="invalid distance too far back";B.mode=16209;break b}var H=0;C=M;if(0===Z){if(H+=A-f,f<m){m-=f;do n[z++]=M[H++];while(--f);H=z-X;C=n}}else if(Z<f){if(H+=A+Z-f,f-=Z,f<m){m-=f;do n[z++]=M[H++];while(--f);H=0;if(Z<m){f=Z;
m-=f;do n[z++]=M[H++];while(--f);H=z-X;C=n}}}else if(H+=Z-f,f<m){m-=f;do n[z++]=M[H++];while(--f);H=z-X;C=n}for(;2<m;)n[z++]=C[H++],n[z++]=C[H++],n[z++]=C[H++],m-=3;m&&(n[z++]=C[H++],1<m&&(n[z++]=C[H++]))}else{H=z-X;do n[z++]=n[H++],n[z++]=n[H++],n[z++]=n[H++],m-=3;while(2<m);m&&(n[z++]=n[H++],1<m&&(n[z++]=n[H++]))}}else if(0===(f&64)){C=k[(C&65535)+(v&(1<<f)-1)];continue d}else{F.msg="invalid distance code";B.mode=16209;break b}break}}else if(0===(f&64)){C=p[(C&65535)+(v&(1<<f)-1)];continue c}else{f&
32?B.mode=16191:(F.msg="invalid literal/length code",B.mode=16209);break b}break}}while(G<D&&z<K);m=u>>3;G-=m;u-=m<<3;F.next_in=G;F.next_out=z;F.avail_in=G<D?5+(D-G):5-(G-D);F.avail_out=z<K?257+(K-z):257-(z-K);B.hold=v&(1<<u)-1;B.bits=u;f=a.next_out;h=a.output;g=a.avail_out;m=a.next_in;n=a.input;r=a.avail_in;k=d.hold;p=d.bits;16191===d.mode&&(d.back=-1);break}for(d.back=0;;){A=d.lencode[k&(1<<d.lenbits)-1];u=A>>>24;v=A>>>16&255;A&=65535;if(u<=p)break;if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if(v&&0===
(v&240)){M=u;Z=v;for(V=A;;){A=d.lencode[V+((k&(1<<M+Z)-1)>>M)];u=A>>>24;v=A>>>16&255;A&=65535;if(M+u<=p)break;if(0===r)break a;r--;k+=n[m++]<<p;p+=8}k>>>=M;p-=M;d.back+=M}k>>>=u;p-=u;d.back+=u;d.length=A;if(0===v){d.mode=16205;break}if(v&32){d.back=-1;d.mode=16191;break}if(v&64){a.msg="invalid literal/length code";d.mode=16209;break}d.extra=v&15;d.mode=16201;case 16201:if(d.extra){for(v=d.extra;p<v;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.length+=k&(1<<d.extra)-1;k>>>=d.extra;p-=d.extra;d.back+=
d.extra}d.was=d.length;d.mode=16202;case 16202:for(;;){A=d.distcode[k&(1<<d.distbits)-1];u=A>>>24;v=A>>>16&255;A&=65535;if(u<=p)break;if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if(0===(v&240)){M=u;Z=v;for(V=A;;){A=d.distcode[V+((k&(1<<M+Z)-1)>>M)];u=A>>>24;v=A>>>16&255;A&=65535;if(M+u<=p)break;if(0===r)break a;r--;k+=n[m++]<<p;p+=8}k>>>=M;p-=M;d.back+=M}k>>>=u;p-=u;d.back+=u;if(v&64){a.msg="invalid distance code";d.mode=16209;break}d.offset=A;d.extra=v&15;d.mode=16203;case 16203:if(d.extra){for(v=d.extra;p<
v;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}d.offset+=k&(1<<d.extra)-1;k>>>=d.extra;p-=d.extra;d.back+=d.extra}if(d.offset>d.dmax){a.msg="invalid distance too far back";d.mode=16209;break}d.mode=16204;case 16204:if(0===g)break a;u=q-g;if(d.offset>u){u=d.offset-u;if(u>d.whave&&d.sane){a.msg="invalid distance too far back";d.mode=16209;break}u>d.wnext?(u-=d.wnext,v=d.wsize-u):v=d.wnext-u;u>d.length&&(u=d.length);M=d.window}else M=h,v=f-d.offset,u=d.length;u>g&&(u=g);g-=u;d.length-=u;do h[f++]=M[v++];
while(--u);0===d.length&&(d.mode=16200);break;case 16205:if(0===g)break a;h[f++]=d.length;g--;d.mode=16200;break;case 16206:if(d.wrap){for(;32>p;){if(0===r)break a;r--;k|=n[m++]<<p;p+=8}q-=g;a.total_out+=q;d.total+=q;d.wrap&4&&q&&(a.adler=d.check=d.flags?La(d.check,h,q,f-q):$c(d.check,h,q,f-q));q=g;if(d.wrap&4&&(d.flags?k:Eh(k))!==d.check){a.msg="incorrect data check";d.mode=16209;break}p=k=0}d.mode=16207;case 16207:if(d.wrap&&d.flags){for(;32>p;){if(0===r)break a;r--;k+=n[m++]<<p;p+=8}if(d.wrap&
4&&k!==(d.total&4294967295)){a.msg="incorrect length check";d.mode=16209;break}p=k=0}d.mode=16208;case 16208:w=fk;break a;case 16209:w=Bh;break a;case 16210:return Ch;default:return bb}a.next_out=f;a.avail_out=g;a.next_in=m;a.avail_in=r;d.hold=k;d.bits=p;(d.wsize||q!==a.avail_out&&16209>d.mode&&(16206>d.mode||b!==Ah))&&Kh(a,a.output,a.next_out,q-a.avail_out);t-=a.avail_in;q-=a.avail_out;a.total_in+=t;a.total_out+=q;d.total+=q;d.wrap&4&&q&&(a.adler=d.check=d.flags?La(d.check,h,q,a.next_out-q):$c(d.check,
h,q,a.next_out-q));a.data_type=d.bits+(d.last?64:0)+(16191===d.mode?128:0)+(16199===d.mode||16194===d.mode?256:0);(0===t&&0===q||b===Ah)&&w===bc&&(w=hk);return w},inflateEnd:function(a){if(cc(a))return bb;var b=a.state;b.window&&(b.window=null);a.state=null;return bc},inflateGetHeader:function(a,b){if(cc(a))return bb;a=a.state;if(0===(a.wrap&2))return bb;a.head=b;b.done=!1;return bc},inflateSetDictionary:function(a,b){var c=b.length;if(cc(a))return bb;var e=a.state;if(0!==e.wrap&&16190!==e.mode)return bb;
if(16190===e.mode){var d=$c(1,b,c,0);if(d!==e.check)return Bh}if(Kh(a,b,c,c))return e.mode=16210,Ch;e.havedict=1;return bc},inflateInfo:"pako inflate (from Nodeca project)"},xi=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},ag=Object.prototype.toString,ik=ba.Z_NO_FLUSH,jk=ba.Z_FINISH,Hc=ba.Z_OK,wf=ba.Z_STREAM_END,xf=ba.Z_NEED_DICT,kk=ba.Z_STREAM_ERROR,Lh=ba.Z_DATA_ERROR,lk=ba.Z_MEM_ERROR;Gc.prototype.push=function(a,
b){var c=this.strm,e=this.options.chunkSize,d=this.options.dictionary;if(this.ended)return!1;var f=b===~~b?b:!0===b?jk:ik;"[object ArrayBuffer]"===ag.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;for(c.avail_in=c.input.length;;){0===c.avail_out&&(c.output=new Uint8Array(e),c.next_out=0,c.avail_out=e);b=ob.inflate(c,f);b===xf&&d&&(b=ob.inflateSetDictionary(c,d),b===Hc?b=ob.inflate(c,f):b===Lh&&(b=xf));for(;0<c.avail_in&&b===wf&&0<c.state.wrap&&0!==a[c.next_in];)ob.inflateReset(c),b=ob.inflate(c,
f);switch(b){case kk:case Lh:case xf:case lk:return this.onEnd(b),this.ended=!0,!1}var h=c.avail_out;if(c.next_out&&(0===c.avail_out||b===wf))if("string"===this.options.to){var g=Fc.utf8border(c.output,c.next_out),m=c.next_out-g,n=Fc.buf2string(c.output,g);c.next_out=m;c.avail_out=e-m;m&&c.output.set(c.output.subarray(g,g+m),0);this.onData(n)}else this.onData(c.output.length===c.next_out?c.output:c.output.subarray(0,c.next_out));if(b!==Hc||0!==h){if(b===wf){b=ob.inflateEnd(this.strm);this.onEnd(b);
this.ended=!0;break}if(0===c.avail_in)break}}return!0};Gc.prototype.onData=function(a){this.chunks.push(a)};Gc.prototype.onEnd=function(a){a===Hc&&(this.result="string"===this.options.to?this.chunks.join(""):jd.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var sg={Deflate:Dc,deflate:fe,deflateRaw:function(a,b){b=b||{};b.raw=!0;return fe(a,b)},gzip:function(a,b){b=b||{};b.gzip=!0;return fe(a,b)},Inflate:Gc,inflate:ge,inflateRaw:function(a,b){b=b||{};b.raw=!0;return ge(a,
b)},ungzip:ge,constants:ba},Mh;(function(a){a.BRAND="DeviceBrand";a.MANUFACTURER="DeviceManufacturer";a.MODEL="DeviceModel";a.TYPE="DeviceType";a.VERSION="DeviceVersion";a.OS_NAME="OperatingSystemName";a.OS_VERSION="OperatingSystemVersion";a.CATEGORY="DeviceCategory";a.FRAMEWORK_NAME="FrameworkName";a.FRAMEWORK_VERSION="FrameworkVersion"})(Mh||(Mh={}));var df={DeviceType:{CONSOLE:"Console",DESKTOP:"DESKTOP",MOBILE:"Mobile",SETTOP:"Settop",SMARTTV:"SmartTV",TABLET:"Tablet",VEHICLE:"Vehicle",OTHER:"Other"},
DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",KAIOS_DEVICE:"KAIOS",LG_TV:"LGTV",LINUX:"LNX",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",VIDAA_DEVICE:"VIDAA",VIZIO_TV:"VIZIOTV",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB"}},E;(function(a){var b;a.TRACEPARENT_HEADER_KEY="traceparent";a.BAGGAGE_HEADER_KEY="baggage";var c;(function(d){d.NONE="NONE";d.RCFG="RCFG"})(c=a.SAMPLING_MODES||(a.SAMPLING_MODES={}));
(function(d){d.DERIVED="DERIVED";d.DEFAULT="DEFAULT"})(a.SAMPLING_STATUS||(a.SAMPLING_STATUS={}));var e;(function(d){d.SAMPLED="sl";d.NON_SAMPLED="nsl"})(e=a.SAMPLING_ACTION||(a.SAMPLING_ACTION={}));a.DEFAULT_SAMPLING_ACTION=(b={},b[e.SAMPLED]=c.RCFG,b[e.NON_SAMPLED]=c.NONE,b);(function(d){d.DEFAULT="def";d.CACHED="cac";d.REMOTE="rem"})(a.CONFIG_SOURCE||(a.CONFIG_SOURCE={}));(function(d){d[d.APP=0]="APP";d[d.REMOTE=1]="REMOTE";d[d.MERGE=2]="MERGE"})(a.CONFIG_PREFERENCES||(a.CONFIG_PREFERENCES={}));
(function(d){d[d.DISABLED=0]="DISABLED";d[d.PERFORMANCE_TIMING=1]="PERFORMANCE_TIMING";d[d.PERFORMANCE_NAVIGATION_TIMING=2]="PERFORMANCE_NAVIGATION_TIMING"})(a.PERFORMANCE_CONTEXT||(a.PERFORMANCE_CONTEXT={}));(function(d){d.DO_NOT_FETCH_UPDATE_TIMER="updateTimer";d.IMMEDIATE_FETCH="urgentFetch";d.UPDATE_TIMER_WITH_DIFF="checkDiff"})(a.RC_FETCH_MODE||(a.RC_FETCH_MODE={}));(function(d){d.AUTO="auto";d.MANUAL="manual";d.BOTH="both"})(a.NETWORK_REQUEST_EVENT_COLLECTION_MODE||(a.NETWORK_REQUEST_EVENT_COLLECTION_MODE=
{}));a.REMOTE_CONFIG_STORAGE_KEY="ConvivaRemoteConfig";a.END_POINT_STORAGE_KEY="ConvivaEndpoint";a.DEFAULT_END_POINT="https://appgw.conviva.com";a.REMOTE_CONFIG_URL_PREFIX="https://rc.conviva.com/js/";a.REMOTE_CONFIG_FILE_NAME="/remote_config.json";a.SAMPLING_STORAGE_RANDOM_NUMBER_KEY="ConvivaSamplingRandomNumber";a.VISUAL_LABELLING_CONFIG="ConvivaVisualLabellingConfig";a.SESSION_RECORDING_STARTED="ConvivaSessionRecordingStarted";a.SAMPLING_MODE_STORAGE_KEY="ConvivaSamplingMode";a.DIAGNOSTIC_INFO_MAX_LENGTH=
{MAX_MESSAGE_LENGTH:1024,MAX_STACK_LENGTH:2048,MAX_CLASSNAME_LENGTH:1024,MAX_EXCEPTION_NAME_LENGTH:1024};a.CLICK_KEY_MAX_LENGTH=1024;a.CLICK_DEBOUNCING_DELAY=300;a.CLICK_MAX_DEPTH=16;a.MAX_NATIVE_SCAN=16;a.MAX_NATIVE_SCAN_LEGACY=8;a.PAGE_URL_QUERY_PARAMS="pgq";a.V2A_CUSTOM_EVENTS=["c3.video.custom_event","c3.sdk.custom_event","c3.ad.custom_event"]})(E||(E={}));var kb;"function"===typeof AbortController&&(kb=new AbortController);var Ia=null===kb||void 0===kb?void 0:kb.signal,ma;(function(a){a.response_body=
"rsb";a.request_body="rqb";a.response_headers="rsh";a.request_headers="rqh";a.request_query="rqq"})(ma||(ma={}));var ic=10240,pd=function(a){try{var b=void 0;"undefined"!=typeof a&&null!==a&&(b=a["content-type"]||a["Content-Type"]||a["Content-type"]);return b}catch(c){}},va={},dc;(function(a){a.APPLICATION_BACKGROUND="abg";a.APPLICATION_ERROR="ae";a.WEBVITALS_LCP="conviva_webvitals_lcp";a.WEBVITALS_CLS="conviva_webvitals_cls";a.WEBVITALS_INP="conviva_webvitals_inp"})(dc||(dc={}));var ja={cacheRefreshInterval:30,
base64:!1,lifecycleAutotracking:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{enabled:!0},softNavigationTrackingConfiguration:{enabled:!1,idleWindowMs:600,maxMeasurementMs:1E4,includeHashChanges:!1,domainAllowlist:[],domainBlocklist:["sdk.fra-01.braze.eu","tr.snapchat.com","analytics.google.com","ams.creativecdn.com","analytics.tiktok.com"]},networkRequestTrackingConfiguration:{eventCollectionMode:E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH,
blocklist:["*"]},traceparentconfig:{enabled:!1,pref:E.CONFIG_PREFERENCES.MERGE,targetUrl:[]},baggageConfiguration:{enabled:!1,targetUrl:[],attributeExtraction:[]},performanceContextConfig:1,configurationVersion:-1,catRcLastUpdatedTs:0,endpoint:E.DEFAULT_END_POINT,applicationContext:!0,maxLocalStorageQueueSize:10,emitterConfiguration:{batching:{enabled:!0,byteLimitPostInKB:250,batchingIntervalInSec:5,urgentEvents:[dc.APPLICATION_BACKGROUND,dc.APPLICATION_ERROR,dc.WEBVITALS_LCP,dc.WEBVITALS_CLS,dc.WEBVITALS_INP]}},
enc:"gzip",mend:!0,di:{en:!1,lim:30},clickcc:{en:!0,cssSelectorList:'\n  [role="button"],\n  [data-role="button"],\n  li,\n  [class^="btn"],\n  [class*="click"],\n  [data-click],\n  [data-action],\n  [tabindex]:not([tabindex="-1"]),\n  [onclick],\n  [role="datepicker"],\n  [class*="datepicker"],\n  [class*="date-picker"],\n  [class*="mat-datepicker"],\n  [class*="ant-picker"],\n  [class*="v-date-picker"],\n  [class*="react-datepicker"],\n  [class*="ngx-datepicker"],\n  [data-ng-click],\n  [ng-click],\n  [v-on\\:click],\n  [\\@click],\n  [data-test-id*="click"],\n  [data-testid*="button"],\n  [class*="-btn"],\n  [class*="-button"],\n  [class*="mat-button"],\n  [class*="v-btn"],\n  [class*="v-icon-button"],\n  [data-listener-count-click],\n  [class*="Button"]\n',
uiMode:"closest"},collectionRateLimit:{exceptionAutotracking:{maxEvents:20,timeWindow:1E3,disconnectDuration:2E3}},evtStreamTrackingConfiguration:{enabled:!1,collect:[],block:[],conditionalCollectAttr:[],richContentInference:{cond:[]}},valueProbes:{enabled:!1,probes:[]},webVitals:{enabled:!1,collectattr:[]}},mk="cws.conviva.com rcg.conviva.com /wsg /ctp remote_config pings.conviva.com .m3u8 .mpd .ism .m4 .mp4 .ts .png .jpg .jpeg .bmp google-analytics.com googlesyndication.com googleapis stats.g.doubleclick chartbeat.com omtrdc.net app-measurement.com firebase nr-data.net newrelic bitmovin.com/impression bitmovin.com/analytics api.segment.io youbora hotjar mixpanel.com clevertap auryc .aac .vtt .googlevideo webp appsflyer facebook dynatrace mparticle npaw .pdf bookkeeper kochava mp3 marketingcloudapis demdex scorecardresearch lura.live perimeterx.net permutive.app segment.com vaicore.site boomtrain ketchcdn qualtrics .svg amplitude datadoghq branch.io hotjar splunkcloud".split(" "),
qb;(function(a){a.NONE="none";a.GZIP="gzip"})(qb||(qb={}));var za,nk=function(a){var b={};a.trim().split(/[\r\n]+/).forEach(function(c){c=c.split(":");var e=c[1];b[c[0].trim()]=null===e||void 0===e?void 0:e.trim()});return b},yf=function(a){var b={};a.forEach(function(c,e){b[e]=c});return b},Ii="/ctp /wsg remote_config rc.conviva.com pings.conviva.com rcg.conviva.com".split(" "),gb;(function(a){a[a.NETWORK_REQUEST=0]="NETWORK_REQUEST";a[a.CUSTOM_EVENT=1]="CUSTOM_EVENT";a[a.SSE_EVENT=2]="SSE_EVENT"})(gb||
(gb={}));var ne=0,kg=0,Ea=E.CONFIG_SOURCE.DEFAULT,Ga=0,zf,Af,Bf,Mc=!1,Pb=null,wa,oe=null,sd=0,mg='\n  button,\n  a,\n  select,\n  textarea,\n  input:not([type="hidden"]),\n  summary,\n  video,\n  audio\n'.replace(/\s+/g,"")||"",Oi='\n[class*="card"]\n'.replace(/\s+/g,"")||"",Nh="undefined"!==typeof window&&(null===window||void 0===window?0:window.localStorage)?localStorage.getItem(E.REMOTE_CONFIG_STORAGE_KEY):null,Ob=Nh?null===(Af=null===(zf=JSON.parse(Nh).clickcc)||void 0===zf?void 0:zf.cssSelectorList)||
void 0===Af?void 0:Af.replace(/\s+/g,""):null===(Bf=ja.clickcc)||void 0===Bf?void 0:Bf.cssSelectorList,Lc;(function(a){a.BOTH="both";a.CLOSEST="closest";a.RAW="raw"})(Lc||(Lc={}));"undefined"!=typeof Element&&Element.prototype&&!Element.prototype.closest&&(Element.prototype.closest=function(a){try{for(var b=this;b;){if(b.matches(a))return b;b=b.parentElement}}catch(c){ha.warn("Conviva App Tracker caused Exception in closest polyfill method of user click tracking module",c)}return null});var ok=function(){return function(a){this.cacheRefreshInterval=
a.cacheRefreshInterval;this.base64=a.base64;this.corePlugins=a.corePlugins;this.callback=a.callback;this.lifecycleAutotracking=a.lifecycleAutotracking;this.exceptionAutotracking=a.exceptionAutotracking;this.enablePeriodicHeartbeat=a.enablePeriodicHeartbeat;this.periodicHeartbeatInterval=a.periodicHeartbeatInterval;this.enc=a.enc;this.maxLocalStorageQueueSize=a.maxLocalStorageQueueSize;this.maxPostBytes=a.maxPostBytes;this.maxGetBytes=a.maxGetBytes;this.bufferSize=a.bufferSize;this.customEventTrackingConfiguration=
a.customEventTrackingConfiguration;this.softNavigationTrackingConfiguration=a.softNavigationTrackingConfiguration;this.networkRequestTrackingConfiguration=a.networkRequestTrackingConfiguration;this.traceparentconfig=a.traceparentconfig;this.baggageConfiguration=a.baggageConfiguration;this.metaTagsTrackingConfiguration=a.metaTagsTrackingConfiguration;this.performanceContextConfig=a.performanceContextConfig;this.mend=a.mend;this.configurationVersion=a.configurationVersion;this.catRcLastUpdatedTs=a.catRcLastUpdatedTs;
this.endpoint=a.endpoint;this.emitterConfiguration=a.emitterConfiguration;this.controlIngestConfig=a.controlIngestConfig;this.applicationContext=a.applicationContext;this.di=a.di;this.clickcc=a.clickcc;this.collectionRateLimit=a.collectionRateLimit;this.pageUrlTrackingConfig=a.pageUrlTrackingConfig;this.sessionReplayConfiguration=a.sessionReplayConfiguration;this.evtStreamTrackingConfiguration=a.evtStreamTrackingConfiguration;this.valueProbes=a.valueProbes;this.webVitals=a.webVitals}}(),Oh=function(){function a(){this.cacheRefreshInterval=
ja.cacheRefreshInterval;this.base64=ja.base64;this.lifecycleAutotracking=ja.lifecycleAutotracking;this.exceptionAutotracking=ja.exceptionAutotracking;this.enablePeriodicHeartbeat=ja.enablePeriodicHeartbeat;this.periodicHeartbeatInterval=ja.periodicHeartbeatInterval;this.customEventTrackingConfiguration=N({},ja.customEventTrackingConfiguration);this.softNavigationTrackingConfiguration=N({},ja.softNavigationTrackingConfiguration);this.networkRequestTrackingConfiguration=N({},ja.networkRequestTrackingConfiguration);
this.traceparentconfig=N({},ja.traceparentconfig);this.baggageConfiguration=N({},ja.baggageConfiguration);this.performanceContextConfig=ja.performanceContextConfig;this.configurationVersion=ja.configurationVersion;this.catRcLastUpdatedTs=ja.catRcLastUpdatedTs;this.endpoint=ja.endpoint;this.emitterConfiguration=ja.emitterConfiguration;this.applicationContext=ja.applicationContext;this.enc=ja.enc;this.mend=ja.mend;this.di=N({},ja.di);this.clickcc=N({},ja.clickcc);this.collectionRateLimit=N({},ja.collectionRateLimit);
this.evtStreamTrackingConfiguration=N({},ja.evtStreamTrackingConfiguration);this.valueProbes=N({},ja.valueProbes);this.webVitals=N({},ja.webVitals)}a.prototype.setCacheRefreshInterval=function(b){this.cacheRefreshInterval="number"===typeof b&&1<=b?Ic(b)?b:ja.cacheRefreshInterval:ja.cacheRefreshInterval;return this};a.prototype.setBase64=function(b){"boolean"===typeof b&&(this.base64=b);return this};a.prototype.setCorePlugins=function(b){b&&(this.corePlugins=b);return this};a.prototype.setCallback=
function(b){b&&(this.callback=b);return this};a.prototype.setLifecycleAutotracking=function(b){"boolean"===typeof b&&(this.lifecycleAutotracking=b);return this};a.prototype.setExceptionAutotracking=function(b){"boolean"===typeof b&&(this.exceptionAutotracking=b);return this};a.prototype.setEnablePeriodicHeartbeat=function(b){"boolean"===typeof b&&(this.enablePeriodicHeartbeat=b);return this};a.prototype.setPeriodicHeartbeatInterval=function(b){"number"===typeof b&&1<=b&&(this.periodicHeartbeatInterval=
~~b);return this};a.prototype.setEnc=function(b,c){"string"===typeof b&&Object.values(qb).includes(b)?this.enc=b:c&&"string"===typeof c&&Object.values(qb).includes(c)?this.enc=c:this.enc=ja.enc;return this};a.prototype.setMaxLocalStorageQueueSize=function(b){"number"===typeof b&&(this.maxLocalStorageQueueSize=b);return this};a.prototype.setMaxGetBytes=function(b){"number"===typeof b&&(this.maxGetBytes=b);return this};a.prototype.setBufferSize=function(b){"number"===typeof b&&(this.bufferSize=b);return this};
a.prototype.setCustomEventTrackingConfiguration=function(b){b&&(this.customEventTrackingConfiguration=b);return this};a.prototype.setSoftNavigationTrackingConfiguration=function(b){b&&(this.softNavigationTrackingConfiguration=b);return this};a.prototype.setEmitterConfiguration=function(b){"undefined"!=typeof b&&("undefined"!=typeof b.batching.enabled&&(this.emitterConfiguration.batching.enabled=b.batching.enabled),"undefined"!=typeof b.batching.batchingIntervalInSec&&0<b.batching.batchingIntervalInSec&&
(this.emitterConfiguration.batching.batchingIntervalInSec=b.batching.batchingIntervalInSec),"undefined"!=b.batching.byteLimitPostInKB&&0<b.batching.byteLimitPostInKB&&(this.emitterConfiguration.batching.byteLimitPostInKB=b.batching.byteLimitPostInKB),"undefined"!=typeof b.batching.urgentEvents&&(this.emitterConfiguration.batching.urgentEvents=b.batching.urgentEvents));return this};a.prototype.setNetworkRequestTrackingConfiguration=function(b,c,e){b&&(this.networkRequestTrackingConfiguration=b,this.networkRequestTrackingConfiguration.eventCollectionMode||
(this.networkRequestTrackingConfiguration.eventCollectionMode=ja.networkRequestTrackingConfiguration.eventCollectionMode),c&&(this.networkRequestTrackingConfiguration.blocklist||(this.networkRequestTrackingConfiguration.blocklist=[]),e&&this.networkRequestTrackingConfiguration.blocklist.push(e),this.networkRequestTrackingConfiguration.blocklist=this.networkRequestTrackingConfiguration.blocklist.concat(mk)));return this};a.prototype.setTraceparentconfig=function(b){b&&(this.traceparentconfig=b);return this};
a.prototype.setBaggageConfiguration=function(b){"undefined"!==typeof b&&null!==b&&("boolean"===typeof b.enabled&&(this.baggageConfiguration.enabled=b.enabled),"undefined"!==typeof b.targetUrl&&(this.baggageConfiguration.targetUrl=b.targetUrl),"undefined"!==typeof b.attributeExtraction&&(this.baggageConfiguration.attributeExtraction=b.attributeExtraction));return this};a.prototype.setMetaTagsTrackingConfiguration=function(b){b&&(this.metaTagsTrackingConfiguration=b);return this};a.prototype.setPerformanceContextConfig=
function(b){"number"===typeof b&&(this.performanceContextConfig=b);return this};a.prototype.setMend=function(b,c){"boolean"===typeof b?this.mend=b:"boolean"===typeof c&&(this.mend=c);return this};a.prototype.setConfigurationVersion=function(b){"number"===typeof b&&(this.configurationVersion=b);return this};a.prototype.setCatRcLastUpdatedTs=function(b){"number"===typeof b&&(this.catRcLastUpdatedTs=b);return this};a.prototype.setEndPoint=function(b,c,e){"string"===typeof e&&0<e.trim().length?this.endpoint=
e:"string"===typeof b&&0<b.trim().length?this.endpoint=b:c&&"string"===typeof c&&0<c.trim().length?this.endpoint=c:this.endpoint=ja.endpoint;return this};a.prototype.setcontrolIngestConfig=function(b){"undefined"!==typeof b?this.controlIngestConfig=b:nd();return this};a.prototype.setApplicationContext=function(b){"undefined"!=typeof b&&(this.applicationContext=b);return this};a.prototype.setDi=function(b){"undefined"!=typeof b&&(this.di=N(N({},this.di),b));return this};a.prototype.setClickcc=function(b){var c,
e;"undefined"!=typeof b&&("boolean"===typeof b.en&&(this.clickcc.en=b.en),b.cssSelectorList&&0<b.cssSelectorList.trim().length&&(this.clickcc.cssSelectorList=b.cssSelectorList),"string"===typeof b.uiMode&&Object.values(Lc).includes(b.uiMode)&&(this.clickcc.uiMode=b.uiMode),"undefined"!==typeof b.block&&(this.clickcc.block=b.block),"undefined"!==typeof b.collect&&(this.clickcc.collect=b.collect),"undefined"!==typeof b.collectattr&&(this.clickcc.collectattr=b.collectattr));"boolean"===typeof(null===
(c=null===this||void 0===this?void 0:this.clickcc)||void 0===c?void 0:c.en)&&!0===(null===(e=null===this||void 0===this?void 0:this.clickcc)||void 0===e?void 0:e.en)?Si():pg();return this};a.prototype.setCollectionRateLimit=function(b){"undefined"!=typeof b&&null!==b&&(this.collectionRateLimit=N(N({},this.collectionRateLimit),b));return this};a.prototype.setPageUrlTrackingConfig=function(b){this.pageUrlTrackingConfig="undefined"!==typeof b?b:null;return this};a.prototype.setSessionReplayConfiguration=
function(b){this.sessionReplayConfiguration="undefined"!==typeof b?b:null;return this};a.prototype.setValueProbes=function(b){var c,e;this.valueProbes="undefined"!==typeof b?N(N({},b),{enabled:null!==(c=null===b||void 0===b?void 0:b.enabled)&&void 0!==c?c:!1,probes:null!==(e=null===b||void 0===b?void 0:b.probes)&&void 0!==e?e:[]}):N({},ja.valueProbes);return this};a.prototype.setWebVitals=function(b){var c,e;this.webVitals="undefined"!==typeof b?N(N({},b),{enabled:null!==(c=null===b||void 0===b?void 0:
b.enabled)&&void 0!==c?c:!1,collectattr:null!==(e=null===b||void 0===b?void 0:b.collectattr)&&void 0!==e?e:[]}):N({},ja.webVitals);return this};a.prototype.setEvtStreamTrackingConfiguration=function(b){"undefined"!==typeof b&&("boolean"===typeof b.enabled&&(this.evtStreamTrackingConfiguration.enabled=b.enabled),"undefined"!==typeof b.block&&(this.evtStreamTrackingConfiguration.block=b.block),"undefined"!==typeof b.collect&&(this.evtStreamTrackingConfiguration.collect=b.collect),"undefined"!==typeof b.conditionalCollectAttr&&
(this.evtStreamTrackingConfiguration.conditionalCollectAttr=b.conditionalCollectAttr),"undefined"!==typeof b.richContentInference&&(this.evtStreamTrackingConfiguration.richContentInference=b.richContentInference),"undefined"!==typeof b.bufferMaxBytes&&(this.evtStreamTrackingConfiguration.bufferMaxBytes=b.bufferMaxBytes));return this};a.prototype.build=function(){return new ok(this)};return a}(),vc=!1,Wc=null,wc=0,cb,Sd=!1,R,tj=function(a,b,c){var e,d,f,h,g={},m={},n;if("undefined"!=typeof window&&
(null===window||void 0===window?0:window.localStorage))try{localStorage.removeItem(E.END_POINT_STORAGE_KEY),(n=localStorage.getItem(E.REMOTE_CONFIG_STORAGE_KEY))?Ea=E.CONFIG_SOURCE.CACHED:n=JSON.stringify(m)}catch(q){n=JSON.stringify(m);Sd=!0;var r={className:"fetchRemoteConfig - localstorage",error:q,configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,r)},0);ha.warn("Issue while fetching data from local storage")}else n=JSON.stringify(m);
try{g=JSON.parse(n)}catch(q){Sd=!0;var k={className:"fetchRemoteConfig - parsing cached data",error:q,configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,k)},0);ha.warn("Issue while parsing storedConvivaRemoteConfig")}m=(new Oh).setBase64(null===g||void 0===g?void 0:g.base64).setCacheRefreshInterval(null===g||void 0===g?void 0:g.cacheRefreshInterval).setLifecycleAutotracking(null===g||void 0===g?void 0:g.lifecycleAutotracking).setExceptionAutotracking(null===
g||void 0===g?void 0:g.exceptionAutotracking).setEnablePeriodicHeartbeat(null===g||void 0===g?void 0:g.enablePeriodicHeartbeat).setPeriodicHeartbeatInterval(null===g||void 0===g?void 0:g.periodicHeartbeatInterval).setEnc(null===g||void 0===g?void 0:g.enc,null===(d=null===(e=null===c||void 0===c?void 0:c.configs)||void 0===e?void 0:e.network)||void 0===d?void 0:d.encoding).setMaxLocalStorageQueueSize(null===g||void 0===g?void 0:g.maxLocalStorageQueueSize).setMaxGetBytes(null===g||void 0===g?void 0:
g.maxGetBytes).setBufferSize(null===g||void 0===g?void 0:g.bufferSize).setCustomEventTrackingConfiguration(null===g||void 0===g?void 0:g.customEventTrackingConfiguration).setSoftNavigationTrackingConfiguration(null===g||void 0===g?void 0:g.softNavigationTrackingConfiguration).setEndPoint(null===g||void 0===g?void 0:g.endpoint,c.gatewayUrl,c.proxyGatewayUrl).setNetworkRequestTrackingConfiguration(null===g||void 0===g?void 0:g.networkRequestTrackingConfiguration,!1).setMetaTagsTrackingConfiguration(null===
g||void 0===g?void 0:g.metaTagsTrackingConfiguration).setTraceparentconfig(null===g||void 0===g?void 0:g.traceparentconfig).setBaggageConfiguration(null===g||void 0===g?void 0:g.baggageConfiguration).setMend(null===g||void 0===g?void 0:g.mend,null===(h=null===(f=null===c||void 0===c?void 0:c.configs)||void 0===f?void 0:f.network)||void 0===h?void 0:h.mergeEndpoint).setPerformanceContextConfig(null===g||void 0===g?void 0:g.performanceContextConfig).setConfigurationVersion(null===g||void 0===g?void 0:
g.configurationVersion).setCatRcLastUpdatedTs(null===g||void 0===g?void 0:g.catRcLastUpdatedTs).setEmitterConfiguration(null===g||void 0===g?void 0:g.emitterConfiguration).setcontrolIngestConfig(null===g||void 0===g?void 0:g.controlIngestConfig).setApplicationContext(null===g||void 0===g?void 0:g.applicationContext).setDi(null===g||void 0===g?void 0:g.di).setClickcc(null===g||void 0===g?void 0:g.clickcc).setCollectionRateLimit(null===g||void 0===g?void 0:g.collectionRateLimit).setPageUrlTrackingConfig(null===
g||void 0===g?void 0:g.pageUrlTrackingConfig).setSessionReplayConfiguration(null===g||void 0===g?void 0:g.sessionReplayConfiguration).setEvtStreamTrackingConfiguration(null===g||void 0===g?void 0:g.evtStreamTrackingConfiguration).setValueProbes(null===g||void 0===g?void 0:g.valueProbes).setWebVitals(null===g||void 0===g?void 0:g.webVitals).build();e="Cached Config Applied";Ea===E.CONFIG_SOURCE.DEFAULT&&(e="Default Config Applied");Ga=(new Date).getTime();var p={message:e,className:"browserTrackerCore",
configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,p)},0);a=a.split("js-")[1].split(" ")[0];var t=(c.proxyGatewayUrl?c.proxyGatewayUrl+"/js/":E.REMOTE_CONFIG_URL_PREFIX)+c.convivaCustomerKey+"/"+a+E.REMOTE_CONFIG_FILE_NAME;window.XMLHttpRequest&&(cb=new XMLHttpRequest,cb.onreadystatechange=function(){var q;try{if(4==cb.readyState)if(vc=!1,200==cb.status){var w={message:"Remote config request is successful - ".concat("number"==typeof cb.status?
cb.status:""),className:"configtimerCallback - onreadystatechange",configAppliedSrc:Ea,configAppliedTime:Ga};Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,w);wc=0;var v=JSON.parse(cb.response);w=za;if((null===v||void 0===v?void 0:v.configurationBundle[0].namespace)!==b)Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,{message:"Remote Config not Applied due to a missing namespace",className:"updateRemoteConfig",configAppliedSrc:Ea,configAppliedTime:Ga});else{if(!v.hasOwnProperty("configurationVersion")||
(null===(q=w.getConfig())||void 0===q?void 0:q.configurationVersion)===(null===v||void 0===v?void 0:v.configurationVersion)){var u=localStorage.getItem(E.REMOTE_CONFIG_STORAGE_KEY);if(u){u=JSON.parse(u);u.catRcLastUpdatedTs=(new Date).getTime();window.localStorage&&(localStorage.removeItem(E.REMOTE_CONFIG_STORAGE_KEY),localStorage.setItem(E.REMOTE_CONFIG_STORAGE_KEY,JSON.stringify(u)));Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,{message:"Remote Config not Applied as same version is fetched",
className:"updateRemoteConfig",configAppliedSrc:Ea,configAppliedTime:Ga});return}}m.catRcLastUpdatedTs=(new Date).getTime();var A=v.cri||v.cacheRefreshInterval||ja.cacheRefreshInterval;A=1>A?ja.cacheRefreshInterval:Ic(A)?A:ja.cacheRefreshInterval;m.cacheRefreshInterval!=A&&(m.cacheRefreshInterval=A,Ph(m.cacheRefreshInterval,m.catRcLastUpdatedTs,c,t,E.RC_FETCH_MODE.DO_NOT_FETCH_UPDATE_TIMER));if(pk(v,m.catRcLastUpdatedTs,c)){var F=new Event("RemoteConfigUpdateApplied");(null===window||void 0===window?
0:window.dispatchEvent)&&window.dispatchEvent(F)}}}else try{2>wc&&window.setTimeout(function(){(null===c||void 0===c?0:c.trackerConfigUrl)?xc(null===c||void 0===c?void 0:c.trackerConfigUrl,!0):xc(t,!0)},5E3*(wc+1));var B={message:"Remote config request is not successful - ".concat("number"==typeof cb.status?cb.status:""),className:"configtimerCallback - onreadystatechange",configAppliedSrc:Ea,configAppliedTime:Ga};Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,B);2<=wc&&Ha(za,null===R||void 0===
R?void 0:R.getSamplingMode,{message:"Remote config is not applied since failed to download remote config after 3 tries",className:"configtimerCallback - onreadystatechange",configAppliedSrc:Ea,configAppliedTime:Ga})}catch(G){}}catch(G){vc=!1,console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(G)),Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,{className:"configtimerCallback - onreadystatechange",error:G,configAppliedSrc:Ea,configAppliedTime:Ga})}},Ph(m.cacheRefreshInterval,
m.catRcLastUpdatedTs,c,t,"undefined"!=typeof Sd&&!0===Sd?E.RC_FETCH_MODE.IMMEDIATE_FETCH:E.RC_FETCH_MODE.UPDATE_TIMER_WITH_DIFF));return{convivaRemoteTrackerConfig:m}},Ph=function(a,b,c,e,d){var f=c.trackerConfigUrl?c.trackerConfigUrl:e;if("number"===typeof Wc){window.clearInterval(Wc);var h={message:"Cancelling remote config timer",className:"updateRemoteConfig",extraData:{mode:d},configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,
h)},0)}var g=function(){var k={message:"Starting remote config timer with delay of ".concat(60*a," seconds"),className:"updateRemoteConfig",configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,k)},0);Wc=window.setInterval(xc,6E4*a,f)};try{var m=b?((new Date).getTime()-b)/6E4:a;c=a-m;e=3*a/100;if("string"==typeof d&&d===E.RC_FETCH_MODE.DO_NOT_FETCH_UPDATE_TIMER)g();else if("string"==typeof d&&d===E.RC_FETCH_MODE.UPDATE_TIMER_WITH_DIFF&&
0<b&&c>e){window.setTimeout(function(){xc(f);g()},6E4*c);var n={message:"Starting remote config timer with delay of ".concat(60*c," seconds"),className:"updateRemoteConfig",extraData:{mode:d},configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,n)},0)}else xc(f),g()}catch(k){console.warn("Conviva App Tracker:: Error in setting cacheRefreshIntervalTimer",k);xc(f);g();var r={className:"cacheRefreshIntervalTimer",error:k,configAppliedSrc:Ea,
configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,r)},0)}},xc=function(a,b){try{if("boolean"===typeof vc&&!1===vc){b?wc++:wc=0;cb.timeout=3E4;cb.open("GET",a,!0);vc=!0;var c={message:"Remote config fetch attempt",className:"updateRemoteConfig",configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,c)},0);cb.send()}}catch(d){vc=!1;ha.warn("Conviva App Tracker:: Error in configtimerCallback ".concat(d));
var e={className:"configtimerCallback",error:d,configAppliedSrc:Ea,configAppliedTime:Ga};setTimeout(function(){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,e)},0)}},pk=function(a,b,c){var e,d,f,h,g,m,n,r,k,p,t,q,w,v,u,A,F,B,G,D,z,J,K,Y,V,Z,M,C,X,H,fa,ia,ta,qa,da,ya=za;try{var O=(new Oh).setBase64(a.configurationBundle[0].trackerConfiguration.base64Encoding).setCacheRefreshInterval(a.cri||a.cacheRefreshInterval).setLifecycleAutotracking(null===(d=null===(e=a.configurationBundle[0])||void 0===
e?void 0:e.trackerConfiguration)||void 0===d?void 0:d.lifecycleAutotracking).setExceptionAutotracking(null===(h=null===(f=a.configurationBundle[0])||void 0===f?void 0:f.trackerConfiguration)||void 0===h?void 0:h.exceptionAutotracking).setEnablePeriodicHeartbeat(null===(m=null===(g=a.configurationBundle[0])||void 0===g?void 0:g.trackerConfiguration)||void 0===m?void 0:m.enablePeriodicHeartbeat).setPeriodicHeartbeatInterval(null===(r=null===(n=a.configurationBundle[0])||void 0===n?void 0:n.trackerConfiguration)||
void 0===r?void 0:r.periodicHeartbeatInterval).setEnc(null===(p=null===(k=a.configurationBundle[0])||void 0===k?void 0:k.networkConfiguration)||void 0===p?void 0:p.enc,null===(q=null===(t=null===c||void 0===c?void 0:c.configs)||void 0===t?void 0:t.network)||void 0===q?void 0:q.encoding).setMaxLocalStorageQueueSize(null===(v=null===(w=a.configurationBundle[0])||void 0===w?void 0:w.networkConfiguration)||void 0===v?void 0:v.maxLocalStorageQueueSize).setMaxGetBytes(null===(A=null===(u=a.configurationBundle[0])||
void 0===u?void 0:u.networkConfiguration)||void 0===A?void 0:A.maxGetBytes).setBufferSize(null===(B=null===(F=a.configurationBundle[0])||void 0===F?void 0:F.networkConfiguration)||void 0===B?void 0:B.bufferSize).setCustomEventTrackingConfiguration(null===(G=a.configurationBundle[0])||void 0===G?void 0:G.customEventTrackingConfiguration).setSoftNavigationTrackingConfiguration(null===(D=a.configurationBundle[0])||void 0===D?void 0:D.softNavigationTrackingConfiguration).setEndPoint(null===(J=null===
(z=a.configurationBundle[0])||void 0===z?void 0:z.networkConfiguration)||void 0===J?void 0:J.endpoint,c.gatewayUrl,c.proxyGatewayUrl).setNetworkRequestTrackingConfiguration(null===(K=a.configurationBundle[0])||void 0===K?void 0:K.networkRequestTrackingConfiguration,!0,null===(V=null===(Y=a.configurationBundle[0])||void 0===Y?void 0:Y.networkConfiguration)||void 0===V?void 0:V.endpoint).setMetaTagsTrackingConfiguration(null===(Z=a.configurationBundle[0])||void 0===Z?void 0:Z.metaTagsTrackingConfiguration).setTraceparentconfig(null===
(M=a.configurationBundle[0])||void 0===M?void 0:M.traceparentconfig).setBaggageConfiguration(null===(C=a.configurationBundle[0])||void 0===C?void 0:C.baggageConfiguration).setMend(null===(H=null===(X=a.configurationBundle[0])||void 0===X?void 0:X.networkConfiguration)||void 0===H?void 0:H.mend,null===(ia=null===(fa=null===c||void 0===c?void 0:c.configs)||void 0===fa?void 0:fa.network)||void 0===ia?void 0:ia.mergeEndpoint).setPerformanceContextConfig(null===(qa=null===(ta=a.configurationBundle[0])||
void 0===ta?void 0:ta.trackerConfiguration)||void 0===qa?void 0:qa.perfCx).setConfigurationVersion(a.configurationVersion).setCatRcLastUpdatedTs(b).setEmitterConfiguration(a.configurationBundle[0].emitterConfiguration).setcontrolIngestConfig(a["ctrl-ingst"]).setApplicationContext(a.configurationBundle[0].trackerConfiguration.applicationContext).setDi(a.configurationBundle[0].di).setClickcc(a.configurationBundle[0].clickcc).setCollectionRateLimit(a.configurationBundle[0].collectionRateLimit).setPageUrlTrackingConfig(a.configurationBundle[0].pageUrlTrackingConfig).setSessionReplayConfiguration(a.configurationBundle[0].sessionReplayConfiguration).setEvtStreamTrackingConfiguration(a.configurationBundle[0].evtStreamTrackingConfiguration).setValueProbes(a.configurationBundle[0].valueProbes).setWebVitals(a.configurationBundle[0].webVitals).build();
Ea=E.CONFIG_SOURCE.REMOTE;Ga=(new Date).getTime();null===ya||void 0===ya?void 0:ya.setConfig(O);a={message:"Remote Config Applied",className:"updateRemoteConfig - tracker",configAppliedSrc:Ea,configAppliedTime:Ga};Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,a);null===R||void 0===R?void 0:R.setCollectorUrl(null===(da=null===ya||void 0===ya?void 0:ya.getConfig())||void 0===da?void 0:da.endpoint,c.convivaCustomerKey);try{window.localStorage&&(localStorage.removeItem(E.REMOTE_CONFIG_STORAGE_KEY),
localStorage.setItem(E.REMOTE_CONFIG_STORAGE_KEY,JSON.stringify(O)))}catch(ra){Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,{className:"updateRemoteConfig - localstorage",error:ra,configAppliedSrc:Ea,configAppliedTime:Ga}),console.warn("Conviva: Error while saving remote-config to localstorage",ra)}}catch(ra){return a={className:"updateRemoteConfig - tracker",error:ra,configAppliedSrc:Ea,configAppliedTime:Ga},Ha(za,null===R||void 0===R?void 0:R.getSamplingMode,a),console.warn("Conviva: Error while updating remote-config",
ra),!1}return!0},Cf={idleMs:3E4,maxEvents:1E4,bufferMaxBytes:1E6},yg=function(){function a(b,c,e){var d;this.originalFetch=null===(d=null===window||void 0===window?void 0:window.fetch)||void 0===d?void 0:d.bind(window);this.sseCountStates=new Map;this.inflightRequests=0;this.core=za;this.trackerMethods=b;this.trackerConfiguration=c;this.getSamplingMode=e;this.handleResponse=this.handleResponse.bind(this);this.addTraceparentHeader=this.addTraceparentHeader.bind(this);this.addBaggageHeader=this.addBaggageHeader.bind(this)}
a.prototype.cleanupNetworkRequestHandler=function(){a.instance=null};a.getInstance=function(b,c,e){a.instance||(a.instance=new a(b,c,e));return a.instance};a.prototype.initiateNetworkRequestTracking=function(){try{this.decorateXMLHttpRequest(),this.decorateFetch(),this.decorateWebSocket(),this.decorateEventSource()}catch(b){console.warn("Conviva App Tracker:: Unable to track network request ".concat(b))}};a.prototype.decorateXMLHttpRequest=function(){var b=this,c=XMLHttpRequest.prototype.open,e=XMLHttpRequest.prototype.send,
d=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];try{this._conviva={method:f[0],url:b.normalizeUrl(f[1]),headers:{}}}catch(g){console.warn("Conviva App Tracker:: Unable to normalizeUrl while open ".concat(g))}return c.apply(this,f)};XMLHttpRequest.prototype.setRequestHeader=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];try{this._conviva&&(this._conviva.headers[f[0]]=f[1])}catch(g){console.warn("Conviva App Tracker:: while setRequestHeader ".concat(g))}return d.apply(this,
f)};XMLHttpRequest.prototype.send=function(){for(var f=this,h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];try{var m=this._conviva;if(!m)return;var n=b.addTraceparentHeader(this,m.url,m.headers),r=b.addBaggageHeader(this,m.url,m.headers,m.method,h[0]),k=b.createRequestDetails(m.method,m.url,m.headers,h[0],n,r);g=Ia;b.shouldTrackForSoftNavigation(k.url||"")&&b.incrementInflightRequests();this.addEventListener("load",function(){b.shouldTrackForSoftNavigation(k.url||"")&&b.decrementInflightRequests();
b.handleResponse(f,k,"load")},{signal:g});this.addEventListener("error",function(){b.shouldTrackForSoftNavigation(k.url||"")&&b.decrementInflightRequests();b.handleResponse(f,k,"error")},{signal:g});this.addEventListener("abort",function(){b.shouldTrackForSoftNavigation(k.url||"")&&b.decrementInflightRequests();b.handleResponse(f,k,"abort")},{signal:g});this.addEventListener("timeout",function(){b.shouldTrackForSoftNavigation(k.url||"")&&b.decrementInflightRequests();b.handleResponse(f,k,"timeout")},
{signal:g})}catch(p){console.warn("Conviva App Tracker:: Unable to track network request while send ".concat(p))}return e.apply(this,h)}};a.prototype.decorateFetch=function(){window.fetch=this.interceptFetch.bind(this)};a.prototype.interceptFetch=function(b,c){var e,d,f,h,g,m,n,r,k;return Ac(this,void 0,void 0,function(){var p,t,q,w,v,u,A,F,B,G,D,z,J,K,Y,V,Z,M,C,X,H,fa,ia,ta,qa,da=this;return Bc(this,function(ya){switch(ya.label){case 0:w=q=null;u=this;if(!(b instanceof Request))return[3,5];t=null===
b||void 0===b?void 0:b.clone();try{A=!1,null===(e=null===t||void 0===t?void 0:t.headers)||void 0===e?void 0:e.forEach(function(O,ra){E.TRACEPARENT_HEADER_KEY===ra&&(A=!0)}),A||(q=this.generateTraceparentHeader(t.url),null!==q&&""!==q&&b.headers.set(E.TRACEPARENT_HEADER_KEY,q)),F=!1,null===(d=null===t||void 0===t?void 0:t.headers)||void 0===d?void 0:d.forEach(function(O,ra){E.BAGGAGE_HEADER_KEY===ra&&(F=!0)}),F||(B={},t.headers.forEach(function(O,ra){B[ra]=O}),G={method:t.method,url:t.url,headers:B,
body:void 0},w=this.generateBaggageHeader(t.url,G),null!==w&&""!==w&&b.headers.set(E.BAGGAGE_HEADER_KEY,w))}catch(O){console.warn("ConvivaAppTracker: Issue while adding traceparent header",O)}p=this.originalFetch(b);ya.label=1;case 1:return ya.trys.push([1,3,,4]),[4,t.text()];case 2:return v=ya.sent(),[3,4];case 3:return ya.sent(),[3,4];case 4:return[3,6];case 5:try{if(c&&c.headers){if(D=u.core.getConfig(),(null===(f=null===D||void 0===D?void 0:D.traceparentconfig)||void 0===f?0:f.enabled)||(null===
(h=null===D||void 0===D?void 0:D.baggageConfiguration)||void 0===h?0:h.enabled))J=(z=c.headers instanceof Headers)?new Headers(c.headers):c.headers,K=!1,z?J.forEach(function(O,ra){E.TRACEPARENT_HEADER_KEY===ra&&(K=!0)}):Object.keys(J).forEach(function(O){E.TRACEPARENT_HEADER_KEY===O&&(K=!0)}),K||(q=this.generateTraceparentHeader(b),null!==q&&""!==q&&(z?J.set(E.TRACEPARENT_HEADER_KEY,q):J[E.TRACEPARENT_HEADER_KEY]=q)),Y=!1,z?J.forEach(function(O,ra){E.BAGGAGE_HEADER_KEY===ra&&(Y=!0)}):Object.keys(J).forEach(function(O){E.BAGGAGE_HEADER_KEY===
O&&(Y=!0)}),Y||(V={},z?J.forEach(function(O,ra){V[ra]=O}):V=J,G={method:(null===c||void 0===c?void 0:c.method)||"GET",url:b,headers:V,body:null===c||void 0===c?void 0:c.body},w=this.generateBaggageHeader(b,G),null!==w&&""!==w&&(z?J.set(E.BAGGAGE_HEADER_KEY,w):J[E.BAGGAGE_HEADER_KEY]=w)),c.headers=J}else if(D=u.core.getConfig(),(null===(g=null===D||void 0===D?void 0:D.traceparentconfig)||void 0===g?0:g.enabled)||(null===(m=null===D||void 0===D?void 0:D.baggageConfiguration)||void 0===m?0:m.enabled))J=
new Headers,q=this.generateTraceparentHeader(b),null!==q&&""!==q&&J.set(E.TRACEPARENT_HEADER_KEY,q),G={method:(null===c||void 0===c?void 0:c.method)||"GET",url:b,headers:{},body:null===c||void 0===c?void 0:c.body},w=this.generateBaggageHeader(b,G),null!==w&&""!==w&&J.set(E.BAGGAGE_HEADER_KEY,w),c||(c={}),c.headers=J}catch(O){console.warn("ConvivaAppTracker: Issue while adding traceparent header",O)}p=this.originalFetch(b,c);t=(new Request(b,c)).clone();v=null===c||void 0===c?void 0:c.body;ya.label=
6;case 6:try{Z=void 0;try{Z=yf(t.headers)}catch(O){}M={method:t.method,url:decodeURIComponent(t.url),headers:Z,body:v,requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};this.shouldTrackForSoftNavigation(t.url)&&this.incrementInflightRequests();this.getSamplingMode()!==E.SAMPLING_MODES.NONE&&(C=this.core.getConfig().networkRequestTrackingConfiguration,X=this.core.getConfig().evtStreamTrackingConfiguration,
H=C.blocklist,fa=null===(k=null===(r=null===(n=this.trackerConfiguration)||void 0===n?void 0:n.configs)||void 0===r?void 0:r.networkRequestTracking)||void 0===k?void 0:k.safelist,ia=C.collect,ta=C.block,qa=C.eventCollectionMode===E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.AUTO||C.eventCollectionMode===E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH,null!==q&&""!==q&&(M[E.TRACEPARENT_HEADER_KEY]=q),null!==w&&""!==w&&(M[E.BAGGAGE_HEADER_KEY]=w),p.then(function(O){var ra,L,W;da.shouldTrackForSoftNavigation(t.url)&&
da.decrementInflightRequests();try{var ca=O.headers.get("content-type");if(X&&X.enabled&&ca&&ca.includes("text/event-stream")){var aa=O.clone().body;if(aa)qg(aa,t.url,/\r?\n\r?\n/,Ti,function(oa){da.processStreamEvent(oa,t.url,"conviva_sse_message")},{idleMs:X.idleMs,maxEvents:X.maxEvents,bufferMaxBytes:X.bufferMaxBytes},function(){da.cleanupSSECountState(t.url)})["catch"](function(){});else console.warn("Conviva App Tracker:: Response body is null, cannot read as stream")}else if(Vi(t.url,da.trackerConfiguration)){if(jc(ia,
ta,H,fa,O,M)){var ea=void 0;try{ea=yf(O.headers)}catch(oa){}var Ba={status:null===O||void 0===O?void 0:O.status,statusText:""!==(null===O||void 0===O?void 0:O.statusText)?null===O||void 0===O?void 0:O.statusText:void 0,headers:ea,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};da.trackerMethods.trackNetworkRequest({requestDetails:M,responseDetails:Ba})}(aa=
O.clone().body)?(da.resetStreamCountState(t.url),qg(aa,t.url,null!==(W=null===(L=null===(ra=da.trackerConfiguration.configs)||void 0===ra?void 0:ra.plainTextChunkTracking)||void 0===L?void 0:L.delimiter)&&void 0!==W?W:/\r?\n/,Ui,function(oa){da.processStreamEvent(oa,t.url,"conviva_chunk_message")},{idleMs:X.idleMs,maxEvents:X.maxEvents,bufferMaxBytes:X.bufferMaxBytes},function(){da.cleanupSSECountState(t.url)})["catch"](function(){})):console.warn("Conviva App Tracker:: Response body is null, cannot read as stream")}else if(C&&
C.enabled&&qa){var Pa=jc(ia,ta,H,fa,O,M);if(Pa){ea=void 0;try{ea=yf(O.headers)}catch(oa){}var Fa={status:null===O||void 0===O?void 0:O.status,statusText:""!==(null===O||void 0===O?void 0:O.statusText)?null===O||void 0===O?void 0:O.statusText:void 0,headers:ea,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};O.clone().json().then(function(oa){Fa.body=
oa;oa=da.core.getConfig().baggageConfiguration;(null===oa||void 0===oa?0:oa.enabled)&&td(M,Fa,oa,da.core);da.trackerMethods.trackNetworkRequest({requestDetails:M,responseDetails:Fa})})["catch"](function(){var oa=da.core.getConfig().baggageConfiguration;(null===oa||void 0===oa?0:oa.enabled)&&td(M,Fa,oa,da.core);da.trackerMethods.trackNetworkRequest({requestDetails:M,responseDetails:Fa})})}}}catch(oa){Pa=jc(ia,ta,H,fa,O,M),C&&C.enabled&&Pa&&qa&&(Ba={statusText:oa.toString(),responseTimestamp:null===
Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},da.trackerMethods.trackNetworkRequest({requestDetails:M,responseDetails:Ba}))}})["catch"](function(O){da.shouldTrackForSoftNavigation(t.url)&&da.decrementInflightRequests();var ra=jc(ia,ta,H,fa,null,M);C&&C.enabled&&ra&&qa&&(O={statusText:O.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===
performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())},da.trackerMethods.trackNetworkRequest({requestDetails:M,responseDetails:O}))}))}catch(O){console.warn("Conviva App Tracker:: Unable to track network request while fetch interceptRequest ".concat(O))}return[2,p]}})})};a.prototype.handleResponse=function(b,c,e){var d,f,h,g;try{if(this.getSamplingMode()!==E.SAMPLING_MODES.NONE){var m=null===(d=this.core)||void 0===d?void 0:d.getConfig().networkRequestTrackingConfiguration,
n=m.blocklist,r=null===(g=null===(h=null===(f=this.trackerConfiguration)||void 0===f?void 0:f.configs)||void 0===h?void 0:h.networkRequestTracking)||void 0===g?void 0:g.safelist,k=jc(m.collect,m.block,n,r,b,c),p=m.eventCollectionMode===E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.AUTO||m.eventCollectionMode===E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH;if(m&&m.enabled&&p&&k){var t={status:b.status,statusText:b.statusText||("load"!==e?e:void 0),responseTimestamp:Date.now(),responseTime:performance.now()||
Date.now(),headers:nk(b.getAllResponseHeaders()),body:b.response},q=this.core.getConfig().baggageConfiguration;(null===q||void 0===q?0:q.enabled)&&td(c,t,q,this.core);this.trackerMethods.trackNetworkRequest({requestDetails:c,responseDetails:t})}}}catch(w){ha.warn("Conviva App Tracker:: Unable to track network request error while handleResponse ".concat(w))}};a.prototype.decorateWebSocket=function(){function b(h){e?e.has(h)||(e.add(h),c.addWebSocketEventListeners(h)):h.__convivaWsTag__||(h.__convivaWsTag__=
!0,c.addWebSocketEventListeners(h))}var c=this,e="undefined"!==typeof WeakSet?new WeakSet:null,d=WebSocket.prototype.send;WebSocket.prototype.send=function(h){try{c.handleWebSocketSend(h,this),b(this)}catch(g){ha.warn("Conviva WS tracking error:",g)}return d.apply(this,arguments)};var f=WebSocket;window.WebSocket=function(h,g){h=new f(h,g);b(h);return h};window.WebSocket.prototype=f.prototype;Object.assign(window.WebSocket,f)};a.prototype.decorateEventSource=function(){var b=this,c="undefined"!==
typeof WeakSet?new WeakSet:null,e=EventSource,d=e.prototype.close;window.EventSource=function(f,h){f=new e(f,h);c?c.has(f)||(c.add(f),b.addEventSourceEventListeners(f)):f.__convivaEventSourceTag__||(f.__convivaEventSourceTag__=!0,b.addEventSourceEventListeners(f));return f};e.prototype.close=function(){var f,h=null!==(f=null===this||void 0===this?void 0:this.url)&&void 0!==f?f:"unknown";b.handleEventSourceClose(h);return d.call(this)};window.EventSource.prototype=e.prototype;Object.setPrototypeOf(window.EventSource,
e)};a.prototype.addWebSocketEventListeners=function(b){var c=this,e=Ia;b.addEventListener("message",function(d){return c.handleWebSocketMessage(d)},{signal:e});b.addEventListener("open",function(d){return c.handleWebSocketOpen(d)},{signal:e});b.addEventListener("close",function(d){return c.handleWebSocketClose(d)},{signal:e});b.addEventListener("error",function(d){return c.handleWebSocketError(d)},{signal:e})};a.prototype.addEventSourceEventListeners=function(b){var c=this,e=Ia;b.addEventListener("message",
function(d){return c.handleEventSourceMessage(d)},{signal:e});b.addEventListener("open",function(d){return c.handleEventSourceOpen(d)},{signal:e});b.addEventListener("error",function(d){return c.handleEventSourceError(d)},{signal:e})};a.prototype.handleWebSocketOpen=function(b){try{var c={url:this.getWebSocketUrl(b.target),type:b.type,timestamp:Date.now()}}catch(e){c={data:b.data,url:b.target?this.getWebSocketUrl(b.target):void 0}}this.sendWebSocketEvent("open",c,{},!1)};a.prototype.handleWebSocketClose=
function(b){try{var c={url:this.getWebSocketUrl(b.target),type:b.type,code:b.code,reason:b.reason,wasClean:b.wasClean,timestamp:Date.now()}}catch(e){c={data:b.data,url:b.target?this.getWebSocketUrl(b.target):void 0}}this.sendWebSocketEvent("close",c,{},!1)};a.prototype.handleWebSocketMessage=function(b){var c,e,d=null===(c=this.core)||void 0===c?void 0:c.getConfig().evtStreamTrackingConfiguration;c=null!==(e=null===d||void 0===d?void 0:d.bufferMaxBytes)&&void 0!==e?e:1048576;try{if(b.data instanceof
ArrayBuffer){if(!(b.data.byteLength>c)){var f=(new TextDecoder("utf-8",{fatal:!1})).decode(b.data),h=[];rg(f).forEach(function(m){try{var n=JSON.parse(m.trim());h.push(n)}catch(r){h.push(m)}});var g={data:h,url:this.getWebSocketUrl(b.target)};this.sendWebSocketEvent("server",g,{},!0)}}else{e=void 0;try{e="string"===typeof b.data?JSON.parse(b.data):b.data,e.url=this.getWebSocketUrl(b.target)}catch(m){e={data:b.data,url:b.target?this.getWebSocketUrl(b.target):void 0}}this.sendWebSocketEvent("server",
e)}}catch(m){b={data:b.data,url:b.target?this.getWebSocketUrl(b.target):void 0},this.sendWebSocketEvent("server",b)}};a.prototype.handleWebSocketSend=function(b,c){var e,d,f,h,g=null===(e=this.core)||void 0===e?void 0:e.getConfig().evtStreamTrackingConfiguration;e=null!==(d=null===g||void 0===g?void 0:g.bufferMaxBytes)&&void 0!==d?d:1048576;try{if(b instanceof ArrayBuffer){if(!(b.byteLength>e)){var m=(new TextDecoder("utf-8",{fatal:!1})).decode(b),n=[];rg(m).forEach(function(t){try{if("string"===
typeof t){var q=JSON.parse(t);n.push(q)}else n.push(t)}catch(w){n.push(t)}});var r={url:this.getWebSocketUrl(c)};var k={data:n};this.sendWebSocketEvent("send",r,k,!0)}}else{var p="string"===typeof b?JSON.parse(b):b;r={url:this.getWebSocketUrl(c),type:null!==(h=null!==(f=p.type)&&void 0!==f?f:p.method)&&void 0!==h?h:void 0};this.sendWebSocketEvent("send",r,p)}}catch(t){r={url:this.getWebSocketUrl(c)},p={data:b},this.sendWebSocketEvent("send",r,p)}};a.prototype.handleWebSocketError=function(b){var c,
e,d,f,h,g,m;try{var n={url:this.getWebSocketUrl(b.target),type:b.type,timestamp:Date.now(),readyState:this.getWebSocketReadyState(b.target),errorMessage:b.message||"WebSocket error occurred",errorType:(null===(c=b.error)||void 0===c?void 0:c.name)||"WebSocketError",errorCode:null===(e=b.error)||void 0===e?void 0:e.code,errorDetails:null===(d=b.error)||void 0===d?void 0:d.message,networkType:(null===(f=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===f?void 0:f.type)||"unknown",
networkEffectiveType:(null===(h=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===h?void 0:h.effectiveType)||"unknown",networkDownlink:null===(g=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===g?void 0:g.downlink,networkRtt:null===(m=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===m?void 0:m.rtt,userAgent:null===navigator||void 0===navigator?void 0:navigator.userAgent}}catch(r){n={url:this.getWebSocketUrl(b.target),
type:"error",timestamp:Date.now(),error:"Failed to process WebSocket error event: ".concat(r instanceof Error?r.message:String(r)),originalEvent:b}}this.sendWebSocketEvent("error",n)};a.prototype.handleEventSourceOpen=function(b){try{var c={url:this.getEventSourceUrl(b.target),type:b.type}}catch(e){c={data:b.data,url:b.target?this.getEventSourceUrl(b.target):void 0,type:b.type}}this.sendEventSourceEvent(c)};a.prototype.handleEventSourceMessage=function(b){var c={};try{if("string"===typeof b.data)try{c.data=
JSON.parse(b.data)}catch(e){c.data=b.data}else c.data=b.data;c.url=this.getEventSourceUrl(b.target);c.type=b.type;c.id=b.lastEventId}catch(e){c={data:b.data,url:b.target?this.getEventSourceUrl(b.target):void 0,type:b.type,id:b.lastEventId}}this.sendEventSourceEvent(c)};a.prototype.handleEventSourceError=function(b){var c,e,d,f;try{var h={url:this.getEventSourceUrl(b.target),type:b.type,readyState:this.getEventSourceReadyState(b.target),errorMessage:b.message||"EventSource error occurred",errorType:"EventSourceError",
networkType:(null===(c=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===c?void 0:c.type)||"unknown",networkEffectiveType:(null===(e=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===e?void 0:e.effectiveType)||"unknown",networkDownlink:null===(d=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===d?void 0:d.downlink,networkRtt:null===(f=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===f?void 0:f.rtt,
userAgent:null===navigator||void 0===navigator?void 0:navigator.userAgent}}catch(g){h={url:this.getEventSourceUrl(b.target),type:"error",error:"Failed to process EventSource error event: ".concat(g instanceof Error?g.message:String(g)),originalEvent:b}}this.sendEventSourceEvent(h)};a.prototype.handleEventSourceClose=function(b){this.sendEventSourceEvent({url:b,type:"close"})};a.prototype.sendWebSocketEvent=function(b,c,e,d){var f;void 0===e&&(e={});void 0===d&&(d=!1);try{var h=null===(f=this.core.getConfig())||
void 0===f?void 0:f.evtStreamTrackingConfiguration;if(null!==h&&void 0!==h&&h.enabled){var g=this.getStreamCountState(c.url),m="send"===b?N(N(N({},c),e),{event:b}):N(N({},c),{event:b}),n=kc(h.collect,h.block,m,c.url);if(null!==n&&void 0!==n&&n.result){var r=null===n||void 0===n?void 0:n.matchedConfig;if(!0===(null===r||void 0===r?void 0:r.count)&&(g.tokenCount++,null===n||void 0===n||!n.shouldSend))return;var k={url:c.url,id:c.id,type:c.type,event:b};!0===(null===r||void 0===r?void 0:r.countReset)&&
(0<g.tokenCount&&(k.tokenCount=g.tokenCount),this.resetStreamCountState(c.url));b="send"===b?e:c;e={};if(h.richContentInference&&h.richContentInference.cond)try{e=pe(b,h.richContentInference,null===c||void 0===c?void 0:c.url)}catch(t){console.warn("Conviva App Tracker:: Error in rich content inference:",t)}if(h.conditionalCollectAttr&&0<h.conditionalCollectAttr.length){var p=le(b,h.conditionalCollectAttr,c.url,kc,null===h||void 0===h?void 0:h.maxQueryLength,d);0<Object.keys(p).length&&(k=N(N({},k),
p))}0<Object.keys(e).length&&(k.richContentInference=e);this.trackerMethods.trackSSEEvent({name:"conviva_ws_message",data:JSON.stringify(k)})}}}catch(t){}};a.prototype.sendEventSourceEvent=function(b){var c,e;try{var d=null===(c=this.core.getConfig())||void 0===c?void 0:c.evtStreamTrackingConfiguration;if(null!==d&&void 0!==d&&d.enabled){var f=this.getStreamCountState((null===b||void 0===b?void 0:b.url)||""),h=N({},b),g=kc(d.collect,d.block,h,(null===b||void 0===b?void 0:b.url)||"");if(null!==g&&
void 0!==g&&g.result){var m=null===g||void 0===g?void 0:g.matchedConfig;if(!0===(null===m||void 0===m?void 0:m.count)&&(f.tokenCount++,null===g||void 0===g||!g.shouldSend))return;var n={url:(null===(e=null===b||void 0===b?void 0:b.url)||void 0===e?void 0:e.split("?")[0])||"",id:null===b||void 0===b?void 0:b.id,type:null===b||void 0===b?void 0:b.type};!0===(null===m||void 0===m?void 0:m.countReset)&&(0<f.tokenCount&&(n.tokenCount=f.tokenCount),this.resetStreamCountState((null===b||void 0===b?void 0:
b.url)||""));if(d.conditionalCollectAttr&&0<d.conditionalCollectAttr.length){var r=le(b,d.conditionalCollectAttr,(null===b||void 0===b?void 0:b.url)||"",kc,null===d||void 0===d?void 0:d.maxQueryLength,!1);0<Object.keys(r).length&&(n=N(N({},n),r))}if(d.richContentInference&&d.richContentInference.cond)try{var k=pe(b,d.richContentInference,null===b||void 0===b?void 0:b.url);0<Object.keys(k).length&&(n.richContentInference=k)}catch(p){console.warn("Conviva App Tracker:: Error in rich content inference:",
p)}this.trackerMethods.trackSSEEvent({name:"conviva_sse_message",data:JSON.stringify(n)})}}}catch(p){}};a.prototype.getWebSocketUrl=function(b){try{if(b&&"object"===na(b)&&"url"in b)return b.url}catch(c){}};a.prototype.getWebSocketReadyState=function(b){try{if(b&&"object"===na(b)&&"readyState"in b)return b.readyState}catch(c){}};a.prototype.getEventSourceUrl=function(b){try{if(b&&"object"===na(b)&&"url"in b)return b.url}catch(c){}};a.prototype.getEventSourceReadyState=function(b){try{if(b&&"object"===
na(b)&&"readyState"in b)return b.readyState}catch(c){}};a.prototype.addTraceparentHeader=function(b,c,e){var d=null;E.TRACEPARENT_HEADER_KEY in e||(d=this.generateTraceparentHeader(c))&&b.setRequestHeader(E.TRACEPARENT_HEADER_KEY,d);return d};a.prototype.addBaggageHeader=function(b,c,e,d,f){(c=this.generateBaggageHeader(c,{method:d||"GET",url:c,headers:e,body:f}))&&b.setRequestHeader(E.BAGGAGE_HEADER_KEY,c);return c};a.prototype.createRequestDetails=function(b,c,e,d,f,h){b={method:b,url:c,headers:e,
body:d,requestTimestamp:Date.now(),requestTime:performance.now()||Date.now()};f&&(b[E.TRACEPARENT_HEADER_KEY]=f);h&&(b[E.BAGGAGE_HEADER_KEY]=h);return b};a.prototype.normalizeUrl=function(b){if(b instanceof URL)return b.href;try{if("undefined"!==typeof document){var c=URL;if(document.baseURI)var e=document.baseURI;else{var d=document.querySelector("base");e=d&&d.href?d.href:document.location.href}return(new c(b,e)).href}}catch(f){}return b};a.prototype.generateTraceparentHeader=function(b){var c,
e,d,f,h,g,m,n,r,k,p,t,q,w,v,u,A,F,B,G,D,z,J;try{if(this.core&&b){var K=this.core.getConfig(),Y=E.CONFIG_PREFERENCES.MERGE,V=[];if(null===(d=null===(e=null===(c=this.trackerConfiguration)||void 0===c?void 0:c.configs)||void 0===e?void 0:e.traceparentGeneration)||void 0===d?0:d.force)Y=E.CONFIG_PREFERENCES.APP;else if(null===(f=null===K||void 0===K?void 0:K.traceparentconfig)||void 0===f?0:f.pref)Y=K.traceparentconfig.pref;switch(Y){case E.CONFIG_PREFERENCES.APP:if(!1===(null===(m=null===(g=null===
(h=this.trackerConfiguration)||void 0===h?void 0:h.configs)||void 0===g?void 0:g.traceparentGeneration)||void 0===m?void 0:m.enabled))return"";V=(null===(k=null===(r=null===(n=this.trackerConfiguration)||void 0===n?void 0:n.configs)||void 0===r?void 0:r.traceparentGeneration)||void 0===k?void 0:k.targetUrl)||[];break;case E.CONFIG_PREFERENCES.REMOTE:if(!1===(null===(p=null===K||void 0===K?void 0:K.traceparentconfig)||void 0===p?void 0:p.enabled))return"";V=(null===(t=null===K||void 0===K?void 0:K.traceparentconfig)||
void 0===t?void 0:t.targetUrl)||[];break;default:if((null===K||void 0===K||!K.traceparentconfig)&&!1===(null===(v=null===(w=null===(q=this.trackerConfiguration)||void 0===q?void 0:q.configs)||void 0===w?void 0:w.traceparentGeneration)||void 0===v?void 0:v.enabled)||(null===(A=null===(u=this.trackerConfiguration)||void 0===u?void 0:u.configs)||void 0===A||!A.traceparentGeneration)&&!1===(null===(F=null===K||void 0===K?void 0:K.traceparentconfig)||void 0===F?void 0:F.enabled))return"";var Z=(null===
(D=null===(G=null===(B=this.trackerConfiguration)||void 0===B?void 0:B.configs)||void 0===G?void 0:G.traceparentGeneration)||void 0===D?void 0:D.targetUrl)||[],M=(null===(z=null===K||void 0===K?void 0:K.traceparentconfig)||void 0===z?void 0:z.targetUrl)||[],C=new Set(Ka(Ka([],M,!0),Z,!0));V=Array.from(C)}if(0<V.length&&(V.includes("*")||V.some(function(fa){return 0<(null===fa||void 0===fa?void 0:fa.length)&&b.toLowerCase().includes(null===fa||void 0===fa?void 0:fa.toLowerCase())}))&&(null===(J=null===
K||void 0===K?void 0:K.networkRequestTrackingConfiguration)||void 0===J?0:J.enabled)){var X=Array.from({length:32},function(){return Math.floor(16*Math.random()).toString(16)}).join(""),H=Array.from({length:16},function(){return Math.floor(16*Math.random()).toString(16)}).join("");return"00-".concat(X,"-").concat(H,"-00")}}}catch(fa){console.warn("Conviva App Tracker:: Unable to generate traceparent header ".concat(fa))}return""};a.prototype.generateBaggageHeader=function(b,c){var e,d;try{if(this.core&&
b){var f=this.core.getConfig();if(!1===(null===(e=null===f||void 0===f?void 0:f.baggageConfiguration)||void 0===e?void 0:e.enabled))return"";c&&(null===f||void 0===f?0:f.baggageConfiguration)&&td(c,{},f.baggageConfiguration,this.core);var h=(null===(d=null===f||void 0===f?void 0:f.baggageConfiguration)||void 0===d?void 0:d.targetUrl)||[];if(0<h.length&&h.some(function(n){return 0<(null===n||void 0===n?void 0:n.length)&&b.toLowerCase().includes(null===n||void 0===n?void 0:n.toLowerCase())})){c=[];
var g=this.getConvivaClientId();g&&c.push("c3.client_id=".concat(g));var m=this.core.getConversationId();m&&c.push("c3.convid=".concat(m));if(0<c.length)return c.join(", ")}}}catch(n){console.warn("Conviva App Tracker:: Unable to generate baggage header ".concat(n))}return""};a.prototype.getConvivaClientId=function(){try{if("undefined"!==typeof window&&(null===window||void 0===window?0:window.localStorage)){var b=window.localStorage.getItem("Conviva.sdkConfig"),c=JSON.parse(b||"{}");if(c&&"object"===
na(c)&&c.clId)return c.clId}}catch(e){console.warn("Conviva App Tracker:: Unable to get client ID ".concat(e))}return""};a.prototype.updateSSETrackingConfig=function(b){Cf=N(N({},Cf),b)};a.prototype.getSSETrackingConfig=function(){return N({},Cf)};a.prototype.processStreamEvent=function(b,c,e){var d,f;try{if("ping"!==b.event){var h=b.data;try{h=JSON.parse(b.data)}catch(q){}var g={url:c,id:b.id,event:null!==(d=b.event)&&void 0!==d?d:"message",data:h},m=null===(f=this.core)||void 0===f?void 0:f.getConfig().evtStreamTrackingConfiguration;
if(null!==m&&void 0!==m&&m.enabled){var n=this.getStreamCountState(c),r=kc(m.collect,m.block,g,c);if(null!==r&&void 0!==r&&r.result){var k=null===r||void 0===r?void 0:r.matchedConfig;if(!0===(null===k||void 0===k?void 0:k.count)&&(n.tokenCount++,null===r||void 0===r||!r.shouldSend))return;b={};if(m.richContentInference&&m.richContentInference.cond)try{b=pe(g,m.richContentInference,null===g||void 0===g?void 0:g.url)}catch(q){console.warn("Conviva App Tracker:: Error in rich content inference:",q)}var p=
{url:g.url,id:g.id,event:g.event};!0===(null===k||void 0===k?void 0:k.countReset)&&(0<n.tokenCount&&(p.tokenCount=n.tokenCount),this.resetStreamCountState(c));if(m.conditionalCollectAttr&&0<m.conditionalCollectAttr.length){var t=le(g,m.conditionalCollectAttr,c,kc,null===m||void 0===m?void 0:m.maxQueryLength,!1);0<Object.keys(t).length&&(p=N(N({},p),t))}0<Object.keys(b).length&&(p.richContentInference=b);this.trackerMethods.trackSSEEvent({name:e,data:JSON.stringify(p)})}}}}catch(q){}};a.prototype.getStreamCountState=
function(b){this.sseCountStates.has(b)||this.sseCountStates.set(b,{tokenCount:0});return this.sseCountStates.get(b)};a.prototype.resetStreamCountState=function(b){this.sseCountStates.set(b,{tokenCount:0})};a.prototype.cleanupSSECountState=function(b){this.sseCountStates["delete"](b)};a.prototype.getInflightRequests=function(){return this.inflightRequests};a.prototype.incrementInflightRequests=function(){this.inflightRequests++};a.prototype.decrementInflightRequests=function(){this.inflightRequests=
Math.max(0,this.inflightRequests-1)};a.prototype.shouldTrackForSoftNavigation=function(b){try{var c=(new URL(b)).hostname,e=this.core.getConfig(),d=null===e||void 0===e?void 0:e.softNavigationTrackingConfiguration;return null!==d&&void 0!==d&&d.domainBlocklist&&0!==d.domainBlocklist.length?!d.domainBlocklist.some(function(f){return c.endsWith(f)}):!0}catch(f){return!1}};return a}(),yj=function(a,b,c,e,d,f,h,g){var m,n,r,k,p=za,t=function(){var q=p.getConfig();return q.emitterConfiguration&&q.emitterConfiguration.batching?
q.emitterConfiguration.batching.enabled:!0};return Xi(a,b,"localStorage"==c||"cookieAndLocalStorage"==c,e.eventMethod,d,function(){var q,w=p.getConfig();return null!==(q=w.bufferSize?w.bufferSize:e.bufferSize)&&void 0!==q?q:20}(),function(){var q,w=p.getConfig();return null!==(q=w.maxGetBytes?w.maxGetBytes:e.maxGetBytes)&&void 0!==q?q:0},null!==(m=e.useStm)&&void 0!==m?m:!0,function(){var q,w=p.getConfig();return null!==(q=w.maxLocalStorageQueueSize?w.maxLocalStorageQueueSize:e.maxLocalStorageQueueSize)&&
void 0!==q?q:10},null!==(n=e.connectionTimeout)&&void 0!==n?n:3E4,f,null!==(r=e.customHeaders)&&void 0!==r?r:{},null!==(k=e.withCredentials)&&void 0!==k?k:!1,h,function(){var q,w,v,u=p.getConfig();return null!==(v=(null===u||void 0===u?0:u.enc)?u.enc:null===(w=null===(q=null===e||void 0===e?void 0:e.configs)||void 0===q?void 0:q.network)||void 0===w?void 0:w.encoding)&&void 0!==v?v:qb.GZIP},t,function(){var q,w,v=p.getConfig();return t()?"number"===typeof(null===(w=null===(q=v.emitterConfiguration)||
void 0===q?void 0:q.batching)||void 0===w?void 0:w.byteLimitPostInKB)?1E3*v.emitterConfiguration.batching.byteLimitPostInKB:25E4:4E4},function(){var q,w,v=null===(w=null===(q=p.getConfig().emitterConfiguration)||void 0===q?void 0:q.batching)||void 0===w?void 0:w.batchingIntervalInSec;return 1E3*("number"===typeof v?v:5)},g)},$i=function(){function a(b,c,e,d,f){void 0===b&&(b=20);void 0===c&&(c=2E3);void 0===e&&(e=1E3);this.eventMaxLimit=b;this.cooldown=c;this.windowStart=Date.now();this.circuitBreakerUntil=
this.eventCount=0;this.breakerPreviouslyOpen=!1;this.droppedCount=0;this.trackerCore=d;this.timeWindow=e;this.getSamplingMode=f}a.prototype.isAllowedToSendEvent=function(){var b=Date.now();if(b<this.circuitBreakerUntil)return this.droppedCount++,!1;this.breakerPreviouslyOpen&&(this.breakerPreviouslyOpen=!1,Ha(this.trackerCore,this.getSamplingMode,{message:"Application Error",className:"errorRateLimiter - isAllowedToSendEvent",extraData:{droppedCount:this.droppedCount},configAppliedSrc:Ea,configAppliedTime:Ga}),
this.droppedCount=0);b-this.windowStart<this.timeWindow?this.eventCount++:(this.windowStart=b,this.eventCount=1);return this.eventCount>this.eventMaxLimit?(this.circuitBreakerUntil=b+this.cooldown,this.breakerPreviouslyOpen=!0,this.droppedCount++,!1):!0};a.prototype.updateErrortRateLimitConfig=function(b,c,e){this.eventMaxLimit=b;this.cooldown=c;this.timeWindow=e};return a}(),Ja,hb,vg=function(a,b){return a.length>b?"".concat(a.slice(0,b-3),"..."):a},rb={idleWindowMs:600,requireLcp:!1,lcpTimeoutMs:3E3,
maxMeasurementMs:1E4,includeHashChanges:!1,domainAllowlist:[],domainBlocklist:["sdk.fra-01.braze.eu","tr.snapchat.com","analytics.google.com","ams.creativecdn.com","analytics.tiktok.com"]},Qb=N({},rb),Ca=null,te=null,ud=null,$a=null,Dg=!1,Eg=!1,vd=new Set,Nc=new Set,ue=0,ve=[],Qh=function(){function a(){Yd(this,a);nb(this,"t",void 0);nb(this,"o",0);nb(this,"i",[])}return Zd(a,[{key:"u",value:function(b){var c;if(!b.hadRecentInput){var e=this.i[0],d=this.i.at(-1);this.o&&e&&d&&1E3>b.startTime-d.startTime&&
5E3>b.startTime-e.startTime?(this.o+=b.value,this.i.push(b)):(this.o=b.value,this.i=[b]);null===(c=this.t)||void 0===c?void 0:c.call(this,b)}}}])}(),Td=function(){var a=performance.getEntriesByType("navigation")[0];if(a&&0<a.responseStart&&a.responseStart<performance.now())return a},Rh=function(a){if("loading"===document.readyState)return"loading";var b=Td();if(b){if(a<b.domInteractive)return"loading";if(0===b.domContentLoadedEventStart||a<b.domContentLoadedEventStart)return"dom-interactive";if(0===
b.domComplete||a<b.domComplete)return"dom-content-loaded"}return"complete"},Df=function(a){var b="";try{for(;9!==(null===(c=a)||void 0===c?void 0:c.nodeType);){var c,e=a;if(e.id)var d="#"+e.id;else{var f=e.nodeName,h=[1===e.nodeType?f.toLowerCase():f.toUpperCase().replace(/^#/,"")],g=h.concat,m=Array.from(e.classList).sort();var n=m;var r=Array.isArray(n)?Kb(n):void 0;var k;(k=r)||(k="undefined"!=typeof Symbol&&null!=m[Symbol.iterator]||null!=m["@@iterator"]?Array.from(m):void 0);var p;if(!(p=k||
Mf(m)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");d=g.call(h,p).join(".")}n=d;if(99<b.length+n.length)return b||n;if(b=b?n+">"+b:n,e.id)break;a=e.parentNode}}catch(t){}return b},ye=new WeakMap,Sh=-1,fd=function(a){addEventListener("pageshow",function(b){b.persisted&&(Sh=b.timeStamp,a(b))},!0)},Ib=function(a,b,c,e){var d,f;return function(h){var g;0<=b.value&&(h||e)&&((f=b.value-(null!==
(g=d)&&void 0!==g?g:0))||void 0===d)&&(d=b.value,b.delta=f,h=b.value,b.rating=h>c[1]?"poor":h>c[0]?"needs-improvement":"good",a(b))}},Ef=function(a){requestAnimationFrame(function(){return requestAnimationFrame(function(){return a()})})},Ud=function(){var a,b=Td();return null!==(a=null===b||void 0===b?void 0:b.activationStart)&&void 0!==a?a:0},Jb=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,c=Td(),e="navigate";0<=Sh?e="back-forward-cache":c&&(document.prerendering||
0<Ud()?e="prerender":document.wasDiscarded?e="restore":c.type&&(e=c.type.replace(/_/g,"-")));return{name:a,value:b,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1E12),navigationType:e}},yc=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(a)){var e=new PerformanceObserver(function(d){Promise.resolve().then(function(){b(d.getEntries())})});return e.observe(di({type:a,
buffered:!0},c)),e}}catch(d){}},Ff=function(a){var b=!1;return function(){b||(a(),b=!0)}},zc=-1,Th=new Set,Gf=function(a){if("hidden"===document.visibilityState){if("visibilitychange"===a.type){var b=Xa(Th),c;try{for(b.s();!(c=b.n()).done;){var e=c.value;e()}}catch(d){b.e(d)}finally{b.f()}}isFinite(zc)||(zc="visibilitychange"===a.type?a.timeStamp:0,removeEventListener("prerenderingchange",Gf,!0))}},Vd=function(){if(0>zc){var a,b=Ud(),c=document.prerendering?void 0:null===(a=globalThis.performance.getEntriesByType("visibility-state").filter(function(e){return"hidden"===
e.name&&e.startTime>b})[0])||void 0===a?void 0:a.startTime;zc=null!==c&&void 0!==c?c:"hidden"!==document.visibilityState||document.prerendering?1/0:0;addEventListener("visibilitychange",Gf,!0);addEventListener("prerenderingchange",Gf,!0);fd(function(){setTimeout(function(){zc="hidden"!==document.visibilityState||document.prerendering?1/0:0})})}return{get firstHiddenTime(){return zc},onHidden:function(e){Th.add(e)}}},Hf=function(a){document.prerendering?addEventListener("prerenderingchange",function(){return a()},
!0):a()},Uh=[1800,3E3],qk=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Hf(function(){var c=Vd(),e,d=Jb("FCP"),f=yc("paint",function(h){h=Xa(h);var g;try{for(h.s();!(g=h.n()).done;){var m=g.value;"first-contentful-paint"===m.name&&(f.disconnect(),m.startTime<c.firstHiddenTime&&(d.value=Math.max(m.startTime-Ud(),0),d.entries.push(m),e(!0)))}}catch(n){h.e(n)}finally{h.f()}});f&&(e=Ib(a,d,Uh,b.reportAllChanges),fd(function(h){d=Jb("FCP");e=Ib(a,d,Uh,b.reportAllChanges);
Ef(function(){d.value=performance.now()-h.timeStamp;e(!0)})}))})},Vh=[.1,.25],Wh=function(a){return a.find(function(b){var c;return 1===(null===(c=b.node)||void 0===c?void 0:c.nodeType)})||a[0]},Bj=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=mc(b=Object.assign({},b),Qh),e=new WeakMap;c.t=function(d){var f;if(null!==d&&void 0!==d&&null!==(f=d.sources)&&void 0!==f&&f.length&&(d=Wh(d.sources),f=null===d||void 0===d?void 0:d.node)){var h,g,m;f=null!==(h=null===(g=(m=
b).generateTarget)||void 0===g?void 0:g.call(m,f))&&void 0!==h?h:Df(f);e.set(d,f)}};(function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},h=Vd();qk(Ff(function(){var g,m=Jb("CLS",0),n=mc(f,Qh),r=function(p){p=Xa(p);var t;try{for(p.s();!(t=p.n()).done;)n.u(t.value)}catch(q){p.e(q)}finally{p.f()}n.o>m.value&&(m.value=n.o,m.entries=n.i,g())},k=yc("layout-shift",r);k&&(g=Ib(d,m,Vh,f.reportAllChanges),h.onHidden(function(){r(k.takeRecords());g(!0)}),fd(function(){n.o=0;m=Jb("CLS",
0);g=Ib(d,m,Vh,f.reportAllChanges);Ef(function(){return g()})}),setTimeout(g))}))})(function(d){d=function(f){var h={};if(f.entries.length){var g,m=f.entries.reduce(function(n,r){return n.value>r.value?n:r});null!==m&&void 0!==m&&null!==(g=m.sources)&&void 0!==g&&g.length&&(g=Wh(m.sources))&&(h={largestShiftTarget:e.get(g),largestShiftTime:m.startTime,largestShiftValue:m.value,largestShiftSource:g,largestShiftEntry:m,loadState:Rh(m.startTime)})}return Object.assign(f,{attribution:h})}(d);a(d)},b)},
Xh=0,If=1/0,Wd=0,rk=function(a){a=Xa(a);var b;try{for(a.s();!(b=a.n()).done;){var c=b.value;c.interactionId&&(If=Math.min(If,c.interactionId),Wd=Math.max(Wd,c.interactionId),Xh=Wd?(Wd-If)/7+1:0)}}catch(e){a.e(e)}finally{a.f()}},Jf,Yh=function(){var a;return Jf?Xh:null!==(a=performance.interactionCount)&&void 0!==a?a:0},Zh=0,$h=function(){function a(){Yd(this,a);nb(this,"l",[]);nb(this,"h",new Map);nb(this,"m",void 0);nb(this,"p",void 0)}return Zd(a,[{key:"v",value:function(){Zh=Yh();this.l.length=
0;this.h.clear()}},{key:"M",value:function(){var b=Math.min(this.l.length-1,Math.floor((Yh()-Zh)/50));return this.l[b]}},{key:"u",value:function(b){var c;if(null!==(c=this.m)&&void 0!==c&&c.call(this,b),b.interactionId||"first-input"===b.entryType){var e=this.l.at(-1);if((c=this.h.get(b.interactionId))||10>this.l.length||b.duration>e.T){var d;if(c?b.duration>c.T?(c.entries=[b],c.T=b.duration):b.duration===c.T&&b.startTime===c.entries[0].startTime&&c.entries.push(b):(c={id:b.interactionId,entries:[b],
T:b.duration},this.h.set(c.id,c),this.l.push(c)),this.l.sort(function(h,g){return g.T-h.T}),10<this.l.length){b=this.l.splice(10);b=Xa(b);var f;try{for(b.s();!(f=b.n()).done;)this.h.delete(f.value.id)}catch(h){b.e(h)}finally{b.f()}}null===(d=this.p)||void 0===d||d.call(this,c)}}}}])}(),Xd=function(a){var b=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?a():(a=Ff(a),addEventListener("visibilitychange",a,{once:!0,capture:!0}),b(function(){a();removeEventListener("visibilitychange",
a,{capture:!0})}))},ai=[200,500],Aj=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=mc(b=Object.assign({},b),$h),e=[],d=[],f=0,h=new WeakMap,g=new WeakMap,m=!1,n=function(){var p=c.l.map(function(D){return h.get(D.entries[0])}),t=d.length-50;d=d.filter(function(D,z){return z>=t||p.includes(D)});var q=new Set,w=Xa(d),v;try{for(w.s();!(v=w.n()).done;){var u=v.value,A=r(u.startTime,u.processingEnd),F=Xa(A),B;try{for(F.s();!(B=F.n()).done;)q.add(B.value)}catch(D){F.e(D)}finally{F.f()}}}catch(D){w.e(D)}finally{w.f()}var G=
e.length-1-50;e=e.filter(function(D,z){return D.startTime>f&&z>G||q.has(D)});m=!1};c.m=function(p){var t=p.startTime+p.duration;f=Math.max(f,p.processingEnd);for(var q=d.length-1;0<=q;q--){var w=d[q];if(8>=Math.abs(t-w.renderTime)){var v=w;v.startTime=Math.min(p.startTime,v.startTime);v.processingStart=Math.min(p.processingStart,v.processingStart);v.processingEnd=Math.max(p.processingEnd,v.processingEnd);v.entries.push(p);break}}v||(v={startTime:p.startTime,processingStart:p.processingStart,processingEnd:p.processingEnd,
renderTime:t,entries:[p]},d.push(v));(p.interactionId||"first-input"===p.entryType)&&h.set(p,v);m||(Xd(n),m=!0)};c.p=function(p){if(!g.get(p)){var t=p.entries[0].target;if(t){var q,w,v;t=null!==(q=null===(w=(v=b).generateTarget)||void 0===w?void 0:w.call(v,t))&&void 0!==q?q:Df(t);g.set(p,t)}}};var r=function(p,t){var q=[],w=Xa(e),v;try{for(w.s();!(v=w.n()).done;){var u=v.value;if(!(u.startTime+u.duration<p)){if(u.startTime>t)break;q.push(u)}}}catch(A){w.e(A)}finally{w.f()}return q},k=function(p){var t=
p.entries[0],q=h.get(t),w=t.processingStart,v=Math.max(t.startTime+t.duration,w),u=Math.min(q.processingEnd,v);q=q.entries.sort(function(B,G){return B.processingStart-G.processingStart});var A=r(t.startTime,u),F=c.h.get(t.interactionId);t={interactionTarget:g.get(F),interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:v,processedEventEntries:q,longAnimationFrameEntries:A,inputDelay:w-t.startTime,processingDuration:u-w,presentationDelay:v-u,loadState:Rh(t.startTime),
longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};(function(B,G){if(null!==(G=B.longAnimationFrameEntries)&&void 0!==G&&G.length){G=B.interactionTime;var D=B.inputDelay,z=B.processingDuration,J,K,Y=0,V=0,Z=0,M=0,C=Xa(B.longAnimationFrameEntries),X;try{for(C.s();!(X=C.n()).done;){var H=X.value;V=V+H.startTime+H.duration-H.styleAndLayoutStart;var fa=Xa(H.scripts),ia;try{for(fa.s();!(ia=fa.n()).done;){var ta=
ia.value,qa=ta.startTime+ta.duration;if(!(qa<G)){var da=qa-Math.max(G,ta.startTime),ya=ta.duration?da/ta.duration*ta.forcedStyleAndLayoutDuration:0;Y+=da-ya;V+=ya;da>M&&(K=ta.startTime<G+D?"input-delay":ta.startTime>=G+D+z?"presentation-delay":"processing-duration",J=ta,M=da)}}}catch(O){fa.e(O)}finally{fa.f()}}}catch(O){C.e(O)}finally{C.f()}X=(X=B.longAnimationFrameEntries.at(-1))?X.startTime+X.duration:0;X>=G+D+z&&(Z=B.nextPaintTime-X);J&&K&&(B.longestScript={entry:J,subpart:K,intersectingDuration:M});
B.totalScriptDuration=Y;B.totalStyleAndLayoutDuration=V;B.totalPaintDuration=Z;B.totalUnattributedDuration=B.nextPaintTime-G-Y-V-Z}})(t);return Object.assign(p,{attribution:t})};yc("long-animation-frame",function(p){e=e.concat(p);m||(Xd(n),m=!0)});(function(p){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype){var q=Vd();Hf(function(){var w;"interactionCount"in performance||Jf||(Jf=yc("event",rk,
{type:"event",buffered:!0,durationThreshold:0}));var v=Jb("INP"),u=mc(t,$h),A=function(G){Xd(function(){var D=Xa(G),z;try{for(D.s();!(z=D.n()).done;)u.u(z.value)}catch(J){D.e(J)}finally{D.f()}(D=u.M())&&D.T!==v.value&&(v.value=D.T,v.entries=D.entries,B())})},F=yc("event",A,{durationThreshold:null!==(w=t.durationThreshold)&&void 0!==w?w:40});var B=Ib(p,v,ai,t.reportAllChanges);F&&(F.observe({type:"first-input",buffered:!0}),q.onHidden(function(){A(F.takeRecords());B(!0)}),fd(function(){u.v();v=Jb("INP");
B=Ib(p,v,ai,t.reportAllChanges)}))})}})(function(p){p=k(p);a(p)},b)},bi=function(){function a(){Yd(this,a);nb(this,"m",void 0)}return Zd(a,[{key:"u",value:function(b){var c;null===(c=this.m)||void 0===c||c.call(this,b)}}])}(),ci=[2500,4E3],zj=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=mc(b=Object.assign({},b),bi),e=new WeakMap;c.m=function(d){var f=d.element;if(f){var h,g,m;f=null!==(h=null===(g=(m=b).generateTarget)||void 0===g?void 0:g.call(m,f))&&void 0!==h?h:
Df(f);e.set(d,f)}};(function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Hf(function(){var h=Vd(),g=Jb("LCP"),m=mc(f,bi),n=function(v){f.reportAllChanges||(v=v.slice(-1));v=Xa(v);var u;try{for(v.s();!(u=v.n()).done;){var A=u.value;m.u(A);A.startTime<h.firstHiddenTime&&(g.value=Math.max(A.startTime-Ud(),0),g.entries=[A],k())}}catch(F){v.e(F)}finally{v.f()}},r=yc("largest-contentful-paint",n);if(r){var k=Ib(d,g,ci,f.reportAllChanges);for(var p=Ff(function(){n(r.takeRecords());
r.disconnect();k(!0)}),t=function(v){v.isTrusted&&(Xd(p),removeEventListener(v.type,t,{capture:!0}))},q=0,w=["keydown","click","visibilitychange"];q<w.length;q++)addEventListener(w[q],t,{capture:!0});fd(function(v){g=Jb("LCP");k=Ib(d,g,ci,f.reportAllChanges);Ef(function(){g.value=performance.now()-v.timeStamp;k(!0)})})}})})(function(d){d=function(f){var h={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:f.value};if(f.entries.length){var g=Td();if(g){var m=g.activationStart||
0,n=f.entries.at(-1),r=n.url&&performance.getEntriesByType("resource").filter(function(p){return p.name===n.url})[0];h=Math.max(0,g.responseStart-m);var k=Math.max(h,r?(r.requestStart||r.startTime)-m:0);m=Math.min(f.value,Math.max(k,r?r.responseEnd-m:0));h={target:e.get(n),timeToFirstByte:h,resourceLoadDelay:k-h,resourceLoadDuration:m-k,elementRenderDelay:f.value-m,navigationEntry:g,lcpEntry:n};n.url&&(h.url=n.url);r&&(h.lcpResourceEntry=r)}}return Object.assign(f,{attribution:h})}(d);a(d)},b)},Ae,
pc;(function(a){a[a.APP=0]="APP";a[a.REMOTE=1]="REMOTE";a[a.MERGE=2]="MERGE"})(pc||(pc={}));var Zb={},Ej=function(){return function(){this.outQueues=[];this.bufferFlushers=[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}();Aa.cleanup=function(a){Ra(a,function(b){b.clearTimers()});Cj(a)};Aa.convivaAppTracker=function(a){void 0===a&&(a={});try{var b="undefined"!==typeof window?Dj():void 0;if(b){var c=a.trackerVersionSuffix?"js-".concat("1.5.2"," ").concat(a.trackerVersionSuffix):"js-".concat("1.5.2");
if(Zb.hasOwnProperty("CAT"))var e=null;else Zb.CAT=nj("CAT","CAT",c,b,a),e=Zb.CAT;return e}}catch(d){console.warn("Conviva App Tracker:: Initialisation failed! "+d)}};Aa.getClientId=function(){var a="";"undefined"!=typeof window&&(null===window||void 0===window?0:window.localStorage)&&(a=window.localStorage.getItem("Conviva.sdkConfig"),a=JSON.parse(a||"{}"),a="{}"===a||"undefined"===typeof a?"":a.clId);return a};Aa.setClientId=function(a){if(a&&"string"===typeof a)try{var b=a.split(".");if(4!==b.length)console.warn('Conviva App Tracker:: Invalid clientId format! It should be in the format of "x.x.x.x"');
else if(!1===b.every(function(h){return/^\d+$/.test(h)}))console.warn("Conviva App Tracker:: Invalid clientId format! Every part of clientId should be numeric");else if("undefined"!=typeof window&&(null===window||void 0===window?0:window.localStorage)){var c=window.localStorage,e=c.getItem("Conviva.sdkConfig"),d=JSON.parse(e||"{}");"{}"===d||"undefined"===typeof d?d={clId:a}:d.clId=a;var f=JSON.stringify(d);c.setItem("Conviva.sdkConfig",f)}else console.warn("Conviva App Tracker:: window or local storage is not available")}catch(h){console.warn(h)}else console.warn("Conviva App Tracker:: Unable to set clinetId string!")};
Aa.setConversationId=function(a,b){Ra(b,function(c){c.setConversationId(a)})};Aa.setCustomTags=function(a,b){Ra(b,function(c){try{c.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};Aa.setCustomUrl=function(a,b){Ra(b,function(c){c.setCustomUrl(a)})};Aa.setDocumentTitle=function(a,b){Ra(b,function(c){c.setDocumentTitle(a)})};Aa.setReferrerUrl=function(a,b){Ra(b,function(c){c.setReferrerUrl(a)})};Aa.setUserId=function(a,b){Ra(b,function(c){c.setUserId(a)})};
Aa.trackButtonClick=function(a,b){Ra(b,function(c){try{c.trackButtonClick(a)}catch(e){console.warn("Conviva App Tracker:: Unable to track button click event! "+e)}})};Aa.trackCustomEvent=function(a,b){Ra(b,function(c){try{c.trackCustomEvent(a)}catch(e){console.warn("Conviva App Tracker:: Unable to track custom event! "+e)}})};Aa.trackError=function(a,b){Ra(b,function(c){try{c.trackErrorEvent(a)}catch(e){console.warn("Conviva App Tracker:: Unable to track error!")}})};Aa.trackLinkClick=function(a,
b){Ra(b,function(c){try{c.trackLinkClick(a)}catch(e){console.warn("Conviva App Tracker:: Unable to track link click event! "+e)}})};Aa.trackNetworkRequest=function(a,b){var c,e,d,f,h,g,m,n,r,k,p,t,q,w,v,u,A,F,B={method:null!==(c=a.requestDetails.method)&&void 0!==c?c:void 0,url:null!==(e=a.requestDetails.url)&&void 0!==e?e:void 0,headers:null!==(d=a.requestDetails.headers)&&void 0!==d?d:void 0,body:null!==(f=a.requestDetails.body)&&void 0!==f?f:void 0,requestTimestamp:null!==(h=a.requestDetails.requestTimestamp)&&
void 0!==h?h:void 0,requestTime:null!==(g=a.requestDetails.requestTime)&&void 0!==g?g:void 0,size:null!==(m=a.requestDetails.size)&&void 0!==m?m:void 0,traceparent:null!==(n=a.requestDetails.traceparent)&&void 0!==n?n:void 0,baggage:null!==(r=a.requestDetails.baggage)&&void 0!==r?r:void 0},G={status:null!==(k=a.responseDetails.status)&&void 0!==k?k:void 0,statusText:null!==(p=a.responseDetails.statusText)&&void 0!==p?p:void 0,url:null!==(t=a.responseDetails.url)&&void 0!==t?t:void 0,headers:null!==
(q=a.responseDetails.headers)&&void 0!==q?q:void 0,body:null!==(w=a.responseDetails.body)&&void 0!==w?w:null,event:null!==(v=a.responseDetails.event)&&void 0!==v?v:void 0,size:null!==(u=a.responseDetails.size)&&void 0!==u?u:void 0,responseTimestamp:null!==(A=a.responseDetails.responseTimestamp)&&void 0!==A?A:void 0,responseTime:null!==(F=a.responseDetails.responseTime)&&void 0!==F?F:void 0};B.url?Ra(b,function(D){var z;try{var J=null===(z=D.core)||void 0===z?void 0:z.getConfig().networkRequestTrackingConfiguration;
D.getSamplingMode()!==E.SAMPLING_MODES.NONE&&J.enabled&&D.determineShouldTrack(J.collect,J.block,J.blocklist,J.safelist,G,B)&&(J.eventCollectionMode!==E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.MANUAL&&J.eventCollectionMode!==E.NETWORK_REQUEST_EVENT_COLLECTION_MODE.BOTH||D.trackNetworkRequest({requestDetails:B,responseDetails:G}))}catch(K){console.warn("Conviva App Tracker:: Unable to track network request! "+K)}}):console.warn("Conviva App Tracker:: Unable to track network request! Missing required fields.")};
Aa.trackPageView=function(a,b){Ra(b,function(c){c.trackPageView(a)})};Aa.unsetCustomTags=function(a,b){Ra(b,function(c){try{c.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};Aa.version="1.5.2";Object.defineProperty(Aa,"__esModule",{value:!0})})
//# sourceMappingURL=conviva-eco-js-sensor.umd.min.js.map
