/*!
 * Browser tracker for Snowplow v0.4.3 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(B,ha){"object"===typeof exports&&"undefined"!==typeof module?ha(exports):"function"===typeof define&&define.amd?define(["exports"],ha):(B="undefined"!==typeof globalThis?globalThis:B||self,ha(B.snowplowBrowserTracking={}))})(this,function(B){function ha(a,c,d){if(d||2===arguments.length)for(var e=0,h=c.length,g;e<h;e++)!g&&e in c||(g||(g=Array.prototype.slice.call(c,0,e)),g[e]=c[e]);return a.concat(g||Array.prototype.slice.call(c))}function Ed(a){var c=0,d=0;var e="";var h=
[];if(!a)return a;a+="";do{var g=xa.indexOf(a.charAt(c++));var l=xa.indexOf(a.charAt(c++));e=xa.indexOf(a.charAt(c++));var p=xa.indexOf(a.charAt(c++));var t=g<<18|l<<12|e<<6|p;g=t>>16&255;l=t>>8&255;t&=255;64===e?h[d++]=String.fromCharCode(g):64===p?h[d++]=String.fromCharCode(g,l):h[d++]=String.fromCharCode(g,l,t)}while(c<a.length);e=h.join("");return function(m){return decodeURIComponent(m.split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,
""))}function gb(){var a={},c=[],d=[],e=[],h,g=function(l,p){null!=p&&""!==p&&(a[l]=p)};return{add:g,addDict:function(l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&g(p,l[p])},addJson:function(l,p,t){t&&Oc(t)&&(l={keyIfEncoded:l,keyIfNotEncoded:p,json:t},d.push(l),c.push(l))},addContextEntity:function(l){e.push(l)},getPayload:function(){return a},getJson:function(){return c},withJsonProcessor:function(l){h=l},build:function(){null===h||void 0===h?void 0:h(this,d,e);return a}}}function Fd(a){return function(c,
d,e){for(var h=function(m,r,w){m=JSON.stringify(m);if(a){w=c.add;if(m){var x=0,n=0,q=[];if(m){m=unescape(encodeURIComponent(m));do{var K=m.charCodeAt(x++);var O=m.charCodeAt(x++);var L=m.charCodeAt(x++);var J=K<<16|O<<8|L;K=J>>18&63;O=J>>12&63;L=J>>6&63;J&=63;q[n++]=xa.charAt(K)+xa.charAt(O)+xa.charAt(L)+xa.charAt(J)}while(x<m.length);x=q.join("");m=m.length%3;m=(m?x.slice(0,m-3):x)+"===".slice(m||3)}m=m.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}w.call(c,r,m)}else c.add(w,m)},g=function(m,
r){if(!m){var w=c.getPayload();if(a?w.cx:w.co){m=JSON;var x=m.parse;if(a){if(w=w.cx){switch(4-w.length%4){case 2:w+="==";break;case 3:w+="="}w=w.replace(/-/g,"+").replace(/_/g,"/");w=Ed(w)}}else w=w.co;m=x.call(m,w)}else m=void 0}m?m.data=m.data.concat(r.data):m=r;return m},l=void 0,p=0;p<d.length;p++){var t=d[p];"cx"===t.keyIfEncoded?l=g(l,t.json):h(t.json,t.keyIfEncoded,t.keyIfNotEncoded)}d.length=0;e.length&&(d={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:ha([],
e,!0)},l=g(l,d),e.length=0);l&&h(l,"cx","co")}}function Oc(a){if(!Pc(a))return!1;for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))return!0;return!1}function Pc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function Gd(){var a=[],c=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return c},addGlobalContexts:function(d){for(var e=[],h=[],g=0;g<d.length;g++){var l=d[g];Qc(l)?e.push(l):Ja(l)&&
h.push(l)}a=a.concat(h);c=c.concat(e)},clearGlobalContexts:function(){c=[];a=[]},removeGlobalContexts:function(d){for(var e=function(g){Qc(g)?c=c.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}):Ja(g)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(g)}))},h=0;h<d.length;h++)e(d[h])},getApplicableContexts:function(d){a:{var e=0;for(var h=d.getJson();e<h.length;e++){var g=h[e];if("ue_px"===g.keyIfEncoded&&"object"===typeof g.json.data&&(g=g.json.data.schema,"string"==
typeof g)){e=g;break a}}e=""}h=d.getPayload().e;g="string"===typeof h?h:"";h=[];var l=Ab(a,d,g,e);h.push.apply(h,l);d=Hd(c,d,g,e);h.push.apply(h,d);return h}}}function Id(a){return{addPluginContexts:function(c){var d=c?ha([],c,!0):[];a.forEach(function(e){try{e.contexts&&d.push.apply(d,e.contexts())}catch(h){la.error("Error adding plugin contexts",h)}});return d}}}function Jd(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var c=!1,d=0;for(a=a.slice(2);d<a.length;d++)if("*"===a[d])c=
!0;else if(c)return!1;return!0}return 2==a.length?!0:!1}function Rc(a){return(a=a.split("."))&&1<a.length?Jd(a):!1}function Sc(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&Rc(a[1]))return a.slice(1,6)}function Bb(a){if(a=Sc(a)){var c=a[0];return 5===a.length&&Rc(c)}return!1}function Kd(a){return Array.isArray(a)&&a.every(function(c){return"string"===typeof c})}function Tc(a){return Kd(a)?
a.every(function(c){return Bb(c)}):"string"===typeof a?Bb(a):!1}function Ua(a){return Oc(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function Ld(a){var c=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(Tc(a.accept))c+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(Tc(a.reject))c+=1;else return!1;return 0<c&&2>=c}return!1}function hb(a){return"function"===typeof a&&1>=a.length}
function Ja(a){return hb(a)||Ua(a)}function Uc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?hb(a[0])&&a[1].every(Ja):hb(a[0])&&Ja(a[1]):!1}function Vc(a){return Array.isArray(a)&&2===a.length?Ld(a[0])?Array.isArray(a[1])?a[1].every(Ja):Ja(a[1]):!1:!1}function Qc(a){return Uc(a)||Vc(a)}function Md(a,c){var d=0,e=0,h=a.accept;Array.isArray(h)?a.accept.some(function(g){return ib(g,c)})&&e++:"string"===typeof h&&ib(h,c)&&e++;h=a.reject;Array.isArray(h)?a.reject.some(function(g){return ib(g,
c)})&&d++:"string"===typeof h&&ib(h,c)&&d++;return 0<e&&0===d?!0:!1}function ib(a,c){if(!Bb(a))return!1;a=Sc(a);c=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(c);c=null!==c?c.slice(1,6):void 0;if(a&&c){if(!Nd(a[0],c[0]))return!1;for(var d=1;5>d;d++)if(!Wc(a[d],c[d]))return!1;return!0}return!1}function Nd(a,c){c=c.split(".");a=a.split(".");if(c&&a){if(c.length!==a.length)return!1;for(var d=0;d<a.length;d++)if(!Wc(c[d],a[d]))return!1;return!0}return!1}
function Wc(a,c){return a&&c&&"*"===a||a===c}function Xc(a){return Array.isArray(a)?a:[a]}function Ab(a,c,d,e){var h;a=Xc(a).map(function(g){a:if(Ua(g))g=[g];else{if(hb(g)){b:{var l=void 0;try{var p={event:c.getPayload(),eventType:d,eventSchema:e};l=g(p);if(Array.isArray(l)&&l.every(Ua)||Ua(l)){var t=l;break b}t=void 0;break b}catch(m){}t=void 0}if(Ua(t)){g=[t];break a}else if(Array.isArray(t)){g=t;break a}}g=void 0}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=
g&&g.filter(Boolean)}))}function Hd(a,c,d,e){var h;a=Xc(a).map(function(g){a:{if(Uc(g)){var l=g[0],p=!1;try{var t={event:c.getPayload(),eventType:d,eventSchema:e};p=l(t)}catch(m){p=!1}if(!0===p){g=Ab(g[1],c,d,e);break a}}else if(Vc(g)&&Md(g[0],e)){g=Ab(g[1],c,d,e);break a}g=[]}if(g&&0!==g.length)return g});return(h=[]).concat.apply(h,a.filter(function(g){return null!=g&&g.filter(Boolean)}))}function Od(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function Pd(a){void 0===a&&(a={});var c=a.base64,d=a.corePlugins,e=null!==d&&void 0!==d?d:[];c=function(g,l,p){function t(n,q){n=r.getApplicableContexts(n);var K=[];q&&q.length&&K.push.apply(K,q);n&&n.length&&K.push.apply(K,n);return K}var m=Id(l),r=Gd(),w=g,x={};return{track:function(n,q,K){n.withJsonProcessor(Fd(w));n.add("eid",ya.v4());n.addDict(x);K=Od(K);n.add(K.type,K.value.toString());q=t(n,m.addPluginContexts(q));
q=q&&q.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:q}:void 0;void 0!==q&&n.addJson("cx","co",q);l.forEach(function(L){try{L.beforeTrack&&L.beforeTrack(n)}catch(J){la.error("Plugin beforeTrack",J)}});"function"===typeof p&&p(n);var O=n.build();l.forEach(function(L){try{L.afterTrack&&L.afterTrack(O)}catch(J){la.error("Plugin afterTrack",J)}});return O},addPayloadPair:function(n,q){x[n]=q},configuration:a,getConfig:function(){return a},setConfig:function(n){n&&
("undefined"!==typeof n.base64&&(w=a.base64=n.base64),"undefined"!==typeof n.linkClickTracking&&(a.linkClickTracking=n.linkClickTracking),"undefined"!==typeof n.cacheRefreshInterval&&(a.cacheRefreshInterval=n.cacheRefreshInterval),"undefined"!==typeof n.buttonClickTracking&&(a.buttonClickTracking=n.buttonClickTracking),"undefined"!==typeof n.customEvent&&(a.customEvent=n.customEvent),"undefined"!==typeof n.exceptionAutotracking&&(a.exceptionAutotracking=n.exceptionAutotracking),"undefined"!==typeof n.enablePeriodicHeartbeat&&
(a.enablePeriodicHeartbeat=n.enablePeriodicHeartbeat),"undefined"!==typeof n.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=n.periodicHeartbeatInterval),"undefined"!==typeof n.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=n.customEventTrackingConfiguration),"undefined"!==typeof n.convivaVideoEventTrackingConfiguration&&(a.convivaVideoEventTrackingConfiguration=n.convivaVideoEventTrackingConfiguration),"undefined"!==typeof n.ajaxTrackingConfiguration&&(a.ajaxTrackingConfiguration=
n.ajaxTrackingConfiguration),"undefined"!==typeof n.networkRequestTrackingConfiguration&&(a.networkRequestTrackingConfiguration=n.networkRequestTrackingConfiguration))},getBase64Encoding:function(){return w},setBase64Encoding:function(n){w=n},addPayloadDict:function(n){for(var q in n)Object.prototype.hasOwnProperty.call(n,q)&&(x[q]=n[q])},resetPayloadPairs:function(n){x=Pc(n)?n:{}},setTrackerVersion:function(n){x.tv=n},setTrackerNamespace:function(n){x.tna=n},setAppId:function(n){x.aid=n},setPlatform:function(n){x.p=
n},setUserId:function(n){x.uid=n},setScreenResolution:function(n,q){x.res=n+"x"+q},setViewport:function(n,q){x.vp=n+"x"+q},setColorDepth:function(n){x.cd=n},setTimezone:function(n){x.tz=n},setLang:function(n){x.lang=n},setIpAddress:function(n){x.ip=n},setUseragent:function(n){x.ua=n},addGlobalContexts:function(n){r.addGlobalContexts(n)},clearGlobalContexts:function(){r.clearGlobalContexts()},removeGlobalContexts:function(n){r.removeGlobalContexts(n)}}}(null!==c&&void 0!==c?c:!0,e,a.callback);var h=
aa(aa({},c),{addPlugin:function(g){var l,p;g=g.plugin;e.push(g);null===(l=g.logger)||void 0===l?void 0:l.call(g,la);null===(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)}});null===e||void 0===e?void 0:e.forEach(function(g){var l,p;null===(l=g.logger)||void 0===l?void 0:l.call(g,la);null===(p=g.activateCorePlugin)||void 0===p?void 0:p.call(g,h)});return h}function Va(a){var c=a.event;a=c.schema;var d=c.data;c=gb();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",
data:{schema:a,data:d}};c.add("e","ue");c.addJson("ue_px","ue_pr",a);return c}function Qd(a){var c=a.pageUrl,d=a.pageTitle;a=a.referrer;var e=gb();e.add("e","pv");e.add("url",c);e.add("page",d);e.add("refr",a);return e}function Cb(a){return Va({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:jb({name:a.name,data:a.data})}})}function Rd(a){return Va({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-4",data:jb({targetUrl:a.targetUrl,method:a.method,queryParameters:a.queryParameters,
responseStatusCode:a.responseStatusCode,responseStatusText:a.responseStatusText,rqh:a.rqh,rsh:a.rsh,rqb:a.rqb,rsb:a.rsb,requestSize:a.requestSize,responseSize:a.responseSize,duration:a.duration,contentType:a.contentType,requestTimestamp:a.requestTimestamp,responseTimestamp:a.responseTimestamp})}})}function Db(a){return Va({event:{schema:"iglu:com.conviva/conviva_video_events/jsonschema/1-0-4",data:jb({name:a.name,sid:a.sid,iid:a.iid,clid:a.clid,st:a.st,cen:a.cen,ced:a.ced})}})}function jb(a,c){void 0===
c&&(c={});var d={},e;for(e in a)if(c[e]||null!==a[e]&&"undefined"!==typeof a[e])d[e]=a[e];return d}function Yc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function Zc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var c=document.getElementsByTagName("title");c&&null!=c[0]&&(a=c[0].text)}return a}function Eb(a){var c=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return c?c[1]:a}function $c(a){var c=a.length;"."===a.charAt(--c)&&
(a=a.slice(0,c));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function Fb(a){var c=window,d=Wa("referrer",c.location.href)||Wa("referer",c.location.href);if(d)return d;if(a)return a;try{if(c.top)return c.top.document.referrer;if(c.parent)return c.parent.document.referrer}catch(e){}return document.referrer}function za(a,c,d,e){if(a.addEventListener)return a.addEventListener(c,d,e),!0;if(a.attachEvent)return a.attachEvent("on"+c,d);a["on"+c]=d}function Wa(a,c){return(a=(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(c))?
decodeURIComponent(a[1].replace(/\+/g," ")):null}function kb(a,c,d){void 0===d&&(d=63072E3);try{var e=window.localStorage,h=Date.now()+1E3*d;e.setItem("".concat(a,".expires"),h.toString());e.setItem(a,c);return!0}catch(g){return!1}}function ad(a){try{var c=window.localStorage;c.removeItem(a);c.removeItem(a+".expires");return!0}catch(d){return!1}}function Sd(a,c){for(var d=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),h="_test_value_"+(new Date).getTime(),g=d.split("."),l=
g.length-1;0<=l;){var p=g.slice(l,g.length).join(".");pa(e,h,0,"/",p,a,c);if(pa(e)===h){pa(e,"",-1,"/",p,a,c);d=document.cookie.split("; ");e=[];for(h=0;h<d.length;h++)"_sp_root_domain_test_"===d[h].substring(0,21)&&e.push(d[h]);d=e;for(e=0;e<d.length;e++)pa(d[e],"",-1,"/",p,a,c);return p}--l}return d}function pa(a,c,d,e,h,g,l){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==c&&void 0!==c?c:"")+(d?"; Expires="+(new Date(+new Date+1E3*d)).toUTCString():"")+(e?"; Path="+e:
"")+(h?"; Domain="+h:"")+(g?"; SameSite="+g:"")+(l?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function Td(a,c){var d=[ca.request_body,ca.response_body,ca.request_headers,ca.response_headers],e={};if(c&&0<c.length)for(var h=0;h<c.length;h++){var g=c[h],l=g.conditions;var p=void 0;var t=["conditions"],m={};for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&0>t.indexOf(p)&&(m[p]=g[p]);if(null!=g&&"function"===typeof Object.getOwnPropertySymbols){var r=
0;for(p=Object.getOwnPropertySymbols(g);r<p.length;r++)0>t.indexOf(p[r])&&Object.prototype.propertyIsEnumerable.call(g,p[r])&&(m[p[r]]=g[p[r]])}p=m;try{a:{g=a;try{for(t=0;t<l.length;t++){var w=l[t];m=!1;if(0<Object.keys(w).length){r=0;for(var x=Object.entries(w);r<x.length;r++){var n=x[r],q=n[1],K=g[n[0]];if(0<q.length){for(var O=0,L=0,J=q;L<J.length;L++){var H=J[L],V="contains",ma=H;if("object"===typeof H&&H.length)V=H[1],ma=H[0];else if("boolean"===typeof H||null===H)V="equal",ma=H;if(Ud(K,V,ma)){m=
!0;break}else if(m=!1,O+1===q.length)break;O++}if(!1===m)break}}}if(m){var ia=!0;break a}}}catch(ja){console.warn("Conviva App Tracker: Error in Applying nwreqConfig ".concat(ja))}ia=!1}if(ia){g=0;for(var Ka=Object.entries(a);g<Ka.length;g++){var Y=Ka[g],P=Y[0],I=Y[1];if(d.includes(P))try{if(p[P]&&0<p[P].length){t=!1;if(P===ca.response_headers||P===ca.request_headers)t=!0;var qa=a[P];l={};try{m=0;for(var Ea=p[P];m<Ea.length;m++){var na=Ea[m];r=qa;O=l;t&&(na=na.toLowerCase());var oa=na.split(".");
for(L=0;L<oa.length;L++){var ea=oa[L];"undefined"!==typeof r&&null!==r&&r.hasOwnProperty(ea)&&(L===oa.length-1?O[ea]=r[ea]:(O[ea]=O[ea]||{},r=r[ea],O=O[ea]))}}}catch(ja){console.warn("Conviva App Tracker: Error in filtering schema object nwreq ".concat(ja))}var fa=l;0!==Object.keys(fa).length&&(e[P]=fa)}}catch(ja){e[P]=void 0}else e[P]=I}return e}}catch(ja){console.warn("Conviva App Tracker: Error in collecting attributes nwreqConfig ".concat(ja))}}e=aa({},a);for(a=0;a<d.length;a++)c=d[a],"undefined"!==
typeof e&&null!==e&&e.hasOwnProperty(c)&&delete e[c];return e}function Ud(a,c,d){try{if("string"===typeof d&&"string"===typeof a&&"*"===d.trim())return!0;switch(c){case "==":case "equal":return a===d;case "!=":return a!==d;case ">":return a>d;case "<":return a<d;case ">=":return a>=d;case "<=":return a<=d;case "contains":return""!==d&&"string"===typeof a&&"string"===typeof d&&-1!==a.toLowerCase().indexOf(d.toLowerCase());default:return!1}}catch(e){return console.warn("Conviva App Tracker: Error in Compare values nwreq ".concat(e)),
!1}}function Vd(){try{var a=!!window.localStorage}catch(d){a=!0}if(!a)return!1;try{var c=window.localStorage;c.setItem("modernizr","modernizr");c.removeItem("modernizr");return!0}catch(d){return!1}}function Wd(a,c,d,e,h,g,l,p,t,m,r,w,x,n,q,K){function O(u){var E=Object.keys(u).map(function(C){return[C,u[C]]}).reduce(function(C,z){C[z[0]]=z[1].toString();return C},{});return{evt:E,bytes:L(JSON.stringify(E))}}function L(u){for(var E=0,C=0;C<u.length;C++){var z=u.charCodeAt(C);127>=z?E+=1:2047>=z?E+=
2:55296<=z&&57343>=z?(E+=4,C++):E=65535>z?E+3:E+4}return E}function J(u){for(void 0===u&&(u=!1);I.length&&"string"!==typeof I[0]&&"object"!==typeof I[0];)I.shift();if(1>I.length)Y=!1;else{if(!P||"string"!==typeof P.valueOf())throw"No collector configured";Y=!0;if(na){var E=function(W){for(var ra=0,Xa=0;ra<W.length&&!(Xa+=W[ra].bytes,Xa>=l);)ra+=1;return ra},C=void 0;if(La(I)){C=P;var z=H(C,!0,u);var Q=E(I)}else C=ia(I[0]),z=H(C,!1,u),Q=1;var Z=setTimeout(function(){z.abort();Y=!1},r),sa=function(W){for(var ra=
0;ra<W;ra++)I.shift();d&&kb(fa,JSON.stringify(I.slice(0,m)))};z.onreadystatechange=function(){if(4===z.readyState&&200<=z.status)if(clearTimeout(Z),300>z.status)sa(Q),J();else{var W=z.status;W=200<=W&&300>W?!1:q.includes(W)?!0:!K.includes(W);W||(la.error("Status ".concat(z.status,", will not retry.")),sa(Q));Y=!1}};if(La(I)){if(E=I.slice(0,Q),0<E.length){u=!1;E=E.map(function(W){return W.evt});if(Ea){var Gb=new Blob([V(ma(E))],{type:"application/json"});try{u=navigator.sendBeacon(C,Gb)}catch(W){u=
!1}}!0===u?(sa(Q),J()):z.send(V(ma(E)))}}else z.send()}else if(w||La(I))Y=!1;else{C=new Image(1,1);var Aa=!0;C.onload=function(){Aa&&(Aa=!1,I.shift(),d&&kb(fa,JSON.stringify(I.slice(0,m))),J())};C.onerror=function(){Aa&&(Y=Aa=!1)};C.src=ia(I[0]);setTimeout(function(){Aa&&Y&&(Aa=!1,J())},r)}}}function H(u,E,C){var z=new XMLHttpRequest;E?(z.open("POST",u,!C),z.setRequestHeader("Content-Type","application/json; charset=UTF-8")):z.open("GET",u,!C);z.withCredentials=n;w&&z.setRequestHeader("SP-Anonymous",
"*");for(var Q in x)Object.prototype.hasOwnProperty.call(x,Q)&&z.setRequestHeader(Q,x[Q]);return z}function V(u){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:u})}function ma(u){for(var E=(new Date).getTime().toString(),C=0;C<u.length;C++)u[C].stm=E;return u}function ia(u){return t?P+u.replace("?","?stm="+(new Date).getTime()+"&"):P+u}function Ka(u){function E(z,Q,Z){return(Z=Z.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&
Z.length?parseInt(Z[0])<=z||parseInt(Z[0])===z&&parseInt(Z[1])<=Q:!1}function C(z){return z.match("Version/.* Safari/")&&!z.match("Chrom(e|ium)")}return function(z,Q){return(Q=Q.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&Q.length?parseInt(Q[0])<=z:!1}(13,u)||E(10,15,u)&&C(u)}var Y=!1,P,I=[];e="string"===typeof e?e.toLowerCase():e;var qa=!0===e||"beacon"===e||"true"===e,Ea=!(!(qa&&window.navigator&&window.navigator.sendBeacon)||Ka(window.navigator.userAgent))&&qa,na=!!(window.XMLHttpRequest&&
"withCredentials"in new XMLHttpRequest),oa="get"!==e&&na&&("post"===e||qa),ea=oa?h:"/i",fa="snowplowOutQueue_".concat(a,"_").concat(oa?"post2":"get");qa&&(x={});g=d&&Vd()&&oa&&g||1;if(d)try{var ja=window.localStorage.getItem(fa);I=ja?JSON.parse(ja):[]}catch(u){}Array.isArray(I)||(I=[]);c.outQueues.push(I);na&&1<g&&c.bufferFlushers.push(function(u){Y||J(u)});var La=function(u){return"object"===typeof u[0]};return{enqueueRequest:function(u,E){P=E+ea;if(oa){u=O(u);if(u.bytes>=l){la.warn("Event ("+u.bytes+
"B) too big, max is "+l);E=u;H(P,!0,!1).send(V(ma([E.evt])));return}I.push(u)}else{var C="?";var z={co:!0,cx:!0},Q=!0,Z;for(Z in u)u.hasOwnProperty(Z)&&!z.hasOwnProperty(Z)&&(Q?Q=!1:C+="&",C+=encodeURIComponent(Z)+"="+encodeURIComponent(u[Z]));for(var sa in z)u.hasOwnProperty(sa)&&z.hasOwnProperty(sa)&&(C+="&"+sa+"="+encodeURIComponent(u[sa]));if(0<p&&(z=ia(C),z=L(z),z>=p)){la.warn("Event ("+z+"B) too big, max is "+p);na&&(u=O(u),H(E+h,!0,!1).send(V(ma([u.evt]))));return}I.push(C)}E=!1;d&&(E=kb(fa,
JSON.stringify(I.slice(0,m))));Y||E&&!(I.length>=g)||J()},executeQueue:function(){Y||J()},setUseLocalStorage:function(u){d=u},setAnonymousTracking:function(u){w=u},setCollectorUrl:function(u){P=u+ea},setBufferSize:function(u){g=u},setCustomHeaders:function(u){x=u}}}function bd(a,c,d){if("translate.googleusercontent.com"===a)""===d&&(d=c),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(c))&&1<(null===a||void 0===a?void 0:a.length)?Wa("u",a[1]):null,c=null!==a&&void 0!==a?a:"",a=Eb(c);else if("cc.bingj.com"===
a||"webcache.googleusercontent.com"===a)c=document.links[0].href,a=Eb(c);return[a,c,d]}function Xd(a,c,d,e){var h=Math.round((new Date).getTime()/1E3);a?(a=a.split("."),a.unshift("0")):a=["1",c,h,e,h,"",d];a[6]&&"undefined"!==a[6]||(a[6]=ya.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var g=function(l,p){l=parseInt(l);return isNaN(l)?p:l};c=function(l){return l?g(l,void 0):void 0};return[a[0],
a[1],g(a[2],h),g(a[3],e),g(a[4],h),c(a[5]),a[6],a[7],a[8],c(a[9]),g(a[10],-1)]}function Ya(a,c){void 0===c&&(c=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],a[3]++):a[3]=c;c=ya.v4();a[6]=c;a[10]=-1;a[8]="";a[9]=void 0;return c}function Hb(a){a[4]=Math.round((new Date).getTime()/1E3)}function Yd(a,c,d,e,h,g){function l(m,r){var w="cws.conviva.com wsg ctp remote_config .m3u8 .mpd .ism .m4 .mp4 .ts .png .jpg .jpeg .bmp google-analytics.com googlesyndication.com googleapis stats.g.doubleclick chartbeat.com omtrdc.net app-measurement.com firebase nr-data.net newrelic bitmovin.com/impression bitmovin.com/analytics api.segment.io youbora hotjar mixpanel.com clevertap auryc".split(" ");
r=JSON.parse(JSON.stringify(r));"undefined"!=typeof m.cacheRefreshInterval&&(r.cacheRefreshInterval=m.cacheRefreshInterval);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.base64Encoding&&(r.base64=m.configurationBundle[0].trackerConfiguration.base64Encoding);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.linkClickTracking&&(r.linkClickTracking=m.configurationBundle[0].trackerConfiguration.linkClickTracking);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.buttonClickTracking&&
(r.buttonClickTracking=m.configurationBundle[0].trackerConfiguration.buttonClickTracking);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.customEvent&&(r.customEvent=m.configurationBundle[0].trackerConfiguration.customEvent);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.exceptionAutotracking&&(r.exceptionAutotracking=m.configurationBundle[0].trackerConfiguration.exceptionAutotracking);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat&&
(r.enablePeriodicHeartbeat=m.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat);"undefined"!=typeof m.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval&&(r.periodicHeartbeatInterval=m.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval);"undefined"!=typeof m.configurationBundle[0].customEventTrackingConfiguration&&(r.customEventTrackingConfiguration=m.configurationBundle[0].customEventTrackingConfiguration);"undefined"!=typeof m.configurationBundle[0].convivaVideoEventTrackingConfiguration&&
(r.convivaVideoEventTrackingConfiguration=m.configurationBundle[0].convivaVideoEventTrackingConfiguration);"undefined"!=typeof m.configurationBundle[0].ajaxTrackingConfiguration&&(r.ajaxTrackingConfiguration=m.configurationBundle[0].ajaxTrackingConfiguration);"undefined"!=typeof m.configurationBundle[0].networkRequestTrackingConfiguration&&(r.networkRequestTrackingConfiguration=m.configurationBundle[0].networkRequestTrackingConfiguration);r.ajaxTrackingConfiguration&&(r.ajaxTrackingConfiguration.blocklist||
(r.ajaxTrackingConfiguration.blocklist=[]),r.ajaxTrackingConfiguration.blocklist.push(m.configurationBundle[0].networkConfiguration.endpoint),r.ajaxTrackingConfiguration.blocklist=r.ajaxTrackingConfiguration.blocklist.concat(w));r.networkRequestTrackingConfiguration&&(r.networkRequestTrackingConfiguration.blocklist||(r.networkRequestTrackingConfiguration.blocklist=[]),r.networkRequestTrackingConfiguration.blocklist.push(m.configurationBundle[0].networkConfiguration.endpoint),r.networkRequestTrackingConfiguration.blocklist=
r.networkRequestTrackingConfiguration.blocklist.concat(w));t.setCollectorUrl(m.configurationBundle[0].networkConfiguration.endpoint);window.localStorage&&(localStorage.removeItem("ConvivaRemoteConfig"),localStorage.removeItem("ConvivaEndpoint"),localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(r)),localStorage.setItem("ConvivaEndpoint",m.configurationBundle[0].networkConfiguration.endpoint));t.core.setConfig(r)}void 0===g&&(g={});var p=[];a=function(m,r,w,x,n,q){function K(){Fa=bd(window.location.hostname,
window.location.href,Fb());Fa[1]!==Ba&&(Za=Fb(Ba));cd=$c(Fa[0]);Ba=Fa[1]}function O(b){try{var f=(new Date).getTime(),k=b.currentTarget;if(null===k||void 0===k?0:k.href){b="_sp="+(lb+"."+f);var v=k.href.split("#"),y=v[0].split("?"),F=y.shift(),A=y.join("?");if(A){y=!0;var N=A.split("&");for(f=0;f<N.length;f++)if("_sp="===N[f].substr(0,4)){y=!1;N[f]=b;A=N.join("&");break}y&&(A=b+"&"+A)}else A=b;v[0]=F+"?"+A;var D=v.join("#");k.href=D}}catch(S){console.warn("Conviva App Tracker:: Error in linkDecorationHandler of decorateLinks ".concat(S))}}
function L(b){for(var f=0;f<document.links.length;f++){var k=document.links[f];!k.spDecorationEnabled&&b(k)&&(za(k,"click",O,!0),za(k,"mousedown",O,!0),k.spDecorationEnabled=!0)}}function J(b){if(dd){var f=/#.*/;b=b.replace(f,"")}ed&&(f=/[{}]/g,b=b.replace(f,""));return b}function H(b){return(b=/^([a-z]+):/.exec(b))?b[1]:null}function V(b){b=Ma+b+"."+Ga;if("localStorage"==T){try{var f=window.localStorage,k=f.getItem(b+".expires");if(null===k||+k>Date.now())var v=f.getItem(b);else f.removeItem(b),
f.removeItem(b+".expires"),v=void 0}catch(y){v=void 0}return v}if("cookie"==T||"cookieAndLocalStorage"==T)return pa(b)}function ma(){K();Ga=Zd(($a||cd)+(Ib||"/")).slice(0,4)}function ia(){Jb=(new Date).getTime()}function Ka(){var b=Y(),f=b[0];f<mb?mb=f:f>nb&&(nb=f);b=b[1];b<ob?ob=b:b>pb&&(pb=b);ia()}function Y(){var b=document.documentElement;return b?[b.scrollLeft||window.pageXOffset,b.scrollTop||window.pageYOffset]:[0,0]}function P(){var b=Y(),f=b[0];nb=mb=f;pb=ob=b=b[1]}function I(){Ea(Ma+"ses."+
Ga,"*",fd)}function qa(b){var f=Ma+"id."+Ga;b.shift();b=b.join(".");Ea(f,b,gd)}function Ea(b,f,k){if(!Na||ab)"localStorage"==T?kb(b,f,k):("cookie"==T||"cookieAndLocalStorage"==T)&&pa(b,f,k,Ib,$a,qb,rb)}function na(b){var f=Ma+"id."+Ga,k=Ma+"ses."+Ga;ad(f);ad(k);pa(f,"",-1,"/",$a,qb,rb);pa(k,"",-1,"/",$a,qb,rb);null!==b&&void 0!==b&&b.preserveSession||(Ha=ya.v4(),ta=1);null!==b&&void 0!==b&&b.preserveUser||(lb=ya.v4(),Ia=null)}function oa(b){b&&b.stateStorageStrategy&&(q.stateStorageStrategy=b.stateStorageStrategy,
T=hd(q));Na=!!q.anonymousTracking;ab=id(q);Kb=jd(q);ua.setUseLocalStorage("localStorage"==T||"cookieAndLocalStorage"==T);ua.setAnonymousTracking(Kb)}function ea(){try{var b=window.localStorage.getItem(Lb+"."+Mb),f=JSON.parse(b||"{}");"{}"===f||"undefined"===typeof f?(bb=z(),sb=Q(),Ca=-1):(bb=f.clId||z(),Ca=f[cb]&&2147483648>f[cb]?f[cb]:-1,sb=Q());C()}catch(v){console.warn(v)}if(!Na||ab){b="none"!=T&&!!V("ses");f=fa();if(f[1])var k=f[1];else k=Na?"":ya.v4(),f[1]=k;lb=k;Ha=b?f[6]:Ya(f);ta=f[3];"none"!=
T&&(I(),Hb(f),qa(f))}}function fa(){if("none"==T)return["1","",0,0,0,void 0,"","","",void 0,0];var b=V("id")||void 0;return Xd(b,lb,Ha,ta)}function ja(b){return 0===b.indexOf("http")?b:("https:"===document.location.protocol?"https":"http")+"://"+b}function La(){kd&&null!=n.pageViewId||(n.pageViewId=ya.v4())}function u(){null==n.pageViewId&&(n.pageViewId=ya.v4());return n.pageViewId}function E(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",
data:{id:u()}}]}}}function C(){try{var b=window.localStorage,f={clId:bb,iid:sb,eventIndex:Ca},k=null;try{k=JSON.stringify(f)}catch(v){return}return b.setItem(Lb+"."+Mb,k)}catch(v){}}function z(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()}catch(b){console.warn(b)}}function Q(){try{return Math.floor(2147483647*Math.random())}catch(b){return console.warn(b),
-1}}function Z(b){try{var f=Object.keys(b);$d(JSON.stringify(b))?f.forEach(function(k){""!==k&&Object.defineProperty(Nb,k,{value:""+b[k],writable:!0,enumerable:!0,configurable:!0})}):console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=")}catch(k){console.warn("Conviva AppTracker:: Invalid JSON Format: Error Message=",k)}}function sa(b){try{b.forEach(function(f){delete Nb[f]})}catch(f){console.warn("Conviva AppTracker:: Failed to unset Custom tag(s). Check format of keys set.")}}
function Gb(b){var f=b.title,k=b.context,v=b.timestamp;b=b.contextCallback;K();ld&&La();ld=!0;Oa=document.title;db=f;f=Zc(db||Oa);Pa.track(Qd({pageUrl:J(Qa||Ba),pageTitle:f,referrer:J(tb||Za)}),(k||[]).concat(b?b():[]),v);v=new Date;f=!1;if(ka.enabled&&!ka.installed){f=ka.installed=!0;var y={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var A=!1,N=Object.defineProperty({},"passive",{get:function(){A=!0},set:function(){}}),D=function(){};window.addEventListener("testPassiveEventSupport",
D,N);window.removeEventListener("testPassiveEventSupport",D,N);y.hasSupport=A}}};y.update();var F="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(y,"hasSupport")?za(document,F,ia,{passive:!0}):za(document,F,ia);P();F=function(A,N){void 0===N&&(N=ia);return function(D){return za(document,D,N)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(F(document));["resize","focus",
"blur"].forEach(F(window));F(window,Ka)("scroll")}if(ka.enabled&&(ae||f))for(v in Jb=v.getTime(),v=void 0,ka.configurations)if(f=ka.configurations[v])window.clearInterval(f.activityInterval),Aa(f,k,b)}function Aa(b,f,k){var v=function(A,N){K();var D=t.core.getConfig();D.enablePeriodicHeartbeat?void 0!=D.periodicHeartbeatInterval&&(D=1E3*D.periodicHeartbeatInterval,D!=b.configHeartBeatTimer&&(window.clearInterval(b.activityInterval),b.activityInterval=window.setInterval(F,D))):window.clearInterval(b.activityInterval);
A({context:N,pageViewId:u(),minXOffset:mb,minYOffset:ob,maxXOffset:nb,maxYOffset:pb});P()},y=new Date;window.setTimeout(function(){v(b.callback,(f||[]).concat(k?k():[]))},2E3);var F=function(){var A=new Date;if(y.getTime()+b.configHeartBeatTimer>A.getTime()||Jb+b.configHeartBeatTimer>A.getTime())y=A,v(b.callback,(f||[]).concat(k?k():[]))};b.activityInterval=window.setInterval(F,b.configHeartBeatTimer)}function W(b){var f=b.minimumVisitLength,k=b.heartbeatDelay;b=b.callback;if(Yc(f)&&Yc(k))return{configMinimumVisitLength:1E3*
f,configHeartBeatTimer:1E3*k,callback:b};la.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function ra(b){var f=b.context,k=b.minXOffset,v=b.minYOffset,y=b.maxXOffset,F=b.maxYOffset;b=document.title;b!==Oa&&(Oa=b,db=void 0);b=Pa;var A=b.track,N=J(Qa||Ba),D=Zc(db||Oa),S=J(tb||Za);k=Math.round(k);y=Math.round(y);v=Math.round(v);F=Math.round(F);var da=gb();da.add("e","pp");da.add("url",N);da.add("page",D);da.add("refr",S);k&&!isNaN(Number(k))&&da.add("pp_mix",k.toString());
y&&!isNaN(Number(y))&&da.add("pp_max",y.toString());v&&!isNaN(Number(v))&&da.add("pp_miy",v.toString());F&&!isNaN(Number(F))&&da.add("pp_may",F.toString());A.call(b,da,f)}function Xa(b){if(q.trackerConfigUrl)ub(q.trackerConfigUrl),Ra=window.setInterval(ub,6E4*b,q.trackerConfigUrl);else{var f=w.split("js-")[1];f="https://drt1fhpy4haqm.cloudfront.net/js/"+q.convivaCustomerKey+"/"+f+"/remote_config.json";ub(f);Ra=window.setInterval(ub,6E4*b,f)}}var Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc,
ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,ba={cacheRefreshInterval:60,base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{},convivaVideoEventTrackingConfiguration:{},ajaxTrackingConfiguration:{blocklist:["*"]},networkRequestTrackingConfiguration:{blocklist:["*"]}},M={},Ra=null;if(window.localStorage){var md=localStorage.getItem("ConvivaRemoteConfig")?localStorage.getItem("ConvivaRemoteConfig"):
JSON.stringify(M);var pc=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else pc="https://appgw.conviva.com",md=JSON.stringify(M);x=q.gatewayUrl?q.gatewayUrl:pc?pc:"https://appgw.conviva.com";r||(r="CAT");var R=JSON.parse(md);M.base64="undefined"!=typeof R.base64?R.base64:ba.base64;M.cacheRefreshInterval="undefined"!=typeof R.cacheRefreshInterval?R.cacheRefreshInterval:ba.cacheRefreshInterval;M.linkClickTracking="undefined"!=typeof R.linkClickTracking?
R.linkClickTracking:ba.linkClickTracking;M.buttonClickTracking="undefined"!=typeof R.buttonClickTracking?R.buttonClickTracking:ba.buttonClickTracking;M.exceptionAutotracking="undefined"!=typeof R.exceptionAutotracking?R.exceptionAutotracking:ba.exceptionAutotracking;M.enablePeriodicHeartbeat="undefined"!=typeof R.enablePeriodicHeartbeat?R.enablePeriodicHeartbeat:ba.enablePeriodicHeartbeat;M.periodicHeartbeatInterval="undefined"!=typeof R.periodicHeartbeatInterval?R.periodicHeartbeatInterval:ba.periodicHeartbeatInterval;
M.customEventTrackingConfiguration="undefined"!=typeof R.customEventTrackingConfiguration?R.customEventTrackingConfiguration:aa({},ba.customEventTrackingConfiguration);M.convivaVideoEventTrackingConfiguration="undefined"!=typeof R.convivaVideoEventTrackingConfiguration?R.convivaVideoEventTrackingConfiguration:aa({},ba.convivaVideoEventTrackingConfiguration);M.ajaxTrackingConfiguration="undefined"!=typeof R.ajaxTrackingConfiguration?R.ajaxTrackingConfiguration:aa({},ba.ajaxTrackingConfiguration);M.networkRequestTrackingConfiguration=
"undefined"!=typeof R.networkRequestTrackingConfiguration?R.networkRequestTrackingConfiguration:aa({},ba.networkRequestTrackingConfiguration);try{var nd=XMLHttpRequest,od=null===(Ob=null===window||void 0===window?void 0:window.fetch)||void 0===Ob?void 0:Ob.bind(window);if(nd){var be=function(b){var f={};b.trim().split(/[\r\n]+/).forEach(function(k){k=k.split(":");var v=k[1];f[k[0].trim()]=null===v||void 0===v?void 0:v.trim()});return f},vb=function(b,f,k){try{var v={status:null===b||void 0===b?void 0:
b.status,statusText:(""!==(null===b||void 0===b?void 0:b.statusText)?null===b||void 0===b?void 0:b.statusText:void 0)||("load"!=k?k:void 0),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};k=void 0;try{k=be(b.getAllResponseHeaders()),v.headers=k}catch(y){}try{v.body=null===b||void 0===b?void 0:b.response}catch(y){}t.trackNetworkRequest({requestDetails:f,responseDetails:v})}catch(y){console.warn("Conviva App Tracker:: Unable to track network request error while handleResponse ".concat(y))}};
window.XMLHttpRequest=function(){var b=new nd;try{var f,k,v={},y,F=b.setRequestHeader;b.setRequestHeader=function(D,S){v[D]=S;F.call(this,D,S)};var A=b.open;b.open=function(){for(var D=[],S=0;S<arguments.length;S++)D[S]=arguments[S];f=D[0];k=D[1];try{/^(?:[a-z]+:)?\/\//i.test(k)||(k=0===k.indexOf("/")?window.location.origin+k:window.location.origin+"/"+k)}catch(da){}A.call(b,D[0],D[1],!0)};var N=b.send;b.send=function(D){try{N.call(b,D),y={method:f,url:k,headers:v,body:D,requestTimestamp:null===Date||
void 0===Date?void 0:Date.now(),requestTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())}}catch(S){console.warn("Conviva App Tracker:: Unable to track network request while send ".concat(S))}};b.addEventListener("load",function(){return vb(b,y,"load")});b.addEventListener("error",function(){return vb(b,y,"error")});b.addEventListener("abort",function(){return vb(b,y,"abort")});b.addEventListener("timeout",function(){return vb(b,
y,"timeout")})}catch(D){console.warn("Conviva App Tracker:: Unable to track network request while interceptRequest ".concat(D))}return b}}if(od){var pd=function(b){var f={};b.forEach(function(k,v){f[v]=k});return f};window.fetch=function(b,f){var k=od(b,f);b=new Request(b,f);try{var v=void 0;try{v=pd(b.headers)}catch(A){}var y=void 0;try{y=null===f||void 0===f?void 0:f.body}catch(A){}var F={method:b.method,url:b.url,headers:v,body:y,requestTimestamp:null===Date||void 0===Date?void 0:Date.now(),requestTime:(null===
performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};k.then(function(A){try{var N=pd(A.headers)}catch(S){}var D={status:A.status,statusText:""!==(null===A||void 0===A?void 0:A.statusText)?null===A||void 0===A?void 0:A.statusText:void 0,headers:N,size:0,responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};
A.clone().json().then(function(S){D.body=S;t.trackNetworkRequest({requestDetails:F,responseDetails:D})})["catch"](function(){t.trackNetworkRequest({requestDetails:F,responseDetails:D})})})["catch"](function(A){A={statusText:A.toString(),responseTimestamp:null===Date||void 0===Date?void 0:Date.now(),responseTime:(null===performance||void 0===performance?void 0:performance.now())||(null===Date||void 0===Date?void 0:Date.now())};t.trackNetworkRequest({requestDetails:F,responseDetails:A})})}catch(A){console.warn("Conviva App Tracker:: Unable to track network request while fetch interceptRequest ".concat(A))}return k}}}catch(b){console.warn("Conviva App Tracker:: Unable to track network request ".concat(b))}var ce=
q.convivaCustomerKey;if(window.XMLHttpRequest){var Sa=new XMLHttpRequest;Sa.onreadystatechange=function(){try{if(4==Sa.readyState)if(200==Sa.status){var b=JSON.parse(Sa.response);b.cacheRefreshInterval||(b.cacheRefreshInterval=ba.cacheRefreshInterval);M.cacheRefreshInterval!=b.cacheRefreshInterval&&(M.cacheRefreshInterval=b.cacheRefreshInterval,"number"===typeof Ra&&window.clearInterval(Ra),Xa(b.cacheRefreshInterval));l(b,ba)}else try{var f=new XMLHttpRequest;f.onreadystatechange=function(){try{if(4==
f.readyState)if(200==f.status){var k=JSON.parse(f.response);l(k,ba)}else try{var v=new XMLHttpRequest;v.onreadystatechange=function(){try{if(4==v.readyState&&200==v.status){var y=JSON.parse(v.response);l(y,ba)}}catch(F){console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(F))}};v.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0);v.send()}catch(y){}}catch(y){console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(y))}};f.open("GET",
"https://drt1fhpy4haqm.cloudfront.net/js/"+ce+"/remote_config.json",!0);f.send()}catch(k){}}catch(k){console.warn("Conviva App Tracker:: Error in fetching remote-config ".concat(k))}};var ub=function(b){try{Sa.open("GET",b,!0),Sa.send()}catch(f){}};"number"===typeof Ra&&window.clearInterval(Ra);Xa(M.cacheRefreshInterval)}q.eventMethod=null!==(Pb=q.eventMethod)&&void 0!==Pb?Pb:"post";var hd=function(b){var f;return null!==(f=b.stateStorageStrategy)&&void 0!==f?f:"cookieAndLocalStorage"},id=function(b){var f,
k;return"boolean"===typeof b.anonymousTracking?!1:null!==(k=!0===(null===(f=b.anonymousTracking)||void 0===f?void 0:f.withSessionTracking))&&void 0!==k?k:!1},jd=function(b){var f,k;return"boolean"===typeof b.anonymousTracking?!1:null!==(k=!0===(null===(f=b.anonymousTracking)||void 0===f?void 0:f.withServerAnonymisation))&&void 0!==k?k:!1};p.push(function(){return{beforeTrack:function(b){var f=V("ses"),k=fa();qc=rc?!!pa(rc):!1;qd||qc?na():("0"===k[0]?(Ha=f||"none"==T?k[6]:Ya(k),ta=k[3]):(new Date).getTime()-
sc>1E3*fd&&(ta++,Ha=Ya(k,ta)),Hb(k),-1===k[10]&&(f=b.build(),k[8]=f.eid,f=f.dtm||f.ttm,k[9]=f?parseInt(f):void 0),k[10]+=1,b.add("uid",Na?null:Ia),K(),b.add("refr",J(tb||Za)),document&&b.add("page",document.title),b.add("url",J(Qa||Ba)),!de||ab||Na||(f=k[9],f={userId:k[1],sessionId:k[6],eventIndex:k[10],sessionIndex:k[3],previousSessionId:k[7]||null,storageMechanism:"localStorage"==T?"LOCAL_STORAGE":"COOKIE_1",firstEventId:k[8]||null,firstEventTimestamp:f?(new Date(f)).toISOString():null},b.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",
data:f})),"none"!=T&&(qa(k),I()),sc=(new Date).getTime())}}}());(null!==(Rb=null===(Qb=null===q||void 0===q?void 0:q.contexts)||void 0===Qb?void 0:Qb.webPage)&&void 0!==Rb?Rb:1)&&p.push(E());p.push(function(){return{contexts:function(){var b=bb,f=sb.toString(),k=ee;try{var v=window.localStorage.getItem(Lb+"."+Mb),y=JSON.parse(v||"{}");"{}"!==y&&"undefined"!==typeof y&&"undefined"!==typeof y[cb]&&(Ca=y[cb]);2147483647<=Ca?Ca=0:Ca++;C();var F=Ca}catch(A){console.warn(A),F=void 0}b={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-2",
data:{clid:b,iid:f,ck:k,eventIndex:F}};f={eventIndex:fe++};null!=tc&&(f.previousEventTimestamp=tc);tc=(new Date).toISOString();return[b,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:f}]}}}());p.push(function(){return{contexts:function(){return[{schema:"iglu:com.conviva/custom_tags/jsonschema/1-0-0",data:{data:Nb}}]}}}());p.push.apply(p,null!==(Sb=q.plugins)&&void 0!==Sb?Sb:[]);var Pa=Pd({base64:M.base64,corePlugins:p,callback:function(b){qd||qc||ua.enqueueRequest(b.build(),uc)},linkClickTracking:M.linkClickTracking,
buttonClickTracking:M.buttonClickTracking,customEvent:!0,exceptionAutotracking:M.exceptionAutotracking,enablePeriodicHeartbeat:M.enablePeriodicHeartbeat,periodicHeartbeatInterval:M.periodicHeartbeatInterval,customEventTrackingConfiguration:M.customEventTrackingConfiguration,convivaVideoEventTrackingConfiguration:M.convivaVideoEventTrackingConfiguration,ajaxTrackingConfiguration:M.ajaxTrackingConfiguration,networkRequestTrackingConfiguration:M.networkRequestTrackingConfiguration}),Fa=bd(window.location.hostname,
window.location.href,Fb()),cd=$c(Fa[0]),Ba=Fa[1],Za=Fa[2],tb,ge=null!==(Tb=q.platform)&&void 0!==Tb?Tb:"web",uc=ja(x),he=null!==(Ub=q.postPath)&&void 0!==Ub?Ub:"/"+q.convivaCustomerKey+"/ctp",ie=null!==(Vb=q.appId)&&void 0!==Vb?Vb:"",ee=null!==(Wb=q.convivaCustomerKey)&&void 0!==Wb?Wb:"",Qa,Nb={},Oa=document.title,db,ae=null!==(Xb=q.resetActivityTrackingOnPageView)&&void 0!==Xb?Xb:!0,dd,ed,Ma=null!==(Yb=q.cookieName)&&void 0!==Yb?Yb:"_sp_",$a=null!==(Zb=q.cookieDomain)&&void 0!==Zb?Zb:void 0,Ib="/",
qb=null!==($b=q.cookieSameSite)&&void 0!==$b?$b:"None",rb=null!==(ac=q.cookieSecure)&&void 0!==ac?ac:!0,rd=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,qd="undefined"!==typeof q.respectDoNotTrack?q.respectDoNotTrack&&("yes"===rd||"1"===rd):!1,rc,gd=null!==(bc=q.cookieLifetime)&&void 0!==bc?bc:63072E3,fd=null!==(cc=q.sessionCookieTimeout)&&void 0!==cc?cc:1800,ab=id(q),Kb=jd(q),Na=!!q.anonymousTracking,T=hd(q),Lb="Conviva",Mb="sdkConfig",cb="eventIndex",bb,sb,Ca=-1,fe=0,Jb,sc=(new Date).getTime(),
mb,nb,ob,pb,Ga,lb,Ha,ta=1,Ia,ua=Wd(m,n,"localStorage"==T||"cookieAndLocalStorage"==T,q.eventMethod,he,null!==(dc=q.bufferSize)&&void 0!==dc?dc:1,null!==(ec=q.maxPostBytes)&&void 0!==ec?ec:4E4,null!==(fc=q.maxGetBytes)&&void 0!==fc?fc:0,null!==(gc=q.useStm)&&void 0!==gc?gc:!0,null!==(hc=q.maxLocalStorageQueueSize)&&void 0!==hc?hc:1E3,null!==(ic=q.connectionTimeout)&&void 0!==ic?ic:5E3,Kb,null!==(jc=q.customHeaders)&&void 0!==jc?jc:{},null!==(kc=q.withCredentials)&&void 0!==kc?kc:!0,null!==(lc=q.retryStatusCodes)&&
void 0!==lc?lc:[],(null!==(mc=q.dontRetryStatusCodes)&&void 0!==mc?mc:[]).concat([400,401,403,410,422])),kd=!1,tc,ld=!1,ka={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:ra}}},de=null!==(oc=null===(nc=q.contexts)||void 0===nc?void 0:nc.session)&&void 0!==oc?oc:!1,qc;q.hasOwnProperty("discoverRootDomain")&&q.discoverRootDomain&&($a=Sd(qb,rb));Pa.setTrackerVersion(w);Pa.setAppId(ie);Pa.setPlatform(ge);ma();ea();ua.setCustomHeaders({"x-client-id":""+
bb});q.crossDomainLinker&&L(q.crossDomainLinker);var $d=function(b){try{return"object"===typeof JSON.parse(b)}catch(f){return!1}};return aa(aa({},{getDomainSessionIndex:function(){return ta},getPageViewId:function(){return u()},newSession:function(){var b=fa();"0"===b[0]?(Ha="none"!=T?Ya(b):b[6],ta=b[3],I()):(ta++,Ha=Ya(b,ta));Hb(b);"none"!=T&&(qa(b),I());sc=(new Date).getTime()},getCookieName:function(b){return Ma+b+"."+Ga},getUserId:function(){return Ia},getDomainUserId:function(){return fa()[1]},
getDomainUserInfo:function(){return fa()},setReferrerUrl:function(b){tb=b},setCustomUrl:function(b){K();var f=Ba,k;H(b)?Qa=b:"/"===b.slice(0,1)?Qa=H(f)+"://"+Eb(f)+b:(f=J(f),0<=(k=f.indexOf("?"))&&(f=f.slice(0,k)),(k=f.lastIndexOf("/"))!==f.length-1&&(f=f.slice(0,k+1)),Qa=f+b)},setDocumentTitle:function(b){Oa=document.title;db=b},discardHashTag:function(b){dd=b},discardBrace:function(b){ed=b},setCookiePath:function(b){Ib=b;ma()},setVisitorCookieTimeout:function(b){gd=b},crossDomainLinker:function(b){L(b)},
enableActivityTracking:function(b){ka.configurations.pagePing||(ka.enabled=!0,ka.configurations.pagePing=W(aa(aa({},b),{callback:ra})))},enableActivityTrackingCallback:function(b){ka.configurations.callback||(ka.enabled=!0,ka.configurations.callback=W(b))},updatePageActivity:function(){ia()},setOptOutCookie:function(b){rc=b},setUserId:function(b){Ia=b},setUserIdFromLocation:function(b){K();Ia=Wa(b,Ba)},setUserIdFromReferrer:function(b){K();Ia=Wa(b,Za)},setUserIdFromCookie:function(b){Ia=pa(b)},setCollectorUrl:function(b){uc=
ja(b);ua.setCollectorUrl(uc)},setBufferSize:function(b){ua.setBufferSize(b)},flushBuffer:function(b){void 0===b&&(b={});ua.executeQueue();b.newBufferSize&&ua.setBufferSize(b.newBufferSize)},trackPageView:function(b){void 0===b&&(b={});Gb(b)},trackVideoEvent:function(b){void 0===b&&(b={});try{var f=this.core.getConfig();""!=b.name&&void 0!=b.name||console.warn("Conviva App Tracker:: Video event could not be tracked due to missing name property!!");if(void 0!=f.convivaVideoEventTrackingConfiguration)if(void 0!=
f.convivaVideoEventTrackingConfiguration.blocklist&&0<f.convivaVideoEventTrackingConfiguration.blocklist.length){var k=f.convivaVideoEventTrackingConfiguration.blocklist;-1==k.indexOf("*")&&-1==k.indexOf(""+b.name)&&this.core.track(Db({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp)}else this.core.track(Db({name:b.name,
sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),b.context,b.timestamp);else this.core.track(Db({name:b.name,sid:b.sid,iid:b.iid,clid:b.clid,st:b.st,sst:b.sst,an:b.an,cl:b.cl,lv:b.lv,pn:b.pn,vid:b.vid,fw:b.fw,fwv:b.fwv,mn:b.mn,mv:b.mv,url:b.url,tags:b.tags,cen:b.cen,ced:b.ced,oldsc:b.old,newsc:b["new"],err:b.err,br:b.br,ft:b.ft}),
b.context,b.timestamp)}catch(v){console.warn("Conviva App Tracker:: Video event could not be tracked due to an exception!!",v)}},trackAjaxEvent:function(b){void 0===b&&(b={});try{if("xmlhttprequest"===b.initiatorType||"fetch"===b.initiatorType){var f=this.core.getConfig();if(""==b.name||void 0==b.name)console.warn("Conviva App Tracker:: Ajax request could not be tracked due to missing URL property!!");else if(void 0!=f.ajaxTrackingConfiguration&&void 0!=f.ajaxTrackingConfiguration.blocklist&&0<f.ajaxTrackingConfiguration.blocklist.length){var k=
f.ajaxTrackingConfiguration.blocklist;if(-1==k.indexOf("*")){f=!1;for(var v=0;v<k.length;v++)""!==k[v]&&-1!==b.name.toLowerCase().indexOf(k[v].toLowerCase())&&(f=!0);if(!f){var y=this.core,F=y.track;var A=Va({event:{schema:"iglu:com.conviva/network_request/jsonschema/1-0-2",data:jb({targetUrl:b.name,responseStatusCode:b.responseStatus,duration:b.duration})}});F.call(y,A,b.context,b.timestamp)}}}}}catch(N){console.warn("Conviva App Tracker:: Ajax request could not be tracked due to an exception!!",
N)}},trackNetworkRequest:function(b){var f,k,v,y,F,A,N,D,S,da,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc;void 0===b&&(b={});try{var je=this.core.getConfig(),Hc=b.responseDetails.responseTime-b.requestDetails.requestTime;try{Hc=parseFloat(Hc.toFixed(3))}catch(U){console.warn("Conviva App Tracker:: exception while converting duration to 3 decimal",U)}var sd=function(U){try{var va=void 0;"undefined"!=typeof U&&null!==U&&(va=U["content-type"]||U["Content-Type"]||U["Content-type"]);return va}catch(ke){}},td=
function(U){try{var va=void 0;"undefined"!=typeof U&&null!==U&&(va=U["content-length"]||U["Content-Length"]||U["Content-length"]);return"undefined"==typeof va||null===va||isNaN(va)?va:Number(va)}catch(ke){}},le=td(null===(k=null===b||void 0===b?void 0:b.requestDetails)||void 0===k?void 0:k.headers),Ic=td(null===(v=null===b||void 0===b?void 0:b.responseDetails)||void 0===v?void 0:v.headers),eb=sd(null===(y=null===b||void 0===b?void 0:b.requestDetails)||void 0===y?void 0:y.headers),Jc=sd(null===(F=
null===b||void 0===b?void 0:b.responseDetails)||void 0===F?void 0:F.headers);try{var Ta=(f={targetUrl:null===(A=null===b||void 0===b?void 0:b.requestDetails)||void 0===A?void 0:A.url,method:null===(N=null===b||void 0===b?void 0:b.requestDetails)||void 0===N?void 0:N.method,responseStatusCode:null===(D=null===b||void 0===b?void 0:b.responseDetails)||void 0===D?void 0:D.status,responseStatusText:null===(S=null===b||void 0===b?void 0:b.responseDetails)||void 0===S?void 0:S.statusText},f[ca.request_headers]=
null===(da=null===b||void 0===b?void 0:b.requestDetails)||void 0===da?void 0:da.headers,f[ca.response_headers]=null===(vc=null===b||void 0===b?void 0:b.responseDetails)||void 0===vc?void 0:vc.headers,f.requestSize=le,f.responseSize=Ic,f.duration=Hc,f.requestTimestamp=null===(wc=null===b||void 0===b?void 0:b.requestDetails)||void 0===wc?void 0:wc.requestTimestamp,f.responseTimestamp=null===(xc=null===b||void 0===b?void 0:b.responseDetails)||void 0===xc?void 0:xc.responseTimestamp,f.contentType=eb,
f);if("undefined"!==typeof eb&&(eb.toLowerCase().includes("text/plain")||eb.toLowerCase().includes("json"))||"undefined"===typeof eb)if("string"===typeof(null===(yc=null===b||void 0===b?void 0:b.requestDetails)||void 0===yc?void 0:yc.body))try{1E4>=(null===(zc=null===b||void 0===b?void 0:b.requestDetails)||void 0===zc?void 0:zc.body.length)&&(Ta[ca.request_body]=JSON.parse(null===(Ac=null===b||void 0===b?void 0:b.requestDetails)||void 0===Ac?void 0:Ac.body))}catch(U){}else"object"===typeof(null===
(Bc=null===b||void 0===b?void 0:b.requestDetails)||void 0===Bc?void 0:Bc.body)&&(Ta[ca.request_body]=null===(Cc=null===b||void 0===b?void 0:b.requestDetails)||void 0===Cc?void 0:Cc.body);if("undefined"!==typeof Jc&&(Jc.toLowerCase().includes("text/plain")||Jc.toLowerCase().includes("json"))&&"undefined"!==typeof Ic&&1E4>=Ic)if("string"===typeof(null===(Dc=null===b||void 0===b?void 0:b.responseDetails)||void 0===Dc?void 0:Dc.body))try{Ta[ca.response_body]=JSON.parse(null===(Ec=null===b||void 0===b?
void 0:b.responseDetails)||void 0===Ec?void 0:Ec.body)}catch(U){}else"object"===typeof(null===(Fc=null===b||void 0===b?void 0:b.responseDetails)||void 0===Fc?void 0:Fc.body)&&(Ta[ca.response_body]=null===(Gc=null===b||void 0===b?void 0:b.responseDetails)||void 0===Gc?void 0:Gc.body);var wb=je.networkRequestTrackingConfiguration;if(wb&&wb.enabled){var xb=wb.blocklist;if(-1==xb.indexOf("*")){f=!1;for(k=0;k<xb.length;k++)""!==xb[k]&&-1!==Ta.targetUrl.toLowerCase().indexOf(xb[k].toLowerCase())&&(f=!0);
f||this.core.track(Rd(Td(Ta,wb.collectattr)),b.context,b.timestamp)}}}catch(U){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",U)}}catch(U){console.warn("Conviva App Tracker:: Network request could not be tracked due to an exception!!",U)}},setCustomTags:function(b){void 0===b&&(b={});Z(b)},unsetCustomTags:function(b){void 0===b&&(b={});sa(b)},preservePageViewId:function(){kd=!0},disableAnonymousTracking:function(b){q.anonymousTracking=!1;oa(b);ea();
ua.executeQueue()},enableAnonymousTracking:function(b){var f;q.anonymousTracking=null!==(f=b&&(null===b||void 0===b?void 0:b.options))&&void 0!==f?f:!0;oa(b);ab||La()},clearUserData:na}),{id:m,namespace:r,core:Pa,sharedState:n})}(a,c,d,e,h,g);var t=aa(aa({},a),{addPlugin:function(m){var r,w;t.core.addPlugin(m);null===(w=(r=m.plugin).activateBrowserPlugin)||void 0===w?void 0:w.call(r,t)}});p.forEach(function(m){var r;null===(r=m.activateBrowserPlugin)||void 0===r?void 0:r.call(m,t)});return t}function G(a,
c){try{var d=null!==a&&void 0!==a?a:Object.keys(fb);a=fb;for(var e=[],h=0;h<d.length;h++){var g=d[h];a.hasOwnProperty(g)?e.push(a[g]):la.warn(g+" not configured")}e.forEach(c)}catch(l){la.error("Function failed",l)}}function ud(a,c,d,e,h,g){return fb.hasOwnProperty(a)?null:(fb[a]=Yd(a,c,d,e,h,g),fb[a])}function me(){function a(){try{"hidden"==h.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}catch(l){console.warn("Conviva App Tracker:: Error in visibilityChangeHandler of constructor ".concat(l))}}
function c(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function d(){h.addEventListener?h.addEventListener("DOMContentLoaded",function p(){h.removeEventListener("DOMContentLoaded",p,!1);c()}):h.attachEvent&&h.attachEvent("onreadystatechange",function t(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",t),c())});za(g,"load",c,!1)}var e=new ne,h=document,g=window;h.visibilityState&&za(h,"visibilitychange",
a,!1);za(g,"beforeunload",function(){try{e.bufferFlushers.forEach(function(l){l(!1)})}catch(l){console.warn("Conviva App Tracker:: Error in flushBuffers of constructor ".concat(l))}},!1);"loading"===document.readyState?d():c();return e}var aa=function(){aa=Object.assign||function(a){for(var c,d=1,e=arguments.length;d<e;d++){c=arguments[d];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h])}return a};return aa.apply(this,arguments)},Da={},vd="undefined"!=typeof crypto&&crypto.getRandomValues&&
crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(vd){var wd=new Uint8Array(16);Da=function(){vd(wd);return wd}}else{var xd=Array(16);Da=function(){for(var a=0,c;16>a;a++)0===(a&3)&&(c=4294967296*Math.random()),xd[a]=c>>>((a&3)<<3)&255;return xd}}for(var X=[],yb=0;256>yb;++yb)X[yb]=(yb+256).toString(16).substr(1);var yd=function(a,c){c=c||0;return[X[a[c++]],X[a[c++]],X[a[c++]],X[a[c++]],
"-",X[a[c++]],X[a[c++]],"-",X[a[c++]],X[a[c++]],"-",X[a[c++]],X[a[c++]],"-",X[a[c++]],X[a[c++]],X[a[c++]],X[a[c++]],X[a[c++]],X[a[c++]]].join("")},oe=Da,zd,Kc,Lc=0,Mc=0,pe=Da;Da=function(a,c,d){d=c&&d||0;"string"==typeof a&&(c="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||pe)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(c)for(var e=0;16>e;++e)c[d+e]=a[e];return c||yd(a)};Da.v1=function(a,c,d){d=c&&d||0;var e=c||[];a=a||{};var h=a.node||zd,g=void 0!==a.clockseq?a.clockseq:Kc;if(null==h||
null==g){var l=oe();null==h&&(h=zd=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]);null==g&&(g=Kc=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var p=void 0!==a.nsecs?a.nsecs:Mc+1,t=l-Lc+(p-Mc)/1E4;0>t&&void 0===a.clockseq&&(g=g+1&16383);(0>t||l>Lc)&&void 0===a.nsecs&&(p=0);if(1E4<=p)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Lc=l;Mc=p;Kc=g;l+=122192928E5;a=(1E4*(l&268435455)+p)%4294967296;e[d++]=a>>>24&255;e[d++]=a>>>16&255;e[d++]=a>>>8&255;e[d++]=a&255;a=l/4294967296*
1E4&268435455;e[d++]=a>>>8&255;e[d++]=a&255;e[d++]=a>>>24&15|16;e[d++]=a>>>16&255;e[d++]=g>>>8|128;e[d++]=g&255;for(g=0;6>g;++g)e[d+g]=h[g];return c?c:yd(e)};var ya=Da.v4=Da,xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",wa;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(wa||(wa={}));var la=function(a){void 0===a&&(a=wa.warn);return{setLogLevel:function(c){a=wa[c]?c:wa.warn},warn:function(c,d){for(var e=[],h=
2;h<arguments.length;h++)e[h-2]=arguments[h];a>=wa.warn&&"undefined"!==typeof console&&(h="Snowplow: "+c,d?console.warn.apply(console,ha([h+"\n",d],e,!1)):console.warn.apply(console,ha([h],e,!1)))},error:function(c,d){for(var e=[],h=2;h<arguments.length;h++)e[h-2]=arguments[h];a>=wa.error&&"undefined"!==typeof console&&(h="Snowplow: "+c+"\n",d?console.error.apply(console,ha([h+"\n",d],e,!1)):console.error.apply(console,ha([h],e,!1)))},debug:function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-
1]=arguments[e];a>=wa.debug&&"undefined"!==typeof console&&console.debug.apply(console,ha(["Snowplow: "+c],d,!1))},info:function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];a>=wa.info&&"undefined"!==typeof console&&console.info.apply(console,ha(["Snowplow: "+c],d,!1))}}}(),Ad;(function(a){a.response_body="rsb";a.request_body="rqb";a.response_headers="rsh";a.request_headers="rqh"})(Ad||(Ad={}));var Bd={},Cd={};(function(){var a={rotl:function(c,d){return c<<d|c>>>32-d},rotr:function(c,
d){return c<<32-d|c>>>d},endian:function(c){if(c.constructor==Number)return a.rotl(c,8)&16711935|a.rotl(c,24)&4278255360;for(var d=0;d<c.length;d++)c[d]=a.endian(c[d]);return c},randomBytes:function(c){for(var d=[];0<c;c--)d.push(Math.floor(256*Math.random()));return d},bytesToWords:function(c){for(var d=[],e=0,h=0;e<c.length;e++,h+=8)d[h>>>5]|=c[e]<<24-h%32;return d},wordsToBytes:function(c){for(var d=[],e=0;e<32*c.length;e+=8)d.push(c[e>>>5]>>>24-e%32&255);return d},bytesToHex:function(c){for(var d=
[],e=0;e<c.length;e++)d.push((c[e]>>>4).toString(16)),d.push((c[e]&15).toString(16));return d.join("")},hexToBytes:function(c){for(var d=[],e=0;e<c.length;e+=2)d.push(parseInt(c.substr(e,2),16));return d},bytesToBase64:function(c){for(var d=[],e=0;e<c.length;e+=3)for(var h=c[e]<<16|c[e+1]<<8|c[e+2],g=0;4>g;g++)8*e+6*g<=8*c.length?d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-g)&63)):d.push("=");return d.join("")},base64ToBytes:function(c){c=c.replace(/[^A-Z0-9+\/]/ig,
"");for(var d=[],e=0,h=0;e<c.length;h=++e%4)0!=h&&d.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(e-1))&Math.pow(2,-2*h+8)-1)<<2*h|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c.charAt(e))>>>6-2*h);return d}};Cd=a})();var Nc={utf8:{stringToBytes:function(a){return Nc.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(Nc.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var c=
[],d=0;d<a.length;d++)c.push(a.charCodeAt(d)&255);return c},bytesToString:function(a){for(var c=[],d=0;d<a.length;d++)c.push(String.fromCharCode(a[d]));return c.join("")}}},Dd=Nc;(function(){var a=Cd,c=Dd.utf8,d=Dd.bin,e=function(h,g){var l=a.wordsToBytes,p=h;p.constructor==String?p=c.stringToBytes(p):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(p)?p=Array.prototype.slice.call(p,0):Array.isArray(p)||(p=p.toString());h=a.bytesToWords(p);var t=8*p.length;p=[];var m=
1732584193,r=-271733879,w=-1732584194,x=271733878,n=-1009589776;h[t>>5]|=128<<24-t%32;h[(t+64>>>9<<4)+15]=t;for(t=0;t<h.length;t+=16){for(var q=m,K=r,O=w,L=x,J=n,H=0;80>H;H++){if(16>H)p[H]=h[t+H];else{var V=p[H-3]^p[H-8]^p[H-14]^p[H-16];p[H]=V<<1|V>>>31}V=(m<<5|m>>>27)+n+(p[H]>>>0)+(20>H?(r&w|~r&x)+1518500249:40>H?(r^w^x)+1859775393:60>H?(r&w|r&x|w&x)-1894007588:(r^w^x)-899497514);n=x;x=w;w=r<<30|r>>>2;r=m;m=V}m+=q;r+=K;w+=O;x+=L;n+=J}l=l.call(a,[m,r,w,x,n]);return g&&g.asBytes?l:g&&g.asString?d.bytesToString(l):
a.bytesToHex(l)};e._blocksize=16;e._digestsize=20;Bd=e})();var Zd=Bd,ca;(function(a){a.response_body="rsb";a.request_body="rqb";a.response_headers="rsh";a.request_headers="rqh"})(ca||(ca={}));var fb={},ne=function(){return function(){this.outQueues=[];this.bufferFlushers=[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),zb="undefined"!==typeof window?me():void 0;B.addGlobalContexts=function(a,c){G(c,function(d){d.core.addGlobalContexts(a)})};B.addPlugin=function(a,c){G(c,function(d){d.addPlugin(a)})};
B.clearGlobalContexts=function(a){G(a,function(c){c.core.clearGlobalContexts()})};B.clearUserData=function(a,c){G(c,function(d){d.clearUserData(a)})};B.convivaAppTracker=function(a){void 0===a&&(a={});try{if(zb){var c=ud("CAT","CAT","js-".concat("0.4.3"),"",zb,a);document&&document.addEventListener&&document.addEventListener("convivaVideoEvent",function(d){d&&c&&c.trackVideoEvent(d)});PerformanceObserver&&(new PerformanceObserver(function(d){d.getEntries().forEach(function(e){c&&c.trackAjaxEvent(e)})})).observe({type:"resource",
buffered:!0});return c}}catch(d){console.warn("Conviva App Tracker:: Initialisation failed! "+d)}};B.crossDomainLinker=function(a,c){G(c,function(d){d.crossDomainLinker(a)})};B.disableAnonymousTracking=function(a,c){G(c,function(d){d.disableAnonymousTracking(a)})};B.discardBrace=function(a,c){G(c,function(d){d.discardBrace(a)})};B.discardHashTag=function(a,c){G(c,function(d){d.discardHashTag(a)})};B.enableActivityTracking=function(a,c){G(c,function(d){d.enableActivityTracking(a)})};B.enableActivityTrackingCallback=
function(a,c){G(c,function(d){d.enableActivityTrackingCallback(a)})};B.enableAnonymousTracking=function(a,c){G(c,function(d){d.enableAnonymousTracking(a)})};B.flushBuffer=function(a,c){G(c,function(d){d.flushBuffer(a)})};B.newSession=function(a){G(a,function(c){c.newSession()})};B.newTracker=function(a,c,d){void 0===d&&(d={});if(zb)return ud(a,a,"js-".concat("0.4.3"),c,zb,d)};B.preservePageViewId=function(a){G(a,function(c){c.preservePageViewId()})};B.removeGlobalContexts=function(a,c){G(c,function(d){d.core.removeGlobalContexts(a)})};
B.setBufferSize=function(a,c){G(c,function(d){d.setBufferSize(a)})};B.setCollectorUrl=function(a,c){G(c,function(d){d.setCollectorUrl(a)})};B.setCookiePath=function(a,c){G(c,function(d){d.setCookiePath(a)})};B.setCustomTags=function(a,c){G(c,function(d){try{d.setCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};B.setCustomUrl=function(a,c){G(c,function(d){d.setCustomUrl(a)})};B.setDocumentTitle=function(a,c){G(c,function(d){d.setDocumentTitle(a)})};B.setOptOutCookie=
function(a,c){G(c,function(d){d.setOptOutCookie(a)})};B.setReferrerUrl=function(a,c){G(c,function(d){d.setReferrerUrl(a)})};B.setUserId=function(a,c){G(c,function(d){d.setUserId(a)})};B.setUserIdFromCookie=function(a,c){G(c,function(d){d.setUserIdFromCookie(a)})};B.setUserIdFromLocation=function(a,c){G(c,function(d){d.setUserIdFromLocation(a)})};B.setUserIdFromReferrer=function(a,c){G(c,function(d){d.setUserIdFromReferrer(a)})};B.setVisitorCookieTimeout=function(a,c){G(c,function(d){d.setVisitorCookieTimeout(a)})};
B.trackCustomEvent=function(a,c){G(c,function(d){try{var e=d.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");if(void 0!=e.customEventTrackingConfiguration){var h=a.data;try{"string"!==typeof a.data&&(h=JSON.stringify(a.data))}catch(l){}if(void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length){var g=e.customEventTrackingConfiguration.blocklist;-1==g.indexOf("*")&&
-1==g.indexOf(""+a.name)&&d.core.track(Cb({name:a.name,data:h}),a.context,a.timestamp)}else d.core.track(Cb({name:a.name,data:h}),a.context,a.timestamp)}else d.core.track(Cb({name:a.name,data:a.data}),a.context,a.timestamp)}catch(l){console.warn("Conviva App Tracker:: Unable to track custom event! "+l)}})};B.trackPageView=function(a,c){G(c,function(d){d.trackPageView(a)})};B.trackSelfDescribingEvent=function(a,c){G(c,function(d){d.core.track(Va({event:a.event}),a.context,a.timestamp)})};B.trackStructEvent=
function(a,c){G(c,function(d){d=d.core;var e=d.track,h=a.category,g=a.action,l=a.label,p=a.property,t=a.value,m=gb();m.add("e","se");m.add("se_ca",h);m.add("se_ac",g);m.add("se_la",l);m.add("se_pr",p);m.add("se_va",null==t?void 0:t.toString());e.call(d,m,a.context,a.timestamp)})};B.unsetCustomTags=function(a,c){G(c,function(d){try{d.unsetCustomTags(a)}catch(e){console.warn("Conviva App Tracker:: Unable to set custom tags data!")}})};B.updatePageActivity=function(a){G(a,function(c){c.updatePageActivity()})};
B.version="0.4.3";Object.defineProperty(B,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
