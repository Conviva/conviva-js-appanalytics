/*!
 * Browser tracker for Snowplow v0.3.2 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

'use strict';(function(x,X){"object"===typeof exports&&"undefined"!==typeof module?X(exports):"function"===typeof define&&define.amd?define(["exports"],X):(x="undefined"!==typeof globalThis?globalThis:x||self,X(x.snowplowBrowserTracking={}))})(this,function(x){function X(a,b,c){if(c||2===arguments.length)for(var e=0,g=b.length,f;e<g;e++)!f&&e in b||(f||(f=Array.prototype.slice.call(b,0,e)),f[e]=b[e]);return a.concat(f||Array.prototype.slice.call(b))}function Nc(a){var b=0,c=0;var e="";var g=[];if(!a)return a;
a+="";do{var f=oa.indexOf(a.charAt(b++));var l=oa.indexOf(a.charAt(b++));e=oa.indexOf(a.charAt(b++));var m=oa.indexOf(a.charAt(b++));var r=f<<18|l<<12|e<<6|m;f=r>>16&255;l=r>>8&255;r&=255;64===e?g[c++]=String.fromCharCode(f):64===m?g[c++]=String.fromCharCode(f,l):g[c++]=String.fromCharCode(f,l,r)}while(b<a.length);e=g.join("");return function(p){return decodeURIComponent(p.split("").map(function(A){return"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/\0+$/,""))}function Va(){var a=
{},b=[],c=[],e=[],g,f=function(l,m){null!=m&&""!==m&&(a[l]=m)};return{add:f,addDict:function(l){for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&f(m,l[m])},addJson:function(l,m,r){r&&ac(r)&&(l={keyIfEncoded:l,keyIfNotEncoded:m,json:r},c.push(l),b.push(l))},addContextEntity:function(l){e.push(l)},getPayload:function(){return a},getJson:function(){return b},withJsonProcessor:function(l){g=l},build:function(){null===g||void 0===g?void 0:g(this,c,e);return a}}}function Oc(a){return function(b,
c,e){for(var g=function(p,A,w){p=JSON.stringify(p);if(a){w=b.add;if(p){var t=0,h=0,z=[];if(p){p=unescape(encodeURIComponent(p));do{var K=p.charCodeAt(t++);var S=p.charCodeAt(t++);var G=p.charCodeAt(t++);var H=K<<16|S<<8|G;K=H>>18&63;S=H>>12&63;G=H>>6&63;H&=63;z[h++]=oa.charAt(K)+oa.charAt(S)+oa.charAt(G)+oa.charAt(H)}while(t<p.length);t=z.join("");p=p.length%3;p=(p?t.slice(0,p-3):t)+"===".slice(p||3)}p=p.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}w.call(b,A,p)}else b.add(w,p)},f=function(p,
A){if(!p){var w=b.getPayload();if(a?w.cx:w.co){p=JSON;var t=p.parse;if(a){if(w=w.cx){switch(4-w.length%4){case 2:w+="==";break;case 3:w+="="}w=w.replace(/-/g,"+").replace(/_/g,"/");w=Nc(w)}}else w=w.co;p=t.call(p,w)}else p=void 0}p?p.data=p.data.concat(A.data):p=A;return p},l=void 0,m=0;m<c.length;m++){var r=c[m];"cx"===r.keyIfEncoded?l=f(l,r.json):g(r.json,r.keyIfEncoded,r.keyIfNotEncoded)}c.length=0;e.length&&(c={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:X([],e,
!0)},l=f(l,c),e.length=0);l&&g(l,"cx","co")}}function ac(a){if(!bc(a))return!1;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function bc(a){return"undefined"!==typeof a&&null!==a&&(a.constructor==={}.constructor||a.constructor===[].constructor)}function Pc(){var a=[],b=[];return{getGlobalPrimitives:function(){return a},getConditionalProviders:function(){return b},addGlobalContexts:function(c){for(var e=[],g=[],f=0;f<c.length;f++){var l=c[f];cc(l)?e.push(l):Ga(l)&&g.push(l)}a=
a.concat(g);b=b.concat(e)},clearGlobalContexts:function(){b=[];a=[]},removeGlobalContexts:function(c){for(var e=function(f){cc(f)?b=b.filter(function(l){return JSON.stringify(l)!==JSON.stringify(f)}):Ga(f)&&(a=a.filter(function(l){return JSON.stringify(l)!==JSON.stringify(f)}))},g=0;g<c.length;g++)e(c[g])},getApplicableContexts:function(c){a:{var e=0;for(var g=c.getJson();e<g.length;e++){var f=g[e];if("ue_px"===f.keyIfEncoded&&"object"===typeof f.json.data&&(f=f.json.data.schema,"string"==typeof f)){e=
f;break a}}e=""}g=c.getPayload().e;f="string"===typeof g?g:"";g=[];var l=mb(a,c,f,e);g.push.apply(g,l);c=Qc(b,c,f,e);g.push.apply(g,c);return g}}}function Rc(a){return{addPluginContexts:function(b){var c=b?X([],b,!0):[];a.forEach(function(e){try{e.contexts&&c.push.apply(c,e.contexts())}catch(g){da.error("Error adding plugin contexts",g)}});return c}}}function Sc(a){if("*"===a[0]||"*"===a[1])return!1;if(0<a.slice(2).length){var b=!1,c=0;for(a=a.slice(2);c<a.length;c++)if("*"===a[c])b=!0;else if(b)return!1;
return!0}return 2==a.length?!0:!1}function dc(a){return(a=a.split("."))&&1<a.length?Sc(a):!1}function ec(a){a=/^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(a);if(null!==a&&dc(a[1]))return a.slice(1,6)}function nb(a){if(a=ec(a)){var b=a[0];return 5===a.length&&dc(b)}return!1}function Tc(a){return Array.isArray(a)&&a.every(function(b){return"string"===typeof b})}function fc(a){return Tc(a)?a.every(function(b){return nb(b)}):
"string"===typeof a?nb(a):!1}function La(a){return ac(a)&&"schema"in a&&"data"in a?"string"===typeof a.schema&&"object"===typeof a.data:!1}function Uc(a){var b=0;if(null!=a&&"object"===typeof a&&!Array.isArray(a)){if(Object.prototype.hasOwnProperty.call(a,"accept"))if(fc(a.accept))b+=1;else return!1;if(Object.prototype.hasOwnProperty.call(a,"reject"))if(fc(a.reject))b+=1;else return!1;return 0<b&&2>=b}return!1}function Wa(a){return"function"===typeof a&&1>=a.length}function Ga(a){return Wa(a)||La(a)}
function gc(a){return Array.isArray(a)&&2===a.length?Array.isArray(a[1])?Wa(a[0])&&a[1].every(Ga):Wa(a[0])&&Ga(a[1]):!1}function hc(a){return Array.isArray(a)&&2===a.length?Uc(a[0])?Array.isArray(a[1])?a[1].every(Ga):Ga(a[1]):!1:!1}function cc(a){return gc(a)||hc(a)}function Vc(a,b){var c=0,e=0,g=a.accept;Array.isArray(g)?a.accept.some(function(f){return Xa(f,b)})&&e++:"string"===typeof g&&Xa(g,b)&&e++;g=a.reject;Array.isArray(g)?a.reject.some(function(f){return Xa(f,b)})&&c++:"string"===typeof g&&
Xa(g,b)&&c++;return 0<e&&0===c?!0:!1}function Xa(a,b){if(!nb(a))return!1;a=ec(a);b=/^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(b);b=null!==b?b.slice(1,6):void 0;if(a&&b){if(!Wc(a[0],b[0]))return!1;for(var c=1;5>c;c++)if(!ic(a[c],b[c]))return!1;return!0}return!1}function Wc(a,b){b=b.split(".");a=a.split(".");if(b&&a){if(b.length!==a.length)return!1;for(var c=0;c<a.length;c++)if(!ic(b[c],a[c]))return!1;return!0}return!1}function ic(a,
b){return a&&b&&"*"===a||a===b}function jc(a){return Array.isArray(a)?a:[a]}function mb(a,b,c,e){var g;a=jc(a).map(function(f){a:if(La(f))f=[f];else{if(Wa(f)){b:{var l=void 0;try{var m={event:b.getPayload(),eventType:c,eventSchema:e};l=f(m);if(Array.isArray(l)&&l.every(La)||La(l)){var r=l;break b}r=void 0;break b}catch(p){}r=void 0}if(La(r)){f=[r];break a}else if(Array.isArray(r)){f=r;break a}}f=void 0}if(f&&0!==f.length)return f});return(g=[]).concat.apply(g,a.filter(function(f){return null!=f&&
f.filter(Boolean)}))}function Qc(a,b,c,e){var g;a=jc(a).map(function(f){a:{if(gc(f)){var l=f[0],m=!1;try{var r={event:b.getPayload(),eventType:c,eventSchema:e};m=l(r)}catch(p){m=!1}if(!0===m){f=mb(f[1],b,c,e);break a}}else if(hc(f)&&Vc(f[0],e)){f=mb(f[1],b,c,e);break a}f=[]}if(f&&0!==f.length)return f});return(g=[]).concat.apply(g,a.filter(function(f){return null!=f&&f.filter(Boolean)}))}function Xc(a){return null==a?{type:"dtm",value:(new Date).getTime()}:"number"===typeof a?{type:"dtm",value:a}:
"ttm"===a.type?{type:"ttm",value:a.value}:{type:"dtm",value:a.value||(new Date).getTime()}}function Yc(a){void 0===a&&(a={});var b=a.base64,c=a.corePlugins,e=null!==c&&void 0!==c?c:[];b=function(f,l,m){function r(h,z){h=A.getApplicableContexts(h);var K=[];z&&z.length&&K.push.apply(K,z);h&&h.length&&K.push.apply(K,h);return K}var p=Rc(l),A=Pc(),w=f,t={};return{track:function(h,z,K){h.withJsonProcessor(Oc(w));h.add("eid",pa.v4());h.addDict(t);K=Xc(K);h.add(K.type,K.value.toString());z=r(h,p.addPluginContexts(z));
z=z&&z.length?{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:z}:void 0;void 0!==z&&h.addJson("cx","co",z);l.forEach(function(G){try{G.beforeTrack&&G.beforeTrack(h)}catch(H){da.error("Plugin beforeTrack",H)}});"function"===typeof m&&m(h);var S=h.build();l.forEach(function(G){try{G.afterTrack&&G.afterTrack(S)}catch(H){da.error("Plugin afterTrack",H)}});return S},addPayloadPair:function(h,z){t[h]=z},configuration:a,getConfig:function(){return a},setConfig:function(h){h&&
("undefined"!==typeof h.base64&&(w=a.base64=h.base64),"undefined"!==typeof h.linkClickTracking&&(a.linkClickTracking=h.linkClickTracking),"undefined"!==typeof h.buttonClickTracking&&(a.buttonClickTracking=h.buttonClickTracking),"undefined"!==typeof h.customEvent&&(a.customEvent=h.customEvent),"undefined"!==typeof h.exceptionAutotracking&&(a.exceptionAutotracking=h.exceptionAutotracking),"undefined"!==typeof h.enablePeriodicHeartbeat&&(a.enablePeriodicHeartbeat=h.enablePeriodicHeartbeat),"undefined"!==
typeof h.periodicHeartbeatInterval&&(a.periodicHeartbeatInterval=h.periodicHeartbeatInterval),"undefined"!==typeof h.customEventTrackingConfiguration&&(a.customEventTrackingConfiguration=h.customEventTrackingConfiguration))},getBase64Encoding:function(){return w},setBase64Encoding:function(h){w=h},addPayloadDict:function(h){for(var z in h)Object.prototype.hasOwnProperty.call(h,z)&&(t[z]=h[z])},resetPayloadPairs:function(h){t=bc(h)?h:{}},setTrackerVersion:function(h){t.tv=h},setTrackerNamespace:function(h){t.tna=
h},setAppId:function(h){t.aid=h},setPlatform:function(h){t.p=h},setUserId:function(h){t.uid=h},setScreenResolution:function(h,z){t.res=h+"x"+z},setViewport:function(h,z){t.vp=h+"x"+z},setColorDepth:function(h){t.cd=h},setTimezone:function(h){t.tz=h},setLang:function(h){t.lang=h},setIpAddress:function(h){t.ip=h},setUseragent:function(h){t.ua=h},addGlobalContexts:function(h){A.addGlobalContexts(h)},clearGlobalContexts:function(){A.clearGlobalContexts()},removeGlobalContexts:function(h){A.removeGlobalContexts(h)}}}(null!==
b&&void 0!==b?b:!0,e,a.callback);var g=fa(fa({},b),{addPlugin:function(f){var l,m;f=f.plugin;e.push(f);null===(l=f.logger)||void 0===l?void 0:l.call(f,da);null===(m=f.activateCorePlugin)||void 0===m?void 0:m.call(f,g)}});null===e||void 0===e?void 0:e.forEach(function(f){var l,m;null===(l=f.logger)||void 0===l?void 0:l.call(f,da);null===(m=f.activateCorePlugin)||void 0===m?void 0:m.call(f,g)});return g}function kc(a){var b=a.event;a=b.schema;var c=b.data;b=Va();a={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",
data:{schema:a,data:c}};b.add("e","ue");b.addJson("ue_px","ue_pr",a);return b}function Zc(a){var b=a.pageUrl,c=a.pageTitle;a=a.referrer;var e=Va();e.add("e","pv");e.add("url",b);e.add("page",c);e.add("refr",a);return e}function ob(a){a={name:a.name,data:a.data};var b=void 0;void 0===b&&(b={});var c={},e;for(e in a)if(b[e]||null!==a[e]&&"undefined"!==typeof a[e])c[e]=a[e];return kc({event:{schema:"iglu:com.conviva/raw_event/jsonschema/1-0-1",data:c}})}function $c(){try{var a=!!window.localStorage}catch(c){a=
!0}if(!a)return!1;try{var b=window.localStorage;b.setItem("modernizr","modernizr");b.removeItem("modernizr");return!0}catch(c){return!1}}function lc(a){return Number.isInteger&&Number.isInteger(a)||"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function mc(a){if(!a||"string"!==typeof a.valueOf()){a=a.text||"";var b=document.getElementsByTagName("title");b&&null!=b[0]&&(a=b[0].text)}return a}function pb(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a}function nc(a){var b=
a.length;"."===a.charAt(--b)&&(a=a.slice(0,b));"*."===a.slice(0,2)&&(a=a.slice(1));return a}function qb(a){var b=window,c=Ma("referrer",b.location.href)||Ma("referer",b.location.href);if(c)return c;if(a)return a;try{if(b.top)return b.top.document.referrer;if(b.parent)return b.parent.document.referrer}catch(e){}return document.referrer}function qa(a,b,c,e){if(a.addEventListener)return a.addEventListener(b,c,e),!0;if(a.attachEvent)return a.attachEvent("on"+b,c);a["on"+b]=c}function Ma(a,b){return(a=
(new RegExp("^[^#]*[?&]"+a+"=([^&#]*)")).exec(b))?decodeURIComponent(a[1].replace(/\+/g," ")):null}function Ya(a,b,c){void 0===c&&(c=63072E3);try{var e=window.localStorage,g=Date.now()+1E3*c;e.setItem("".concat(a,".expires"),g.toString());e.setItem(a,b);return!0}catch(f){return!1}}function oc(a){try{var b=window.localStorage;b.removeItem(a);b.removeItem(a+".expires");return!0}catch(c){return!1}}function ad(a,b){for(var c=window.location.hostname,e="_sp_root_domain_test_"+(new Date).getTime(),g="_test_value_"+
(new Date).getTime(),f=c.split("."),l=f.length-1;0<=l;){var m=f.slice(l,f.length).join(".");ha(e,g,0,"/",m,a,b);if(ha(e)===g){ha(e,"",-1,"/",m,a,b);c=document.cookie.split("; ");e=[];for(g=0;g<c.length;g++)"_sp_root_domain_test_"===c[g].substring(0,21)&&e.push(c[g]);c=e;for(e=0;e<c.length;e++)ha(c[e],"",-1,"/",m,a,b);return m}--l}return c}function ha(a,b,c,e,g,f,l){return 1<arguments.length?document.cookie=a+"="+encodeURIComponent(null!==b&&void 0!==b?b:"")+(c?"; Expires="+(new Date(+new Date+1E3*
c)).toUTCString():"")+(e?"; Path="+e:"")+(g?"; Domain="+g:"")+(f?"; SameSite="+f:"")+(l?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+a+"=")[1]||"").split(";")[0])}function bd(a,b,c,e,g,f,l,m,r,p,A,w,t,h,z,K){function S(q){var B=Object.keys(q).map(function(y){return[y,q[y]]}).reduce(function(y,u){y[u[0]]=u[1].toString();return y},{});return{evt:B,bytes:G(JSON.stringify(B))}}function G(q){for(var B=0,y=0;y<q.length;y++){var u=q.charCodeAt(y);127>=u?B+=1:2047>=u?B+=2:55296<=u&&
57343>=u?(B+=4,y++):B=65535>u?B+3:B+4}return B}function H(q){for(void 0===q&&(q=!1);E.length&&"string"!==typeof E[0]&&"object"!==typeof E[0];)E.shift();if(1>E.length)U=!1;else{if(!V||"string"!==typeof V.valueOf())throw"No collector configured";U=!0;if(xa){var B=function(M){for(var ea=0,Ha=0;ea<M.length&&!(Ha+=M[ea].bytes,Ha>=l);)ea+=1;return ea},y=void 0;if(ya(E)){y=V;var u=F(y,!0,q);var I=B(E)}else y=Na(E[0]),u=F(y,!1,q),I=1;var N=setTimeout(function(){u.abort();U=!1},A),Y=function(M){for(var ea=
0;ea<M;ea++)E.shift();c&&Ya(za,JSON.stringify(E.slice(0,p)))};u.onreadystatechange=function(){if(4===u.readyState&&200<=u.status)if(clearTimeout(N),300>u.status)Y(I),H();else{var M=u.status;M=200<=M&&300>M?!1:z.includes(M)?!0:!K.includes(M);M||(da.error("Status ".concat(u.status,", will not retry.")),Y(I));U=!1}};if(ya(E)){if(B=E.slice(0,I),0<B.length){q=!1;B=B.map(function(M){return M.evt});if(Za){var Oa=new Blob([Z(ia(B))],{type:"application/json"});try{q=navigator.sendBeacon(y,Oa)}catch(M){q=!1}}!0===
q?(Y(I),H()):u.send(Z(ia(B)))}}else u.send()}else if(w||ya(E))U=!1;else{y=new Image(1,1);var ja=!0;y.onload=function(){ja&&(ja=!1,E.shift(),c&&Ya(za,JSON.stringify(E.slice(0,p))),H())};y.onerror=function(){ja&&(U=ja=!1)};y.src=Na(E[0]);setTimeout(function(){ja&&U&&(ja=!1,H())},A)}}}function F(q,B,y){var u=new XMLHttpRequest;B?(u.open("POST",q,!y),u.setRequestHeader("Content-Type","application/json; charset=UTF-8")):u.open("GET",q,!y);u.withCredentials=h;w&&u.setRequestHeader("SP-Anonymous","*");for(var I in t)Object.prototype.hasOwnProperty.call(t,
I)&&u.setRequestHeader(I,t[I]);return u}function Z(q){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:q})}function ia(q){for(var B=(new Date).getTime().toString(),y=0;y<q.length;y++)q[y].stm=B;return q}function Na(q){return r?V+q.replace("?","?stm="+(new Date).getTime()+"&"):V+q}function $a(q){function B(u,I,N){return(N=N.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/"))&&N.length?parseInt(N[0])<=u||parseInt(N[0])===u&&parseInt(N[1])<=
I:!1}function y(u){return u.match("Version/.* Safari/")&&!u.match("Chrom(e|ium)")}return function(u,I){return(I=I.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/"))&&I.length?parseInt(I[0])<=u:!1}(13,q)||B(10,15,q)&&y(q)}var U=!1,V,E=[];e="string"===typeof e?e.toLowerCase():e;var Aa=!0===e||"beacon"===e||"true"===e,Za=!(!(Aa&&window.navigator&&window.navigator.sendBeacon)||$a(window.navigator.userAgent))&&Aa,xa=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),Ba="get"!==e&&xa&&("post"===
e||Aa),ra=Ba?g:"/i",za="snowplowOutQueue_".concat(a,"_").concat(Ba?"post2":"get");Aa&&(t={});f=c&&$c()&&Ba&&f||1;if(c)try{var Pa=window.localStorage.getItem(za);E=Pa?JSON.parse(Pa):[]}catch(q){}Array.isArray(E)||(E=[]);b.outQueues.push(E);xa&&1<f&&b.bufferFlushers.push(function(q){U||H(q)});var ya=function(q){return"object"===typeof q[0]};return{enqueueRequest:function(q,B){V=B+ra;if(Ba){q=S(q);if(q.bytes>=l){da.warn("Event ("+q.bytes+"B) too big, max is "+l);B=q;F(V,!0,!1).send(Z(ia([B.evt])));return}E.push(q)}else{var y=
"?";var u={co:!0,cx:!0},I=!0,N;for(N in q)q.hasOwnProperty(N)&&!u.hasOwnProperty(N)&&(I?I=!1:y+="&",y+=encodeURIComponent(N)+"="+encodeURIComponent(q[N]));for(var Y in u)q.hasOwnProperty(Y)&&u.hasOwnProperty(Y)&&(y+="&"+Y+"="+encodeURIComponent(q[Y]));if(0<m&&(u=Na(y),u=G(u),u>=m)){da.warn("Event ("+u+"B) too big, max is "+m);xa&&(q=S(q),F(B+g,!0,!1).send(Z(ia([q.evt]))));return}E.push(y)}B=!1;c&&(B=Ya(za,JSON.stringify(E.slice(0,p))));U||B&&!(E.length>=f)||H()},executeQueue:function(){U||H()},setUseLocalStorage:function(q){c=
q},setAnonymousTracking:function(q){w=q},setCollectorUrl:function(q){V=q+ra},setBufferSize:function(q){f=q}}}function pc(a,b,c){if("translate.googleusercontent.com"===a)""===c&&(c=b),a=(a=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(b))&&1<(null===a||void 0===a?void 0:a.length)?Ma("u",a[1]):null,b=null!==a&&void 0!==a?a:"",a=pb(b);else if("cc.bingj.com"===a||"webcache.googleusercontent.com"===a)b=document.links[0].href,a=pb(b);return[a,b,c]}function cd(a,b,c,e){var g=Math.round((new Date).getTime()/
1E3);a?(a=a.split("."),a.unshift("0")):a=["1",b,g,e,g,"",c];a[6]&&"undefined"!==a[6]||(a[6]=pa.v4());a[7]&&"undefined"!==a[7]||(a[7]="");a[8]&&"undefined"!==a[8]||(a[8]="");a[9]&&"undefined"!==a[9]||(a[9]="");a[10]&&"undefined"!==a[10]||(a[10]=-1);var f=function(l,m){l=parseInt(l);return isNaN(l)?m:l};b=function(l){return l?f(l,void 0):void 0};return[a[0],a[1],f(a[2],g),f(a[3],e),f(a[4],g),b(a[5]),a[6],a[7],a[8],b(a[9]),f(a[10],-1)]}function Qa(a,b){void 0===b&&(b=1);"0"===a[0]?(a[7]=a[6],a[5]=a[4],
a[3]++):a[3]=b;b=pa.v4();a[6]=b;a[10]=-1;a[8]="";a[9]=void 0;return b}function rb(a){a[4]=Math.round((new Date).getTime()/1E3)}function dd(a,b,c,e,g,f){void 0===f&&(f={});var l=[];a=function(r,p,A,w,t,h){function z(){Ca=pc(window.location.hostname,window.location.href,qb());Ca[1]!==sa&&(Ra=qb(sa));qc=nc(Ca[0]);sa=Ca[1]}function K(d){var k=(new Date).getTime();d=d.currentTarget;if(null===d||void 0===d?0:d.href){k="_sp="+(ab+"."+k);var n=d.href.split("#"),v=n[0].split("?"),C=v.shift();if(v=v.join("?")){for(var J=
!0,P=v.split("&"),R=0;R<P.length;R++)if("_sp="===P[R].substr(0,4)){J=!1;P[R]=k;v=P.join("&");break}J&&(v=k+"&"+v)}else v=k;n[0]=C+"?"+v;k=n.join("#");d.href=k}}function S(d){for(var k=0;k<document.links.length;k++){var n=document.links[k];!n.spDecorationEnabled&&d(n)&&(qa(n,"click",K,!0),qa(n,"mousedown",K,!0),n.spDecorationEnabled=!0)}}function G(d){if(rc){var k=/#.*/;d=d.replace(k,"")}sc&&(k=/[{}]/g,d=d.replace(k,""));return d}function H(d){return(d=/^([a-z]+):/.exec(d))?d[1]:null}function F(d){d=
Ia+d+"."+Da;if("localStorage"==L){try{var k=window.localStorage,n=k.getItem(d+".expires");if(null===n||+n>Date.now())var v=k.getItem(d);else k.removeItem(d),k.removeItem(d+".expires"),v=void 0}catch(C){v=void 0}return v}if("cookie"==L||"cookieAndLocalStorage"==L)return ha(d)}function Z(){z();Da=ed((Sa||qc)+(sb||"/")).slice(0,4)}function ia(){tb=(new Date).getTime()}function Na(){var d=$a(),k=d[0];k<bb?bb=k:k>cb&&(cb=k);d=d[1];d<db?db=d:d>eb&&(eb=d);ia()}function $a(){var d=document.documentElement;
return d?[d.scrollLeft||window.pageXOffset,d.scrollTop||window.pageYOffset]:[0,0]}function U(){var d=$a(),k=d[0];cb=bb=k;eb=db=d=d[1]}function V(){Aa(Ia+"ses."+Da,"*",tc)}function E(d){var k=Ia+"id."+Da;d.shift();d=d.join(".");Aa(k,d,uc)}function Aa(d,k,n){if(!ka||Ea)"localStorage"==L?Ya(d,k,n):("cookie"==L||"cookieAndLocalStorage"==L)&&ha(d,k,n,sb,Sa,fb,gb)}function Za(d){var k=Ia+"id."+Da,n=Ia+"ses."+Da;oc(k);oc(n);ha(k,"",-1,"/",Sa,fb,gb);ha(n,"",-1,"/",Sa,fb,gb);null!==d&&void 0!==d&&d.preserveSession||
(la=pa.v4(),aa=1);null!==d&&void 0!==d&&d.preserveUser||(ab=pa.v4(),Fa=null)}function xa(d){d&&d.stateStorageStrategy&&(h.stateStorageStrategy=d.stateStorageStrategy,L=vc(h));ka=!!h.anonymousTracking;Ea=wc(h);ub=xc(h);ta.setUseLocalStorage("localStorage"==L||"cookieAndLocalStorage"==L);ta.setAnonymousTracking(ub)}function Ba(){try{var d=window.localStorage.getItem("Conviva.sdkConfig"),k=JSON.parse(d||"{}");vb="{}"===k||"undefined"===typeof k?B():k.clId||B();try{hb=Math.floor(2147483647*Math.random())}catch(v){console.warn(v),
hb=-1}b:try{var n=window.localStorage;d={clId:vb,iid:hb};k=null;try{k=JSON.stringify(d)}catch(v){break b}n.setItem("Conviva.sdkConfig",k)}catch(v){}}catch(v){console.warn(v)}if(!ka||Ea)n="none"!=L&&!!F("ses"),d=ra(),d[1]?k=d[1]:(k=ka?"":pa.v4(),d[1]=k),ab=k,la=n?d[6]:Qa(d),aa=d[3],"none"!=L&&(V(),rb(d),E(d))}function ra(){if("none"==L)return["1","",0,0,0,void 0,"","","",void 0,0];var d=F("id")||void 0;return cd(d,ab,la,aa)}function za(d){return 0===d.indexOf("http")?d:("https:"===document.location.protocol?
"https":"http")+"://"+d}function Pa(){yc&&null!=t.pageViewId||(t.pageViewId=pa.v4())}function ya(){null==t.pageViewId&&(t.pageViewId=pa.v4());return t.pageViewId}function q(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:ya()}}]}}}function B(){try{return Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*Math.random()).toString()+"."+Math.floor(2147483647*
Math.random()).toString()}catch(d){console.warn(d)}}function y(d){var k=d.title,n=d.context,v=d.timestamp;d=d.contextCallback;z();zc&&Pa();zc=!0;Ja=document.title;Ta=k;k=mc(Ta||Ja);ba.track(Zc({pageUrl:G(Ka||sa),pageTitle:k,referrer:G(ib||Ra)}),(n||[]).concat(d?d():[]),v);v=new Date;k=!1;if(ca.enabled&&!ca.installed){k=ca.installed=!0;var C={update:function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var P=!1,R=Object.defineProperty({},"passive",{get:function(){P=
!0},set:function(){}}),W=function(){};window.addEventListener("testPassiveEventSupport",W,R);window.removeEventListener("testPassiveEventSupport",W,R);C.hasSupport=P}}};C.update();var J="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(C,"hasSupport")?qa(document,J,ia,{passive:!0}):qa(document,J,ia);U();J=function(P,R){void 0===R&&(R=ia);return function(W){return qa(document,W,R)}};"click mouseup mousedown mousemove keypress keydown keyup".split(" ").forEach(J(document));
["resize","focus","blur"].forEach(J(window));J(window,Na)("scroll")}if(ca.enabled&&(fd||k))for(v in tb=v.getTime(),v=void 0,ca.configurations)if(k=ca.configurations[v])window.clearInterval(k.activityInterval),u(k,n,d)}function u(d,k,n){var v=function(P,R){z();var W=m.core.getConfig();W.enablePeriodicHeartbeat?void 0!=W.periodicHeartbeatInterval&&(W=1E3*W.periodicHeartbeatInterval,W!=d.configHeartBeatTimer&&(window.clearInterval(d.activityInterval),d.activityInterval=window.setInterval(J,W))):window.clearInterval(d.activityInterval);
P({context:R,pageViewId:ya(),minXOffset:bb,minYOffset:db,maxXOffset:cb,maxYOffset:eb});U()},C=new Date;window.setTimeout(function(){v(d.callback,(k||[]).concat(n?n():[]))},100);var J=function(){var P=new Date;if(C.getTime()+d.configHeartBeatTimer>P.getTime()||tb+d.configHeartBeatTimer>P.getTime())C=P,v(d.callback,(k||[]).concat(n?n():[]))};d.activityInterval=window.setInterval(J,d.configHeartBeatTimer)}function I(d){var k=d.minimumVisitLength,n=d.heartbeatDelay;d=d.callback;if(lc(k)&&lc(n))return{configMinimumVisitLength:1E3*
k,configHeartBeatTimer:1E3*n,callback:d};da.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function N(d){var k=d.context,n=d.minXOffset,v=d.minYOffset,C=d.maxXOffset,J=d.maxYOffset;d=document.title;d!==Ja&&(Ja=d,Ta=void 0);d=ba;var P=d.track,R=G(Ka||sa),W=mc(Ta||Ja),gd=G(ib||Ra);n=Math.round(n);C=Math.round(C);v=Math.round(v);J=Math.round(J);var ma=Va();ma.add("e","pp");ma.add("url",R);ma.add("page",W);ma.add("refr",gd);n&&!isNaN(Number(n))&&ma.add("pp_mix",n.toString());
C&&!isNaN(Number(C))&&ma.add("pp_max",C.toString());v&&!isNaN(Number(v))&&ma.add("pp_miy",v.toString());J&&!isNaN(Number(J))&&ma.add("pp_may",J.toString());P.call(d,ma,k)}var Y,Oa,ja,M,ea,Ha,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Q={base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{}};if(window.localStorage){var Ac=localStorage.getItem("ConvivaRemoteConfig")?
localStorage.getItem("ConvivaRemoteConfig"):JSON.stringify(Q);var Rb=localStorage.getItem("ConvivaEndpoint")?localStorage.getItem("ConvivaEndpoint"):"https://appgw.conviva.com"}else Rb="https://appgw.conviva.com",Ac=JSON.stringify(Q);w=h.gatewayUrl?h.gatewayUrl:Rb?Rb:"https://appgw.conviva.com";p||(p="CAT");var T=JSON.parse(Ac);"undefined"!=typeof T.base64&&(Q.base64=T.base64);"undefined"!=typeof T.linkClickTracking&&(Q.linkClickTracking=T.linkClickTracking);"undefined"!=typeof T.buttonClickTracking&&
(Q.buttonClickTracking=T.buttonClickTracking);"undefined"!=typeof T.exceptionAutotracking&&(Q.exceptionAutotracking=T.exceptionAutotracking);"undefined"!=typeof T.enablePeriodicHeartbeat&&(Q.enablePeriodicHeartbeat=T.enablePeriodicHeartbeat);"undefined"!=typeof T.periodicHeartbeatInterval&&(Q.periodicHeartbeatInterval=T.periodicHeartbeatInterval);"undefined"!=typeof T.customEventTrackingConfiguration&&(Q.customEventTrackingConfiguration=T.customEventTrackingConfiguration);if(window.XMLHttpRequest){var ua=
new XMLHttpRequest;ua.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var d=JSON.parse(ua.response),k={base64:!0,linkClickTracking:!0,buttonClickTracking:!0,customEvent:!0,exceptionAutotracking:!0,enablePeriodicHeartbeat:!0,periodicHeartbeatInterval:40,customEventTrackingConfiguration:{}};k.base64=d.configurationBundle[0].trackerConfiguration.base64Encoding;k.linkClickTracking=d.configurationBundle[0].trackerConfiguration.linkClickTracking;k.buttonClickTracking=d.configurationBundle[0].trackerConfiguration.buttonClickTracking;
k.customEvent=d.configurationBundle[0].trackerConfiguration.customEvent;k.exceptionAutotracking=d.configurationBundle[0].trackerConfiguration.exceptionAutotracking;k.enablePeriodicHeartbeat=d.configurationBundle[0].trackerConfiguration.enablePeriodicHeartbeat;k.periodicHeartbeatInterval=d.configurationBundle[0].trackerConfiguration.periodicHeartbeatInterval;k.customEventTrackingConfiguration=d.configurationBundle[0].customEventTrackingConfiguration;m.setCollectorUrl(d.configurationBundle[0].networkConfiguration.endpoint);
window.localStorage&&(localStorage.setItem("ConvivaRemoteConfig",JSON.stringify(k)),localStorage.setItem("ConvivaEndpoint",d.configurationBundle[0].networkConfiguration.endpoint));m.core.setConfig(k)}else if(va._convivaVersion&&va._convivaCustomerKey)try{delete va._convivaVersion,ua.open("GET","https://drt1fhpy4haqm.cloudfront.net/js/"+va._convivaCustomerKey+"/remote_config.json",!0),ua.send()}catch(n){delete va._convivaVersion}else if(va._convivaCustomerKey)try{delete va._convivaCustomerKey,ua.open("GET",
"https://drt1fhpy4haqm.cloudfront.net/js/remote_config.json",!0),ua.send()}catch(n){delete va._convivaCustomerKey}};var jb=function(d){try{ua.open("GET",d,!0),ua.send()}catch(k){}};if(h.trackerConfigUrl)jb(h.trackerConfigUrl),window.setInterval(jb,36E5,h.trackerConfigUrl);else{var va={_platform:"js",_convivaVersion:A,_convivaCustomerKey:h.convivaCustomerKey},Bc="https://drt1fhpy4haqm.cloudfront.net/js/"+h.convivaCustomerKey+"/"+A+"/remote_config.json";jb(Bc);window.setInterval(jb,36E5,Bc)}}h.eventMethod=
null!==(Y=h.eventMethod)&&void 0!==Y?Y:"post";var vc=function(d){var k;return null!==(k=d.stateStorageStrategy)&&void 0!==k?k:"cookieAndLocalStorage"},wc=function(d){var k,n;return"boolean"===typeof d.anonymousTracking?!1:null!==(n=!0===(null===(k=d.anonymousTracking)||void 0===k?void 0:k.withSessionTracking))&&void 0!==n?n:!1},xc=function(d){var k,n;return"boolean"===typeof d.anonymousTracking?!1:null!==(n=!0===(null===(k=d.anonymousTracking)||void 0===k?void 0:k.withServerAnonymisation))&&void 0!==
n?n:!1};l.push(function(){return{beforeTrack:function(d){var k=F("ses"),n=ra();Sb=Tb?!!ha(Tb):!1;if(Cc||Sb)Za();else{"0"===n[0]?(la=k||"none"==L?n[6]:Qa(n),aa=n[3]):(new Date).getTime()-Ub>1E3*tc&&(aa++,la=Qa(n,aa));rb(n);-1===n[10]&&(k=d.build(),n[8]=k.eid,k=k.dtm||k.ttm,n[9]=k?parseInt(k):void 0);n[10]+=1;k=d.add;if("innerWidth"in window){var v=window.innerWidth;var C=window.innerHeight}else C=document.documentElement||document.body,v=C.clientWidth,C=C.clientHeight;k.call(d,"vp",0<=v&&0<=C?v+"x"+
C:null);k=d.add;C=document.documentElement;var J=document.body;v=Math.max(C.clientWidth,C.offsetWidth,C.scrollWidth);C=Math.max(C.clientHeight,C.offsetHeight,C.scrollHeight,J?Math.max(J.offsetHeight,J.scrollHeight):0);v=isNaN(v)||isNaN(C)?"":v+"x"+C;k.call(d,"ds",v);d.add("vid",Ea?aa:ka?null:aa);d.add("sid",Ea?la:ka?null:la);d.add("duid",ka?null:n[1]);d.add("uid",ka?null:Fa);z();d.add("refr",G(ib||Ra));document&&d.add("page",document.title);d.add("url",G(Ka||sa));!hd||Ea||ka||(k=n[9],k={userId:n[1],
sessionId:n[6],eventIndex:n[10],sessionIndex:n[3],previousSessionId:n[7]||null,storageMechanism:"localStorage"==L?"LOCAL_STORAGE":"COOKIE_1",firstEventId:n[8]||null,firstEventTimestamp:k?(new Date(k)).toISOString():null},d.addContextEntity({schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:k}));"none"!=L&&(E(n),V());Ub=(new Date).getTime()}}}}());(null!==(ja=null===(Oa=null===h||void 0===h?void 0:h.contexts)||void 0===Oa?void 0:Oa.webPage)&&void 0!==ja?ja:1)&&l.push(q());
l.push(function(){return{contexts:function(){var d={schema:"iglu:com.conviva/clid_schema/jsonschema/1-0-1",data:{clid:vb,iid:hb.toString(),ck:id}},k={eventIndex:jd++};null!=Vb&&(k.previousEventTimestamp=Vb);Vb=(new Date).toISOString();console.log("convivaPrevHbTimeStamp");return[d,{schema:"iglu:com.conviva/event_info/jsonschema/1-0-1",data:k}]}}}());l.push.apply(l,null!==(M=h.plugins)&&void 0!==M?M:[]);var ba=Yc({base64:Q.base64,corePlugins:l,callback:function(d){Cc||Sb||ta.enqueueRequest(d.build(),
Wb)},linkClickTracking:Q.linkClickTracking,buttonClickTracking:Q.buttonClickTracking,customEvent:!0,exceptionAutotracking:Q.exceptionAutotracking,enablePeriodicHeartbeat:Q.enablePeriodicHeartbeat,periodicHeartbeatInterval:Q.periodicHeartbeatInterval,customEventTrackingConfiguration:Q.customEventTrackingConfiguration}),kd=navigator.userLanguage||navigator.language,ld=document.characterSet||document.charset,Ca=pc(window.location.hostname,window.location.href,qb()),qc=nc(Ca[0]),sa=Ca[1],Ra=Ca[2],ib,
md=null!==(ea=h.platform)&&void 0!==ea?ea:"web",Wb=za(w),nd=null!==(Ha=h.postPath)&&void 0!==Ha?Ha:"/"+h.convivaCustomerKey+"/ctp",od=null!==(wb=h.appId)&&void 0!==wb?wb:"",id=null!==(xb=h.convivaCustomerKey)&&void 0!==xb?xb:"",Ka,Ja=document.title,Ta,fd=null!==(yb=h.resetActivityTrackingOnPageView)&&void 0!==yb?yb:!0,rc,sc,Ia=null!==(zb=h.cookieName)&&void 0!==zb?zb:"_sp_",Sa=null!==(Ab=h.cookieDomain)&&void 0!==Ab?Ab:void 0,sb="/",fb=null!==(Bb=h.cookieSameSite)&&void 0!==Bb?Bb:"None",gb=null!==
(Cb=h.cookieSecure)&&void 0!==Cb?Cb:!0,Dc=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Cc="undefined"!==typeof h.respectDoNotTrack?h.respectDoNotTrack&&("yes"===Dc||"1"===Dc):!1,Tb,uc=null!==(Db=h.cookieLifetime)&&void 0!==Db?Db:63072E3,tc=null!==(Eb=h.sessionCookieTimeout)&&void 0!==Eb?Eb:1800,Ea=wc(h),ub=xc(h),ka=!!h.anonymousTracking,L=vc(h),vb,hb,jd=0,tb,Ub=(new Date).getTime(),bb,cb,db,eb,Da,ab,la,aa=1,Fa,ta=bd(r,t,"localStorage"==L||"cookieAndLocalStorage"==L,h.eventMethod,
nd,null!==(Fb=h.bufferSize)&&void 0!==Fb?Fb:1,null!==(Gb=h.maxPostBytes)&&void 0!==Gb?Gb:4E4,null!==(Hb=h.maxGetBytes)&&void 0!==Hb?Hb:0,null!==(Ib=h.useStm)&&void 0!==Ib?Ib:!0,null!==(Jb=h.maxLocalStorageQueueSize)&&void 0!==Jb?Jb:1E3,null!==(Kb=h.connectionTimeout)&&void 0!==Kb?Kb:5E3,ub,null!==(Lb=h.customHeaders)&&void 0!==Lb?Lb:{},null!==(Mb=h.withCredentials)&&void 0!==Mb?Mb:!0,null!==(Nb=h.retryStatusCodes)&&void 0!==Nb?Nb:[],(null!==(Ob=h.dontRetryStatusCodes)&&void 0!==Ob?Ob:[]).concat([400,
401,403,410,422])),yc=!1,Vb,zc=!1,ca={enabled:!0,installed:!1,configurations:{pagePing:{configMinimumVisitLength:5E3,configHeartBeatTimer:4E4,callback:N}}},hd=null!==(Qb=null===(Pb=h.contexts)||void 0===Pb?void 0:Pb.session)&&void 0!==Qb?Qb:!1,Sb;h.hasOwnProperty("discoverRootDomain")&&h.discoverRootDomain&&(Sa=ad(fb,gb));ba.setTrackerVersion(A);ba.setTrackerNamespace(p);ba.setAppId(od);ba.setPlatform(md);ba.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0");ba.addPayloadPair("cs",ld);ba.addPayloadPair("lang",
kd);ba.addPayloadPair("res",screen.width+"x"+screen.height);ba.addPayloadPair("cd",screen.colorDepth);Z();Ba();h.crossDomainLinker&&S(h.crossDomainLinker);y({});return fa(fa({},{getDomainSessionIndex:function(){return aa},getPageViewId:function(){return ya()},newSession:function(){var d=ra();"0"===d[0]?(la="none"!=L?Qa(d):d[6],aa=d[3],V()):(aa++,la=Qa(d,aa));rb(d);"none"!=L&&(E(d),V());Ub=(new Date).getTime()},getCookieName:function(d){return Ia+d+"."+Da},getUserId:function(){return Fa},getDomainUserId:function(){return ra()[1]},
getDomainUserInfo:function(){return ra()},setReferrerUrl:function(d){ib=d},setCustomUrl:function(d){z();var k=sa,n;H(d)?Ka=d:"/"===d.slice(0,1)?Ka=H(k)+"://"+pb(k)+d:(k=G(k),0<=(n=k.indexOf("?"))&&(k=k.slice(0,n)),(n=k.lastIndexOf("/"))!==k.length-1&&(k=k.slice(0,n+1)),Ka=k+d)},setDocumentTitle:function(d){Ja=document.title;Ta=d},discardHashTag:function(d){rc=d},discardBrace:function(d){sc=d},setCookiePath:function(d){sb=d;Z()},setVisitorCookieTimeout:function(d){uc=d},crossDomainLinker:function(d){S(d)},
enableActivityTracking:function(d){ca.configurations.pagePing||(ca.enabled=!0,ca.configurations.pagePing=I(fa(fa({},d),{callback:N})))},enableActivityTrackingCallback:function(d){ca.configurations.callback||(ca.enabled=!0,ca.configurations.callback=I(d))},updatePageActivity:function(){ia()},setOptOutCookie:function(d){Tb=d},setUserId:function(d){Fa=d},setUserIdFromLocation:function(d){z();Fa=Ma(d,sa)},setUserIdFromReferrer:function(d){z();Fa=Ma(d,Ra)},setUserIdFromCookie:function(d){Fa=ha(d)},setCollectorUrl:function(d){Wb=
za(d);ta.setCollectorUrl(Wb)},setBufferSize:function(d){ta.setBufferSize(d)},flushBuffer:function(d){void 0===d&&(d={});ta.executeQueue();d.newBufferSize&&ta.setBufferSize(d.newBufferSize)},trackPageView:function(d){void 0===d&&(d={});y(d)},preservePageViewId:function(){yc=!0},disableAnonymousTracking:function(d){h.anonymousTracking=!1;xa(d);Ba();ta.executeQueue()},enableAnonymousTracking:function(d){var k;h.anonymousTracking=null!==(k=d&&(null===d||void 0===d?void 0:d.options))&&void 0!==k?k:!0;
xa(d);Ea||Pa()},clearUserData:Za}),{id:r,namespace:p,core:ba,sharedState:t})}(a,b,c,e,g,f);var m=fa(fa({},a),{addPlugin:function(r){var p,A;m.core.addPlugin(r);null===(A=(p=r.plugin).activateBrowserPlugin)||void 0===A?void 0:A.call(p,m)}});l.forEach(function(r){var p;null===(p=r.activateBrowserPlugin)||void 0===p?void 0:p.call(r,m)});return m}function D(a,b){try{var c=null!==a&&void 0!==a?a:Object.keys(Ua);a=Ua;for(var e=[],g=0;g<c.length;g++){var f=c[g];a.hasOwnProperty(f)?e.push(a[f]):da.warn(f+
" not configured")}e.forEach(b)}catch(l){da.error("Function failed",l)}}function Ec(a,b,c,e,g,f){return Ua.hasOwnProperty(a)?null:(Ua[a]=dd(a,b,c,e,g,f),Ua[a])}function pd(){function a(){"hidden"==g.visibilityState&&e.bufferFlushers.forEach(function(l){l(!1)})}function b(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function c(){g.addEventListener?g.addEventListener("DOMContentLoaded",function m(){g.removeEventListener("DOMContentLoaded",
m,!1);b()}):g.attachEvent&&g.attachEvent("onreadystatechange",function r(){"complete"===g.readyState&&(g.detachEvent("onreadystatechange",r),b())});qa(f,"load",b,!1)}var e=new qd,g=document,f=window;g.visibilityState&&qa(g,"visibilitychange",a,!1);qa(f,"beforeunload",function(){e.bufferFlushers.forEach(function(l){l(!1)})},!1);"loading"===document.readyState?c():b();return e}var fa=function(){fa=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var g in b)Object.prototype.hasOwnProperty.call(b,
g)&&(a[g]=b[g])}return a};return fa.apply(this,arguments)},wa={},Fc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Fc){var Gc=new Uint8Array(16);wa=function(){Fc(Gc);return Gc}}else{var Hc=Array(16);wa=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),Hc[a]=b>>>((a&3)<<3)&255;return Hc}}for(var O=[],kb=0;256>
kb;++kb)O[kb]=(kb+256).toString(16).substr(1);var Ic=function(a,b){b=b||0;return[O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],"-",O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]],O[a[b++]]].join("")},rd=wa,Jc,Xb,Yb=0,Zb=0,sd=wa;wa=function(a,b,c){c=b&&c||0;"string"==typeof a&&(b="binary"===a?Array(16):null,a=null);a=a||{};a=a.random||(a.rng||sd)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;++e)b[c+e]=a[e];return b||Ic(a)};
wa.v1=function(a,b,c){c=b&&c||0;var e=b||[];a=a||{};var g=a.node||Jc,f=void 0!==a.clockseq?a.clockseq:Xb;if(null==g||null==f){var l=rd();null==g&&(g=Jc=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]);null==f&&(f=Xb=(l[6]<<8|l[7])&16383)}l=void 0!==a.msecs?a.msecs:(new Date).getTime();var m=void 0!==a.nsecs?a.nsecs:Zb+1,r=l-Yb+(m-Zb)/1E4;0>r&&void 0===a.clockseq&&(f=f+1&16383);(0>r||l>Yb)&&void 0===a.nsecs&&(m=0);if(1E4<=m)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Yb=l;Zb=m;Xb=f;l+=122192928E5;
a=(1E4*(l&268435455)+m)%4294967296;e[c++]=a>>>24&255;e[c++]=a>>>16&255;e[c++]=a>>>8&255;e[c++]=a&255;a=l/4294967296*1E4&268435455;e[c++]=a>>>8&255;e[c++]=a&255;e[c++]=a>>>24&15|16;e[c++]=a>>>16&255;e[c++]=f>>>8|128;e[c++]=f&255;for(f=0;6>f;++f)e[c+f]=g[f];return b?b:Ic(e)};var pa=wa.v4=wa,oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",na;(function(a){a[a.none=0]="none";a[a.error=1]="error";a[a.warn=2]="warn";a[a.debug=3]="debug";a[a.info=4]="info"})(na||(na={}));var da=function(a){void 0===
a&&(a=na.warn);return{setLogLevel:function(b){a=na[b]?b:na.warn},warn:function(b,c){for(var e=[],g=2;g<arguments.length;g++)e[g-2]=arguments[g];a>=na.warn&&"undefined"!==typeof console&&(g="Snowplow: "+b,c?console.warn.apply(console,X([g+"\n",c],e,!1)):console.warn.apply(console,X([g],e,!1)))},error:function(b,c){for(var e=[],g=2;g<arguments.length;g++)e[g-2]=arguments[g];a>=na.error&&"undefined"!==typeof console&&(g="Snowplow: "+b+"\n",c?console.error.apply(console,X([g+"\n",c],e,!1)):console.error.apply(console,
X([g],e,!1)))},debug:function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];a>=na.debug&&"undefined"!==typeof console&&console.debug.apply(console,X(["Snowplow: "+b],c,!1))},info:function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];a>=na.info&&"undefined"!==typeof console&&console.info.apply(console,X(["Snowplow: "+b],c,!1))}}}(),Kc={},Lc={};(function(){var a={rotl:function(b,c){return b<<c|b>>>32-c},rotr:function(b,c){return b<<32-c|b>>>c},endian:function(b){if(b.constructor==
Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var c=0;c<b.length;c++)b[c]=a.endian(b[c]);return b},randomBytes:function(b){for(var c=[];0<b;b--)c.push(Math.floor(256*Math.random()));return c},bytesToWords:function(b){for(var c=[],e=0,g=0;e<b.length;e++,g+=8)c[g>>>5]|=b[e]<<24-g%32;return c},wordsToBytes:function(b){for(var c=[],e=0;e<32*b.length;e+=8)c.push(b[e>>>5]>>>24-e%32&255);return c},bytesToHex:function(b){for(var c=[],e=0;e<b.length;e++)c.push((b[e]>>>4).toString(16)),c.push((b[e]&
15).toString(16));return c.join("")},hexToBytes:function(b){for(var c=[],e=0;e<b.length;e+=2)c.push(parseInt(b.substr(e,2),16));return c},bytesToBase64:function(b){for(var c=[],e=0;e<b.length;e+=3)for(var g=b[e]<<16|b[e+1]<<8|b[e+2],f=0;4>f;f++)8*e+6*f<=8*b.length?c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>6*(3-f)&63)):c.push("=");return c.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/ig,"");for(var c=[],e=0,g=0;e<b.length;g=++e%4)0!=g&&c.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e-
1))&Math.pow(2,-2*g+8)-1)<<2*g|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(e))>>>6-2*g);return c}};Lc=a})();var $b={utf8:{stringToBytes:function(a){return $b.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape($b.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)&255);return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));
return b.join("")}}},Mc=$b;(function(){var a=Lc,b=Mc.utf8,c=Mc.bin,e=function(g,f){var l=a.wordsToBytes,m=g;m.constructor==String?m=b.stringToBytes(m):"undefined"!==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(m)?m=Array.prototype.slice.call(m,0):Array.isArray(m)||(m=m.toString());g=a.bytesToWords(m);var r=8*m.length;m=[];var p=1732584193,A=-271733879,w=-1732584194,t=271733878,h=-1009589776;g[r>>5]|=128<<24-r%32;g[(r+64>>>9<<4)+15]=r;for(r=0;r<g.length;r+=16){for(var z=p,K=A,
S=w,G=t,H=h,F=0;80>F;F++){if(16>F)m[F]=g[r+F];else{var Z=m[F-3]^m[F-8]^m[F-14]^m[F-16];m[F]=Z<<1|Z>>>31}Z=(p<<5|p>>>27)+h+(m[F]>>>0)+(20>F?(A&w|~A&t)+1518500249:40>F?(A^w^t)+1859775393:60>F?(A&w|A&t|w&t)-1894007588:(A^w^t)-899497514);h=t;t=w;w=A<<30|A>>>2;A=p;p=Z}p+=z;A+=K;w+=S;t+=G;h+=H}l=l.call(a,[p,A,w,t,h]);return f&&f.asBytes?l:f&&f.asString?c.bytesToString(l):a.bytesToHex(l)};e._blocksize=16;e._digestsize=20;Kc=e})();var ed=Kc,Ua={},qd=function(){return function(){this.outQueues=[];this.bufferFlushers=
[];this.hasLoaded=!1;this.registeredOnLoadHandlers=[]}}(),lb="undefined"!==typeof window?pd():void 0;x.addGlobalContexts=function(a,b){D(b,function(c){c.core.addGlobalContexts(a)})};x.addPlugin=function(a,b){D(b,function(c){c.addPlugin(a)})};x.clearGlobalContexts=function(a){D(a,function(b){b.core.clearGlobalContexts()})};x.clearUserData=function(a,b){D(b,function(c){c.clearUserData(a)})};x.convivaAppTracker=function(a){void 0===a&&(a={});if(lb)return Ec("CAT","CAT","js-".concat("0.3.2"),"",lb,a)};
x.crossDomainLinker=function(a,b){D(b,function(c){c.crossDomainLinker(a)})};x.disableAnonymousTracking=function(a,b){D(b,function(c){c.disableAnonymousTracking(a)})};x.discardBrace=function(a,b){D(b,function(c){c.discardBrace(a)})};x.discardHashTag=function(a,b){D(b,function(c){c.discardHashTag(a)})};x.enableActivityTracking=function(a,b){D(b,function(c){c.enableActivityTracking(a)})};x.enableActivityTrackingCallback=function(a,b){D(b,function(c){c.enableActivityTrackingCallback(a)})};x.enableAnonymousTracking=
function(a,b){D(b,function(c){c.enableAnonymousTracking(a)})};x.flushBuffer=function(a,b){D(b,function(c){c.flushBuffer(a)})};x.newSession=function(a){D(a,function(b){b.newSession()})};x.newTracker=function(a,b,c){void 0===c&&(c={});if(lb)return Ec(a,a,"js-".concat("0.3.2"),b,lb,c)};x.preservePageViewId=function(a){D(a,function(b){b.preservePageViewId()})};x.removeGlobalContexts=function(a,b){D(b,function(c){c.core.removeGlobalContexts(a)})};x.setBufferSize=function(a,b){D(b,function(c){c.setBufferSize(a)})};
x.setCollectorUrl=function(a,b){D(b,function(c){c.setCollectorUrl(a)})};x.setCookiePath=function(a,b){D(b,function(c){c.setCookiePath(a)})};x.setCustomUrl=function(a,b){D(b,function(c){c.setCustomUrl(a)})};x.setDocumentTitle=function(a,b){D(b,function(c){c.setDocumentTitle(a)})};x.setOptOutCookie=function(a,b){D(b,function(c){c.setOptOutCookie(a)})};x.setReferrerUrl=function(a,b){D(b,function(c){c.setReferrerUrl(a)})};x.setUserId=function(a,b){D(b,function(c){c.setUserId(a)})};x.setUserIdFromCookie=
function(a,b){D(b,function(c){c.setUserIdFromCookie(a)})};x.setUserIdFromLocation=function(a,b){D(b,function(c){c.setUserIdFromLocation(a)})};x.setUserIdFromReferrer=function(a,b){D(b,function(c){c.setUserIdFromReferrer(a)})};x.setVisitorCookieTimeout=function(a,b){D(b,function(c){c.setVisitorCookieTimeout(a)})};x.trackCustomEvent=function(a,b){D(b,function(c){var e=c.core.getConfig();""!=a.name&&void 0!=a.name||console.warn("Conviva App Tracker:: custom event name is mandatory for trackCustomEvent API!!");
try{JSON.parse(a.data)||console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}catch(g){console.warn("Conviva App Tracker:: Unable to parse custom event data as JSON")}void 0!=e.customEventTrackingConfiguration?void 0!=e.customEventTrackingConfiguration.blocklist&&0<e.customEventTrackingConfiguration.blocklist.length?(e=e.customEventTrackingConfiguration.blocklist,-1==e.indexOf("*")&&-1==e.indexOf(""+a.name)&&c.core.track(ob({name:a.name,data:a.data}),a.context,a.timestamp)):
c.core.track(ob({name:a.name,data:a.data}),a.context,a.timestamp):c.core.track(ob({name:a.name,data:a.data}),a.context,a.timestamp)})};x.trackPageView=function(a,b){D(b,function(c){c.trackPageView(a)})};x.trackSelfDescribingEvent=function(a,b){D(b,function(c){c.core.track(kc({event:a.event}),a.context,a.timestamp)})};x.trackStructEvent=function(a,b){D(b,function(c){c=c.core;var e=c.track,g=a.category,f=a.action,l=a.label,m=a.property,r=a.value,p=Va();p.add("e","se");p.add("se_ca",g);p.add("se_ac",
f);p.add("se_la",l);p.add("se_pr",m);p.add("se_va",null==r?void 0:r.toString());e.call(c,p,a.context,a.timestamp)})};x.updatePageActivity=function(a){D(a,function(b){b.updatePageActivity()})};x.version="0.3.2";Object.defineProperty(x,"__esModule",{value:!0})})
//# sourceMappingURL=index.umd.min.js.map
